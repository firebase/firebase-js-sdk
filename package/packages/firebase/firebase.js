/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!(function (t, e) {
  'object' == typeof exports && 'undefined' != typeof module
    ? (module.exports = e())
    : 'function' == typeof define && define.amd
    ? define(e)
    : ((t =
        'undefined' != typeof globalThis
          ? globalThis
          : t || self).firebase = e());
})(this, function () {
  'use strict';
  function r(t) {
    if (
      ('string' != typeof t && (t = String(t)),
      /[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))
    )
      throw new TypeError('Invalid character in header field name');
    return t.toLowerCase();
  }
  function i(t) {
    return 'string' != typeof t && (t = String(t)), t;
  }
  function t(e) {
    var t = {
      next: function () {
        var t = e.shift();
        return { done: void 0 === t, value: t };
      }
    };
    return (
      p &&
        (t[Symbol.iterator] = function () {
          return t;
        }),
      t
    );
  }
  function s(e) {
    (this.map = {}),
      e instanceof s
        ? e.forEach(function (t, e) {
            this.append(e, t);
          }, this)
        : Array.isArray(e)
        ? e.forEach(function (t) {
            this.append(t[0], t[1]);
          }, this)
        : e &&
          Object.getOwnPropertyNames(e).forEach(function (t) {
            this.append(t, e[t]);
          }, this);
  }
  function o(t) {
    if (t.bodyUsed) return Promise.reject(new TypeError('Already read'));
    t.bodyUsed = !0;
  }
  function a(n) {
    return new Promise(function (t, e) {
      (n.onload = function () {
        t(n.result);
      }),
        (n.onerror = function () {
          e(n.error);
        });
    });
  }
  function e(t) {
    var e = new FileReader(),
      n = a(e);
    return e.readAsArrayBuffer(t), n;
  }
  function n(t) {
    if (t.slice) return t.slice(0);
    var e = new Uint8Array(t.byteLength);
    return e.set(new Uint8Array(t)), e.buffer;
  }
  function u() {
    return (
      (this.bodyUsed = !1),
      (this._initBody = function (t) {
        if ((this._bodyInit = t))
          if ('string' == typeof t) this._bodyText = t;
          else if (d && Blob.prototype.isPrototypeOf(t)) this._bodyBlob = t;
          else if (v && FormData.prototype.isPrototypeOf(t))
            this._bodyFormData = t;
          else if (f && URLSearchParams.prototype.isPrototypeOf(t))
            this._bodyText = t.toString();
          else if (y && d && m(t))
            (this._bodyArrayBuffer = n(t.buffer)),
              (this._bodyInit = new Blob([this._bodyArrayBuffer]));
          else {
            if (!y || (!ArrayBuffer.prototype.isPrototypeOf(t) && !b(t)))
              throw new Error('unsupported BodyInit type');
            this._bodyArrayBuffer = n(t);
          }
        else this._bodyText = '';
        this.headers.get('content-type') ||
          ('string' == typeof t
            ? this.headers.set('content-type', 'text/plain;charset=UTF-8')
            : this._bodyBlob && this._bodyBlob.type
            ? this.headers.set('content-type', this._bodyBlob.type)
            : f &&
              URLSearchParams.prototype.isPrototypeOf(t) &&
              this.headers.set(
                'content-type',
                'application/x-www-form-urlencoded;charset=UTF-8'
              ));
      }),
      d &&
        ((this.blob = function () {
          var t = o(this);
          if (t) return t;
          if (this._bodyBlob) return Promise.resolve(this._bodyBlob);
          if (this._bodyArrayBuffer)
            return Promise.resolve(new Blob([this._bodyArrayBuffer]));
          if (this._bodyFormData)
            throw new Error('could not read FormData body as blob');
          return Promise.resolve(new Blob([this._bodyText]));
        }),
        (this.arrayBuffer = function () {
          return this._bodyArrayBuffer
            ? o(this) || Promise.resolve(this._bodyArrayBuffer)
            : this.blob().then(e);
        })),
      (this.text = function () {
        var t,
          e,
          n = o(this);
        if (n) return n;
        if (this._bodyBlob)
          return (
            (t = this._bodyBlob),
            (e = new FileReader()),
            (n = a(e)),
            e.readAsText(t),
            n
          );
        if (this._bodyArrayBuffer)
          return Promise.resolve(
            (function (t) {
              for (
                var e = new Uint8Array(t), n = new Array(e.length), r = 0;
                r < e.length;
                r++
              )
                n[r] = String.fromCharCode(e[r]);
              return n.join('');
            })(this._bodyArrayBuffer)
          );
        if (this._bodyFormData)
          throw new Error('could not read FormData body as text');
        return Promise.resolve(this._bodyText);
      }),
      v &&
        (this.formData = function () {
          return this.text().then(h);
        }),
      (this.json = function () {
        return this.text().then(JSON.parse);
      }),
      this
    );
  }
  function c(t, e) {
    var n,
      r = (e = e || {}).body;
    if (t instanceof c) {
      if (t.bodyUsed) throw new TypeError('Already read');
      (this.url = t.url),
        (this.credentials = t.credentials),
        e.headers || (this.headers = new s(t.headers)),
        (this.method = t.method),
        (this.mode = t.mode),
        r || null == t._bodyInit || ((r = t._bodyInit), (t.bodyUsed = !0));
    } else this.url = String(t);
    if (
      ((this.credentials = e.credentials || this.credentials || 'omit'),
      (!e.headers && this.headers) || (this.headers = new s(e.headers)),
      (this.method =
        ((n = e.method || this.method || 'GET'),
        (t = n.toUpperCase()),
        -1 < _.indexOf(t) ? t : n)),
      (this.mode = e.mode || this.mode || null),
      (this.referrer = null),
      ('GET' === this.method || 'HEAD' === this.method) && r)
    )
      throw new TypeError('Body not allowed for GET or HEAD requests');
    this._initBody(r);
  }
  function h(t) {
    var n = new FormData();
    return (
      t
        .trim()
        .split('&')
        .forEach(function (t) {
          var e;
          t &&
            ((t = (e = t.split('=')).shift().replace(/\+/g, ' ')),
            (e = e.join('=').replace(/\+/g, ' ')),
            n.append(decodeURIComponent(t), decodeURIComponent(e)));
        }),
      n
    );
  }
  function l(t, e) {
    (e = e || {}),
      (this.type = 'default'),
      (this.status = void 0 === e.status ? 200 : e.status),
      (this.ok = 200 <= this.status && this.status < 300),
      (this.statusText = 'statusText' in e ? e.statusText : 'OK'),
      (this.headers = new s(e.headers)),
      (this.url = e.url || ''),
      this._initBody(t);
  }
  var f, p, d, v, y, g, m, b, _, w;
  (qt = 'undefined' != typeof self ? self : void 0).fetch ||
    ((f = 'URLSearchParams' in qt),
    (p = 'Symbol' in qt && 'iterator' in Symbol),
    (d =
      'FileReader' in qt &&
      'Blob' in qt &&
      (function () {
        try {
          return new Blob(), !0;
        } catch (t) {
          return !1;
        }
      })()),
    (v = 'FormData' in qt),
    (y = 'ArrayBuffer' in qt) &&
      ((g = [
        '[object Int8Array]',
        '[object Uint8Array]',
        '[object Uint8ClampedArray]',
        '[object Int16Array]',
        '[object Uint16Array]',
        '[object Int32Array]',
        '[object Uint32Array]',
        '[object Float32Array]',
        '[object Float64Array]'
      ]),
      (m = function (t) {
        return t && DataView.prototype.isPrototypeOf(t);
      }),
      (b =
        ArrayBuffer.isView ||
        function (t) {
          return t && -1 < g.indexOf(Object.prototype.toString.call(t));
        })),
    (s.prototype.append = function (t, e) {
      (t = r(t)), (e = i(e));
      var n = this.map[t];
      this.map[t] = n ? n + ',' + e : e;
    }),
    (s.prototype.delete = function (t) {
      delete this.map[r(t)];
    }),
    (s.prototype.get = function (t) {
      return (t = r(t)), this.has(t) ? this.map[t] : null;
    }),
    (s.prototype.has = function (t) {
      return this.map.hasOwnProperty(r(t));
    }),
    (s.prototype.set = function (t, e) {
      this.map[r(t)] = i(e);
    }),
    (s.prototype.forEach = function (t, e) {
      for (var n in this.map)
        this.map.hasOwnProperty(n) && t.call(e, this.map[n], n, this);
    }),
    (s.prototype.keys = function () {
      var n = [];
      return (
        this.forEach(function (t, e) {
          n.push(e);
        }),
        t(n)
      );
    }),
    (s.prototype.values = function () {
      var e = [];
      return (
        this.forEach(function (t) {
          e.push(t);
        }),
        t(e)
      );
    }),
    (s.prototype.entries = function () {
      var n = [];
      return (
        this.forEach(function (t, e) {
          n.push([e, t]);
        }),
        t(n)
      );
    }),
    p && (s.prototype[Symbol.iterator] = s.prototype.entries),
    (_ = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']),
    (c.prototype.clone = function () {
      return new c(this, { body: this._bodyInit });
    }),
    u.call(c.prototype),
    u.call(l.prototype),
    (l.prototype.clone = function () {
      return new l(this._bodyInit, {
        status: this.status,
        statusText: this.statusText,
        headers: new s(this.headers),
        url: this.url
      });
    }),
    (l.error = function () {
      var t = new l(null, { status: 0, statusText: '' });
      return (t.type = 'error'), t;
    }),
    (w = [301, 302, 303, 307, 308]),
    (l.redirect = function (t, e) {
      if (-1 === w.indexOf(e)) throw new RangeError('Invalid status code');
      return new l(null, { status: e, headers: { location: t } });
    }),
    (qt.Headers = s),
    (qt.Request = c),
    (qt.Response = l),
    (qt.fetch = function (n, o) {
      return new Promise(function (r, t) {
        var e = new c(n, o),
          i = new XMLHttpRequest();
        (i.onload = function () {
          var n,
            t = {
              status: i.status,
              statusText: i.statusText,
              headers:
                ((e = i.getAllResponseHeaders() || ''),
                (n = new s()),
                e
                  .replace(/\r?\n[\t ]+/g, ' ')
                  .split(/\r?\n/)
                  .forEach(function (t) {
                    var e = t.split(':'),
                      t = e.shift().trim();
                    t && ((e = e.join(':').trim()), n.append(t, e));
                  }),
                n)
            };
          t.url =
            'responseURL' in i ? i.responseURL : t.headers.get('X-Request-URL');
          var e = 'response' in i ? i.response : i.responseText;
          r(new l(e, t));
        }),
          (i.onerror = function () {
            t(new TypeError('Network request failed'));
          }),
          (i.ontimeout = function () {
            t(new TypeError('Network request failed'));
          }),
          i.open(e.method, e.url, !0),
          'include' === e.credentials
            ? (i.withCredentials = !0)
            : 'omit' === e.credentials && (i.withCredentials = !1),
          'responseType' in i && d && (i.responseType = 'blob'),
          e.headers.forEach(function (t, e) {
            i.setRequestHeader(e, t);
          }),
          i.send(void 0 === e._bodyInit ? null : e._bodyInit);
      });
    }),
    (qt.fetch.polyfill = !0));
  var E =
    'undefined' != typeof globalThis
      ? globalThis
      : 'undefined' != typeof window
      ? window
      : 'undefined' != typeof global
      ? global
      : 'undefined' != typeof self
      ? self
      : {};
  function I(t, e, n) {
    return (
      t(
        (n = {
          path: e,
          exports: {},
          require: function (t, e) {
            return (function () {
              throw new Error(
                'Dynamic requires are not currently supported by @rollup/plugin-commonjs'
              );
            })(null == e && n.path);
          }
        }),
        n.exports
      ),
      n.exports
    );
  }
  function T(t) {
    try {
      return !!t();
    } catch (t) {
      return !0;
    }
  }
  function S(t, e) {
    return {
      enumerable: !(1 & t),
      configurable: !(2 & t),
      writable: !(4 & t),
      value: e
    };
  }
  function C(t) {
    return q.call(t).slice(8, -1);
  }
  function N(t) {
    if (null == t) throw TypeError("Can't call method on " + t);
    return t;
  }
  function A(t) {
    return W(N(t));
  }
  function k(t) {
    return 'object' == typeof t ? null !== t : 'function' == typeof t;
  }
  function R(t, e) {
    if (!k(t)) return t;
    var n, r;
    if (e && 'function' == typeof (n = t.toString) && !k((r = n.call(t))))
      return r;
    if ('function' == typeof (n = t.valueOf) && !k((r = n.call(t)))) return r;
    if (!e && 'function' == typeof (n = t.toString) && !k((r = n.call(t))))
      return r;
    throw TypeError("Can't convert object to primitive value");
  }
  function O(t, e) {
    return K.call(t, e);
  }
  function P(t) {
    return z ? H.createElement(t) : {};
  }
  function D(t) {
    if (!k(t)) throw TypeError(String(t) + ' is not an object');
    return t;
  }
  function x(e, n) {
    try {
      $(M, e, n);
    } catch (t) {
      M[e] = n;
    }
    return n;
  }
  var L = function (t) {
      return t && t.Math == Math && t;
    },
    M =
      L('object' == typeof globalThis && globalThis) ||
      L('object' == typeof window && window) ||
      L('object' == typeof self && self) ||
      L('object' == typeof E && E) ||
      (function () {
        return this;
      })() ||
      Function('return this')(),
    F = !T(function () {
      return (
        7 !=
        Object.defineProperty({}, 1, {
          get: function () {
            return 7;
          }
        })[1]
      );
    }),
    U = {}.propertyIsEnumerable,
    j = Object.getOwnPropertyDescriptor,
    V = {
      f:
        j && !U.call({ 1: 2 }, 1)
          ? function (t) {
              t = j(this, t);
              return !!t && t.enumerable;
            }
          : U
    },
    q = {}.toString,
    B = ''.split,
    W = T(function () {
      return !Object('z').propertyIsEnumerable(0);
    })
      ? function (t) {
          return 'String' == C(t) ? B.call(t, '') : Object(t);
        }
      : Object,
    K = {}.hasOwnProperty,
    H = M.document,
    z = k(H) && k(H.createElement),
    G =
      !F &&
      !T(function () {
        return (
          7 !=
          Object.defineProperty(P('div'), 'a', {
            get: function () {
              return 7;
            }
          }).a
        );
      }),
    Q = Object.getOwnPropertyDescriptor,
    Y = {
      f: F
        ? Q
        : function (t, e) {
            if (((t = A(t)), (e = R(e, !0)), G))
              try {
                return Q(t, e);
              } catch (t) {}
            if (O(t, e)) return S(!V.f.call(t, e), t[e]);
          }
    },
    X = Object.defineProperty,
    J = {
      f: F
        ? X
        : function (t, e, n) {
            if ((D(t), (e = R(e, !0)), D(n), G))
              try {
                return X(t, e, n);
              } catch (t) {}
            if ('get' in n || 'set' in n)
              throw TypeError('Accessors not supported');
            return 'value' in n && (t[e] = n.value), t;
          }
    },
    $ = F
      ? function (t, e, n) {
          return J.f(t, e, S(1, n));
        }
      : function (t, e, n) {
          return (t[e] = n), t;
        },
    Z = '__core-js_shared__',
    tt = M[Z] || x(Z, {}),
    et = Function.toString;
  'function' != typeof tt.inspectSource &&
    (tt.inspectSource = function (t) {
      return et.call(t);
    });
  function nt(t) {
    return (
      'Symbol(' +
      String(void 0 === t ? '' : t) +
      ')_' +
      (++yt + gt).toString(36)
    );
  }
  var rt,
    it,
    ot,
    st,
    at,
    ut,
    ct,
    ht,
    lt = tt.inspectSource,
    ft = M.WeakMap,
    pt = 'function' == typeof ft && /native code/.test(lt(ft)),
    dt = !1,
    vt = I(function (t) {
      (t.exports = function (t, e) {
        return tt[t] || (tt[t] = void 0 !== e ? e : {});
      })('versions', []).push({
        version: '3.7.0',
        mode: 'global',
        copyright: 'Â© 2020 Denis Pushkarev (zloirock.ru)'
      });
    }),
    yt = 0,
    gt = Math.random(),
    mt = vt('keys'),
    bt = function (t) {
      return mt[t] || (mt[t] = nt(t));
    },
    _t = {},
    wt = M.WeakMap;
  ct = pt
    ? ((rt = tt.state || (tt.state = new wt())),
      (it = rt.get),
      (ot = rt.has),
      (st = rt.set),
      (at = function (t, e) {
        return (e.facade = t), st.call(rt, t, e), e;
      }),
      (ut = function (t) {
        return it.call(rt, t) || {};
      }),
      function (t) {
        return ot.call(rt, t);
      })
    : ((ht = bt('state')),
      (_t[ht] = !0),
      (at = function (t, e) {
        return (e.facade = t), $(t, ht, e), e;
      }),
      (ut = function (t) {
        return O(t, ht) ? t[ht] : {};
      }),
      function (t) {
        return O(t, ht);
      });
  function Et(t) {
    return 'function' == typeof t ? t : void 0;
  }
  function It(t, e) {
    return arguments.length < 2
      ? Et(Lt[t]) || Et(M[t])
      : (Lt[t] && Lt[t][e]) || (M[t] && M[t][e]);
  }
  function Tt(t) {
    return isNaN((t = +t)) ? 0 : (0 < t ? Ft : Mt)(t);
  }
  function St(t) {
    return 0 < t ? Ut(Tt(t), 9007199254740991) : 0;
  }
  function Ct(t, e) {
    var n,
      r = A(t),
      i = 0,
      o = [];
    for (n in r) !O(_t, n) && O(r, n) && o.push(n);
    for (; e.length > i; ) O(r, (n = e[i++])) && (~Bt(o, n) || o.push(n));
    return o;
  }
  function Nt(t, e) {
    for (var n = Gt(e), r = J.f, i = Y.f, o = 0; o < n.length; o++) {
      var s = n[o];
      O(t, s) || r(t, s, i(e, s));
    }
  }
  function At(t, e) {
    var n,
      r,
      i,
      o = t.target,
      s = t.global,
      a = t.stat,
      u = s ? M : a ? M[o] || x(o, {}) : (M[o] || {}).prototype;
    if (u)
      for (n in e) {
        if (
          ((r = e[n]),
          (i = t.noTargetGet ? (i = te(u, n)) && i.value : u[n]),
          !Zt(s ? n : o + (a ? '.' : '#') + n, t.forced) && void 0 !== i)
        ) {
          if (typeof r == typeof i) continue;
          Nt(r, i);
        }
        (t.sham || (i && i.sham)) && $(r, 'sham', !0), xt(u, n, r, t);
      }
  }
  function kt(t) {
    return Object(N(t));
  }
  function Rt() {}
  function Ot(t) {
    return '<script>' + t + '</' + ce + '>';
  }
  var Pt,
    Dt = {
      set: at,
      get: ut,
      has: ct,
      enforce: function (t) {
        return ct(t) ? ut(t) : at(t, {});
      },
      getterFor: function (n) {
        return function (t) {
          var e;
          if (!k(t) || (e = ut(t)).type !== n)
            throw TypeError('Incompatible receiver, ' + n + ' required');
          return e;
        };
      }
    },
    xt = I(function (t) {
      var e = Dt.get,
        a = Dt.enforce,
        u = String(String).split('String');
      (t.exports = function (t, e, n, r) {
        var i = !!r && !!r.unsafe,
          o = !!r && !!r.enumerable,
          s = !!r && !!r.noTargetGet;
        'function' == typeof n &&
          ('string' != typeof e || O(n, 'name') || $(n, 'name', e),
          (r = a(n)).source ||
            (r.source = u.join('string' == typeof e ? e : ''))),
          t !== M
            ? (i ? !s && t[e] && (o = !0) : delete t[e],
              o ? (t[e] = n) : $(t, e, n))
            : o
            ? (t[e] = n)
            : x(e, n);
      })(Function.prototype, 'toString', function () {
        return ('function' == typeof this && e(this).source) || lt(this);
      });
    }),
    Lt = M,
    Mt = Math.ceil,
    Ft = Math.floor,
    Ut = Math.min,
    jt = Math.max,
    Vt = Math.min,
    qt = function (a) {
      return function (t, e, n) {
        var r,
          i = A(t),
          o = St(i.length),
          s = (function (t, e) {
            t = Tt(t);
            return t < 0 ? jt(t + e, 0) : Vt(t, e);
          })(n, o);
        if (a && e != e) {
          for (; s < o; ) if ((r = i[s++]) != r) return !0;
        } else
          for (; s < o; s++)
            if ((a || s in i) && i[s] === e) return a || s || 0;
        return !a && -1;
      };
    },
    Bt = { includes: qt(!0), indexOf: qt(!1) }.indexOf,
    Wt = [
      'constructor',
      'hasOwnProperty',
      'isPrototypeOf',
      'propertyIsEnumerable',
      'toLocaleString',
      'toString',
      'valueOf'
    ],
    Kt = Wt.concat('length', 'prototype'),
    Ht = {
      f:
        Object.getOwnPropertyNames ||
        function (t) {
          return Ct(t, Kt);
        }
    },
    zt = { f: Object.getOwnPropertySymbols },
    Gt =
      It('Reflect', 'ownKeys') ||
      function (t) {
        var e = Ht.f(D(t)),
          n = zt.f;
        return n ? e.concat(n(t)) : e;
      },
    Qt = /#|\.prototype\./,
    L = function (t, e) {
      t = Xt[Yt(t)];
      return t == $t || (t != Jt && ('function' == typeof e ? T(e) : !!e));
    },
    Yt = (L.normalize = function (t) {
      return String(t).replace(Qt, '.').toLowerCase();
    }),
    Xt = (L.data = {}),
    Jt = (L.NATIVE = 'N'),
    $t = (L.POLYFILL = 'P'),
    Zt = L,
    te = Y.f,
    E = !T(function () {
      function t() {}
      return (
        (t.prototype.constructor = null),
        Object.getPrototypeOf(new t()) !== t.prototype
      );
    }),
    ee = bt('IE_PROTO'),
    ne = Object.prototype,
    re = E
      ? Object.getPrototypeOf
      : function (t) {
          return (
            (t = kt(t)),
            O(t, ee)
              ? t[ee]
              : 'function' == typeof t.constructor && t instanceof t.constructor
              ? t.constructor.prototype
              : t instanceof Object
              ? ne
              : null
          );
        },
    ie =
      Object.setPrototypeOf ||
      ('__proto__' in {}
        ? (function () {
            var n,
              r = !1,
              t = {};
            try {
              (n = Object.getOwnPropertyDescriptor(
                Object.prototype,
                '__proto__'
              ).set).call(t, []),
                (r = t instanceof Array);
            } catch (t) {}
            return function (t, e) {
              return (
                D(t),
                (function (t) {
                  if (!k(t) && null !== t)
                    throw TypeError(
                      "Can't set " + String(t) + ' as a prototype'
                    );
                })(e),
                r ? n.call(t, e) : (t.__proto__ = e),
                t
              );
            };
          })()
        : void 0),
    oe =
      Object.keys ||
      function (t) {
        return Ct(t, Wt);
      },
    se = F
      ? Object.defineProperties
      : function (t, e) {
          D(t);
          for (var n, r = oe(e), i = r.length, o = 0; o < i; )
            J.f(t, (n = r[o++]), e[n]);
          return t;
        },
    ae = It('document', 'documentElement'),
    ue = 'prototype',
    ce = 'script',
    he = bt('IE_PROTO'),
    le = function () {
      try {
        Pt = document.domain && new ActiveXObject('htmlfile');
      } catch (t) {}
      var t;
      le = Pt
        ? (function (t) {
            t.write(Ot('')), t.close();
            var e = t.parentWindow.Object;
            return (t = null), e;
          })(Pt)
        : (((t = P('iframe')).style.display = 'none'),
          ae.appendChild(t),
          (t.src = String('javascript:')),
          (t = t.contentWindow.document).open(),
          t.write(Ot('document.F=Object')),
          t.close(),
          t.F);
      for (var e = Wt.length; e--; ) delete le[ue][Wt[e]];
      return le();
    };
  _t[he] = !0;
  function fe(t) {
    return (
      O(me, t) ||
        (ge && O(be, t) ? (me[t] = be[t]) : (me[t] = _e('Symbol.' + t))),
      me[t]
    );
  }
  function pe(t) {
    return void 0 !== t && (we.Array === t || Ie[Ee] === t);
  }
  function de(t) {
    if ('function' != typeof t)
      throw TypeError(String(t) + ' is not a function');
    return t;
  }
  function ve(r, i, t) {
    if ((de(r), void 0 === i)) return r;
    switch (t) {
      case 0:
        return function () {
          return r.call(i);
        };
      case 1:
        return function (t) {
          return r.call(i, t);
        };
      case 2:
        return function (t, e) {
          return r.call(i, t, e);
        };
      case 3:
        return function (t, e, n) {
          return r.call(i, t, e, n);
        };
    }
    return function () {
      return r.apply(i, arguments);
    };
  }
  var ye =
      Object.create ||
      function (t, e) {
        var n;
        return (
          null !== t
            ? ((Rt[ue] = D(t)), (n = new Rt()), (Rt[ue] = null), (n[he] = t))
            : (n = le()),
          void 0 === e ? n : se(n, e)
        );
      },
    ge =
      !!Object.getOwnPropertySymbols &&
      !T(function () {
        return !String(Symbol());
      }),
    U = ge && !Symbol.sham && 'symbol' == typeof Symbol.iterator,
    me = vt('wks'),
    be = M.Symbol,
    _e = U ? be : (be && be.withoutSetter) || nt,
    we = {},
    Ee = fe('iterator'),
    Ie = Array.prototype,
    Z = {};
  Z[fe('toStringTag')] = 'z';
  function Te(t) {
    if (null != t) return t[Oe] || t['@@iterator'] || we[Re(t)];
  }
  function Se(t) {
    var e = t.return;
    return void 0 !== e && D(e.call(t)).value;
  }
  function Ce(t, e) {
    (this.stopped = t), (this.result = e);
  }
  function Ne(t, e, n) {
    function r(t) {
      return o && Se(o), new Ce(!0, t);
    }
    function i(t) {
      return f
        ? (D(t), d ? v(t[0], t[1], r) : v(t[0], t[1]))
        : d
        ? v(t, r)
        : v(t);
    }
    var o,
      s,
      a,
      u,
      c,
      h,
      l = n && n.that,
      f = !(!n || !n.AS_ENTRIES),
      p = !(!n || !n.IS_ITERATOR),
      d = !(!n || !n.INTERRUPTED),
      v = ve(e, l, 1 + f + d);
    if (p) o = t;
    else {
      if ('function' != typeof (p = Te(t)))
        throw TypeError('Target is not iterable');
      if (pe(p)) {
        for (s = 0, a = St(t.length); s < a; s++)
          if ((u = i(t[s])) && u instanceof Ce) return u;
        return new Ce(!1);
      }
      o = p.call(t);
    }
    for (c = o.next; !(h = c.call(o)).done; ) {
      try {
        u = i(h.value);
      } catch (t) {
        throw (Se(o), t);
      }
      if ('object' == typeof u && u && u instanceof Ce) return u;
    }
    return new Ce(!1);
  }
  var ft = '[object z]' === String(Z),
    Ae = fe('toStringTag'),
    ke =
      'Arguments' ==
      C(
        (function () {
          return arguments;
        })()
      ),
    Re = ft
      ? C
      : function (t) {
          var e;
          return void 0 === t
            ? 'Undefined'
            : null === t
            ? 'Null'
            : 'string' ==
              typeof (t = (function (t, e) {
                try {
                  return t[e];
                } catch (t) {}
              })((e = Object(t)), Ae))
            ? t
            : ke
            ? C(e)
            : 'Object' == (t = C(e)) && 'function' == typeof e.callee
            ? 'Arguments'
            : t;
        },
    Oe = fe('iterator'),
    Pe = function (t, e) {
      var n = this;
      if (!(n instanceof Pe)) return new Pe(t, e);
      ie && (n = ie(new Error(void 0), re(n))),
        void 0 !== e && $(n, 'message', String(e));
      e = [];
      return Ne(t, e.push, { that: e }), $(n, 'errors', e), n;
    };
  (Pe.prototype = ye(Error.prototype, {
    constructor: S(5, Pe),
    message: S(5, ''),
    name: S(5, 'AggregateError')
  })),
    At({ global: !0 }, { AggregateError: Pe });
  pt = ft
    ? {}.toString
    : function () {
        return '[object ' + Re(this) + ']';
      };
  ft || xt(Object.prototype, 'toString', pt, { unsafe: !0 });
  function De(t, e, n) {
    for (var r in e) xt(t, r, e[r], n);
    return t;
  }
  function xe(t, e, n) {
    t &&
      !O((t = n ? t : t.prototype), je) &&
      Ue(t, je, { configurable: !0, value: e });
  }
  function Le(t) {
    var e = It(t),
      t = J.f;
    F &&
      e &&
      !e[Ve] &&
      t(e, Ve, {
        configurable: !0,
        get: function () {
          return this;
        }
      });
  }
  function Me(t, e, n) {
    if (!(t instanceof e))
      throw TypeError('Incorrect ' + (n ? n + ' ' : '') + 'invocation');
    return t;
  }
  var Fe = M.Promise,
    Ue = J.f,
    je = fe('toStringTag'),
    Ve = fe('species'),
    qe = fe('iterator'),
    Be = !1;
  try {
    var We = 0,
      Ke = {
        next: function () {
          return { done: !!We++ };
        },
        return: function () {
          Be = !0;
        }
      };
    (Ke[qe] = function () {
      return this;
    }),
      Array.from(Ke, function () {
        throw 2;
      });
  } catch (ra) {}
  function He(t, e) {
    if (!e && !Be) return !1;
    var n = !1;
    try {
      var r = {};
      (r[qe] = function () {
        return {
          next: function () {
            return { done: (n = !0) };
          }
        };
      }),
        t(r);
    } catch (t) {}
    return n;
  }
  function ze(t, e) {
    var n;
    return void 0 === (t = D(t).constructor) || null == (n = D(t)[Xe])
      ? e
      : de(n);
  }
  function Ge(t) {
    var e;
    nn.hasOwnProperty(t) && ((e = nn[t]), delete nn[t], e());
  }
  function Qe(t) {
    return function () {
      Ge(t);
    };
  }
  var Ye,
    Xe = fe('species'),
    wt = It('navigator', 'userAgent') || '',
    qt = /(iphone|ipod|ipad).*applewebkit/i.test(wt),
    Je = 'process' == C(M.process),
    $e = M.location,
    L = M.setImmediate,
    E = M.clearImmediate,
    Ze = M.process,
    Z = M.MessageChannel,
    tn = M.Dispatch,
    en = 0,
    nn = {},
    rn = 'onreadystatechange',
    ft = function (t) {
      Ge(t.data);
    },
    pt = function (t) {
      M.postMessage(t + '', $e.protocol + '//' + $e.host);
    };
  (L && E) ||
    ((L = function (t) {
      for (var e = [], n = 1; n < arguments.length; ) e.push(arguments[n++]);
      return (
        (nn[++en] = function () {
          ('function' == typeof t ? t : Function(t)).apply(void 0, e);
        }),
        Ye(en),
        en
      );
    }),
    (E = function (t) {
      delete nn[t];
    }),
    Je
      ? (Ye = function (t) {
          Ze.nextTick(Qe(t));
        })
      : tn && tn.now
      ? (Ye = function (t) {
          tn.now(Qe(t));
        })
      : Z && !qt
      ? ((pn = (Z = new Z()).port2),
        (Z.port1.onmessage = ft),
        (Ye = ve(pn.postMessage, pn, 1)))
      : M.addEventListener &&
        'function' == typeof postMessage &&
        !M.importScripts &&
        $e &&
        'file:' !== $e.protocol &&
        !T(pt)
      ? ((Ye = pt), M.addEventListener('message', ft, !1))
      : (Ye =
          rn in P('script')
            ? function (t) {
                ae.appendChild(P('script'))[rn] = function () {
                  ae.removeChild(this), Ge(t);
                };
              }
            : function (t) {
                setTimeout(Qe(t), 0);
              }));
  var on,
    sn,
    an,
    un,
    cn,
    hn,
    ln,
    fn,
    pn = { set: L, clear: E },
    pt = Y.f,
    dn = pn.set,
    ft = M.MutationObserver || M.WebKitMutationObserver,
    L = M.document,
    vn = M.process,
    E = M.Promise,
    pt = pt(M, 'queueMicrotask'),
    pt = pt && pt.value;
  pt ||
    ((on = function () {
      var t, e;
      for (Je && (t = vn.domain) && t.exit(); sn; ) {
        (e = sn.fn), (sn = sn.next);
        try {
          e();
        } catch (t) {
          throw (sn ? un() : (an = void 0), t);
        }
      }
      (an = void 0), t && t.enter();
    }),
    (un =
      !qt && !Je && ft && L
        ? ((cn = !0),
          (hn = L.createTextNode('')),
          new ft(on).observe(hn, { characterData: !0 }),
          function () {
            hn.data = cn = !cn;
          })
        : E && E.resolve
        ? ((ln = E.resolve(void 0)),
          (fn = ln.then),
          function () {
            fn.call(ln, on);
          })
        : Je
        ? function () {
            vn.nextTick(on);
          }
        : function () {
            dn.call(M, on);
          }));
  function yn(t) {
    var n, r;
    (this.promise = new t(function (t, e) {
      if (void 0 !== n || void 0 !== r)
        throw TypeError('Bad Promise constructor');
      (n = t), (r = e);
    })),
      (this.resolve = de(n)),
      (this.reject = de(r));
  }
  function gn(t, e) {
    return (
      D(t),
      k(e) && e.constructor === t
        ? e
        : ((0, (t = _n.f(t)).resolve)(e), t.promise)
    );
  }
  function mn(t) {
    try {
      return { error: !1, value: t() };
    } catch (t) {
      return { error: !0, value: t };
    }
  }
  var bn =
      pt ||
      function (t) {
        t = { fn: t, next: void 0 };
        an && (an.next = t), sn || ((sn = t), un()), (an = t);
      },
    _n = {
      f: function (t) {
        return new yn(t);
      }
    },
    pt = M.process,
    pt = pt && pt.versions,
    pt = pt && pt.v8;
  pt
    ? (Zn = (Gn = pt.split('.'))[0] + Gn[1])
    : wt &&
      (!(Gn = wt.match(/Edge\/(\d+)/)) || 74 <= Gn[1]) &&
      (Gn = wt.match(/Chrome\/(\d+)/)) &&
      (Zn = Gn[1]);
  function wn(t) {
    var e;
    return !(!k(t) || 'function' != typeof (e = t.then)) && e;
  }
  function En(l, f) {
    var p;
    l.notified ||
      ((l.notified = !0),
      (p = l.reactions),
      bn(function () {
        for (var t = l.value, e = 1 == l.state, n = 0; p.length > n; ) {
          var r,
            i,
            o,
            s = p[n++],
            a = e ? s.ok : s.fail,
            u = s.resolve,
            c = s.reject,
            h = s.domain;
          try {
            a
              ? (e || (2 === l.rejection && Xn(l), (l.rejection = 1)),
                !0 === a
                  ? (r = t)
                  : (h && h.enter(), (r = a(t)), h && (h.exit(), (o = !0))),
                r === s.promise
                  ? c(Un('Promise-chain cycle'))
                  : (i = wn(r))
                  ? i.call(r, u, c)
                  : u(r))
              : c(t);
          } catch (t) {
            h && !o && h.exit(), c(t);
          }
        }
        (l.reactions = []), (l.notified = !1), f && !l.rejection && Qn(l);
      }));
  }
  function In(t, e, n) {
    var r, i;
    Kn
      ? (((r = jn.createEvent('Event')).promise = e),
        (r.reason = n),
        r.initEvent(t, !1, !0),
        M.dispatchEvent(r))
      : (r = { promise: e, reason: n }),
      !Hn && (i = M['on' + t])
        ? i(r)
        : t === zn &&
          (function (t, e) {
            var n = M.console;
            n &&
              n.error &&
              (1 === arguments.length ? n.error(t) : n.error(t, e));
          })('Unhandled promise rejection', n);
  }
  function Tn(e, n, r) {
    return function (t) {
      e(n, t, r);
    };
  }
  function Sn(t, e, n) {
    t.done ||
      ((t.done = !0), n && (t = n), (t.value = e), (t.state = 2), En(t, !0));
  }
  var Cn,
    Nn,
    An,
    kn,
    Rn = Zn && +Zn,
    On = pn.set,
    Pn = fe('species'),
    Dn = 'Promise',
    xn = Dt.get,
    Ln = Dt.set,
    Mn = Dt.getterFor(Dn),
    Fn = Fe,
    Un = M.TypeError,
    jn = M.document,
    Vn = M.process,
    qn = It('fetch'),
    Bn = _n.f,
    Wn = Bn,
    Kn = !!(jn && jn.createEvent && M.dispatchEvent),
    Hn = 'function' == typeof PromiseRejectionEvent,
    zn = 'unhandledrejection',
    wt = Zt(Dn, function () {
      if (!(lt(Fn) !== String(Fn))) {
        if (66 === Rn) return !0;
        if (!Je && !Hn) return !0;
      }
      if (51 <= Rn && /native code/.test(Fn)) return !1;
      function t(t) {
        t(
          function () {},
          function () {}
        );
      }
      var e = Fn.resolve(1);
      return (
        ((e.constructor = {})[Pn] = t), !(e.then(function () {}) instanceof t)
      );
    }),
    Gn =
      wt ||
      !He(function (t) {
        Fn.all(t).catch(function () {});
      }),
    Qn = function (r) {
      On.call(M, function () {
        var t,
          e = r.facade,
          n = r.value;
        if (
          Yn(r) &&
          ((t = mn(function () {
            Je ? Vn.emit('unhandledRejection', n, e) : In(zn, e, n);
          })),
          (r.rejection = Je || Yn(r) ? 2 : 1),
          t.error)
        )
          throw t.value;
      });
    },
    Yn = function (t) {
      return 1 !== t.rejection && !t.parent;
    },
    Xn = function (e) {
      On.call(M, function () {
        var t = e.facade;
        Je
          ? Vn.emit('rejectionHandled', t)
          : In('rejectionhandled', t, e.value);
      });
    },
    Jn = function (n, t, e) {
      if (!n.done) {
        (n.done = !0), e && (n = e);
        try {
          if (n.facade === t) throw Un("Promise can't be resolved itself");
          var r = wn(t);
          r
            ? bn(function () {
                var e = { done: !1 };
                try {
                  r.call(t, Tn(Jn, e, n), Tn(Sn, e, n));
                } catch (t) {
                  Sn(e, t, n);
                }
              })
            : ((n.value = t), (n.state = 1), En(n, !1));
        } catch (t) {
          Sn({ done: !1 }, t, n);
        }
      }
    };
  wt &&
    ((Fn = function (t) {
      Me(this, Fn, Dn), de(t), Cn.call(this);
      var e = xn(this);
      try {
        t(Tn(Jn, e), Tn(Sn, e));
      } catch (t) {
        Sn(e, t);
      }
    }),
    ((Cn = function () {
      Ln(this, {
        type: Dn,
        done: !1,
        notified: !1,
        parent: !1,
        reactions: [],
        rejection: !1,
        state: 0,
        value: void 0
      });
    }).prototype = De(Fn.prototype, {
      then: function (t, e) {
        var n = Mn(this),
          r = Bn(ze(this, Fn));
        return (
          (r.ok = 'function' != typeof t || t),
          (r.fail = 'function' == typeof e && e),
          (r.domain = Je ? Vn.domain : void 0),
          (n.parent = !0),
          n.reactions.push(r),
          0 != n.state && En(n, !1),
          r.promise
        );
      },
      catch: function (t) {
        return this.then(void 0, t);
      }
    })),
    (Nn = function () {
      var t = new Cn(),
        e = xn(t);
      (this.promise = t), (this.resolve = Tn(Jn, e)), (this.reject = Tn(Sn, e));
    }),
    (_n.f = Bn = function (t) {
      return t === Fn || t === An ? new Nn() : Wn(t);
    }),
    'function' == typeof Fe &&
      ((kn = Fe.prototype.then),
      xt(
        Fe.prototype,
        'then',
        function (t, e) {
          var n = this;
          return new Fn(function (t, e) {
            kn.call(n, t, e);
          }).then(t, e);
        },
        { unsafe: !0 }
      ),
      'function' == typeof qn &&
        At(
          { global: !0, enumerable: !0, forced: !0 },
          {
            fetch: function () {
              return gn(Fn, qn.apply(M, arguments));
            }
          }
        ))),
    At({ global: !0, wrap: !0, forced: wt }, { Promise: Fn }),
    xe(Fn, Dn, !1),
    Le(Dn),
    (An = It(Dn)),
    At(
      { target: Dn, stat: !0, forced: wt },
      {
        reject: function (t) {
          var e = Bn(this);
          return e.reject.call(void 0, t), e.promise;
        }
      }
    ),
    At(
      { target: Dn, stat: !0, forced: wt },
      {
        resolve: function (t) {
          return gn(this, t);
        }
      }
    ),
    At(
      { target: Dn, stat: !0, forced: Gn },
      {
        all: function (t) {
          var a = this,
            e = Bn(a),
            u = e.resolve,
            c = e.reject,
            n = mn(function () {
              var r = de(a.resolve),
                i = [],
                o = 0,
                s = 1;
              Ne(t, function (t) {
                var e = o++,
                  n = !1;
                i.push(void 0),
                  s++,
                  r.call(a, t).then(function (t) {
                    n || ((n = !0), (i[e] = t), --s || u(i));
                  }, c);
              }),
                --s || u(i);
            });
          return n.error && c(n.value), e.promise;
        },
        race: function (t) {
          var n = this,
            r = Bn(n),
            i = r.reject,
            e = mn(function () {
              var e = de(n.resolve);
              Ne(t, function (t) {
                e.call(n, t).then(r.resolve, i);
              });
            });
          return e.error && i(e.value), r.promise;
        }
      }
    ),
    At(
      { target: 'Promise', stat: !0 },
      {
        allSettled: function (t) {
          var a = this,
            e = _n.f(a),
            u = e.resolve,
            n = e.reject,
            r = mn(function () {
              var r = de(a.resolve),
                i = [],
                o = 0,
                s = 1;
              Ne(t, function (t) {
                var e = o++,
                  n = !1;
                i.push(void 0),
                  s++,
                  r.call(a, t).then(
                    function (t) {
                      n ||
                        ((n = !0),
                        (i[e] = { status: 'fulfilled', value: t }),
                        --s || u(i));
                    },
                    function (t) {
                      n ||
                        ((n = !0),
                        (i[e] = { status: 'rejected', reason: t }),
                        --s || u(i));
                    }
                  );
              }),
                --s || u(i);
            });
          return r.error && n(r.value), e.promise;
        }
      }
    );
  var $n = 'No one promise resolved';
  At(
    { target: 'Promise', stat: !0 },
    {
      any: function (t) {
        var u = this,
          e = _n.f(u),
          c = e.resolve,
          h = e.reject,
          n = mn(function () {
            var r = de(u.resolve),
              i = [],
              o = 0,
              s = 1,
              a = !1;
            Ne(t, function (t) {
              var e = o++,
                n = !1;
              i.push(void 0),
                s++,
                r.call(u, t).then(
                  function (t) {
                    n || a || ((a = !0), c(t));
                  },
                  function (t) {
                    n ||
                      a ||
                      ((n = !0),
                      (i[e] = t),
                      --s || h(new (It('AggregateError'))(i, $n)));
                  }
                );
            }),
              --s || h(new (It('AggregateError'))(i, $n));
          });
        return n.error && h(n.value), e.promise;
      }
    }
  );
  var Zn =
    !!Fe &&
    T(function () {
      Fe.prototype.finally.call({ then: function () {} }, function () {});
    });
  At(
    { target: 'Promise', proto: !0, real: !0, forced: Zn },
    {
      finally: function (e) {
        var n = ze(this, It('Promise')),
          t = 'function' == typeof e;
        return this.then(
          t
            ? function (t) {
                return gn(n, e()).then(function () {
                  return t;
                });
              }
            : e,
          t
            ? function (t) {
                return gn(n, e()).then(function () {
                  throw t;
                });
              }
            : e
        );
      }
    }
  ),
    'function' != typeof Fe ||
      Fe.prototype.finally ||
      xt(Fe.prototype, 'finally', It('Promise').prototype.finally);
  (pn = function (o) {
    return function (t, e) {
      var n,
        r = String(N(t)),
        i = Tt(e),
        t = r.length;
      return i < 0 || t <= i
        ? o
          ? ''
          : void 0
        : (e = r.charCodeAt(i)) < 55296 ||
          56319 < e ||
          i + 1 === t ||
          (n = r.charCodeAt(i + 1)) < 56320 ||
          57343 < n
        ? o
          ? r.charAt(i)
          : e
        : o
        ? r.slice(i, i + 2)
        : n - 56320 + ((e - 55296) << 10) + 65536;
    };
  }),
    (wt = { codeAt: pn(!1), charAt: pn(!0) }),
    (Gn = fe('iterator')),
    (Zn = !1);
  [].keys &&
    ('next' in (yr = [].keys())
      ? (Dr = re(re(yr))) !== Object.prototype && (Mr = Dr)
      : (Zn = !0)),
    null == Mr && (Mr = {}),
    O(Mr, Gn) ||
      $(Mr, Gn, function () {
        return this;
      });
  function tr() {
    return this;
  }
  function er() {
    return this;
  }
  function nr(t, e, n, r, i, o, s) {
    function a(t) {
      if (t === i && d) return d;
      if (!or && t in f) return f[t];
      switch (t) {
        case 'keys':
        case ar:
        case ur:
          return function () {
            return new n(this, t);
          };
      }
      return function () {
        return new n(this);
      };
    }
    !(function (t, e, n) {
      e += ' Iterator';
      (t.prototype = ye(rr, { next: S(1, n) })), xe(t, e, !1), (we[e] = tr);
    })(n, e, r);
    var u,
      c,
      h = e + ' Iterator',
      l = !1,
      f = t.prototype,
      p = f[sr] || f['@@iterator'] || (i && f[i]),
      d = (!or && p) || a(i);
    if (
      ((r = ('Array' == e && f.entries) || p) &&
        ((t = re(r.call(new t()))),
        ir !== Object.prototype &&
          t.next &&
          (re(t) !== ir &&
            (ie ? ie(t, ir) : 'function' != typeof t[sr] && $(t, sr, er)),
          xe(t, h, !0))),
      i == ar &&
        p &&
        p.name !== ar &&
        ((l = !0),
        (d = function () {
          return p.call(this);
        })),
      f[sr] !== d && $(f, sr, d),
      (we[e] = d),
      i)
    )
      if (((u = { values: a(ar), keys: o ? d : a('keys'), entries: a(ur) }), s))
        for (c in u) (!or && !l && c in f) || xt(f, c, u[c]);
      else At({ target: e, proto: !0, forced: or || l }, u);
    return u;
  }
  var pn = { IteratorPrototype: Mr, BUGGY_SAFARI_ITERATORS: Zn },
    rr = pn.IteratorPrototype,
    ir = pn.IteratorPrototype,
    or = pn.BUGGY_SAFARI_ITERATORS,
    sr = fe('iterator'),
    ar = 'values',
    ur = 'entries',
    cr = wt.charAt,
    hr = 'String Iterator',
    lr = Dt.set,
    fr = Dt.getterFor(hr);
  nr(
    String,
    'String',
    function (t) {
      lr(this, { type: hr, string: String(t), index: 0 });
    },
    function () {
      var t = fr(this),
        e = t.string,
        n = t.index;
      return n >= e.length
        ? { value: void 0, done: !0 }
        : ((n = cr(e, n)), (t.index += n.length), { value: n, done: !1 });
    }
  );
  var pr = {
      CSSRuleList: 0,
      CSSStyleDeclaration: 0,
      CSSValueList: 0,
      ClientRectList: 0,
      DOMRectList: 0,
      DOMStringList: 0,
      DOMTokenList: 1,
      DataTransferItemList: 0,
      FileList: 0,
      HTMLAllCollection: 0,
      HTMLCollection: 0,
      HTMLFormElement: 0,
      HTMLSelectElement: 0,
      MediaList: 0,
      MimeTypeArray: 0,
      NamedNodeMap: 0,
      NodeList: 1,
      PaintRequestList: 0,
      Plugin: 0,
      PluginArray: 0,
      SVGLengthList: 0,
      SVGNumberList: 0,
      SVGPathSegList: 0,
      SVGPointList: 0,
      SVGStringList: 0,
      SVGTransformList: 0,
      SourceBufferList: 0,
      StyleSheetList: 0,
      TextTrackCueList: 0,
      TextTrackList: 0,
      TouchList: 0
    },
    dr = fe('unscopables'),
    vr = Array.prototype;
  null == vr[dr] && J.f(vr, dr, { configurable: !0, value: ye(null) });
  var yr = function (t) {
      vr[dr][t] = !0;
    },
    gr = 'Array Iterator',
    mr = Dt.set,
    br = Dt.getterFor(gr),
    _r = nr(
      Array,
      'Array',
      function (t, e) {
        mr(this, { type: gr, target: A(t), index: 0, kind: e });
      },
      function () {
        var t = br(this),
          e = t.target,
          n = t.kind,
          r = t.index++;
        return !e || r >= e.length
          ? { value: (t.target = void 0), done: !0 }
          : 'keys' == n
          ? { value: r, done: !1 }
          : 'values' == n
          ? { value: e[r], done: !1 }
          : { value: [r, e[r]], done: !1 };
      },
      'values'
    );
  (we.Arguments = we.Array), yr('keys'), yr('values'), yr('entries');
  var wr,
    Er = fe('iterator'),
    Ir = fe('toStringTag'),
    Tr = _r.values;
  for (wr in pr) {
    var Sr = M[wr],
      Cr = Sr && Sr.prototype;
    if (Cr) {
      if (Cr[Er] !== Tr)
        try {
          $(Cr, Er, Tr);
        } catch (ra) {
          Cr[Er] = Tr;
        }
      if ((Cr[Ir] || $(Cr, Ir, wr), pr[wr]))
        for (var Nr in _r)
          if (Cr[Nr] !== _r[Nr])
            try {
              $(Cr, Nr, _r[Nr]);
            } catch (ra) {
              Cr[Nr] = _r[Nr];
            }
    }
  }
  Lt.Promise;
  At(
    { target: 'Promise', stat: !0 },
    {
      try: function (t) {
        var e = _n.f(this),
          t = mn(t);
        return (t.error ? e.reject : e.resolve)(t.value), e.promise;
      }
    }
  );
  function Ar(t, e) {
    var n;
    return (
      Rr(t) &&
        (('function' == typeof (n = t.constructor) &&
          (n === Array || Rr(n.prototype))) ||
          (k(n) && null === (n = n[Or]))) &&
        (n = void 0),
      new (void 0 === n ? Array : n)(0 === e ? 0 : e)
    );
  }
  function kr(t) {
    throw t;
  }
  var Rr =
      Array.isArray ||
      function (t) {
        return 'Array' == C(t);
      },
    Or = fe('species'),
    Pr = [].push,
    Dr = function (f) {
      var p = 1 == f,
        d = 2 == f,
        v = 3 == f,
        y = 4 == f,
        g = 6 == f,
        m = 5 == f || g;
      return function (t, e, n, r) {
        for (
          var i,
            o,
            s = kt(t),
            a = W(s),
            u = ve(e, n, 3),
            c = St(a.length),
            h = 0,
            r = r || Ar,
            l = p ? r(t, c) : d ? r(t, 0) : void 0;
          h < c;
          h++
        )
          if ((m || h in a) && ((o = u((i = a[h]), h, s)), f))
            if (p) l[h] = o;
            else if (o)
              switch (f) {
                case 3:
                  return !0;
                case 5:
                  return i;
                case 6:
                  return h;
                case 2:
                  Pr.call(l, i);
              }
            else if (y) return !1;
        return g ? -1 : v || y ? y : l;
      };
    },
    Gn = {
      forEach: Dr(0),
      map: Dr(1),
      filter: Dr(2),
      some: Dr(3),
      every: Dr(4),
      find: Dr(5),
      findIndex: Dr(6)
    },
    xr = Object.defineProperty,
    Lr = {},
    Mr = function (t, e) {
      if (O(Lr, t)) return Lr[t];
      var n = [][t],
        r = !!O((e = e || {}), 'ACCESSORS') && e.ACCESSORS,
        i = O(e, 0) ? e[0] : kr,
        o = O(e, 1) ? e[1] : void 0;
      return (Lr[t] =
        !!n &&
        !T(function () {
          if (r && !F) return 1;
          var t = { length: -1 };
          r ? xr(t, 1, { enumerable: !0, get: kr }) : (t[1] = 1),
            n.call(t, i, o);
        }));
    },
    Fr = Gn.find,
    Zn = 'find',
    Ur = !0,
    pn = Mr(Zn);
  Zn in [] &&
    Array(1)[Zn](function () {
      Ur = !1;
    }),
    At(
      { target: 'Array', proto: !0, forced: Ur || !pn },
      {
        find: function (t, e) {
          return Fr(this, t, 1 < arguments.length ? e : void 0);
        }
      }
    ),
    yr(Zn);
  var jr = Function.call,
    wt = function (t, e, n) {
      return ve(jr, M[t].prototype[e], n);
    },
    Vr = (wt('Array', 'find'), Gn.findIndex),
    Dr = 'findIndex',
    qr = !0,
    pn = Mr(Dr);
  Dr in [] &&
    Array(1)[Dr](function () {
      qr = !1;
    }),
    At(
      { target: 'Array', proto: !0, forced: qr || !pn },
      {
        findIndex: function (t, e) {
          return Vr(this, t, 1 < arguments.length ? e : void 0);
        }
      }
    ),
    yr(Dr);
  function Br(t, e, n) {
    (e = R(e)) in t ? J.f(t, e, S(0, n)) : (t[e] = n);
  }
  wt('Array', 'findIndex');
  Zn = !He(function (t) {
    Array.from(t);
  });
  At(
    { target: 'Array', stat: !0, forced: Zn },
    {
      from: function (t, e, n) {
        var r,
          i,
          o,
          s,
          a,
          u,
          c = kt(t),
          h = 'function' == typeof this ? this : Array,
          t = arguments.length,
          l = 1 < t ? e : void 0,
          f = void 0 !== l,
          e = Te(c),
          p = 0;
        if (
          (f && (l = ve(l, 2 < t ? n : void 0, 2)),
          null == e || (h == Array && pe(e)))
        )
          for (i = new h((r = St(c.length))); p < r; p++)
            (u = f ? l(c[p], p) : c[p]), Br(i, p, u);
        else
          for (
            a = (s = e.call(c)).next, i = new h();
            !(o = a.call(s)).done;
            p++
          )
            (u = f
              ? (function (e, t, n, r) {
                  try {
                    return r ? t(D(n)[0], n[1]) : t(n);
                  } catch (t) {
                    throw (Se(e), t);
                  }
                })(s, l, [o.value, p], !0)
              : o.value),
              Br(i, p, u);
        return (i.length = p), i;
      }
    }
  );
  Lt.Array.from;
  var Wr,
    Kr,
    Hr = Gn.some,
    pn =
      !!(Kr = []['some']) &&
      T(function () {
        Kr.call(
          null,
          Wr ||
            function () {
              throw 1;
            },
          1
        );
      }),
    yr = Mr('some');
  At(
    { target: 'Array', proto: !0, forced: !pn || !yr },
    {
      some: function (t, e) {
        return Hr(this, t, 1 < arguments.length ? e : void 0);
      }
    }
  );
  wt('Array', 'some');
  function zr(t) {
    return k(t) && O(ti, Re(t));
  }
  var Gr,
    Dr = 'undefined' != typeof ArrayBuffer && 'undefined' != typeof DataView,
    Zn = J.f,
    Qr = M.Int8Array,
    Yr = Qr && Qr.prototype,
    Mr = M.Uint8ClampedArray,
    pn = Mr && Mr.prototype,
    Xr = Qr && re(Qr),
    Jr = Yr && re(Yr),
    yr = Object.prototype,
    Mr = (yr.isPrototypeOf, fe('toStringTag')),
    $r = nt('TYPED_ARRAY_TAG'),
    Zr = Dr && !!ie && 'Opera' !== Re(M.opera),
    Dr = !1,
    ti = {
      Int8Array: 1,
      Uint8Array: 1,
      Uint8ClampedArray: 1,
      Int16Array: 2,
      Uint16Array: 2,
      Int32Array: 4,
      Uint32Array: 4,
      Float32Array: 4,
      Float64Array: 8
    };
  for (Gr in ti) M[Gr] || (Zr = !1);
  if (
    (!Zr || 'function' != typeof Xr || Xr === Function.prototype) &&
    ((Xr = function () {
      throw TypeError('Incorrect invocation');
    }),
    Zr)
  )
    for (Gr in ti) M[Gr] && ie(M[Gr], Xr);
  if ((!Zr || !Jr || Jr === yr) && ((Jr = Xr.prototype), Zr))
    for (Gr in ti) M[Gr] && ie(M[Gr].prototype, Jr);
  if ((Zr && re(pn) !== Jr && ie(pn, Jr), F && !O(Jr, Mr)))
    for (Gr in ((Dr = !0),
    Zn(Jr, Mr, {
      get: function () {
        return k(this) ? this[$r] : void 0;
      }
    }),
    ti))
      M[Gr] && $(M[Gr], $r, Gr);
  var pn = function (t) {
      if (zr(t)) return t;
      throw TypeError('Target is not a typed array');
    },
    Zn = function (t, e, n) {
      if (F) {
        if (n)
          for (var r in ti) {
            var i = M[r];
            i && O(i.prototype, t) && delete i.prototype[t];
          }
        (Jr[t] && !n) || xt(Jr, t, (!n && Zr && Yr[t]) || e);
      }
    },
    Mr = fe('iterator'),
    Dr = M.Uint8Array,
    ei = _r.values,
    ni = _r.keys,
    ri = _r.entries,
    ii = pn,
    pn = Zn,
    Zn = Dr && Dr.prototype[Mr],
    Dr = !!Zn && ('values' == Zn.name || null == Zn.name),
    Zn = function () {
      return ei.call(ii(this));
    };
  pn('entries', function () {
    return ri.call(ii(this));
  }),
    pn('keys', function () {
      return ni.call(ii(this));
    }),
    pn('values', Zn, !Dr),
    pn(Mr, Zn, !Dr);
  var oi = Object.assign,
    si = Object.defineProperty,
    Zn =
      !oi ||
      T(function () {
        if (
          F &&
          1 !==
            oi(
              { b: 1 },
              oi(
                si({}, 'a', {
                  enumerable: !0,
                  get: function () {
                    si(this, 'b', { value: 3, enumerable: !1 });
                  }
                }),
                { b: 2 }
              )
            ).b
        )
          return 1;
        var t = {},
          e = {},
          n = Symbol(),
          r = 'abcdefghijklmnopqrst';
        return (
          (t[n] = 7),
          r.split('').forEach(function (t) {
            e[t] = t;
          }),
          7 != oi({}, t)[n] || oe(oi({}, e)).join('') != r
        );
      })
        ? function (t) {
            for (
              var e = kt(t), n = arguments.length, r = 1, i = zt.f, o = V.f;
              r < n;

            )
              for (
                var s,
                  a = W(arguments[r++]),
                  u = i ? oe(a).concat(i(a)) : oe(a),
                  c = u.length,
                  h = 0;
                h < c;

              )
                (s = u[h++]), (F && !o.call(a, s)) || (e[s] = a[s]);
            return e;
          }
        : oi;
  At(
    { target: 'Object', stat: !0, forced: Object.assign !== Zn },
    { assign: Zn }
  );
  Lt.Object.assign;
  var ai = V.f,
    Dr = function (a) {
      return function (t) {
        for (var e, n = A(t), r = oe(n), i = r.length, o = 0, s = []; o < i; )
          (e = r[o++]), (F && !ai.call(n, e)) || s.push(a ? [e, n[e]] : n[e]);
        return s;
      };
    },
    Zn = { entries: Dr(!0), values: Dr(!1) },
    ui = Zn.entries;
  At(
    { target: 'Object', stat: !0 },
    {
      entries: function (t) {
        return ui(t);
      }
    }
  );
  Lt.Object.entries;
  var ci = Zn.values;
  At(
    { target: 'Object', stat: !0 },
    {
      values: function (t) {
        return ci(t);
      }
    }
  );
  Lt.Object.values;
  function hi(t) {
    if (k((e = t)) && (void 0 !== (n = e[li]) ? !!n : 'RegExp' == C(e)))
      throw TypeError("The method doesn't accept regular expressions");
    var e, n;
    return t;
  }
  var li = fe('match'),
    fi = fe('match'),
    Dr = function (e) {
      var n = /./;
      try {
        '/./'[e](n);
      } catch (t) {
        try {
          return (n[fi] = !1), '/./'[e](n);
        } catch (t) {}
      }
      return !1;
    };
  At(
    { target: 'String', proto: !0, forced: !Dr('includes') },
    {
      includes: function (t, e) {
        return !!~String(N(this)).indexOf(
          hi(t),
          1 < arguments.length ? e : void 0
        );
      }
    }
  );
  wt('String', 'includes');
  var pi,
    Zn = Y.f,
    di = ''.startsWith,
    vi = Math.min,
    Dr = Dr('startsWith'),
    pi = !(Dr || !(pi = Zn(String.prototype, 'startsWith')) || pi.writable);
  At(
    { target: 'String', proto: !0, forced: !pi && !Dr },
    {
      startsWith: function (t, e) {
        var n = String(N(this));
        hi(t);
        (e = St(vi(1 < arguments.length ? e : void 0, n.length))),
          (t = String(t));
        return di ? di.call(n, t, e) : n.slice(e, e + t.length) === t;
      }
    }
  );
  wt('String', 'startsWith');
  At(
    { target: 'String', proto: !0 },
    {
      repeat:
        ''.repeat ||
        function (t) {
          var e = String(N(this)),
            n = '',
            r = Tt(t);
          if (r < 0 || r == 1 / 0)
            throw RangeError('Wrong number of repetitions');
          for (; 0 < r; (r >>>= 1) && (e += e)) 1 & r && (n += e);
          return n;
        }
    }
  );
  wt('String', 'repeat');
  var yi,
    gi = fe('species'),
    mi = fe('isConcatSpreadable'),
    bi = 9007199254740991,
    _i = 'Maximum allowed index exceeded',
    Dr =
      51 <= Rn ||
      !T(function () {
        var t = [];
        return (t[mi] = !1), t.concat()[0] !== t;
      }),
    wt =
      ((yi = 'concat'),
      51 <= Rn ||
        !T(function () {
          var t = [];
          return (
            ((t.constructor = {})[gi] = function () {
              return { foo: 1 };
            }),
            1 !== t[yi](Boolean).foo
          );
        }));
  At(
    { target: 'Array', proto: !0, forced: !Dr || !wt },
    {
      concat: function () {
        for (
          var t,
            e,
            n,
            r = kt(this),
            i = Ar(r, 0),
            o = 0,
            s = -1,
            a = arguments.length;
          s < a;
          s++
        )
          if (
            (function (t) {
              if (!k(t)) return !1;
              var e = t[mi];
              return void 0 !== e ? !!e : Rr(t);
            })((n = -1 === s ? r : arguments[s]))
          ) {
            if (((e = St(n.length)), bi < o + e)) throw TypeError(_i);
            for (t = 0; t < e; t++, o++) t in n && Br(i, o, n[t]);
          } else {
            if (bi <= o) throw TypeError(_i);
            Br(i, o++, n);
          }
        return (i.length = o), i;
      }
    }
  );
  function wi(t) {
    var e = Lt.Symbol || (Lt.Symbol = {});
    O(e, t) || Ai(e, t, { value: Ni.f(t) });
  }
  function Ei(t, e) {
    var n = (Bi[t] = ye(Mi[Pi]));
    return (
      Di(n, { type: Oi, tag: t, description: e }), F || (n.description = e), n
    );
  }
  function Ii(e, t) {
    D(e);
    var n = A(t),
      t = oe(n).concat(Ji(n));
    return (
      ki(t, function (t) {
        (F && !Xi.call(n, t)) || Yi(e, t, n[t]);
      }),
      e
    );
  }
  var Ti = Ht.f,
    Si = {}.toString,
    Ci =
      'object' == typeof window && window && Object.getOwnPropertyNames
        ? Object.getOwnPropertyNames(window)
        : [],
    wt = {
      f: function (t) {
        return Ci && '[object Window]' == Si.call(t)
          ? (function (t) {
              try {
                return Ti(t);
              } catch (t) {
                return Ci.slice();
              }
            })(t)
          : Ti(A(t));
      }
    },
    Ni = { f: fe },
    Ai = J.f,
    ki = Gn.forEach,
    Ri = bt('hidden'),
    Oi = 'Symbol',
    Pi = 'prototype',
    Gn = fe('toPrimitive'),
    Di = Dt.set,
    xi = Dt.getterFor(Oi),
    Li = Object[Pi],
    Mi = M.Symbol,
    Fi = It('JSON', 'stringify'),
    Ui = Y.f,
    ji = J.f,
    Vi = wt.f,
    qi = V.f,
    Bi = vt('symbols'),
    Wi = vt('op-symbols'),
    Ki = vt('string-to-symbol-registry'),
    Hi = vt('symbol-to-string-registry'),
    bt = vt('wks'),
    vt = M.QObject,
    zi = !vt || !vt[Pi] || !vt[Pi].findChild,
    Gi =
      F &&
      T(function () {
        return (
          7 !=
          ye(
            ji({}, 'a', {
              get: function () {
                return ji(this, 'a', { value: 7 }).a;
              }
            })
          ).a
        );
      })
        ? function (t, e, n) {
            var r = Ui(Li, e);
            r && delete Li[e], ji(t, e, n), r && t !== Li && ji(Li, e, r);
          }
        : ji,
    Qi = U
      ? function (t) {
          return 'symbol' == typeof t;
        }
      : function (t) {
          return Object(t) instanceof Mi;
        },
    Yi = function (t, e, n) {
      t === Li && Yi(Wi, e, n), D(t);
      e = R(e, !0);
      return (
        D(n),
        O(Bi, e)
          ? (n.enumerable
              ? (O(t, Ri) && t[Ri][e] && (t[Ri][e] = !1),
                (n = ye(n, { enumerable: S(0, !1) })))
              : (O(t, Ri) || ji(t, Ri, S(1, {})), (t[Ri][e] = !0)),
            Gi(t, e, n))
          : ji(t, e, n)
      );
    },
    Xi = function (t) {
      var e = R(t, !0),
        t = qi.call(this, e);
      return (
        !(this === Li && O(Bi, e) && !O(Wi, e)) &&
        (!(t || !O(this, e) || !O(Bi, e) || (O(this, Ri) && this[Ri][e])) || t)
      );
    },
    vt = function (t, e) {
      var n = A(t),
        t = R(e, !0);
      if (n !== Li || !O(Bi, t) || O(Wi, t)) {
        e = Ui(n, t);
        return (
          !e || !O(Bi, t) || (O(n, Ri) && n[Ri][t]) || (e.enumerable = !0), e
        );
      }
    },
    U = function (t) {
      var t = Vi(A(t)),
        e = [];
      return (
        ki(t, function (t) {
          O(Bi, t) || O(_t, t) || e.push(t);
        }),
        e
      );
    },
    Ji = function (t) {
      var e = t === Li,
        t = Vi(e ? Wi : A(t)),
        n = [];
      return (
        ki(t, function (t) {
          !O(Bi, t) || (e && !O(Li, t)) || n.push(Bi[t]);
        }),
        n
      );
    };
  ge ||
    (xt(
      (Mi = function (t) {
        if (this instanceof Mi) throw TypeError('Symbol is not a constructor');
        var t = arguments.length && void 0 !== t ? String(t) : void 0,
          e = nt(t),
          n = function (t) {
            this === Li && n.call(Wi, t),
              O(this, Ri) && O(this[Ri], e) && (this[Ri][e] = !1),
              Gi(this, e, S(1, t));
          };
        return F && zi && Gi(Li, e, { configurable: !0, set: n }), Ei(e, t);
      })[Pi],
      'toString',
      function () {
        return xi(this).tag;
      }
    ),
    xt(Mi, 'withoutSetter', function (t) {
      return Ei(nt(t), t);
    }),
    (V.f = Xi),
    (J.f = Yi),
    (Y.f = vt),
    (Ht.f = wt.f = U),
    (zt.f = Ji),
    (Ni.f = function (t) {
      return Ei(fe(t), t);
    }),
    F &&
      (ji(Mi[Pi], 'description', {
        configurable: !0,
        get: function () {
          return xi(this).description;
        }
      }),
      xt(Li, 'propertyIsEnumerable', Xi, { unsafe: !0 }))),
    At({ global: !0, wrap: !0, forced: !ge, sham: !ge }, { Symbol: Mi }),
    ki(oe(bt), function (t) {
      wi(t);
    }),
    At(
      { target: Oi, stat: !0, forced: !ge },
      {
        for: function (t) {
          var e = String(t);
          if (O(Ki, e)) return Ki[e];
          t = Mi(e);
          return (Ki[e] = t), (Hi[t] = e), t;
        },
        keyFor: function (t) {
          if (!Qi(t)) throw TypeError(t + ' is not a symbol');
          if (O(Hi, t)) return Hi[t];
        },
        useSetter: function () {
          zi = !0;
        },
        useSimple: function () {
          zi = !1;
        }
      }
    ),
    At(
      { target: 'Object', stat: !0, forced: !ge, sham: !F },
      {
        create: function (t, e) {
          return void 0 === e ? ye(t) : Ii(ye(t), e);
        },
        defineProperty: Yi,
        defineProperties: Ii,
        getOwnPropertyDescriptor: vt
      }
    ),
    At(
      { target: 'Object', stat: !0, forced: !ge },
      { getOwnPropertyNames: U, getOwnPropertySymbols: Ji }
    ),
    At(
      {
        target: 'Object',
        stat: !0,
        forced: T(function () {
          zt.f(1);
        })
      },
      {
        getOwnPropertySymbols: function (t) {
          return zt.f(kt(t));
        }
      }
    ),
    Fi &&
      ((ho =
        !ge ||
        T(function () {
          var t = Mi();
          return (
            '[null]' != Fi([t]) || '{}' != Fi({ a: t }) || '{}' != Fi(Object(t))
          );
        })),
      At(
        { target: 'JSON', stat: !0, forced: ho },
        {
          stringify: function (t, e) {
            for (var n, r = [t], i = 1; i < arguments.length; )
              r.push(arguments[i++]);
            if ((k((n = e)) || void 0 !== t) && !Qi(t))
              return (
                Rr(e) ||
                  (e = function (t, e) {
                    if (
                      ('function' == typeof n && (e = n.call(this, t, e)),
                      !Qi(e))
                    )
                      return e;
                  }),
                (r[1] = e),
                Fi.apply(null, r)
              );
          }
        }
      )),
    Mi[Pi][Gn] || $(Mi[Pi], Gn, Mi[Pi].valueOf),
    xe(Mi, Oi),
    (_t[Ri] = !0),
    wi('asyncIterator');
  var $i,
    Zi,
    to,
    eo,
    no,
    vt = J.f,
    ro = M.Symbol;
  !F ||
    'function' != typeof ro ||
    ('description' in ro.prototype && void 0 === ro().description) ||
    (($i = {}),
    Nt(
      (Zi = function (t) {
        var e = arguments.length < 1 || void 0 === t ? void 0 : String(t),
          t = this instanceof Zi ? new ro(e) : void 0 === e ? ro() : ro(e);
        return '' === e && ($i[t] = !0), t;
      }),
      ro
    ),
    ((po = Zi.prototype = ro.prototype).constructor = Zi),
    (to = po.toString),
    (eo = 'Symbol(test)' == String(ro('test'))),
    (no = /^Symbol\((.*)\)[^)]+$/),
    vt(po, 'description', {
      configurable: !0,
      get: function () {
        var t = k(this) ? this.valueOf() : this,
          e = to.call(t);
        if (O($i, t)) return '';
        e = eo ? e.slice(7, -1) : e.replace(no, '$1');
        return '' === e ? void 0 : e;
      }
    }),
    At({ global: !0, forced: !0 }, { Symbol: Zi })),
    wi('hasInstance'),
    wi('isConcatSpreadable'),
    wi('iterator'),
    wi('match'),
    wi('matchAll'),
    wi('replace'),
    wi('search'),
    wi('species'),
    wi('split'),
    wi('toPrimitive'),
    wi('toStringTag'),
    wi('unscopables'),
    xe(M.JSON, 'JSON', !0),
    xe(Math, 'Math', !0),
    At({ global: !0 }, { Reflect: {} }),
    xe(M.Reflect, 'Reflect', !0);
  Lt.Symbol;
  wi('asyncDispose'),
    wi('dispose'),
    wi('observable'),
    wi('patternMatch'),
    wi('replaceAll');
  Ni.f('iterator');
  var io = !T(function () {
      return Object.isExtensible(Object.preventExtensions({}));
    }),
    oo = I(function (t) {
      function n(t) {
        e(t, r, { value: { objectID: 'O' + ++i, weakData: {} } });
      }
      var e = J.f,
        r = nt('meta'),
        i = 0,
        o =
          Object.isExtensible ||
          function () {
            return !0;
          },
        s = (t.exports = {
          REQUIRED: !1,
          fastKey: function (t, e) {
            if (!k(t))
              return 'symbol' == typeof t
                ? t
                : ('string' == typeof t ? 'S' : 'P') + t;
            if (!O(t, r)) {
              if (!o(t)) return 'F';
              if (!e) return 'E';
              n(t);
            }
            return t[r].objectID;
          },
          getWeakData: function (t, e) {
            if (!O(t, r)) {
              if (!o(t)) return !0;
              if (!e) return !1;
              n(t);
            }
            return t[r].weakData;
          },
          onFreeze: function (t) {
            return io && s.REQUIRED && o(t) && !O(t, r) && n(t), t;
          }
        });
      _t[r] = !0;
    }),
    U = function (s, t, e) {
      function n(t) {
        var n = p[t];
        xt(
          p,
          t,
          'add' == t
            ? function (t) {
                return n.call(this, 0 === t ? 0 : t), this;
              }
            : 'delete' == t
            ? function (t) {
                return !(h && !k(t)) && n.call(this, 0 === t ? 0 : t);
              }
            : 'get' == t
            ? function (t) {
                return h && !k(t) ? void 0 : n.call(this, 0 === t ? 0 : t);
              }
            : 'has' == t
            ? function (t) {
                return !(h && !k(t)) && n.call(this, 0 === t ? 0 : t);
              }
            : function (t, e) {
                return n.call(this, 0 === t ? 0 : t, e), this;
              }
        );
      }
      var r,
        i,
        o,
        a,
        u,
        c = -1 !== s.indexOf('Map'),
        h = -1 !== s.indexOf('Weak'),
        l = c ? 'set' : 'add',
        f = M[s],
        p = f && f.prototype,
        d = f,
        v = {};
      return (
        Zt(
          s,
          'function' != typeof f ||
            !(
              h ||
              (p.forEach &&
                !T(function () {
                  new f().entries().next();
                }))
            )
        )
          ? ((d = e.getConstructor(t, s, c, l)), (oo.REQUIRED = !0))
          : Zt(s, !0) &&
            ((i = (r = new d())[l](h ? {} : -0, 1) != r),
            (o = T(function () {
              r.has(1);
            })),
            (a = He(function (t) {
              new f(t);
            })),
            (u =
              !h &&
              T(function () {
                for (var t = new f(), e = 5; e--; ) t[l](e, e);
                return !t.has(-0);
              })),
            a ||
              (((d = t(function (t, e) {
                Me(t, d, s);
                var n,
                  r,
                  i,
                  o,
                  n =
                    ((n = new f()),
                    (r = t),
                    (t = d),
                    ie &&
                      'function' == typeof (i = r.constructor) &&
                      i !== t &&
                      k((o = i.prototype)) &&
                      o !== t.prototype &&
                      ie(n, o),
                    n);
                return null != e && Ne(e, n[l], { that: n, AS_ENTRIES: c }), n;
              })).prototype = p).constructor = d),
            (o || u) && (n('delete'), n('has'), c && n('get')),
            (u || i) && n(l),
            h && p.clear && delete p.clear),
        (v[s] = d),
        At({ global: !0, forced: d != f }, v),
        xe(d, s),
        h || e.setStrong(d, s, c),
        d
      );
    },
    so = J.f,
    ao = oo.fastKey,
    uo = Dt.set,
    co = Dt.getterFor,
    ho = {
      getConstructor: function (t, n, r, i) {
        function o(t, e, n) {
          var r,
            i = a(t),
            o = u(t, e);
          return (
            o
              ? (o.value = n)
              : ((i.last = o = {
                  index: (r = ao(e, !0)),
                  key: e,
                  value: n,
                  previous: (n = i.last),
                  next: void 0,
                  removed: !1
                }),
                i.first || (i.first = o),
                n && (n.next = o),
                F ? i.size++ : t.size++,
                'F' !== r && (i.index[r] = o)),
            t
          );
        }
        var s = t(function (t, e) {
            Me(t, s, n),
              uo(t, {
                type: n,
                index: ye(null),
                first: void 0,
                last: void 0,
                size: 0
              }),
              F || (t.size = 0),
              null != e && Ne(e, t[i], { that: t, AS_ENTRIES: r });
          }),
          a = co(n),
          u = function (t, e) {
            var n,
              r = a(t),
              t = ao(e);
            if ('F' !== t) return r.index[t];
            for (n = r.first; n; n = n.next) if (n.key == e) return n;
          };
        return (
          De(s.prototype, {
            clear: function () {
              for (var t = a(this), e = t.index, n = t.first; n; )
                (n.removed = !0),
                  n.previous && (n.previous = n.previous.next = void 0),
                  delete e[n.index],
                  (n = n.next);
              (t.first = t.last = void 0), F ? (t.size = 0) : (this.size = 0);
            },
            delete: function (t) {
              var e,
                n = a(this),
                r = u(this, t);
              return (
                r &&
                  ((e = r.next),
                  (t = r.previous),
                  delete n.index[r.index],
                  (r.removed = !0),
                  t && (t.next = e),
                  e && (e.previous = t),
                  n.first == r && (n.first = e),
                  n.last == r && (n.last = t),
                  F ? n.size-- : this.size--),
                !!r
              );
            },
            forEach: function (t, e) {
              for (
                var n,
                  r = a(this),
                  i = ve(t, 1 < arguments.length ? e : void 0, 3);
                (n = n ? n.next : r.first);

              )
                for (i(n.value, n.key, this); n && n.removed; ) n = n.previous;
            },
            has: function (t) {
              return !!u(this, t);
            }
          }),
          De(
            s.prototype,
            r
              ? {
                  get: function (t) {
                    t = u(this, t);
                    return t && t.value;
                  },
                  set: function (t, e) {
                    return o(this, 0 === t ? 0 : t, e);
                  }
                }
              : {
                  add: function (t) {
                    return o(this, (t = 0 === t ? 0 : t), t);
                  }
                }
          ),
          F &&
            so(s.prototype, 'size', {
              get: function () {
                return a(this).size;
              }
            }),
          s
        );
      },
      setStrong: function (t, e, n) {
        var r = e + ' Iterator',
          i = co(e),
          o = co(r);
        nr(
          t,
          e,
          function (t, e) {
            uo(this, {
              type: r,
              target: t,
              state: i(t),
              kind: e,
              last: void 0
            });
          },
          function () {
            for (var t = o(this), e = t.kind, n = t.last; n && n.removed; )
              n = n.previous;
            return t.target && (t.last = n = n ? n.next : t.state.first)
              ? 'keys' == e
                ? { value: n.key, done: !1 }
                : 'values' == e
                ? { value: n.value, done: !1 }
                : { value: [n.key, n.value], done: !1 }
              : { value: (t.target = void 0), done: !0 };
          },
          n ? 'entries' : 'values',
          !n,
          !0
        ),
          Le(e);
      }
    },
    Gn =
      (U(
        'Map',
        function (e) {
          return function (t) {
            return e(this, arguments.length ? t : void 0);
          };
        },
        ho
      ),
      Lt.Map,
      function (t, e, n) {
        var r,
          i,
          o,
          s = arguments.length,
          a = 1 < s ? e : void 0;
        return (
          de(this),
          (e = void 0 !== a) && de(a),
          null == t
            ? new this()
            : ((r = []),
              e
                ? ((i = 0),
                  (o = ve(a, 2 < s ? n : void 0, 2)),
                  Ne(t, function (t) {
                    r.push(o(t, i++));
                  }))
                : Ne(t, r.push, { that: r }),
              new this(r))
        );
      });
  At({ target: 'Map', stat: !0 }, { from: Gn });
  vt = function () {
    for (var t = arguments.length, e = new Array(t); t--; ) e[t] = arguments[t];
    return new this(e);
  };
  At({ target: 'Map', stat: !0 }, { of: vt });
  function lo() {
    for (
      var t, e = D(this), n = de(e.delete), r = !0, i = 0, o = arguments.length;
      i < o;
      i++
    )
      (t = n.call(e, arguments[i])), (r = r && t);
    return !!r;
  }
  At(
    { target: 'Map', proto: !0, real: !0, forced: dt },
    {
      deleteAll: function () {
        return lo.apply(this, arguments);
      }
    }
  );
  At(
    { target: 'Map', proto: !0, real: !0, forced: dt },
    {
      emplace: function (t, e) {
        var n = D(this),
          e =
            n.has(t) && 'update' in e
              ? e.update(n.get(t), t, n)
              : e.insert(t, n);
        return n.set(t, e), e;
      }
    }
  );
  function fo(t) {
    return Map.prototype.entries.call(t);
  }
  At(
    { target: 'Map', proto: !0, real: !0, forced: dt },
    {
      every: function (t, e) {
        var r = D(this),
          n = fo(r),
          i = ve(t, 1 < arguments.length ? e : void 0, 3);
        return !Ne(
          n,
          function (t, e, n) {
            if (!i(e, t, r)) return n();
          },
          { AS_ENTRIES: !0, IS_ITERATOR: !0, INTERRUPTED: !0 }
        ).stopped;
      }
    }
  ),
    At(
      { target: 'Map', proto: !0, real: !0, forced: dt },
      {
        filter: function (t, e) {
          var n = D(this),
            r = fo(n),
            i = ve(t, 1 < arguments.length ? e : void 0, 3),
            o = new (ze(n, It('Map')))(),
            s = de(o.set);
          return (
            Ne(
              r,
              function (t, e) {
                i(e, t, n) && s.call(o, t, e);
              },
              { AS_ENTRIES: !0, IS_ITERATOR: !0 }
            ),
            o
          );
        }
      }
    ),
    At(
      { target: 'Map', proto: !0, real: !0, forced: dt },
      {
        find: function (t, e) {
          var r = D(this),
            n = fo(r),
            i = ve(t, 1 < arguments.length ? e : void 0, 3);
          return Ne(
            n,
            function (t, e, n) {
              if (i(e, t, r)) return n(e);
            },
            { AS_ENTRIES: !0, IS_ITERATOR: !0, INTERRUPTED: !0 }
          ).result;
        }
      }
    ),
    At(
      { target: 'Map', proto: !0, real: !0, forced: dt },
      {
        findKey: function (t, e) {
          var r = D(this),
            n = fo(r),
            i = ve(t, 1 < arguments.length ? e : void 0, 3);
          return Ne(
            n,
            function (t, e, n) {
              if (i(e, t, r)) return n(t);
            },
            { AS_ENTRIES: !0, IS_ITERATOR: !0, INTERRUPTED: !0 }
          ).result;
        }
      }
    ),
    At(
      { target: 'Map', stat: !0 },
      {
        groupBy: function (t, n) {
          var r = new this();
          de(n);
          var i = de(r.has),
            o = de(r.get),
            s = de(r.set);
          return (
            Ne(t, function (t) {
              var e = n(t);
              i.call(r, e) ? o.call(r, e).push(t) : s.call(r, e, [t]);
            }),
            r
          );
        }
      }
    );
  At(
    { target: 'Map', proto: !0, real: !0, forced: dt },
    {
      includes: function (i) {
        return Ne(
          fo(D(this)),
          function (t, e, n) {
            if ((r = e) === (e = i) || (r != r && e != e)) return n();
            var r;
          },
          { AS_ENTRIES: !0, IS_ITERATOR: !0, INTERRUPTED: !0 }
        ).stopped;
      }
    }
  ),
    At(
      { target: 'Map', stat: !0 },
      {
        keyBy: function (t, e) {
          var n = new this();
          de(e);
          var r = de(n.set);
          return (
            Ne(t, function (t) {
              r.call(n, e(t), t);
            }),
            n
          );
        }
      }
    ),
    At(
      { target: 'Map', proto: !0, real: !0, forced: dt },
      {
        keyOf: function (r) {
          return Ne(
            fo(D(this)),
            function (t, e, n) {
              if (e === r) return n(t);
            },
            { AS_ENTRIES: !0, IS_ITERATOR: !0, INTERRUPTED: !0 }
          ).result;
        }
      }
    ),
    At(
      { target: 'Map', proto: !0, real: !0, forced: dt },
      {
        mapKeys: function (t, e) {
          var n = D(this),
            r = fo(n),
            i = ve(t, 1 < arguments.length ? e : void 0, 3),
            o = new (ze(n, It('Map')))(),
            s = de(o.set);
          return (
            Ne(
              r,
              function (t, e) {
                s.call(o, i(e, t, n), e);
              },
              { AS_ENTRIES: !0, IS_ITERATOR: !0 }
            ),
            o
          );
        }
      }
    ),
    At(
      { target: 'Map', proto: !0, real: !0, forced: dt },
      {
        mapValues: function (t, e) {
          var n = D(this),
            r = fo(n),
            i = ve(t, 1 < arguments.length ? e : void 0, 3),
            o = new (ze(n, It('Map')))(),
            s = de(o.set);
          return (
            Ne(
              r,
              function (t, e) {
                s.call(o, t, i(e, t, n));
              },
              { AS_ENTRIES: !0, IS_ITERATOR: !0 }
            ),
            o
          );
        }
      }
    ),
    At(
      { target: 'Map', proto: !0, real: !0, forced: dt },
      {
        merge: function () {
          for (var t = D(this), e = de(t.set), n = 0; n < arguments.length; )
            Ne(arguments[n++], e, { that: t, AS_ENTRIES: !0 });
          return t;
        }
      }
    ),
    At(
      { target: 'Map', proto: !0, real: !0, forced: dt },
      {
        reduce: function (n, t) {
          var r = D(this),
            e = fo(r),
            i = arguments.length < 2,
            o = i ? void 0 : t;
          if (
            (de(n),
            Ne(
              e,
              function (t, e) {
                o = i ? ((i = !1), e) : n(o, e, t, r);
              },
              { AS_ENTRIES: !0, IS_ITERATOR: !0 }
            ),
            i)
          )
            throw TypeError('Reduce of empty map with no initial value');
          return o;
        }
      }
    ),
    At(
      { target: 'Map', proto: !0, real: !0, forced: dt },
      {
        some: function (t, e) {
          var r = D(this),
            n = fo(r),
            i = ve(t, 1 < arguments.length ? e : void 0, 3);
          return Ne(
            n,
            function (t, e, n) {
              if (i(e, t, r)) return n();
            },
            { AS_ENTRIES: !0, IS_ITERATOR: !0, INTERRUPTED: !0 }
          ).stopped;
        }
      }
    ),
    At(
      { target: 'Map', proto: !0, real: !0, forced: dt },
      {
        update: function (t, e, n) {
          var r = D(this),
            i = arguments.length;
          de(e);
          var o = r.has(t);
          if (!o && i < 3) throw TypeError('Updating absent value');
          n = o ? r.get(t) : de(2 < i ? n : void 0)(t, r);
          return r.set(t, e(n, t, r)), r;
        }
      }
    );
  var po = function (t, e, n) {
    var r,
      i = D(this),
      n = 2 < arguments.length ? n : void 0;
    if ('function' != typeof e && 'function' != typeof n)
      throw TypeError('At least one callback required');
    return (
      i.has(t)
        ? ((r = i.get(t)), 'function' == typeof e && ((r = e(r)), i.set(t, r)))
        : 'function' == typeof n && ((r = n()), i.set(t, r)),
      r
    );
  };
  At({ target: 'Map', proto: !0, real: !0, forced: dt }, { upsert: po }),
    At(
      { target: 'Map', proto: !0, real: !0, forced: dt },
      { updateOrInsert: po }
    );
  U(
    'Set',
    function (e) {
      return function (t) {
        return e(this, arguments.length ? t : void 0);
      };
    },
    ho
  ),
    Lt.Set;
  At({ target: 'Set', stat: !0 }, { from: Gn }),
    At({ target: 'Set', stat: !0 }, { of: vt });
  At(
    { target: 'Set', proto: !0, real: !0, forced: dt },
    {
      addAll: function () {
        return function () {
          for (
            var t = D(this), e = de(t.add), n = 0, r = arguments.length;
            n < r;
            n++
          )
            e.call(t, arguments[n]);
          return t;
        }.apply(this, arguments);
      }
    }
  ),
    At(
      { target: 'Set', proto: !0, real: !0, forced: dt },
      {
        deleteAll: function () {
          return lo.apply(this, arguments);
        }
      }
    );
  function vo(t) {
    return Set.prototype.values.call(t);
  }
  At(
    { target: 'Set', proto: !0, real: !0, forced: dt },
    {
      every: function (t, e) {
        var n = D(this),
          r = vo(n),
          i = ve(t, 1 < arguments.length ? e : void 0, 3);
        return !Ne(
          r,
          function (t, e) {
            if (!i(t, t, n)) return e();
          },
          { IS_ITERATOR: !0, INTERRUPTED: !0 }
        ).stopped;
      }
    }
  ),
    At(
      { target: 'Set', proto: !0, real: !0, forced: dt },
      {
        difference: function (t) {
          var e = D(this),
            n = new (ze(e, It('Set')))(e),
            r = de(n.delete);
          return (
            Ne(t, function (t) {
              r.call(n, t);
            }),
            n
          );
        }
      }
    ),
    At(
      { target: 'Set', proto: !0, real: !0, forced: dt },
      {
        filter: function (t, e) {
          var n = D(this),
            r = vo(n),
            i = ve(t, 1 < arguments.length ? e : void 0, 3),
            o = new (ze(n, It('Set')))(),
            s = de(o.add);
          return (
            Ne(
              r,
              function (t) {
                i(t, t, n) && s.call(o, t);
              },
              { IS_ITERATOR: !0 }
            ),
            o
          );
        }
      }
    ),
    At(
      { target: 'Set', proto: !0, real: !0, forced: dt },
      {
        find: function (t, e) {
          var n = D(this),
            r = vo(n),
            i = ve(t, 1 < arguments.length ? e : void 0, 3);
          return Ne(
            r,
            function (t, e) {
              if (i(t, t, n)) return e(t);
            },
            { IS_ITERATOR: !0, INTERRUPTED: !0 }
          ).result;
        }
      }
    ),
    At(
      { target: 'Set', proto: !0, real: !0, forced: dt },
      {
        intersection: function (t) {
          var e = D(this),
            n = new (ze(e, It('Set')))(),
            r = de(e.has),
            i = de(n.add);
          return (
            Ne(t, function (t) {
              r.call(e, t) && i.call(n, t);
            }),
            n
          );
        }
      }
    ),
    At(
      { target: 'Set', proto: !0, real: !0, forced: dt },
      {
        isDisjointFrom: function (t) {
          var n = D(this),
            r = de(n.has);
          return !Ne(
            t,
            function (t, e) {
              if (!0 === r.call(n, t)) return e();
            },
            { INTERRUPTED: !0 }
          ).stopped;
        }
      }
    ),
    At(
      { target: 'Set', proto: !0, real: !0, forced: dt },
      {
        isSubsetOf: function (t) {
          var e = (function (t) {
              var e = Te(t);
              if ('function' != typeof e)
                throw TypeError(String(t) + ' is not iterable');
              return D(e.call(t));
            })(this),
            n = D(t),
            r = n.has;
          return (
            'function' != typeof r &&
              ((n = new (It('Set'))(t)), (r = de(n.has))),
            !Ne(
              e,
              function (t, e) {
                if (!1 === r.call(n, t)) return e();
              },
              { IS_ITERATOR: !0, INTERRUPTED: !0 }
            ).stopped
          );
        }
      }
    ),
    At(
      { target: 'Set', proto: !0, real: !0, forced: dt },
      {
        isSupersetOf: function (t) {
          var n = D(this),
            r = de(n.has);
          return !Ne(
            t,
            function (t, e) {
              if (!1 === r.call(n, t)) return e();
            },
            { INTERRUPTED: !0 }
          ).stopped;
        }
      }
    ),
    At(
      { target: 'Set', proto: !0, real: !0, forced: dt },
      {
        join: function (t) {
          var e = D(this),
            n = vo(e),
            e = void 0 === t ? ',' : String(t),
            t = [];
          return Ne(n, t.push, { that: t, IS_ITERATOR: !0 }), t.join(e);
        }
      }
    ),
    At(
      { target: 'Set', proto: !0, real: !0, forced: dt },
      {
        map: function (t, e) {
          var n = D(this),
            r = vo(n),
            i = ve(t, 1 < arguments.length ? e : void 0, 3),
            o = new (ze(n, It('Set')))(),
            s = de(o.add);
          return (
            Ne(
              r,
              function (t) {
                s.call(o, i(t, t, n));
              },
              { IS_ITERATOR: !0 }
            ),
            o
          );
        }
      }
    ),
    At(
      { target: 'Set', proto: !0, real: !0, forced: dt },
      {
        reduce: function (e, t) {
          var n = D(this),
            r = vo(n),
            i = arguments.length < 2,
            o = i ? void 0 : t;
          if (
            (de(e),
            Ne(
              r,
              function (t) {
                o = i ? ((i = !1), t) : e(o, t, t, n);
              },
              { IS_ITERATOR: !0 }
            ),
            i)
          )
            throw TypeError('Reduce of empty set with no initial value');
          return o;
        }
      }
    ),
    At(
      { target: 'Set', proto: !0, real: !0, forced: dt },
      {
        some: function (t, e) {
          var n = D(this),
            r = vo(n),
            i = ve(t, 1 < arguments.length ? e : void 0, 3);
          return Ne(
            r,
            function (t, e) {
              if (i(t, t, n)) return e();
            },
            { IS_ITERATOR: !0, INTERRUPTED: !0 }
          ).stopped;
        }
      }
    ),
    At(
      { target: 'Set', proto: !0, real: !0, forced: dt },
      {
        symmetricDifference: function (t) {
          var e = D(this),
            n = new (ze(e, It('Set')))(e),
            r = de(n.delete),
            i = de(n.add);
          return (
            Ne(t, function (t) {
              r.call(n, t) || i.call(n, t);
            }),
            n
          );
        }
      }
    ),
    At(
      { target: 'Set', proto: !0, real: !0, forced: dt },
      {
        union: function (t) {
          var e = D(this),
            e = new (ze(e, It('Set')))(e);
          return Ne(t, de(e.add), { that: e }), e;
        }
      }
    );
  var yo = Math.floor;
  At(
    { target: 'Number', stat: !0 },
    {
      isInteger: function (t) {
        return !k(t) && isFinite(t) && yo(t) === t;
      }
    }
  );
  Lt.Number.isInteger;
  At(
    { target: 'Number', stat: !0 },
    {
      isNaN: function (t) {
        return t != t;
      }
    }
  );
  Lt.Number.isNaN;
  var go = function (t, e) {
    return (go =
      Object.setPrototypeOf ||
      ({ __proto__: [] } instanceof Array &&
        function (t, e) {
          t.__proto__ = e;
        }) ||
      function (t, e) {
        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
      })(t, e);
  };
  function mo(t, e) {
    function n() {
      this.constructor = t;
    }
    go(t, e),
      (t.prototype =
        null === e ? Object.create(e) : ((n.prototype = e.prototype), new n()));
  }
  var bo = function () {
    return (bo =
      Object.assign ||
      function (t) {
        for (var e, n = 1, r = arguments.length; n < r; n++)
          for (var i in (e = arguments[n]))
            Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
        return t;
      }).apply(this, arguments);
  };
  function _o(t, s, a, u) {
    return new (a = a || Promise)(function (n, e) {
      function r(t) {
        try {
          o(u.next(t));
        } catch (t) {
          e(t);
        }
      }
      function i(t) {
        try {
          o(u.throw(t));
        } catch (t) {
          e(t);
        }
      }
      function o(t) {
        var e;
        t.done
          ? n(t.value)
          : ((e = t.value) instanceof a
              ? e
              : new a(function (t) {
                  t(e);
                })
            ).then(r, i);
      }
      o((u = u.apply(t, s || [])).next());
    });
  }
  function wo(n, r) {
    var i,
      o,
      s,
      a = {
        label: 0,
        sent: function () {
          if (1 & s[0]) throw s[1];
          return s[1];
        },
        trys: [],
        ops: []
      },
      t = { next: e(0), throw: e(1), return: e(2) };
    return (
      'function' == typeof Symbol &&
        (t[Symbol.iterator] = function () {
          return this;
        }),
      t
    );
    function e(e) {
      return function (t) {
        return (function (e) {
          if (i) throw new TypeError('Generator is already executing.');
          for (; a; )
            try {
              if (
                ((i = 1),
                o &&
                  (s =
                    2 & e[0]
                      ? o.return
                      : e[0]
                      ? o.throw || ((s = o.return) && s.call(o), 0)
                      : o.next) &&
                  !(s = s.call(o, e[1])).done)
              )
                return s;
              switch (((o = 0), s && (e = [2 & e[0], s.value]), e[0])) {
                case 0:
                case 1:
                  s = e;
                  break;
                case 4:
                  return a.label++, { value: e[1], done: !1 };
                case 5:
                  a.label++, (o = e[1]), (e = [0]);
                  continue;
                case 7:
                  (e = a.ops.pop()), a.trys.pop();
                  continue;
                default:
                  if (
                    !(s = 0 < (s = a.trys).length && s[s.length - 1]) &&
                    (6 === e[0] || 2 === e[0])
                  ) {
                    a = 0;
                    continue;
                  }
                  if (3 === e[0] && (!s || (e[1] > s[0] && e[1] < s[3]))) {
                    a.label = e[1];
                    break;
                  }
                  if (6 === e[0] && a.label < s[1]) {
                    (a.label = s[1]), (s = e);
                    break;
                  }
                  if (s && a.label < s[2]) {
                    (a.label = s[2]), a.ops.push(e);
                    break;
                  }
                  s[2] && a.ops.pop(), a.trys.pop();
                  continue;
              }
              e = r.call(n, a);
            } catch (t) {
              (e = [6, t]), (o = 0);
            } finally {
              i = s = 0;
            }
          if (5 & e[0]) throw e[1];
          return { value: e[0] ? e[1] : void 0, done: !0 };
        })([e, t]);
      };
    }
  }
  function Eo(t) {
    var e = 'function' == typeof Symbol && Symbol.iterator,
      n = e && t[e],
      r = 0;
    if (n) return n.call(t);
    if (t && 'number' == typeof t.length)
      return {
        next: function () {
          return (
            t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t }
          );
        }
      };
    throw new TypeError(
      e ? 'Object is not iterable.' : 'Symbol.iterator is not defined.'
    );
  }
  function Io(t, e) {
    var n = 'function' == typeof Symbol && t[Symbol.iterator];
    if (!n) return t;
    var r,
      i,
      o = n.call(t),
      s = [];
    try {
      for (; (void 0 === e || 0 < e--) && !(r = o.next()).done; )
        s.push(r.value);
    } catch (t) {
      i = { error: t };
    } finally {
      try {
        r && !r.done && (n = o.return) && n.call(o);
      } finally {
        if (i) throw i.error;
      }
    }
    return s;
  }
  function To() {
    for (var t = [], e = 0; e < arguments.length; e++)
      t = t.concat(Io(arguments[e]));
    return t;
  }
  function So() {
    for (var t = 0, e = 0, n = arguments.length; e < n; e++)
      t += arguments[e].length;
    for (var r = Array(t), i = 0, e = 0; e < n; e++)
      for (var o = arguments[e], s = 0, a = o.length; s < a; s++, i++)
        r[i] = o[s];
    return r;
  }
  function Co(t) {
    for (var e = [], n = 0, r = 0; r < t.length; r++) {
      var i = t.charCodeAt(r);
      i < 128
        ? (e[n++] = i)
        : (i < 2048
            ? (e[n++] = (i >> 6) | 192)
            : (55296 == (64512 & i) &&
              r + 1 < t.length &&
              56320 == (64512 & t.charCodeAt(r + 1))
                ? ((i =
                    65536 + ((1023 & i) << 10) + (1023 & t.charCodeAt(++r))),
                  (e[n++] = (i >> 18) | 240),
                  (e[n++] = ((i >> 12) & 63) | 128))
                : (e[n++] = (i >> 12) | 224),
              (e[n++] = ((i >> 6) & 63) | 128)),
          (e[n++] = (63 & i) | 128));
    }
    return e;
  }
  function No(t) {
    try {
      return Oo.decodeString(t, !0);
    } catch (t) {
      console.error('base64Decode failed: ', t);
    }
    return null;
  }
  var Ao = {
      NODE_CLIENT: !1,
      NODE_ADMIN: !1,
      SDK_VERSION: '${JSCORE_VERSION}'
    },
    ko = function (t, e) {
      if (!t) throw Ro(e);
    },
    Ro = function (t) {
      return new Error(
        'Firebase Database (' +
          Ao.SDK_VERSION +
          ') INTERNAL ASSERT FAILED: ' +
          t
      );
    },
    Oo = {
      byteToCharMap_: null,
      charToByteMap_: null,
      byteToCharMapWebSafe_: null,
      charToByteMapWebSafe_: null,
      ENCODED_VALS_BASE:
        'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',
      get ENCODED_VALS() {
        return this.ENCODED_VALS_BASE + '+/=';
      },
      get ENCODED_VALS_WEBSAFE() {
        return this.ENCODED_VALS_BASE + '-_.';
      },
      HAS_NATIVE_SUPPORT: 'function' == typeof atob,
      encodeByteArray: function (t, e) {
        if (!Array.isArray(t))
          throw Error('encodeByteArray takes an array as a parameter');
        this.init_();
        for (
          var n = e ? this.byteToCharMapWebSafe_ : this.byteToCharMap_,
            r = [],
            i = 0;
          i < t.length;
          i += 3
        ) {
          var o = t[i],
            s = i + 1 < t.length,
            a = s ? t[i + 1] : 0,
            u = i + 2 < t.length,
            c = u ? t[i + 2] : 0,
            h = o >> 2,
            o = ((3 & o) << 4) | (a >> 4),
            a = ((15 & a) << 2) | (c >> 6),
            c = 63 & c;
          u || ((c = 64), s || (a = 64)), r.push(n[h], n[o], n[a], n[c]);
        }
        return r.join('');
      },
      encodeString: function (t, e) {
        return this.HAS_NATIVE_SUPPORT && !e
          ? btoa(t)
          : this.encodeByteArray(Co(t), e);
      },
      decodeString: function (t, e) {
        return this.HAS_NATIVE_SUPPORT && !e
          ? atob(t)
          : (function (t) {
              for (var e = [], n = 0, r = 0; n < t.length; ) {
                var i,
                  o,
                  s,
                  a = t[n++];
                a < 128
                  ? (e[r++] = String.fromCharCode(a))
                  : 191 < a && a < 224
                  ? ((o = t[n++]),
                    (e[r++] = String.fromCharCode(((31 & a) << 6) | (63 & o))))
                  : 239 < a && a < 365
                  ? ((i =
                      (((7 & a) << 18) |
                        ((63 & (o = t[n++])) << 12) |
                        ((63 & (s = t[n++])) << 6) |
                        (63 & t[n++])) -
                      65536),
                    (e[r++] = String.fromCharCode(55296 + (i >> 10))),
                    (e[r++] = String.fromCharCode(56320 + (1023 & i))))
                  : ((o = t[n++]),
                    (s = t[n++]),
                    (e[r++] = String.fromCharCode(
                      ((15 & a) << 12) | ((63 & o) << 6) | (63 & s)
                    )));
              }
              return e.join('');
            })(this.decodeStringToByteArray(t, e));
      },
      decodeStringToByteArray: function (t, e) {
        this.init_();
        for (
          var n = e ? this.charToByteMapWebSafe_ : this.charToByteMap_,
            r = [],
            i = 0;
          i < t.length;

        ) {
          var o = n[t.charAt(i++)],
            s = i < t.length ? n[t.charAt(i)] : 0,
            a = ++i < t.length ? n[t.charAt(i)] : 64,
            u = ++i < t.length ? n[t.charAt(i)] : 64;
          if ((++i, null == o || null == s || null == a || null == u))
            throw Error();
          o = (o << 2) | (s >> 4);
          r.push(o),
            64 !== a &&
              ((s = ((s << 4) & 240) | (a >> 2)),
              r.push(s),
              64 !== u && ((u = ((a << 6) & 192) | u), r.push(u)));
        }
        return r;
      },
      init_: function () {
        if (!this.byteToCharMap_) {
          (this.byteToCharMap_ = {}),
            (this.charToByteMap_ = {}),
            (this.byteToCharMapWebSafe_ = {}),
            (this.charToByteMapWebSafe_ = {});
          for (var t = 0; t < this.ENCODED_VALS.length; t++)
            (this.byteToCharMap_[t] = this.ENCODED_VALS.charAt(t)),
              (this.charToByteMap_[this.byteToCharMap_[t]] = t),
              (this.byteToCharMapWebSafe_[t] = this.ENCODED_VALS_WEBSAFE.charAt(
                t
              )),
              (this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]] = t) >=
                this.ENCODED_VALS_BASE.length &&
                ((this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)] = t),
                (this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)] = t));
        }
      }
    };
  function Po(t) {
    return Do(void 0, t);
  }
  function Do(t, e) {
    if (!(e instanceof Object)) return e;
    switch (e.constructor) {
      case Date:
        return new Date(e.getTime());
      case Object:
        void 0 === t && (t = {});
        break;
      case Array:
        t = [];
        break;
      default:
        return e;
    }
    for (var n in e)
      e.hasOwnProperty(n) && '__proto__' !== n && (t[n] = Do(t[n], e[n]));
    return t;
  }
  var xo =
    ((Lo.prototype.wrapCallback = function (n) {
      var r = this;
      return function (t, e) {
        t ? r.reject(t) : r.resolve(e),
          'function' == typeof n &&
            (r.promise.catch(function () {}), 1 === n.length ? n(t) : n(t, e));
      };
    }),
    Lo);
  function Lo() {
    var n = this;
    (this.reject = function () {}),
      (this.resolve = function () {}),
      (this.promise = new Promise(function (t, e) {
        (n.resolve = t), (n.reject = e);
      }));
  }
  function Mo() {
    return 'undefined' != typeof navigator &&
      'string' == typeof navigator.userAgent
      ? navigator.userAgent
      : '';
  }
  function Fo() {
    return (
      'undefined' != typeof window &&
      (window.cordova || window.phonegap || window.PhoneGap) &&
      /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mo())
    );
  }
  function Uo() {
    var t =
      'object' == typeof chrome
        ? chrome.runtime
        : 'object' == typeof browser
        ? browser.runtime
        : void 0;
    return 'object' == typeof t && void 0 !== t.id;
  }
  function jo() {
    return 'object' == typeof navigator && 'ReactNative' === navigator.product;
  }
  function Vo() {
    return !0 === Ao.NODE_ADMIN;
  }
  function qo() {
    return 'indexedDB' in self && null != indexedDB;
  }
  function Bo() {
    return new Promise(function (t, e) {
      try {
        var n = !0,
          r = 'validate-browser-context-for-indexeddb-analytics-module',
          i = window.indexedDB.open(r);
        (i.onsuccess = function () {
          i.result.close(), n || window.indexedDB.deleteDatabase(r), t(!0);
        }),
          (i.onupgradeneeded = function () {
            n = !1;
          }),
          (i.onerror = function () {
            var t;
            e(
              (null === (t = i.error) || void 0 === t ? void 0 : t.message) ||
                ''
            );
          });
      } catch (t) {
        e(t);
      }
    });
  }
  function Wo() {
    return !(!navigator || !navigator.cookieEnabled);
  }
  var Ko,
    Ho = 'FirebaseError',
    zo = (mo(Go, (Ko = Error)), Go);
  function Go(t, e, n) {
    e = Ko.call(this, e) || this;
    return (
      (e.code = t),
      (e.customData = n),
      (e.name = Ho),
      Object.setPrototypeOf(e, Go.prototype),
      Error.captureStackTrace &&
        Error.captureStackTrace(e, Qo.prototype.create),
      e
    );
  }
  var Qo =
    ((Yo.prototype.create = function (t) {
      for (var e = [], n = 1; n < arguments.length; n++)
        e[n - 1] = arguments[n];
      var r,
        i = e[0] || {},
        o = this.service + '/' + t,
        t = this.errors[t],
        t = t
          ? ((r = i),
            t.replace(Xo, function (t, e) {
              var n = r[e];
              return null != n ? String(n) : '<' + e + '?>';
            }))
          : 'Error',
        t = this.serviceName + ': ' + t + ' (' + o + ').';
      return new zo(o, t, i);
    }),
    Yo);
  function Yo(t, e, n) {
    (this.service = t), (this.serviceName = e), (this.errors = n);
  }
  var Xo = /\{\$([^}]+)}/g;
  function Jo(t) {
    return JSON.parse(t);
  }
  function $o(t) {
    return JSON.stringify(t);
  }
  function Zo(t) {
    var e = {},
      n = {},
      r = {},
      i = '';
    try {
      var o = t.split('.'),
        e = Jo(No(o[0]) || ''),
        n = Jo(No(o[1]) || ''),
        i = o[2],
        r = n.d || {};
      delete n.d;
    } catch (t) {}
    return { header: e, claims: n, data: r, signature: i };
  }
  function ts(t, e) {
    return Object.prototype.hasOwnProperty.call(t, e);
  }
  function es(t, e) {
    return Object.prototype.hasOwnProperty.call(t, e) ? t[e] : void 0;
  }
  function ns(t) {
    for (var e in t) if (Object.prototype.hasOwnProperty.call(t, e)) return !1;
    return !0;
  }
  function rs(t, e, n) {
    var r,
      i = {};
    for (r in t)
      Object.prototype.hasOwnProperty.call(t, r) &&
        (i[r] = e.call(n, t[r], r, t));
    return i;
  }
  var is =
    ((os.prototype.reset = function () {
      (this.chain_[0] = 1732584193),
        (this.chain_[1] = 4023233417),
        (this.chain_[2] = 2562383102),
        (this.chain_[3] = 271733878),
        (this.chain_[4] = 3285377520),
        (this.inbuf_ = 0),
        (this.total_ = 0);
    }),
    (os.prototype.compress_ = function (t, e) {
      e = e || 0;
      var n = this.W_;
      if ('string' == typeof t)
        for (var r = 0; r < 16; r++)
          (n[r] =
            (t.charCodeAt(e) << 24) |
            (t.charCodeAt(e + 1) << 16) |
            (t.charCodeAt(e + 2) << 8) |
            t.charCodeAt(e + 3)),
            (e += 4);
      else
        for (r = 0; r < 16; r++)
          (n[r] = (t[e] << 24) | (t[e + 1] << 16) | (t[e + 2] << 8) | t[e + 3]),
            (e += 4);
      for (r = 16; r < 80; r++) {
        var i = n[r - 3] ^ n[r - 8] ^ n[r - 14] ^ n[r - 16];
        n[r] = 4294967295 & ((i << 1) | (i >>> 31));
      }
      for (
        var o,
          s,
          a = this.chain_[0],
          u = this.chain_[1],
          c = this.chain_[2],
          h = this.chain_[3],
          l = this.chain_[4],
          r = 0;
        r < 80;
        r++
      ) {
        s =
          r < 40
            ? r < 20
              ? ((o = h ^ (u & (c ^ h))), 1518500249)
              : ((o = u ^ c ^ h), 1859775393)
            : r < 60
            ? ((o = (u & c) | (h & (u | c))), 2400959708)
            : ((o = u ^ c ^ h), 3395469782);
        (i = (((a << 5) | (a >>> 27)) + o + l + s + n[r]) & 4294967295),
          (l = h),
          (h = c),
          (c = 4294967295 & ((u << 30) | (u >>> 2))),
          (u = a),
          (a = i);
      }
      (this.chain_[0] = (this.chain_[0] + a) & 4294967295),
        (this.chain_[1] = (this.chain_[1] + u) & 4294967295),
        (this.chain_[2] = (this.chain_[2] + c) & 4294967295),
        (this.chain_[3] = (this.chain_[3] + h) & 4294967295),
        (this.chain_[4] = (this.chain_[4] + l) & 4294967295);
    }),
    (os.prototype.update = function (t, e) {
      if (null != t) {
        void 0 === e && (e = t.length);
        for (
          var n = e - this.blockSize, r = 0, i = this.buf_, o = this.inbuf_;
          r < e;

        ) {
          if (0 === o)
            for (; r <= n; ) this.compress_(t, r), (r += this.blockSize);
          if ('string' == typeof t) {
            for (; r < e; )
              if (((i[o] = t.charCodeAt(r)), ++r, ++o === this.blockSize)) {
                this.compress_(i), (o = 0);
                break;
              }
          } else
            for (; r < e; )
              if (((i[o] = t[r]), ++r, ++o === this.blockSize)) {
                this.compress_(i), (o = 0);
                break;
              }
        }
        (this.inbuf_ = o), (this.total_ += e);
      }
    }),
    (os.prototype.digest = function () {
      var t = [],
        e = 8 * this.total_;
      this.inbuf_ < 56
        ? this.update(this.pad_, 56 - this.inbuf_)
        : this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));
      for (var n = this.blockSize - 1; 56 <= n; n--)
        (this.buf_[n] = 255 & e), (e /= 256);
      this.compress_(this.buf_);
      for (var r = 0, n = 0; n < 5; n++)
        for (var i = 24; 0 <= i; i -= 8)
          (t[r] = (this.chain_[n] >> i) & 255), ++r;
      return t;
    }),
    os);
  function os() {
    (this.chain_ = []),
      (this.buf_ = []),
      (this.W_ = []),
      (this.pad_ = []),
      (this.inbuf_ = 0),
      (this.total_ = 0),
      (this.blockSize = 64),
      (this.pad_[0] = 128);
    for (var t = 1; t < this.blockSize; ++t) this.pad_[t] = 0;
    this.reset();
  }
  function ss(t, e) {
    e = new as(t, e);
    return e.subscribe.bind(e);
  }
  var as =
    ((us.prototype.next = function (e) {
      this.forEachObserver(function (t) {
        t.next(e);
      });
    }),
    (us.prototype.error = function (e) {
      this.forEachObserver(function (t) {
        t.error(e);
      }),
        this.close(e);
    }),
    (us.prototype.complete = function () {
      this.forEachObserver(function (t) {
        t.complete();
      }),
        this.close();
    }),
    (us.prototype.subscribe = function (t, e, n) {
      var r,
        i = this;
      if (void 0 === t && void 0 === e && void 0 === n)
        throw new Error('Missing Observer.');
      void 0 ===
        (r = (function (t, e) {
          if ('object' != typeof t || null === t) return !1;
          for (var n = 0, r = e; n < r.length; n++) {
            var i = r[n];
            if (i in t && 'function' == typeof t[i]) return !0;
          }
          return !1;
        })(t, ['next', 'error', 'complete'])
          ? t
          : { next: t, error: e, complete: n }).next && (r.next = cs),
        void 0 === r.error && (r.error = cs),
        void 0 === r.complete && (r.complete = cs);
      n = this.unsubscribeOne.bind(this, this.observers.length);
      return (
        this.finalized &&
          this.task.then(function () {
            try {
              i.finalError ? r.error(i.finalError) : r.complete();
            } catch (t) {}
          }),
        this.observers.push(r),
        n
      );
    }),
    (us.prototype.unsubscribeOne = function (t) {
      void 0 !== this.observers &&
        void 0 !== this.observers[t] &&
        (delete this.observers[t],
        --this.observerCount,
        0 === this.observerCount &&
          void 0 !== this.onNoObservers &&
          this.onNoObservers(this));
    }),
    (us.prototype.forEachObserver = function (t) {
      if (!this.finalized)
        for (var e = 0; e < this.observers.length; e++) this.sendOne(e, t);
    }),
    (us.prototype.sendOne = function (t, e) {
      var n = this;
      this.task.then(function () {
        if (void 0 !== n.observers && void 0 !== n.observers[t])
          try {
            e(n.observers[t]);
          } catch (t) {
            'undefined' != typeof console && console.error && console.error(t);
          }
      });
    }),
    (us.prototype.close = function (t) {
      var e = this;
      this.finalized ||
        ((this.finalized = !0),
        void 0 !== t && (this.finalError = t),
        this.task.then(function () {
          (e.observers = void 0), (e.onNoObservers = void 0);
        }));
    }),
    us);
  function us(t, e) {
    var n = this;
    (this.observers = []),
      (this.unsubscribes = []),
      (this.observerCount = 0),
      (this.task = Promise.resolve()),
      (this.finalized = !1),
      (this.onNoObservers = e),
      this.task
        .then(function () {
          t(n);
        })
        .catch(function (t) {
          n.error(t);
        });
  }
  function cs() {}
  function hs(t, e, n, r) {
    var i;
    if (
      (r < e
        ? (i = 'at least ' + e)
        : n < r && (i = 0 === n ? 'none' : 'no more than ' + n),
      i)
    )
      throw new Error(
        t +
          ' failed: Was called with ' +
          r +
          (1 === r ? ' argument.' : ' arguments.') +
          ' Expects ' +
          i +
          '.'
      );
  }
  function ls(t, e, n) {
    var r = '';
    switch (e) {
      case 1:
        r = n ? 'first' : 'First';
        break;
      case 2:
        r = n ? 'second' : 'Second';
        break;
      case 3:
        r = n ? 'third' : 'Third';
        break;
      case 4:
        r = n ? 'fourth' : 'Fourth';
        break;
      default:
        throw new Error(
          'errorPrefix called with argumentNumber > 4.  Need to update it?'
        );
    }
    t += ' failed: ';
    return (t += r + ' argument ');
  }
  function fs(t, e, n, r) {
    if ((!r || n) && 'function' != typeof n)
      throw new Error(ls(t, e, r) + 'must be a valid function.');
  }
  function ps(t, e, n, r) {
    if ((!r || n) && ('object' != typeof n || null === n))
      throw new Error(ls(t, e, r) + 'must be a valid context object.');
  }
  function ds(t) {
    for (var e = 0, n = 0; n < t.length; n++) {
      var r = t.charCodeAt(n);
      r < 128
        ? e++
        : r < 2048
        ? (e += 2)
        : 55296 <= r && r <= 56319
        ? ((e += 4), n++)
        : (e += 3);
    }
    return e;
  }
  var vs = 1e3,
    ys = 2,
    gs = 144e5,
    ms = 0.5;
  function bs(t, e, n) {
    void 0 === e && (e = vs), void 0 === n && (n = ys);
    (n = e * Math.pow(n, t)),
      (t = Math.round(ms * n * (Math.random() - 0.5) * 2));
    return Math.min(gs, n + t);
  }
  var _s =
    ((ws.prototype.setInstantiationMode = function (t) {
      return (this.instantiationMode = t), this;
    }),
    (ws.prototype.setMultipleInstances = function (t) {
      return (this.multipleInstances = t), this;
    }),
    (ws.prototype.setServiceProps = function (t) {
      return (this.serviceProps = t), this;
    }),
    ws);
  function ws(t, e, n) {
    (this.name = t),
      (this.instanceFactory = e),
      (this.type = n),
      (this.multipleInstances = !1),
      (this.serviceProps = {}),
      (this.instantiationMode = 'LAZY');
  }
  var Es = '[DEFAULT]',
    Is =
      ((Ts.prototype.get = function (t) {
        void 0 === t && (t = Es);
        var e = this.normalizeInstanceIdentifier(t);
        if (!this.instancesDeferred.has(e)) {
          var n = new xo();
          this.instancesDeferred.set(e, n);
          try {
            var r = this.getOrInitializeService(e);
            r && n.resolve(r);
          } catch (t) {}
        }
        return this.instancesDeferred.get(e).promise;
      }),
      (Ts.prototype.getImmediate = function (t) {
        var e = bo({ identifier: Es, optional: !1 }, t),
          t = e.identifier,
          n = e.optional,
          r = this.normalizeInstanceIdentifier(t);
        try {
          var i = this.getOrInitializeService(r);
          if (i) return i;
          if (n) return null;
          throw Error('Service ' + this.name + ' is not available');
        } catch (t) {
          if (n) return null;
          throw t;
        }
      }),
      (Ts.prototype.getComponent = function () {
        return this.component;
      }),
      (Ts.prototype.setComponent = function (t) {
        var e, n;
        if (t.name !== this.name)
          throw Error(
            'Mismatching Component ' +
              t.name +
              ' for Provider ' +
              this.name +
              '.'
          );
        if (this.component)
          throw Error(
            'Component for ' + this.name + ' has already been provided'
          );
        if ('EAGER' === (this.component = t).instantiationMode)
          try {
            this.getOrInitializeService(Es);
          } catch (t) {}
        try {
          for (
            var r = Eo(this.instancesDeferred.entries()), i = r.next();
            !i.done;
            i = r.next()
          ) {
            var o = Io(i.value, 2),
              s = o[0],
              a = o[1],
              u = this.normalizeInstanceIdentifier(s);
            try {
              var c = this.getOrInitializeService(u);
              a.resolve(c);
            } catch (t) {}
          }
        } catch (t) {
          e = { error: t };
        } finally {
          try {
            i && !i.done && (n = r.return) && n.call(r);
          } finally {
            if (e) throw e.error;
          }
        }
      }),
      (Ts.prototype.clearInstance = function (t) {
        void 0 === t && (t = Es),
          this.instancesDeferred.delete(t),
          this.instances.delete(t);
      }),
      (Ts.prototype.delete = function () {
        return _o(this, void 0, void 0, function () {
          var e;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return (
                  (e = Array.from(this.instances.values())),
                  [
                    4,
                    Promise.all(
                      To(
                        e
                          .filter(function (t) {
                            return 'INTERNAL' in t;
                          })
                          .map(function (t) {
                            return t.INTERNAL.delete();
                          }),
                        e
                          .filter(function (t) {
                            return '_delete' in t;
                          })
                          .map(function (t) {
                            return t._delete();
                          })
                      )
                    )
                  ]
                );
              case 1:
                return t.sent(), [2];
            }
          });
        });
      }),
      (Ts.prototype.isComponentSet = function () {
        return null != this.component;
      }),
      (Ts.prototype.getOrInitializeService = function (t) {
        var e,
          n = this.instances.get(t);
        return (
          !n &&
            this.component &&
            ((n = this.component.instanceFactory(
              this.container,
              (e = t) === Es ? void 0 : e
            )),
            this.instances.set(t, n)),
          n || null
        );
      }),
      (Ts.prototype.normalizeInstanceIdentifier = function (t) {
        return !this.component || this.component.multipleInstances ? t : Es;
      }),
      Ts);
  function Ts(t, e) {
    (this.name = t),
      (this.container = e),
      (this.component = null),
      (this.instances = new Map()),
      (this.instancesDeferred = new Map());
  }
  var Ss =
    ((Cs.prototype.addComponent = function (t) {
      var e = this.getProvider(t.name);
      if (e.isComponentSet())
        throw new Error(
          'Component ' +
            t.name +
            ' has already been registered with ' +
            this.name
        );
      e.setComponent(t);
    }),
    (Cs.prototype.addOrOverwriteComponent = function (t) {
      this.getProvider(t.name).isComponentSet() &&
        this.providers.delete(t.name),
        this.addComponent(t);
    }),
    (Cs.prototype.getProvider = function (t) {
      if (this.providers.has(t)) return this.providers.get(t);
      var e = new Is(t, this);
      return this.providers.set(t, e), e;
    }),
    (Cs.prototype.getProviders = function () {
      return Array.from(this.providers.values());
    }),
    Cs);
  function Cs(t) {
    (this.name = t), (this.providers = new Map());
  }
  function Ns() {
    for (var t = 0, e = 0, n = arguments.length; e < n; e++)
      t += arguments[e].length;
    for (var r = Array(t), i = 0, e = 0; e < n; e++)
      for (var o = arguments[e], s = 0, a = o.length; s < a; s++, i++)
        r[i] = o[s];
    return r;
  }
  var As,
    ks = [];
  ((Gn = As = As || {})[(Gn.DEBUG = 0)] = 'DEBUG'),
    (Gn[(Gn.VERBOSE = 1)] = 'VERBOSE'),
    (Gn[(Gn.INFO = 2)] = 'INFO'),
    (Gn[(Gn.WARN = 3)] = 'WARN'),
    (Gn[(Gn.ERROR = 4)] = 'ERROR'),
    (Gn[(Gn.SILENT = 5)] = 'SILENT');
  function Rs(t, e) {
    for (var n = [], r = 2; r < arguments.length; r++) n[r - 2] = arguments[r];
    if (!(e < t.logLevel)) {
      var i = new Date().toISOString(),
        o = Ds[e];
      if (!o)
        throw new Error(
          'Attempted to log a message with an invalid logType (value: ' +
            e +
            ')'
        );
      console[o].apply(console, Ns(['[' + i + ']  ' + t.name + ':'], n));
    }
  }
  var Os = {
      debug: As.DEBUG,
      verbose: As.VERBOSE,
      info: As.INFO,
      warn: As.WARN,
      error: As.ERROR,
      silent: As.SILENT
    },
    Ps = As.INFO,
    Ds =
      (((vt = {})[As.DEBUG] = 'log'),
      (vt[As.VERBOSE] = 'log'),
      (vt[As.INFO] = 'info'),
      (vt[As.WARN] = 'warn'),
      (vt[As.ERROR] = 'error'),
      vt),
    xs =
      (Object.defineProperty(Ls.prototype, 'logLevel', {
        get: function () {
          return this._logLevel;
        },
        set: function (t) {
          if (!(t in As))
            throw new TypeError(
              'Invalid value "' + t + '" assigned to `logLevel`'
            );
          this._logLevel = t;
        },
        enumerable: !1,
        configurable: !0
      }),
      (Ls.prototype.setLogLevel = function (t) {
        this._logLevel = 'string' == typeof t ? Os[t] : t;
      }),
      Object.defineProperty(Ls.prototype, 'logHandler', {
        get: function () {
          return this._logHandler;
        },
        set: function (t) {
          if ('function' != typeof t)
            throw new TypeError(
              'Value assigned to `logHandler` must be a function'
            );
          this._logHandler = t;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Ls.prototype, 'userLogHandler', {
        get: function () {
          return this._userLogHandler;
        },
        set: function (t) {
          this._userLogHandler = t;
        },
        enumerable: !1,
        configurable: !0
      }),
      (Ls.prototype.debug = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        this._userLogHandler &&
          this._userLogHandler.apply(this, Ns([this, As.DEBUG], t)),
          this._logHandler.apply(this, Ns([this, As.DEBUG], t));
      }),
      (Ls.prototype.log = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        this._userLogHandler &&
          this._userLogHandler.apply(this, Ns([this, As.VERBOSE], t)),
          this._logHandler.apply(this, Ns([this, As.VERBOSE], t));
      }),
      (Ls.prototype.info = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        this._userLogHandler &&
          this._userLogHandler.apply(this, Ns([this, As.INFO], t)),
          this._logHandler.apply(this, Ns([this, As.INFO], t));
      }),
      (Ls.prototype.warn = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        this._userLogHandler &&
          this._userLogHandler.apply(this, Ns([this, As.WARN], t)),
          this._logHandler.apply(this, Ns([this, As.WARN], t));
      }),
      (Ls.prototype.error = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        this._userLogHandler &&
          this._userLogHandler.apply(this, Ns([this, As.ERROR], t)),
          this._logHandler.apply(this, Ns([this, As.ERROR], t));
      }),
      Ls);
  function Ls(t) {
    (this.name = t),
      (this._logLevel = Ps),
      (this._logHandler = Rs),
      (this._userLogHandler = null),
      ks.push(this);
  }
  function Ms(e) {
    ks.forEach(function (t) {
      t.setLogLevel(e);
    });
  }
  var Gn =
      (((dt = {})['no-app'] =
        "No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),
      (dt['bad-app-name'] = "Illegal App name: '{$appName}"),
      (dt['duplicate-app'] = "Firebase App named '{$appName}' already exists"),
      (dt['app-deleted'] = "Firebase App named '{$appName}' already deleted"),
      (dt['invalid-app-argument'] =
        'firebase.{$appName}() takes either no argument or a Firebase App instance.'),
      (dt['invalid-log-argument'] =
        'First argument to `onLog` must be null or a function.'),
      dt),
    Fs = new Qo('app', 'Firebase', Gn),
    Us = '@firebase/app',
    js = '[DEFAULT]',
    Vs =
      (((vt = {})[Us] = 'fire-core'),
      (vt['@firebase/analytics'] = 'fire-analytics'),
      (vt['@firebase/auth'] = 'fire-auth'),
      (vt['@firebase/database'] = 'fire-rtdb'),
      (vt['@firebase/functions'] = 'fire-fn'),
      (vt['@firebase/installations'] = 'fire-iid'),
      (vt['@firebase/messaging'] = 'fire-fcm'),
      (vt['@firebase/performance'] = 'fire-perf'),
      (vt['@firebase/remote-config'] = 'fire-rc'),
      (vt['@firebase/storage'] = 'fire-gcs'),
      (vt['@firebase/firestore'] = 'fire-fst'),
      (vt['fire-js'] = 'fire-js'),
      (vt['firebase-wrapper'] = 'fire-js-all'),
      vt),
    qs = new xs('@firebase/app'),
    Bs =
      (Object.defineProperty(Ws.prototype, 'automaticDataCollectionEnabled', {
        get: function () {
          return this.checkDestroyed_(), this.automaticDataCollectionEnabled_;
        },
        set: function (t) {
          this.checkDestroyed_(), (this.automaticDataCollectionEnabled_ = t);
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Ws.prototype, 'name', {
        get: function () {
          return this.checkDestroyed_(), this.name_;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Ws.prototype, 'options', {
        get: function () {
          return this.checkDestroyed_(), this.options_;
        },
        enumerable: !1,
        configurable: !0
      }),
      (Ws.prototype.delete = function () {
        var e = this;
        return new Promise(function (t) {
          e.checkDestroyed_(), t();
        })
          .then(function () {
            return (
              e.firebase_.INTERNAL.removeApp(e.name_),
              Promise.all(
                e.container.getProviders().map(function (t) {
                  return t.delete();
                })
              )
            );
          })
          .then(function () {
            e.isDeleted_ = !0;
          });
      }),
      (Ws.prototype._getService = function (t, e) {
        return (
          void 0 === e && (e = js),
          this.checkDestroyed_(),
          this.container.getProvider(t).getImmediate({ identifier: e })
        );
      }),
      (Ws.prototype._removeServiceInstance = function (t, e) {
        void 0 === e && (e = js),
          this.container.getProvider(t).clearInstance(e);
      }),
      (Ws.prototype._addComponent = function (e) {
        try {
          this.container.addComponent(e);
        } catch (t) {
          qs.debug(
            'Component ' +
              e.name +
              ' failed to register with FirebaseApp ' +
              this.name,
            t
          );
        }
      }),
      (Ws.prototype._addOrOverwriteComponent = function (t) {
        this.container.addOrOverwriteComponent(t);
      }),
      (Ws.prototype.checkDestroyed_ = function () {
        if (this.isDeleted_)
          throw Fs.create('app-deleted', { appName: this.name_ });
      }),
      Ws);
  function Ws(t, e, n) {
    var r,
      i,
      o = this;
    (this.firebase_ = n),
      (this.isDeleted_ = !1),
      (this.name_ = e.name),
      (this.automaticDataCollectionEnabled_ =
        e.automaticDataCollectionEnabled || !1),
      (this.options_ = Po(t)),
      (this.container = new Ss(e.name)),
      this._addComponent(
        new _s(
          'app',
          function () {
            return o;
          },
          'PUBLIC'
        )
      );
    try {
      for (
        var s = Eo(this.firebase_.INTERNAL.components.values()), a = s.next();
        !a.done;
        a = s.next()
      ) {
        var u = a.value;
        this._addComponent(u);
      }
    } catch (t) {
      r = { error: t };
    } finally {
      try {
        a && !a.done && (i = s.return) && i.call(s);
      } finally {
        if (r) throw r.error;
      }
    }
  }
  (Bs.prototype.name && Bs.prototype.options) ||
    Bs.prototype.delete ||
    console.log('dc');
  var Ks = '8.1.1';
  function Hs(u) {
    var c = {},
      h = new Map(),
      l = {
        __esModule: !0,
        initializeApp: function (t, e) {
          void 0 === e && (e = {});
          {
            ('object' == typeof e && null !== e) || (e = { name: e });
          }
          var n = e;
          void 0 === n.name && (n.name = js);
          e = n.name;
          if ('string' != typeof e || !e)
            throw Fs.create('bad-app-name', { appName: String(e) });
          if (ts(c, e)) throw Fs.create('duplicate-app', { appName: e });
          n = new u(t, n, l);
          return (c[e] = n);
        },
        app: f,
        registerVersion: function (t, e, n) {
          var r = null !== (i = Vs[t]) && void 0 !== i ? i : t;
          n && (r += '-' + n);
          var i = r.match(/\s|\//),
            t = e.match(/\s|\//);
          if (i || t) {
            n = [
              'Unable to register library "' + r + '" with version "' + e + '":'
            ];
            return (
              i &&
                n.push(
                  'library name "' +
                    r +
                    '" contains illegal characters (whitespace or "/")'
                ),
              i && t && n.push('and'),
              t &&
                n.push(
                  'version name "' +
                    e +
                    '" contains illegal characters (whitespace or "/")'
                ),
              void qs.warn(n.join(' '))
            );
          }
          o(
            new _s(
              r + '-version',
              function () {
                return { library: r, version: e };
              },
              'VERSION'
            )
          );
        },
        setLogLevel: Ms,
        onLog: function (t, e) {
          if (null !== t && 'function' != typeof t)
            throw Fs.create('invalid-log-argument', { appName: name });
          !(function (s, e) {
            for (var t = 0, n = ks; t < n.length; t++) {
              !(function (t) {
                var o = null;
                e && e.level && (o = Os[e.level]),
                  (t.userLogHandler =
                    null === s
                      ? null
                      : function (t, e) {
                          for (var n = [], r = 2; r < arguments.length; r++)
                            n[r - 2] = arguments[r];
                          var i = n
                            .map(function (t) {
                              if (null == t) return null;
                              if ('string' == typeof t) return t;
                              if ('number' == typeof t || 'boolean' == typeof t)
                                return t.toString();
                              if (t instanceof Error) return t.message;
                              try {
                                return JSON.stringify(t);
                              } catch (t) {
                                return null;
                              }
                            })
                            .filter(function (t) {
                              return t;
                            })
                            .join(' ');
                          e >= (null != o ? o : t.logLevel) &&
                            s({
                              level: As[e].toLowerCase(),
                              message: i,
                              args: n,
                              type: t.name
                            });
                        });
              })(n[t]);
            }
          })(t, e);
        },
        apps: null,
        SDK_VERSION: Ks,
        INTERNAL: {
          registerComponent: o,
          removeApp: function (t) {
            delete c[t];
          },
          components: h,
          useAsService: function (t, e) {
            if ('serverAuth' === e) return null;
            return e;
          }
        }
      };
    function f(t) {
      if (!ts(c, (t = t || js))) throw Fs.create('no-app', { appName: t });
      return c[t];
    }
    function o(n) {
      var e,
        t,
        r,
        i = n.name;
      if (h.has(i))
        return (
          qs.debug(
            'There were multiple attempts to register component ' + i + '.'
          ),
          'PUBLIC' === n.type ? l[i] : null
        );
      h.set(i, n),
        'PUBLIC' === n.type &&
          ((r = function (t) {
            if ((void 0 === t && (t = f()), 'function' != typeof t[i]))
              throw Fs.create('invalid-app-argument', { appName: i });
            return t[i]();
          }),
          void 0 !== n.serviceProps && Do(r, n.serviceProps),
          (l[i] = r),
          (u.prototype[i] = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            return this._getService
              .bind(this, i)
              .apply(this, n.multipleInstances ? t : []);
          }));
      try {
        for (var o = Eo(Object.keys(c)), s = o.next(); !s.done; s = o.next()) {
          var a = s.value;
          c[a]._addComponent(n);
        }
      } catch (t) {
        e = { error: t };
      } finally {
        try {
          s && !s.done && (t = o.return) && t.call(o);
        } finally {
          if (e) throw e.error;
        }
      }
      return 'PUBLIC' === n.type ? l[i] : null;
    }
    return (
      (l.default = l),
      Object.defineProperty(l, 'apps', {
        get: function () {
          return Object.keys(c).map(function (t) {
            return c[t];
          });
        }
      }),
      (f.App = u),
      l
    );
  }
  var dt = (function t() {
      var e = Hs(Bs);
      return (
        (e.INTERNAL = bo(bo({}, e.INTERNAL), {
          createFirebaseNamespace: t,
          extendNamespace: function (t) {
            Do(e, t);
          },
          createSubscribe: ss,
          ErrorFactory: Qo,
          deepExtend: Do
        })),
        e
      );
    })(),
    zs =
      ((Gs.prototype.getPlatformInfoString = function () {
        return this.container
          .getProviders()
          .map(function (t) {
            if (
              (function (t) {
                t = t.getComponent();
                return 'VERSION' === (null == t ? void 0 : t.type);
              })(t)
            ) {
              t = t.getImmediate();
              return t.library + '/' + t.version;
            }
            return null;
          })
          .filter(function (t) {
            return t;
          })
          .join(' ');
      }),
      Gs);
  function Gs(t) {
    this.container = t;
  }
  'object' == typeof self &&
    self.self === self &&
    void 0 !== self.firebase &&
    (qs.warn(
      '\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  '
    ),
    (vu = self.firebase.SDK_VERSION) &&
      0 <= vu.indexOf('LITE') &&
      qs.warn(
        '\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    '
      ));
  var Qs = dt.initializeApp;
  dt.initializeApp = function () {
    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
    return (
      (function () {
        try {
          return (
            '[object process]' ===
            Object.prototype.toString.call(global.process)
          );
        } catch (t) {
          return;
        }
      })() &&
        qs.warn(
          '\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '
        ),
      Qs.apply(void 0, t)
    );
  };
  var Ys,
    Xs,
    Jl = dt;
  (Ys = Jl).INTERNAL.registerComponent(
    new _s(
      'platform-logger',
      function (t) {
        return new zs(t);
      },
      'PRIVATE'
    )
  ),
    Ys.registerVersion(Us, '0.6.13', Xs),
    Ys.registerVersion('fire-js', '');
  Jl.registerVersion('firebase', '8.1.1', 'app');
  (function () {
    var t,
      o =
        'function' == typeof Object.defineProperties
          ? Object.defineProperty
          : function (t, e, n) {
              t != Array.prototype && t != Object.prototype && (t[e] = n.value);
            };
    var u = (function (t) {
      t = [
        'object' == typeof window && window,
        'object' == typeof self && self,
        'object' == typeof global && global,
        t
      ];
      for (var e = 0; e < t.length; ++e) {
        var n = t[e];
        if (n && n.Math == Math) return n;
      }
      return globalThis;
    })(this);
    function c(t) {
      var e,
        n,
        r =
          'undefined' != typeof Symbol && Symbol.iterator && t[Symbol.iterator];
      return r
        ? r.call(t)
        : {
            next:
              ((e = t),
              (n = 0),
              function () {
                return n < e.length
                  ? { done: !1, value: e[n++] }
                  : { done: !0 };
              })
          };
    }
    !(function (t, e) {
      if (e) {
        var n = u;
        t = t.split('.');
        for (var r = 0; r < t.length - 1; r++) {
          var i = t[r];
          i in n || (n[i] = {}), (n = n[i]);
        }
        (e = e((r = n[(t = t[t.length - 1])]))) != r &&
          null != e &&
          o(n, t, { configurable: !0, writable: !0, value: e });
      }
    })('Promise', function (t) {
      function s(t) {
        (this.b = 0), (this.c = void 0), (this.a = []);
        var e = this.f();
        try {
          t(e.resolve, e.reject);
        } catch (t) {
          e.reject(t);
        }
      }
      function e() {
        this.a = null;
      }
      function a(e) {
        return e instanceof s
          ? e
          : new s(function (t) {
              t(e);
            });
      }
      if (t) return t;
      e.prototype.b = function (t) {
        var e;
        null == this.a &&
          ((this.a = []),
          (e = this).c(function () {
            e.g();
          })),
          this.a.push(t);
      };
      var n = u.setTimeout;
      (e.prototype.c = function (t) {
        n(t, 0);
      }),
        (e.prototype.g = function () {
          for (; this.a && this.a.length; ) {
            var t = this.a;
            this.a = [];
            for (var e = 0; e < t.length; ++e) {
              var n = t[e];
              t[e] = null;
              try {
                n();
              } catch (t) {
                this.f(t);
              }
            }
          }
          this.a = null;
        }),
        (e.prototype.f = function (t) {
          this.c(function () {
            throw t;
          });
        }),
        (s.prototype.f = function () {
          function t(e) {
            return function (t) {
              r || ((r = !0), e.call(n, t));
            };
          }
          var n = this,
            r = !1;
          return { resolve: t(this.v), reject: t(this.g) };
        }),
        (s.prototype.v = function (t) {
          if (t === this)
            this.g(new TypeError('A Promise cannot resolve to itself'));
          else if (t instanceof s) this.s(t);
          else {
            t: switch (typeof t) {
              case 'object':
                var e = null != t;
                break t;
              case 'function':
                e = !0;
                break t;
              default:
                e = !1;
            }
            e ? this.m(t) : this.h(t);
          }
        }),
        (s.prototype.m = function (t) {
          var e = void 0;
          try {
            e = t.then;
          } catch (t) {
            return void this.g(t);
          }
          'function' == typeof e ? this.u(e, t) : this.h(t);
        }),
        (s.prototype.g = function (t) {
          this.i(2, t);
        }),
        (s.prototype.h = function (t) {
          this.i(1, t);
        }),
        (s.prototype.i = function (t, e) {
          if (0 != this.b)
            throw Error(
              'Cannot settle(' +
                t +
                ', ' +
                e +
                '): Promise already settled in state' +
                this.b
            );
          (this.b = t), (this.c = e), this.l();
        }),
        (s.prototype.l = function () {
          if (null != this.a) {
            for (var t = 0; t < this.a.length; ++t) i.b(this.a[t]);
            this.a = null;
          }
        });
      var i = new e();
      return (
        (s.prototype.s = function (t) {
          var e = this.f();
          t.Pa(e.resolve, e.reject);
        }),
        (s.prototype.u = function (t, e) {
          var n = this.f();
          try {
            t.call(e, n.resolve, n.reject);
          } catch (t) {
            n.reject(t);
          }
        }),
        (s.prototype.then = function (t, e) {
          function n(e, t) {
            return 'function' == typeof e
              ? function (t) {
                  try {
                    r(e(t));
                  } catch (t) {
                    i(t);
                  }
                }
              : t;
          }
          var r,
            i,
            o = new s(function (t, e) {
              (r = t), (i = e);
            });
          return this.Pa(n(t, r), n(e, i)), o;
        }),
        (s.prototype.catch = function (t) {
          return this.then(void 0, t);
        }),
        (s.prototype.Pa = function (t, e) {
          function n() {
            switch (r.b) {
              case 1:
                t(r.c);
                break;
              case 2:
                e(r.c);
                break;
              default:
                throw Error('Unexpected state: ' + r.b);
            }
          }
          var r = this;
          null == this.a ? i.b(n) : this.a.push(n);
        }),
        (s.resolve = a),
        (s.reject = function (n) {
          return new s(function (t, e) {
            e(n);
          });
        }),
        (s.race = function (i) {
          return new s(function (t, e) {
            for (var n = c(i), r = n.next(); !r.done; r = n.next())
              a(r.value).Pa(t, e);
          });
        }),
        (s.all = function (t) {
          var e = c(t),
            o = e.next();
          return o.done
            ? a([])
            : new s(function (n, t) {
                for (
                  var r = [], i = 0;
                  r.push(void 0),
                    i++,
                    a(o.value).Pa(
                      (function (e) {
                        return function (t) {
                          (r[e] = t), 0 == --i && n(r);
                        };
                      })(r.length - 1),
                      t
                    ),
                    !(o = e.next()).done;

                );
              });
        }),
        s
      );
    });
    var h = h || {},
      l = this || self,
      e = /^[\w+/_-]+[=]{0,2}$/,
      a = null;
    function f(t) {
      return (t = t.querySelector && t.querySelector('script[nonce]')) &&
        (t = t.nonce || t.getAttribute('nonce')) &&
        e.test(t)
        ? t
        : '';
    }
    function s() {}
    function p(t) {
      var e = typeof t;
      return 'object' != e ? e : t ? (Array.isArray(t) ? 'array' : e) : 'null';
    }
    function d(t) {
      var e = p(t);
      return 'array' == e || ('object' == e && 'number' == typeof t.length);
    }
    function v(t) {
      return 'function' == p(t);
    }
    function y(t) {
      var e = typeof t;
      return ('object' == e && null != t) || 'function' == e;
    }
    var n = 'closure_uid_' + ((1e9 * Math.random()) >>> 0),
      r = 0;
    function i(t, e, n) {
      return t.call.apply(t.bind, arguments);
    }
    function g(e, n, t) {
      if (!e) throw Error();
      if (2 < arguments.length) {
        var r = Array.prototype.slice.call(arguments, 2);
        return function () {
          var t = Array.prototype.slice.call(arguments);
          return Array.prototype.unshift.apply(t, r), e.apply(n, t);
        };
      }
      return function () {
        return e.apply(n, arguments);
      };
    }
    function m(t, e, n) {
      return (m =
        Function.prototype.bind &&
        -1 != Function.prototype.bind.toString().indexOf('native code')
          ? i
          : g).apply(null, arguments);
    }
    function b(e) {
      var n = Array.prototype.slice.call(arguments, 1);
      return function () {
        var t = n.slice();
        return t.push.apply(t, arguments), e.apply(this, t);
      };
    }
    var _ = Date.now;
    function w(t, e) {
      function n() {}
      (n.prototype = e.prototype),
        (t.$a = e.prototype),
        (t.prototype = new n()),
        (t.prototype.constructor = t);
    }
    function E(t) {
      return t;
    }
    function I(t, e, n) {
      (this.code = C + t),
        (this.message = e || N[t] || ''),
        (this.a = n || null);
    }
    function T(t) {
      var e = t && t.code;
      return e
        ? new I(e.substring(C.length), t.message, t.serverResponse)
        : null;
    }
    w(I, Error),
      (I.prototype.w = function () {
        var t = { code: this.code, message: this.message };
        return this.a && (t.serverResponse = this.a), t;
      }),
      (I.prototype.toJSON = function () {
        return this.w();
      });
    var S,
      C = 'auth/',
      N = {
        'admin-restricted-operation':
          'This operation is restricted to administrators only.',
        'argument-error': '',
        'app-not-authorized':
          "This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",
        'app-not-installed':
          'The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.',
        'captcha-check-failed':
          'The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.',
        'code-expired':
          'The SMS code has expired. Please re-send the verification code to try again.',
        'cordova-not-ready': 'Cordova framework is not ready.',
        'cors-unsupported': 'This browser is not supported.',
        'credential-already-in-use':
          'This credential is already associated with a different user account.',
        'custom-token-mismatch':
          'The custom token corresponds to a different audience.',
        'requires-recent-login':
          'This operation is sensitive and requires recent authentication. Log in again before retrying this request.',
        'dynamic-link-not-activated':
          'Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.',
        'email-change-needs-verification':
          'Multi-factor users must always have a verified email.',
        'email-already-in-use':
          'The email address is already in use by another account.',
        'expired-action-code': 'The action code has expired. ',
        'cancelled-popup-request':
          'This operation has been cancelled due to another conflicting popup being opened.',
        'internal-error': 'An internal error has occurred.',
        'invalid-app-credential':
          'The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.',
        'invalid-app-id':
          'The mobile app identifier is not registed for the current project.',
        'invalid-user-token':
          "This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",
        'invalid-auth-event': 'An internal error has occurred.',
        'invalid-verification-code':
          'The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.',
        'invalid-continue-uri':
          'The continue URL provided in the request is invalid.',
        'invalid-cordova-configuration':
          'The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.',
        'invalid-custom-token':
          'The custom token format is incorrect. Please check the documentation.',
        'invalid-dynamic-link-domain':
          'The provided dynamic link domain is not configured or authorized for the current project.',
        'invalid-email': 'The email address is badly formatted.',
        'invalid-api-key':
          'Your API key is invalid, please check you have copied it correctly.',
        'invalid-cert-hash': 'The SHA-1 certificate hash provided is invalid.',
        'invalid-credential':
          'The supplied auth credential is malformed or has expired.',
        'invalid-message-payload':
          'The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.',
        'invalid-multi-factor-session':
          'The request does not contain a valid proof of first factor successful sign-in.',
        'invalid-oauth-provider':
          'EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.',
        'invalid-oauth-client-id':
          'The OAuth client ID provided is either invalid or does not match the specified API key.',
        'unauthorized-domain':
          'This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.',
        'invalid-action-code':
          'The action code is invalid. This can happen if the code is malformed, expired, or has already been used.',
        'wrong-password':
          'The password is invalid or the user does not have a password.',
        'invalid-persistence-type':
          'The specified persistence type is invalid. It can only be local, session or none.',
        'invalid-phone-number':
          'The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].',
        'invalid-provider-id': 'The specified provider ID is invalid.',
        'invalid-recipient-email':
          'The email corresponding to this action failed to send as the provided recipient email address is invalid.',
        'invalid-sender':
          'The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.',
        'invalid-verification-id':
          'The verification ID used to create the phone auth credential is invalid.',
        'invalid-tenant-id': "The Auth instance's tenant ID is invalid.",
        'multi-factor-info-not-found':
          'The user does not have a second factor matching the identifier provided.',
        'multi-factor-auth-required':
          'Proof of ownership of a second factor is required to complete sign-in.',
        'missing-android-pkg-name':
          'An Android Package Name must be provided if the Android App is required to be installed.',
        'auth-domain-config-required':
          'Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.',
        'missing-app-credential':
          'The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.',
        'missing-verification-code':
          'The phone auth credential was created with an empty SMS verification code.',
        'missing-continue-uri':
          'A continue URL must be provided in the request.',
        'missing-iframe-start': 'An internal error has occurred.',
        'missing-ios-bundle-id':
          'An iOS Bundle ID must be provided if an App Store ID is provided.',
        'missing-multi-factor-info': 'No second factor identifier is provided.',
        'missing-multi-factor-session':
          'The request is missing proof of first factor successful sign-in.',
        'missing-or-invalid-nonce':
          'The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.',
        'missing-phone-number':
          'To send verification codes, provide a phone number for the recipient.',
        'missing-verification-id':
          'The phone auth credential was created with an empty verification ID.',
        'app-deleted': 'This instance of FirebaseApp has been deleted.',
        'account-exists-with-different-credential':
          'An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.',
        'network-request-failed':
          'A network error (such as timeout, interrupted connection or unreachable host) has occurred.',
        'no-auth-event': 'An internal error has occurred.',
        'no-such-provider':
          'User was not linked to an account with the given provider.',
        'null-user':
          'A null user object was provided as the argument for an operation which requires a non-null user object.',
        'operation-not-allowed':
          'The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.',
        'operation-not-supported-in-this-environment':
          'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',
        'popup-blocked':
          'Unable to establish a connection with the popup. It may have been blocked by the browser.',
        'popup-closed-by-user':
          'The popup has been closed by the user before finalizing the operation.',
        'provider-already-linked':
          'User can only be linked to one identity for the given provider.',
        'quota-exceeded':
          "The project's quota for this operation has been exceeded.",
        'redirect-cancelled-by-user':
          'The redirect operation has been cancelled by the user before finalizing.',
        'redirect-operation-pending':
          'A redirect sign-in operation is already pending.',
        'rejected-credential':
          'The request contains malformed or mismatching credentials.',
        'second-factor-already-in-use':
          'The second factor is already enrolled on this account.',
        'maximum-second-factor-count-exceeded':
          'The maximum allowed number of second factors on a user has been exceeded.',
        'tenant-id-mismatch':
          "The provided tenant ID does not match the Auth instance's tenant ID",
        timeout: 'The operation has timed out.',
        'user-token-expired':
          "The user's credential is no longer valid. The user must sign in again.",
        'too-many-requests':
          'We have blocked all requests from this device due to unusual activity. Try again later.',
        'unauthorized-continue-uri':
          'The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.',
        'unsupported-first-factor':
          'Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.',
        'unsupported-persistence-type':
          'The current environment does not support the specified persistence type.',
        'unsupported-tenant-operation':
          'This operation is not supported in a multi-tenant context.',
        'unverified-email': 'The operation requires a verified email.',
        'user-cancelled':
          'The user did not grant your application the permissions it requested.',
        'user-not-found':
          'There is no user record corresponding to this identifier. The user may have been deleted.',
        'user-disabled':
          'The user account has been disabled by an administrator.',
        'user-mismatch':
          'The supplied credentials do not correspond to the previously signed in user.',
        'user-signed-out': '',
        'weak-password': 'The password must be 6 characters long or more.',
        'web-storage-unsupported':
          'This browser is not supported or 3rd party cookies and data may be disabled.'
      },
      A = {
        kd: {
          Sa:
            'https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/',
          Ya: 'https://staging-securetoken.sandbox.googleapis.com/v1/token',
          Va: 'https://staging-identitytoolkit.sandbox.googleapis.com/v2/',
          id: 'b'
        },
        rd: {
          Sa: 'https://www.googleapis.com/identitytoolkit/v3/relyingparty/',
          Ya: 'https://securetoken.googleapis.com/v1/token',
          Va: 'https://identitytoolkit.googleapis.com/v2/',
          id: 'p'
        },
        td: {
          Sa:
            'https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/',
          Ya: 'https://staging-securetoken.sandbox.googleapis.com/v1/token',
          Va: 'https://staging-identitytoolkit.sandbox.googleapis.com/v2/',
          id: 's'
        },
        ud: {
          Sa:
            'https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/',
          Ya: 'https://test-securetoken.sandbox.googleapis.com/v1/token',
          Va: 'https://test-identitytoolkit.sandbox.googleapis.com/v2/',
          id: 't'
        }
      };
    function k(t) {
      for (var e in A)
        if (A[e].id === t)
          return (
            (t = A[e]),
            {
              firebaseEndpoint: t.Sa,
              secureTokenEndpoint: t.Ya,
              identityPlatformEndpoint: t.Va
            }
          );
      return null;
    }
    function R(t) {
      if (t)
        try {
          return t.$goog_Thenable;
        } catch (t) {
          return;
        }
    }
    function O(t) {
      var e;
      Error.captureStackTrace
        ? Error.captureStackTrace(this, O)
        : (e = Error().stack) && (this.stack = e),
        t && (this.message = String(t));
    }
    function P(t, e) {
      for (var n = '', r = (t = t.split('%s')).length - 1, i = 0; i < r; i++)
        n += t[i] + (i < e.length ? e[i] : '%s');
      O.call(this, n + t[r]);
    }
    function D(t) {
      throw new P(
        'Failure' + (t ? ': ' + t : ''),
        Array.prototype.slice.call(arguments, 1)
      );
    }
    function x(t, e) {
      (this.c = t), (this.f = e), (this.b = 0), (this.a = null);
    }
    function L(t, e) {
      t.f(e), t.b < 100 && (t.b++, (e.next = t.a), (t.a = e));
    }
    function M() {
      this.b = this.a = null;
    }
    (S = k('__EID__') ? '__EID__' : void 0),
      w(O, Error),
      (O.prototype.name = 'CustomError'),
      w(P, O),
      (P.prototype.name = 'AssertionError'),
      (x.prototype.get = function () {
        var t;
        return (
          0 < this.b
            ? (this.b--, (t = this.a), (this.a = t.next), (t.next = null))
            : (t = this.c()),
          t
        );
      });
    var F = new x(
      function () {
        return new U();
      },
      function (t) {
        t.reset();
      }
    );
    function U() {
      this.next = this.b = this.a = null;
    }
    (M.prototype.add = function (t, e) {
      var n = F.get();
      n.set(t, e), this.b ? (this.b.next = n) : (this.a = n), (this.b = n);
    }),
      (U.prototype.set = function (t, e) {
        (this.a = t), (this.b = e), (this.next = null);
      }),
      (U.prototype.reset = function () {
        this.next = this.b = this.a = null;
      });
    var j = Array.prototype.indexOf
        ? function (t, e) {
            return Array.prototype.indexOf.call(t, e, void 0);
          }
        : function (t, e) {
            if ('string' == typeof t)
              return 'string' != typeof e || 1 != e.length
                ? -1
                : t.indexOf(e, 0);
            for (var n = 0; n < t.length; n++)
              if (n in t && t[n] === e) return n;
            return -1;
          },
      V = Array.prototype.forEach
        ? function (t, e, n) {
            Array.prototype.forEach.call(t, e, n);
          }
        : function (t, e, n) {
            for (
              var r = t.length,
                i = 'string' == typeof t ? t.split('') : t,
                o = 0;
              o < r;
              o++
            )
              o in i && e.call(n, i[o], o, t);
          };
    var q = Array.prototype.filter
        ? function (t, e) {
            return Array.prototype.filter.call(t, e, void 0);
          }
        : function (t, e) {
            for (
              var n,
                r = t.length,
                i = [],
                o = 0,
                s = 'string' == typeof t ? t.split('') : t,
                a = 0;
              a < r;
              a++
            ) {
              a in s && ((n = s[a]), e.call(void 0, n, a, t) && (i[o++] = n));
            }
            return i;
          },
      B = Array.prototype.map
        ? function (t, e) {
            return Array.prototype.map.call(t, e, void 0);
          }
        : function (t, e) {
            for (
              var n = t.length,
                r = Array(n),
                i = 'string' == typeof t ? t.split('') : t,
                o = 0;
              o < n;
              o++
            )
              o in i && (r[o] = e.call(void 0, i[o], o, t));
            return r;
          },
      W = Array.prototype.some
        ? function (t, e) {
            return Array.prototype.some.call(t, e, void 0);
          }
        : function (t, e) {
            for (
              var n = t.length,
                r = 'string' == typeof t ? t.split('') : t,
                i = 0;
              i < n;
              i++
            )
              if (i in r && e.call(void 0, r[i], i, t)) return !0;
            return !1;
          };
    function K(t, e) {
      return 0 <= j(t, e);
    }
    function H(t, e) {
      var n;
      return (
        (n = 0 <= (e = j(t, e))) && Array.prototype.splice.call(t, e, 1), n
      );
    }
    function z(n, r) {
      !(function (t, e) {
        for (
          var n = 'string' == typeof t ? t.split('') : t, r = t.length - 1;
          0 <= r;
          --r
        )
          r in n && e.call(void 0, n[r], r, t);
      })(n, function (t, e) {
        r.call(void 0, t, e, n) &&
          1 == Array.prototype.splice.call(n, e, 1).length &&
          0;
      });
    }
    function G() {
      return Array.prototype.concat.apply([], arguments);
    }
    function Q(t) {
      var e = t.length;
      if (0 < e) {
        for (var n = Array(e), r = 0; r < e; r++) n[r] = t[r];
        return n;
      }
      return [];
    }
    var Y,
      X = String.prototype.trim
        ? function (t) {
            return t.trim();
          }
        : function (t) {
            return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1];
          },
      J = /&/g,
      $ = /</g,
      Z = />/g,
      tt = /"/g,
      et = /'/g,
      nt = /\x00/g,
      rt = /[\x00&<>"']/;
    function it(t, e) {
      return -1 != t.indexOf(e);
    }
    function ot(t, e) {
      return t < e ? -1 : e < t ? 1 : 0;
    }
    t: {
      var st = l.navigator;
      if (st) {
        st = st.userAgent;
        if (st) {
          Y = st;
          break t;
        }
      }
      Y = '';
    }
    function at(t) {
      return it(Y, t);
    }
    function ut(t, e) {
      for (var n in t) e.call(void 0, t[n], n, t);
    }
    function ct(t) {
      for (var e in t) return;
      return 1;
    }
    function ht(t) {
      var e,
        n = {};
      for (e in t) n[e] = t[e];
      return n;
    }
    var lt = 'constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf'.split(
      ' '
    );
    function ft(t) {
      for (var e, n, r = 1; r < arguments.length; r++) {
        for (e in (n = arguments[r])) t[e] = n[e];
        for (var i = 0; i < lt.length; i++)
          (e = lt[i]),
            Object.prototype.hasOwnProperty.call(n, e) && (t[e] = n[e]);
      }
    }
    function pt(t, e) {
      t: {
        try {
          var n = t && t.ownerDocument,
            n = n && (n.defaultView || n.parentWindow);
          if ((n = n || l).Element && n.Location) {
            var r = n;
            break t;
          }
        } catch (t) {}
        r = null;
      }
      if (
        r &&
        void 0 !== r[e] &&
        (!t ||
          (!(t instanceof r[e]) &&
            (t instanceof r.Location || t instanceof r.Element)))
      ) {
        if (y(t))
          try {
            var i =
              t.constructor.displayName ||
              t.constructor.name ||
              Object.prototype.toString.call(t);
          } catch (t) {
            i = '<object could not be stringified>';
          }
        else i = void 0 === t ? 'undefined' : null === t ? 'null' : typeof t;
        D(
          'Argument is not a %s (or a non-Element, non-Location mock); got: %s',
          e,
          i
        );
      }
    }
    function dt(t, e) {
      (this.a = (t === mt && e) || ''), (this.b = gt);
    }
    function vt(t) {
      return t instanceof dt && t.constructor === dt && t.b === gt
        ? t.a
        : (D("expected object of type Const, got '" + t + "'"),
          'type_error:Const');
    }
    (dt.prototype.sa = !0),
      (dt.prototype.ra = function () {
        return this.a;
      }),
      (dt.prototype.toString = function () {
        return 'Const{' + this.a + '}';
      });
    var yt,
      gt = {},
      mt = {};
    function bt() {
      if (void 0 === yt) {
        var t = null,
          e = l.trustedTypes;
        if (e && e.createPolicy) {
          try {
            t = e.createPolicy('goog#html', {
              createHTML: E,
              createScript: E,
              createScriptURL: E
            });
          } catch (t) {
            l.console && l.console.error(t.message);
          }
          yt = t;
        } else yt = t;
      }
      return yt;
    }
    function _t(t, e) {
      this.a = e === St ? t : '';
    }
    function wt(t) {
      return t instanceof _t && t.constructor === _t
        ? t.a
        : (D(
            "expected object of type TrustedResourceUrl, got '" +
              t +
              "' of type " +
              p(t)
          ),
          'type_error:TrustedResourceUrl');
    }
    function Et(t, n) {
      var e,
        r = vt(t);
      if (!Tt.test(r)) throw Error('Invalid TrustedResourceUrl format: ' + r);
      return (
        (t = r.replace(It, function (t, e) {
          if (!Object.prototype.hasOwnProperty.call(n, e))
            throw Error(
              'Found marker, "' +
                e +
                '", in format string, "' +
                r +
                '", but no valid label mapping found in args: ' +
                JSON.stringify(n)
            );
          return (t = n[e]) instanceof dt
            ? vt(t)
            : encodeURIComponent(String(t));
        })),
        (e = t),
        (t = bt()),
        new _t((e = t ? t.createScriptURL(e) : e), St)
      );
    }
    (_t.prototype.sa = !0),
      (_t.prototype.ra = function () {
        return this.a.toString();
      }),
      (_t.prototype.toString = function () {
        return 'TrustedResourceUrl{' + this.a + '}';
      });
    var It = /%{(\w+)}/g,
      Tt = /^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,
      St = {};
    function Ct(t, e) {
      this.a = e === Dt ? t : '';
    }
    function Nt(t) {
      return t instanceof Ct && t.constructor === Ct
        ? t.a
        : (D(
            "expected object of type SafeUrl, got '" + t + "' of type " + p(t)
          ),
          'type_error:SafeUrl');
    }
    (Ct.prototype.sa = !0),
      (Ct.prototype.ra = function () {
        return this.a.toString();
      }),
      (Ct.prototype.toString = function () {
        return 'SafeUrl{' + this.a + '}';
      });
    var At = /^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,
      kt = /^data:(.*);base64,[a-z0-9+\/]+=*$/i,
      Rt = /^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;
    function Ot(t) {
      return t instanceof Ct
        ? t
        : ((t = 'object' == typeof t && t.sa ? t.ra() : String(t)),
          (t =
            Rt.test(t) ||
            ((e = (t = (t = String(t)).replace(/(%0A|%0D)/g, '')).match(kt)) &&
              At.test(e[1]))
              ? new Ct(t, Dt)
              : null));
      var e;
    }
    function Pt(t) {
      return t instanceof Ct
        ? t
        : ((t = 'object' == typeof t && t.sa ? t.ra() : String(t)),
          Rt.test(t) || (t = 'about:invalid#zClosurez'),
          new Ct(t, Dt));
    }
    var Dt = {},
      xt = new Ct('about:invalid#zClosurez', Dt);
    function Lt(t, e, n) {
      this.a = n === Mt ? t : '';
    }
    (Lt.prototype.sa = !0),
      (Lt.prototype.ra = function () {
        return this.a.toString();
      }),
      (Lt.prototype.toString = function () {
        return 'SafeHtml{' + this.a + '}';
      });
    var Mt = {};
    function Ft(t, e, n, r) {
      return (
        (t = t instanceof Ct ? t : Pt(t)),
        (e = e || l),
        (n = n instanceof dt ? vt(n) : n || ''),
        e.open(Nt(t), n, r, void 0)
      );
    }
    function Ut(t) {
      for (
        var e = t.split('%s'),
          n = '',
          r = Array.prototype.slice.call(arguments, 1);
        r.length && 1 < e.length;

      )
        n += e.shift() + r.shift();
      return n + e.join('%s');
    }
    function jt(t) {
      return (
        rt.test(t) &&
          (-1 != t.indexOf('&') && (t = t.replace(J, '&amp;')),
          -1 != t.indexOf('<') && (t = t.replace($, '&lt;')),
          -1 != t.indexOf('>') && (t = t.replace(Z, '&gt;')),
          -1 != t.indexOf('"') && (t = t.replace(tt, '&quot;')),
          -1 != t.indexOf("'") && (t = t.replace(et, '&#39;')),
          -1 != t.indexOf('\0') && (t = t.replace(nt, '&#0;'))),
        t
      );
    }
    function Vt(t) {
      return Vt[' '](t), t;
    }
    Vt[' '] = s;
    var qt,
      Bt = at('Opera'),
      Wt = at('Trident') || at('MSIE'),
      Kt = at('Edge'),
      Ht = Kt || Wt,
      zt =
        at('Gecko') &&
        !(it(Y.toLowerCase(), 'webkit') && !at('Edge')) &&
        !(at('Trident') || at('MSIE')) &&
        !at('Edge'),
      Gt = it(Y.toLowerCase(), 'webkit') && !at('Edge');
    function Qt() {
      var t = l.document;
      return t ? t.documentMode : void 0;
    }
    t: {
      var Yt = '',
        Xt =
          ((Xt = Y),
          zt
            ? /rv:([^\);]+)(\)|;)/.exec(Xt)
            : Kt
            ? /Edge\/([\d\.]+)/.exec(Xt)
            : Wt
            ? /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xt)
            : Gt
            ? /WebKit\/(\S+)/.exec(Xt)
            : Bt
            ? /(?:Version)[ \/]?(\S+)/.exec(Xt)
            : void 0);
      if ((Xt && (Yt = Xt ? Xt[1] : ''), Wt)) {
        Xt = Qt();
        if (null != Xt && Xt > parseFloat(Yt)) {
          qt = String(Xt);
          break t;
        }
      }
      qt = Yt;
    }
    var Jt = {};
    function $t(a) {
      return (
        (t = a),
        (e = function () {
          for (
            var t = 0,
              e = X(String(qt)).split('.'),
              n = X(String(a)).split('.'),
              r = Math.max(e.length, n.length),
              i = 0;
            0 == t && i < r;
            i++
          ) {
            var o = e[i] || '',
              s = n[i] || '';
            do {
              if (
                ((o = /(\d*)(\D*)(.*)/.exec(o) || ['', '', '', '']),
                (s = /(\d*)(\D*)(.*)/.exec(s) || ['', '', '', '']),
                0 == o[0].length && 0 == s[0].length)
              )
                break;
              (t =
                ot(
                  0 == o[1].length ? 0 : parseInt(o[1], 10),
                  0 == s[1].length ? 0 : parseInt(s[1], 10)
                ) ||
                ot(0 == o[2].length, 0 == s[2].length) ||
                ot(o[2], s[2])),
                (o = o[3]),
                (s = s[3]);
            } while (0 == t);
          }
          return 0 <= t;
        }),
        (n = Jt),
        Object.prototype.hasOwnProperty.call(n, t) ? n[t] : (n[t] = e(t))
      );
      var t, e, n;
    }
    var Zt = l.document && Wt ? Qt() || parseInt(qt, 10) || void 0 : void 0;
    try {
      new self.OffscreenCanvas(0, 0).getContext('2d');
    } catch (t) {}
    var te = !Wt || 9 <= Number(Zt);
    function ee(t) {
      var e = document;
      return 'string' == typeof t ? e.getElementById(t) : t;
    }
    function ne(n, t) {
      ut(t, function (t, e) {
        t && 'object' == typeof t && t.sa && (t = t.ra()),
          'style' == e
            ? (n.style.cssText = t)
            : 'class' == e
            ? (n.className = t)
            : 'for' == e
            ? (n.htmlFor = t)
            : oe.hasOwnProperty(e)
            ? n.setAttribute(oe[e], t)
            : 0 == e.lastIndexOf('aria-', 0) || 0 == e.lastIndexOf('data-', 0)
            ? n.setAttribute(e, t)
            : (n[e] = t);
      });
    }
    var re,
      ie,
      oe = {
        cellpadding: 'cellPadding',
        cellspacing: 'cellSpacing',
        colspan: 'colSpan',
        frameborder: 'frameBorder',
        height: 'height',
        maxlength: 'maxLength',
        nonce: 'nonce',
        role: 'role',
        rowspan: 'rowSpan',
        type: 'type',
        usemap: 'useMap',
        valign: 'vAlign',
        width: 'width'
      };
    function se() {
      var t,
        e = arguments,
        n = document,
        r = String(e[0]),
        i = e[1];
      return (
        !te &&
          i &&
          (i.name || i.type) &&
          ((r = ['<', r]),
          i.name && r.push(' name="', jt(i.name), '"'),
          i.type &&
            (r.push(' type="', jt(i.type), '"'),
            ft((t = {}), i),
            delete t.type,
            (i = t)),
          r.push('>'),
          (r = r.join(''))),
        (r = ae(n, r)),
        i &&
          ('string' == typeof i
            ? (r.className = i)
            : Array.isArray(i)
            ? (r.className = i.join(' '))
            : ne(r, i)),
        2 < e.length &&
          (function (e, n, t) {
            function r(t) {
              t &&
                n.appendChild('string' == typeof t ? e.createTextNode(t) : t);
            }
            for (var i = 2; i < t.length; i++) {
              var o = t[i];
              if (!d(o) || (y(o) && 0 < o.nodeType)) r(o);
              else {
                t: {
                  if (o && 'number' == typeof o.length) {
                    if (y(o)) {
                      var s =
                        'function' == typeof o.item ||
                        'string' == typeof o.item;
                      break t;
                    }
                    if (v(o)) {
                      s = 'function' == typeof o.item;
                      break t;
                    }
                  }
                  s = !1;
                }
                V(s ? Q(o) : o, r);
              }
            }
          })(n, r, e),
        r
      );
    }
    function ae(t, e) {
      return (
        (e = String(e)),
        'application/xhtml+xml' === t.contentType && (e = e.toLowerCase()),
        t.createElement(e)
      );
    }
    function ue(t) {
      l.setTimeout(function () {
        throw t;
      }, 0);
    }
    function ce(t, e) {
      ie ||
        (function () {
          {
            var t;
            ie =
              l.Promise && l.Promise.resolve
                ? ((t = l.Promise.resolve(void 0)),
                  function () {
                    t.then(fe);
                  })
                : function () {
                    var t = fe;
                    !v(l.setImmediate) ||
                    (l.Window &&
                      l.Window.prototype &&
                      !at('Edge') &&
                      l.Window.prototype.setImmediate == l.setImmediate)
                      ? (re =
                          re ||
                          (function () {
                            var t = l.MessageChannel;
                            if (
                              (void 0 === t &&
                                'undefined' != typeof window &&
                                window.postMessage &&
                                window.addEventListener &&
                                !at('Presto') &&
                                (t = function () {
                                  var t = ae(document, 'IFRAME');
                                  (t.style.display = 'none'),
                                    document.documentElement.appendChild(t);
                                  var e = t.contentWindow;
                                  (t = e.document).open(), t.close();
                                  var n = 'callImmediate' + Math.random(),
                                    r =
                                      'file:' == e.location.protocol
                                        ? '*'
                                        : e.location.protocol +
                                          '//' +
                                          e.location.host;
                                  (t = m(function (t) {
                                    ('*' != r && t.origin != r) ||
                                      t.data != n ||
                                      this.port1.onmessage();
                                  }, this)),
                                    e.addEventListener('message', t, !1),
                                    (this.port1 = {}),
                                    (this.port2 = {
                                      postMessage: function () {
                                        e.postMessage(n, r);
                                      }
                                    });
                                }),
                              void 0 === t || at('Trident') || at('MSIE'))
                            )
                              return function (t) {
                                l.setTimeout(t, 0);
                              };
                            var e = new t(),
                              n = {},
                              r = n;
                            return (
                              (e.port1.onmessage = function () {
                                var t;
                                void 0 !== n.next &&
                                  ((t = (n = n.next).Fb), (n.Fb = null), t());
                              }),
                              function (t) {
                                (r.next = { Fb: t }),
                                  (r = r.next),
                                  e.port2.postMessage(0);
                              }
                            );
                          })())(t)
                      : l.setImmediate(t);
                  };
          }
        })(),
        he || (ie(), (he = !0)),
        le.add(t, e);
    }
    var he = !1,
      le = new M();
    function fe() {
      for (
        var t, e, n;
        (n = e = void 0),
          (n = null),
          (e = le).a &&
            ((n = e.a), (e.a = e.a.next), e.a || (e.b = null), (n.next = null)),
          (t = n);

      ) {
        try {
          t.a.call(t.b);
        } catch (t) {
          ue(t);
        }
        L(F, t);
      }
      he = !1;
    }
    function pe(t, e) {
      if (
        ((this.a = de),
        (this.i = void 0),
        (this.f = this.b = this.c = null),
        (this.g = this.h = !1),
        t != s)
      )
        try {
          var n = this;
          t.call(
            e,
            function (t) {
              Ce(n, ve, t);
            },
            function (t) {
              if (!(t instanceof De))
                try {
                  if (t instanceof Error) throw t;
                  throw Error('Promise rejected.');
                } catch (t) {}
              Ce(n, ye, t);
            }
          );
        } catch (t) {
          Ce(this, ye, t);
        }
    }
    var de = 0,
      ve = 2,
      ye = 3;
    function ge() {
      (this.next = this.f = this.b = this.g = this.a = null), (this.c = !1);
    }
    ge.prototype.reset = function () {
      (this.f = this.b = this.g = this.a = null), (this.c = !1);
    };
    var me = new x(
      function () {
        return new ge();
      },
      function (t) {
        t.reset();
      }
    );
    function be(t, e, n) {
      var r = me.get();
      return (r.g = t), (r.b = e), (r.f = n), r;
    }
    function _e(t) {
      if (t instanceof pe) return t;
      var e = new pe(s);
      return Ce(e, ve, t), e;
    }
    function we(n) {
      return new pe(function (t, e) {
        e(n);
      });
    }
    function Ee(t, e, n) {
      Ne(t, e, n, null) || ce(b(e, t));
    }
    function Ie(n) {
      return new pe(function (r) {
        var i = n.length,
          o = [];
        if (i)
          for (
            var t = function (t, e, n) {
                i--,
                  (o[t] = e ? { Ob: !0, value: n } : { Ob: !1, reason: n }),
                  0 == i && r(o);
              },
              e = 0;
            e < n.length;
            e++
          )
            Ee(n[e], b(t, e, !0), b(t, e, !1));
        else r(o);
      });
    }
    function Te(t, e) {
      t.b || (t.a != ve && t.a != ye) || Ae(t),
        t.f ? (t.f.next = e) : (t.b = e),
        (t.f = e);
    }
    function Se(t, i, o, s) {
      var e = be(null, null, null);
      return (
        (e.a = new pe(function (n, r) {
          (e.g = i
            ? function (t) {
                try {
                  var e = i.call(s, t);
                  n(e);
                } catch (t) {
                  r(t);
                }
              }
            : n),
            (e.b = o
              ? function (t) {
                  try {
                    var e = o.call(s, t);
                    void 0 === e && t instanceof De ? r(t) : n(e);
                  } catch (t) {
                    r(t);
                  }
                }
              : r);
        })),
        Te((e.a.c = t), e),
        e.a
      );
    }
    function Ce(t, e, n) {
      var r, i;
      t.a == de &&
        (t === n &&
          ((e = ye), (n = new TypeError('Promise cannot resolve to itself'))),
        (t.a = 1),
        Ne(n, t.Zc, t.$c, t) ||
          ((t.i = n),
          (t.a = e),
          (t.c = null),
          Ae(t),
          e != ye ||
            n instanceof De ||
            ((i = n),
            ((r = t).g = !0),
            ce(function () {
              r.g && Pe.call(null, i);
            }))));
    }
    function Ne(t, e, n, r) {
      if (t instanceof pe) return Te(t, be(e || s, n || null, r)), 1;
      if (R(t)) return t.then(e, n, r), 1;
      if (y(t))
        try {
          var i = t.then;
          if (v(i))
            return (
              (function (t, e, n, r, i) {
                function o(t) {
                  s || ((s = !0), r.call(i, t));
                }
                var s = !1;
                try {
                  e.call(
                    t,
                    function (t) {
                      s || ((s = !0), n.call(i, t));
                    },
                    o
                  );
                } catch (t) {
                  o(t);
                }
              })(t, i, e, n, r),
              1
            );
        } catch (t) {
          return n.call(r, t), 1;
        }
    }
    function Ae(t) {
      t.h || ((t.h = !0), ce(t.fc, t));
    }
    function ke(t) {
      var e = null;
      return (
        t.b && ((e = t.b), (t.b = e.next), (e.next = null)),
        t.b || (t.f = null),
        e
      );
    }
    function Re(t, e, n, r) {
      if (n == ye && e.b && !e.c) for (; t && t.g; t = t.c) t.g = !1;
      if (e.a) (e.a.c = null), Oe(e, n, r);
      else
        try {
          e.c ? e.g.call(e.f) : Oe(e, n, r);
        } catch (t) {
          Pe.call(null, t);
        }
      L(me, e);
    }
    function Oe(t, e, n) {
      e == ve ? t.g.call(t.f, n) : t.b && t.b.call(t.f, n);
    }
    (pe.prototype.then = function (t, e, n) {
      return Se(this, v(t) ? t : null, v(e) ? e : null, n);
    }),
      (pe.prototype.$goog_Thenable = !0),
      ((t = pe.prototype).na = function (t, e) {
        return ((t = be(t, t, e)).c = !0), Te(this, t), this;
      }),
      (t.o = function (t, e) {
        return Se(this, null, t, e);
      }),
      (t.cancel = function (t) {
        var e;
        this.a == de &&
          ((e = new De(t)),
          ce(function () {
            !(function t(e, n) {
              if (e.a == de)
                if (e.c) {
                  var r = e.c;
                  if (r.b) {
                    for (
                      var i = 0, o = null, s = null, a = r.b;
                      a && (a.c || (i++, a.a == e && (o = a), !(o && 1 < i)));
                      a = a.next
                    )
                      o || (s = a);
                    o &&
                      (r.a == de && 1 == i
                        ? t(r, n)
                        : (s
                            ? ((i = s).next == r.f && (r.f = i),
                              (i.next = i.next.next))
                            : ke(r),
                          Re(r, o, ye, n)));
                  }
                  e.c = null;
                } else Ce(e, ye, n);
            })(this, e);
          }, this));
      }),
      (t.Zc = function (t) {
        (this.a = de), Ce(this, ve, t);
      }),
      (t.$c = function (t) {
        (this.a = de), Ce(this, ye, t);
      }),
      (t.fc = function () {
        for (var t; (t = ke(this)); ) Re(this, t, this.a, this.i);
        this.h = !1;
      });
    var Pe = ue;
    function De(t) {
      O.call(this, t);
    }
    function xe() {
      (this.xa = this.xa), (this.oa = this.oa);
    }
    w(De, O);
    var Le = 0;
    function Me(t) {
      t.xa ||
        ((t.xa = !0), t.Da(), 0 == Le) ||
        ((t = t),
        (Object.prototype.hasOwnProperty.call(t, n) && t[n]) || (t[n] = ++r));
    }
    (xe.prototype.xa = !(De.prototype.name = 'cancel')),
      (xe.prototype.Da = function () {
        if (this.oa) for (; this.oa.length; ) this.oa.shift()();
      });
    var Fe =
        Object.freeze ||
        function (t) {
          return t;
        },
      Ue = !Wt || 9 <= Number(Zt),
      je = Wt && !$t('9'),
      Ve = (function () {
        if (!l.addEventListener || !Object.defineProperty) return !1;
        var t = !1,
          e = Object.defineProperty({}, 'passive', {
            get: function () {
              t = !0;
            }
          });
        try {
          l.addEventListener('test', s, e), l.removeEventListener('test', s, e);
        } catch (t) {}
        return t;
      })();
    function qe(t, e) {
      (this.type = t), (this.b = this.target = e), (this.defaultPrevented = !1);
    }
    function Be(t, e) {
      if (
        (qe.call(this, t ? t.type : ''),
        (this.relatedTarget = this.b = this.target = null),
        (this.button = this.screenY = this.screenX = this.clientY = this.clientX = 0),
        (this.key = ''),
        (this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1),
        (this.pointerId = 0),
        (this.pointerType = ''),
        (this.a = null),
        t)
      ) {
        var n = (this.type = t.type),
          r =
            t.changedTouches && t.changedTouches.length
              ? t.changedTouches[0]
              : null;
        if (
          ((this.target = t.target || t.srcElement),
          (this.b = e),
          (e = t.relatedTarget))
        ) {
          if (zt) {
            t: {
              try {
                Vt(e.nodeName);
                var i = !0;
                break t;
              } catch (t) {}
              i = !1;
            }
            i || (e = null);
          }
        } else
          'mouseover' == n
            ? (e = t.fromElement)
            : 'mouseout' == n && (e = t.toElement);
        (this.relatedTarget = e),
          r
            ? ((this.clientX = void 0 !== r.clientX ? r.clientX : r.pageX),
              (this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY),
              (this.screenX = r.screenX || 0),
              (this.screenY = r.screenY || 0))
            : ((this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX),
              (this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY),
              (this.screenX = t.screenX || 0),
              (this.screenY = t.screenY || 0)),
          (this.button = t.button),
          (this.key = t.key || ''),
          (this.ctrlKey = t.ctrlKey),
          (this.altKey = t.altKey),
          (this.shiftKey = t.shiftKey),
          (this.metaKey = t.metaKey),
          (this.pointerId = t.pointerId || 0),
          (this.pointerType =
            'string' == typeof t.pointerType
              ? t.pointerType
              : We[t.pointerType] || ''),
          (this.a = t).defaultPrevented && this.preventDefault();
      }
    }
    (qe.prototype.preventDefault = function () {
      this.defaultPrevented = !0;
    }),
      w(Be, qe);
    var We = Fe({ 2: 'touch', 3: 'pen', 4: 'mouse' });
    (Be.prototype.preventDefault = function () {
      Be.$a.preventDefault.call(this);
      var t = this.a;
      if (t.preventDefault) t.preventDefault();
      else if (((t.returnValue = !1), je))
        try {
          (t.ctrlKey || (112 <= t.keyCode && t.keyCode <= 123)) &&
            (t.keyCode = -1);
        } catch (t) {}
    }),
      (Be.prototype.g = function () {
        return this.a;
      });
    var Ke = 'closure_listenable_' + ((1e6 * Math.random()) | 0),
      He = 0;
    function ze(t, e, n, r, i) {
      (this.listener = t),
        (this.proxy = null),
        (this.src = e),
        (this.type = n),
        (this.capture = !!r),
        (this.Ua = i),
        (this.key = ++He),
        (this.va = this.Oa = !1);
    }
    function Ge(t) {
      (t.va = !0),
        (t.listener = null),
        (t.proxy = null),
        (t.src = null),
        (t.Ua = null);
    }
    function Qe(t) {
      (this.src = t), (this.a = {}), (this.b = 0);
    }
    function Ye(t, e) {
      var n = e.type;
      n in t.a &&
        H(t.a[n], e) &&
        (Ge(e), 0 == t.a[n].length && (delete t.a[n], t.b--));
    }
    function Xe(t, e, n, r) {
      for (var i = 0; i < t.length; ++i) {
        var o = t[i];
        if (!o.va && o.listener == e && o.capture == !!n && o.Ua == r) return i;
      }
      return -1;
    }
    Qe.prototype.add = function (t, e, n, r, i) {
      var o = t.toString();
      (t = this.a[o]) || ((t = this.a[o] = []), this.b++);
      var s = Xe(t, e, r, i);
      return (
        -1 < s
          ? ((e = t[s]), n || (e.Oa = !1))
          : (((e = new ze(e, this.src, o, !!r, i)).Oa = n), t.push(e)),
        e
      );
    };
    var Je = 'closure_lm_' + ((1e6 * Math.random()) | 0),
      $e = {};
    function Ze(t, e, n, r, i) {
      if (r && r.once) en(t, e, n, r, i);
      else if (Array.isArray(e))
        for (var o = 0; o < e.length; o++) Ze(t, e[o], n, r, i);
      else
        (n = ln(n)),
          t && t[Ke]
            ? pn(t, e, n, y(r) ? !!r.capture : !!r, i)
            : tn(t, e, n, !1, r, i);
    }
    function tn(t, e, n, r, i, o) {
      if (!e) throw Error('Invalid event type');
      var s,
        a,
        u = y(i) ? !!i.capture : !!i,
        c = cn(t);
      if ((c || (t[Je] = c = new Qe(t)), !(n = c.add(e, n, r, u, o)).proxy))
        if (
          ((s = un),
          (r = a = Ue
            ? function (t) {
                return s.call(a.src, a.listener, t);
              }
            : function (t) {
                if (!(t = s.call(a.src, a.listener, t))) return t;
              }),
          ((n.proxy = r).src = t),
          (r.listener = n),
          t.addEventListener)
        )
          Ve || (i = u),
            void 0 === i && (i = !1),
            t.addEventListener(e.toString(), r, i);
        else if (t.attachEvent) t.attachEvent(on(e.toString()), r);
        else {
          if (!t.addListener || !t.removeListener)
            throw Error('addEventListener and attachEvent are unavailable.');
          t.addListener(r);
        }
    }
    function en(t, e, n, r, i) {
      if (Array.isArray(e))
        for (var o = 0; o < e.length; o++) en(t, e[o], n, r, i);
      else
        (n = ln(n)),
          t && t[Ke]
            ? dn(t, e, n, y(r) ? !!r.capture : !!r, i)
            : tn(t, e, n, !0, r, i);
    }
    function nn(t, e, n, r, i) {
      if (Array.isArray(e))
        for (var o = 0; o < e.length; o++) nn(t, e[o], n, r, i);
      else
        (r = y(r) ? !!r.capture : !!r),
          (n = ln(n)),
          t && t[Ke]
            ? ((t = t.v),
              (e = String(e).toString()) in t.a &&
                -1 < (n = Xe((o = t.a[e]), n, r, i)) &&
                (Ge(o[n]),
                Array.prototype.splice.call(o, n, 1),
                0 == o.length && (delete t.a[e], t.b--)))
            : (t = t && cn(t)) &&
              ((e = t.a[e.toString()]),
              (t = -1),
              e && (t = Xe(e, n, r, i)),
              (n = -1 < t ? e[t] : null) && rn(n));
    }
    function rn(t) {
      var e, n, r;
      'number' != typeof t &&
        t &&
        !t.va &&
        ((e = t.src) && e[Ke]
          ? Ye(e.v, t)
          : ((n = t.type),
            (r = t.proxy),
            e.removeEventListener
              ? e.removeEventListener(n, r, t.capture)
              : e.detachEvent
              ? e.detachEvent(on(n), r)
              : e.addListener && e.removeListener && e.removeListener(r),
            (n = cn(e))
              ? (Ye(n, t), 0 == n.b && ((n.src = null), (e[Je] = null)))
              : Ge(t)));
    }
    function on(t) {
      return t in $e ? $e[t] : ($e[t] = 'on' + t);
    }
    function sn(t, e, n, r) {
      var i = !0;
      if ((t = cn(t)) && (e = t.a[e.toString()]))
        for (e = e.concat(), t = 0; t < e.length; t++) {
          var o = e[t];
          o && o.capture == n && !o.va && ((o = an(o, r)), (i = i && !1 !== o));
        }
      return i;
    }
    function an(t, e) {
      var n = t.listener,
        r = t.Ua || t.src;
      return t.Oa && rn(t), n.call(r, e);
    }
    function un(t, e) {
      if (t.va) return !0;
      if (Ue) return an(t, new Be(e, this));
      if (!e)
        t: {
          e = ['window', 'event'];
          for (var n = l, r = 0; r < e.length; r++)
            if (null == (n = n[e[r]])) {
              e = null;
              break t;
            }
          e = n;
        }
      if (
        ((e = new Be((r = e), this)),
        (n = !0),
        !(r.keyCode < 0 || null != r.returnValue))
      ) {
        t: {
          var i = !1;
          if (0 == r.keyCode)
            try {
              r.keyCode = -1;
              break t;
            } catch (t) {
              i = !0;
            }
          (!i && null != r.returnValue) || (r.returnValue = !0);
        }
        for (r = [], i = e.b; i; i = i.parentNode) r.push(i);
        for (t = t.type, i = r.length - 1; 0 <= i; i--) {
          e.b = r[i];
          var o = sn(r[i], t, !0, e),
            n = n && o;
        }
        for (i = 0; i < r.length; i++)
          (e.b = r[i]), (o = sn(r[i], t, !1, e)), (n = n && o);
      }
      return n;
    }
    function cn(t) {
      return (t = t[Je]) instanceof Qe ? t : null;
    }
    var hn = '__closure_events_fn_' + ((1e9 * Math.random()) >>> 0);
    function ln(e) {
      return v(e)
        ? e
        : (e[hn] ||
            (e[hn] = function (t) {
              return e.handleEvent(t);
            }),
          e[hn]);
    }
    function fn() {
      xe.call(this), (this.v = new Qe(this)), ((this.$b = this).fb = null);
    }
    function pn(t, e, n, r, i) {
      t.v.add(String(e), n, !1, r, i);
    }
    function dn(t, e, n, r, i) {
      t.v.add(String(e), n, !0, r, i);
    }
    function vn(t, e, n, r) {
      if (!(e = t.v.a[String(e)])) return !0;
      e = e.concat();
      for (var i = !0, o = 0; o < e.length; ++o) {
        var s,
          a,
          u = e[o];
        u &&
          !u.va &&
          u.capture == n &&
          ((s = u.listener),
          (a = u.Ua || u.src),
          u.Oa && Ye(t.v, u),
          (i = !1 !== s.call(a, r) && i));
      }
      return i && !r.defaultPrevented;
    }
    function yn(t, e, n) {
      if (v(t)) n && (t = m(t, n));
      else {
        if (!t || 'function' != typeof t.handleEvent)
          throw Error('Invalid listener argument');
        t = m(t.handleEvent, t);
      }
      return 2147483647 < Number(e) ? -1 : l.setTimeout(t, e || 0);
    }
    function gn(n) {
      var r = null;
      return new pe(function (t, e) {
        -1 ==
          (r = yn(function () {
            t(void 0);
          }, n)) && e(Error('Failed to schedule timer.'));
      }).o(function (t) {
        throw (l.clearTimeout(r), t);
      });
    }
    function mn(t) {
      if (t.V && 'function' == typeof t.V) return t.V();
      if ('string' == typeof t) return t.split('');
      if (d(t)) {
        for (var e = [], n = t.length, r = 0; r < n; r++) e.push(t[r]);
        return e;
      }
      for (r in ((e = []), (n = 0), t)) e[n++] = t[r];
      return e;
    }
    function bn(t) {
      if (t.Y && 'function' == typeof t.Y) return t.Y();
      if (!t.V || 'function' != typeof t.V) {
        if (d(t) || 'string' == typeof t) {
          var e = [];
          t = t.length;
          for (var n = 0; n < t; n++) e.push(n);
          return e;
        }
        for (var r in ((e = []), (n = 0), t)) e[n++] = r;
        return e;
      }
    }
    function _n(t, e) {
      (this.b = {}), (this.a = []), (this.c = 0);
      var n = arguments.length;
      if (1 < n) {
        if (n % 2) throw Error('Uneven number of arguments');
        for (var r = 0; r < n; r += 2) this.set(arguments[r], arguments[r + 1]);
      } else if (t)
        if (t instanceof _n)
          for (n = t.Y(), r = 0; r < n.length; r++) this.set(n[r], t.get(n[r]));
        else for (r in t) this.set(r, t[r]);
    }
    function wn(t) {
      if (t.c != t.a.length) {
        for (var e = 0, n = 0; e < t.a.length; ) {
          var r = t.a[e];
          En(t.b, r) && (t.a[n++] = r), e++;
        }
        t.a.length = n;
      }
      if (t.c != t.a.length) {
        for (var i = {}, n = (e = 0); e < t.a.length; )
          En(i, (r = t.a[e])) || (i[(t.a[n++] = r)] = 1), e++;
        t.a.length = n;
      }
    }
    function En(t, e) {
      return Object.prototype.hasOwnProperty.call(t, e);
    }
    w(fn, xe),
      (fn.prototype[Ke] = !0),
      (fn.prototype.addEventListener = function (t, e, n, r) {
        Ze(this, t, e, n, r);
      }),
      (fn.prototype.removeEventListener = function (t, e, n, r) {
        nn(this, t, e, n, r);
      }),
      (fn.prototype.dispatchEvent = function (t) {
        var e,
          n = this.fb;
        if (n) for (e = []; n; n = n.fb) e.push(n);
        n = this.$b;
        var r = t.type || t;
        if (
          ('string' == typeof t
            ? (t = new qe(t, n))
            : t instanceof qe
            ? (t.target = t.target || n)
            : ((s = t), ft((t = new qe(r, n)), s)),
          (s = !0),
          e)
        )
          for (var i = e.length - 1; 0 <= i; i--)
            var o = (t.b = e[i]), s = vn(o, r, !0, t) && s;
        if (
          ((s = vn((o = t.b = n), r, !0, t) && s),
          (s = vn(o, r, !1, t) && s),
          e)
        )
          for (i = 0; i < e.length; i++)
            s = vn((o = t.b = e[i]), r, !1, t) && s;
        return s;
      }),
      (fn.prototype.Da = function () {
        if ((fn.$a.Da.call(this), this.v)) {
          var t,
            e = this.v;
          for (t in e.a) {
            for (var n = e.a[t], r = 0; r < n.length; r++) Ge(n[r]);
            delete e.a[t], e.b--;
          }
        }
        this.fb = null;
      }),
      ((t = _n.prototype).V = function () {
        wn(this);
        for (var t = [], e = 0; e < this.a.length; e++)
          t.push(this.b[this.a[e]]);
        return t;
      }),
      (t.Y = function () {
        return wn(this), this.a.concat();
      }),
      (t.clear = function () {
        (this.b = {}), (this.c = this.a.length = 0);
      }),
      (t.get = function (t, e) {
        return En(this.b, t) ? this.b[t] : e;
      }),
      (t.set = function (t, e) {
        En(this.b, t) || (this.c++, this.a.push(t)), (this.b[t] = e);
      }),
      (t.forEach = function (t, e) {
        for (var n = this.Y(), r = 0; r < n.length; r++) {
          var i = n[r],
            o = this.get(i);
          t.call(e, o, i, this);
        }
      });
    var In = /^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;
    function Tn(t, e) {
      var n;
      (this.a = this.l = this.f = ''),
        (this.g = null),
        (this.h = this.c = ''),
        (this.i = !1),
        t instanceof Tn
          ? ((this.i = void 0 !== e ? e : t.i),
            Sn(this, t.f),
            (this.l = t.l),
            (this.a = t.a),
            Cn(this, t.g),
            (this.c = t.c),
            Nn(this, zn(t.b)),
            (this.h = t.h))
          : t && (n = String(t).match(In))
          ? ((this.i = !!e),
            Sn(this, n[1] || '', !0),
            (this.l = Pn(n[2] || '')),
            (this.a = Pn(n[3] || '', !0)),
            Cn(this, n[4]),
            (this.c = Pn(n[5] || '', !0)),
            Nn(this, n[6] || '', !0),
            (this.h = Pn(n[7] || '')))
          : ((this.i = !!e), (this.b = new Vn(null, this.i)));
    }
    function Sn(t, e, n) {
      (t.f = n ? Pn(e, !0) : e), t.f && (t.f = t.f.replace(/:$/, ''));
    }
    function Cn(t, e) {
      if (e) {
        if (((e = Number(e)), isNaN(e) || e < 0))
          throw Error('Bad port number ' + e);
        t.g = e;
      } else t.g = null;
    }
    function Nn(t, e, n) {
      var r, i;
      e instanceof Vn
        ? ((t.b = e),
          (r = t.b),
          (i = t.i) &&
            !r.f &&
            (qn(r),
            (r.c = null),
            r.a.forEach(function (t, e) {
              var n = e.toLowerCase();
              e != n && (Wn(this, e), Hn(this, n, t));
            }, r)),
          (r.f = i))
        : (n || (e = Dn(e, Un)), (t.b = new Vn(e, t.i)));
    }
    function An(t, e, n) {
      t.b.set(e, n);
    }
    function kn(t, e) {
      return t.b.get(e);
    }
    function Rn(t) {
      return t instanceof Tn ? new Tn(t) : new Tn(t, void 0);
    }
    function On(t, e, n, r) {
      var i = new Tn(null, void 0);
      return t && Sn(i, t), e && (i.a = e), n && Cn(i, n), r && (i.c = r), i;
    }
    function Pn(t, e) {
      return t
        ? e
          ? decodeURI(t.replace(/%25/g, '%2525'))
          : decodeURIComponent(t)
        : '';
    }
    function Dn(t, e, n) {
      return 'string' == typeof t
        ? ((t = encodeURI(t).replace(e, xn)),
          n && (t = t.replace(/%25([0-9a-fA-F]{2})/g, '%$1')),
          t)
        : null;
    }
    function xn(t) {
      return (
        '%' +
        (((t = t.charCodeAt(0)) >> 4) & 15).toString(16) +
        (15 & t).toString(16)
      );
    }
    (Tn.prototype.toString = function () {
      var t = [],
        e = this.f;
      e && t.push(Dn(e, Ln, !0), ':');
      var n = this.a;
      return (
        (!n && 'file' != e) ||
          (t.push('//'),
          (e = this.l) && t.push(Dn(e, Ln, !0), '@'),
          t.push(
            encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g, '%$1')
          ),
          null != (n = this.g) && t.push(':', String(n))),
        (n = this.c) &&
          (this.a && '/' != n.charAt(0) && t.push('/'),
          t.push(Dn(n, '/' == n.charAt(0) ? Fn : Mn, !0))),
        (n = this.b.toString()) && t.push('?', n),
        (n = this.h) && t.push('#', Dn(n, jn)),
        t.join('')
      );
    }),
      (Tn.prototype.resolve = function (t) {
        var e = new Tn(this),
          n = !!t.f;
        n ? Sn(e, t.f) : (n = !!t.l),
          n ? (e.l = t.l) : (n = !!t.a),
          n ? (e.a = t.a) : (n = null != t.g);
        var r,
          i = t.c;
        if (n) Cn(e, t.g);
        else if ((n = !!t.c)) {
          if (
            ('/' != i.charAt(0) &&
              (this.a && !this.c
                ? (i = '/' + i)
                : -1 != (r = e.c.lastIndexOf('/')) &&
                  (i = e.c.substr(0, r + 1) + i)),
            '..' == (r = i) || '.' == r)
          )
            i = '';
          else if (it(r, './') || it(r, '/.')) {
            (i = 0 == r.lastIndexOf('/', 0)), (r = r.split('/'));
            for (var o = [], s = 0; s < r.length; ) {
              var a = r[s++];
              '.' == a
                ? i && s == r.length && o.push('')
                : '..' == a
                ? ((1 < o.length || (1 == o.length && '' != o[0])) && o.pop(),
                  i && s == r.length && o.push(''))
                : (o.push(a), (i = !0));
            }
            i = o.join('/');
          } else i = r;
        }
        return (
          n ? (e.c = i) : (n = '' !== t.b.toString()),
          n ? Nn(e, zn(t.b)) : (n = !!t.h),
          n && (e.h = t.h),
          e
        );
      });
    var Ln = /[#\/\?@]/g,
      Mn = /[#\?:]/g,
      Fn = /[#\?]/g,
      Un = /[#\?@]/g,
      jn = /#/g;
    function Vn(t, e) {
      (this.b = this.a = null), (this.c = t || null), (this.f = !!e);
    }
    function qn(n) {
      n.a ||
        ((n.a = new _n()),
        (n.b = 0),
        n.c &&
          (function (t, e) {
            if (t) {
              t = t.split('&');
              for (var n = 0; n < t.length; n++) {
                var r,
                  i = t[n].indexOf('='),
                  o = null;
                0 <= i
                  ? ((r = t[n].substring(0, i)), (o = t[n].substring(i + 1)))
                  : (r = t[n]),
                  e(r, o ? decodeURIComponent(o.replace(/\+/g, ' ')) : '');
              }
            }
          })(n.c, function (t, e) {
            n.add(decodeURIComponent(t.replace(/\+/g, ' ')), e);
          }));
    }
    function Bn(t) {
      var e = bn(t);
      if (void 0 === e) throw Error('Keys are undefined');
      var n = new Vn(null, void 0);
      t = mn(t);
      for (var r = 0; r < e.length; r++) {
        var i = e[r],
          o = t[r];
        Array.isArray(o) ? Hn(n, i, o) : n.add(i, o);
      }
      return n;
    }
    function Wn(t, e) {
      qn(t),
        (e = Gn(t, e)),
        En(t.a.b, e) &&
          ((t.c = null),
          (t.b -= t.a.get(e).length),
          En((t = t.a).b, e) &&
            (delete t.b[e], t.c--, t.a.length > 2 * t.c && wn(t)));
    }
    function Kn(t, e) {
      return qn(t), (e = Gn(t, e)), En(t.a.b, e);
    }
    function Hn(t, e, n) {
      Wn(t, e),
        0 < n.length &&
          ((t.c = null), t.a.set(Gn(t, e), Q(n)), (t.b += n.length));
    }
    function zn(t) {
      var e = new Vn();
      return (e.c = t.c), t.a && ((e.a = new _n(t.a)), (e.b = t.b)), e;
    }
    function Gn(t, e) {
      return (e = String(e)), t.f && (e = e.toLowerCase()), e;
    }
    function Qn(t) {
      var e = [];
      return (
        (function t(e, n, r) {
          if (null == n) r.push('null');
          else {
            if ('object' == typeof n) {
              if (Array.isArray(n)) {
                var i = n;
                (n = i.length), r.push('[');
                for (var o = '', s = 0; s < n; s++)
                  r.push(o), t(e, i[s], r), (o = ',');
                return void r.push(']');
              }
              if (
                !(
                  n instanceof String ||
                  n instanceof Number ||
                  n instanceof Boolean
                )
              ) {
                for (i in (r.push('{'), (o = ''), n))
                  Object.prototype.hasOwnProperty.call(n, i) &&
                    ((s = n[i]),
                    'function' != typeof s &&
                      (r.push(o),
                      $n(i, r),
                      r.push(':'),
                      t(e, s, r),
                      (o = ',')));
                return void r.push('}');
              }
              n = n.valueOf();
            }
            switch (typeof n) {
              case 'string':
                $n(n, r);
                break;
              case 'number':
                r.push(isFinite(n) && !isNaN(n) ? String(n) : 'null');
                break;
              case 'boolean':
                r.push(String(n));
                break;
              case 'function':
                r.push('null');
                break;
              default:
                throw Error('Unknown type: ' + typeof n);
            }
          }
        })(new Yn(), t, e),
        e.join('')
      );
    }
    function Yn() {}
    ((t = Vn.prototype).add = function (t, e) {
      qn(this), (this.c = null), (t = Gn(this, t));
      var n = this.a.get(t);
      return n || this.a.set(t, (n = [])), n.push(e), (this.b += 1), this;
    }),
      (t.clear = function () {
        (this.a = this.c = null), (this.b = 0);
      }),
      (t.forEach = function (n, r) {
        qn(this),
          this.a.forEach(function (t, e) {
            V(
              t,
              function (t) {
                n.call(r, t, e, this);
              },
              this
            );
          }, this);
      }),
      (t.Y = function () {
        qn(this);
        for (
          var t = this.a.V(), e = this.a.Y(), n = [], r = 0;
          r < e.length;
          r++
        )
          for (var i = t[r], o = 0; o < i.length; o++) n.push(e[r]);
        return n;
      }),
      (t.V = function (t) {
        qn(this);
        var e = [];
        if ('string' == typeof t)
          Kn(this, t) && (e = G(e, this.a.get(Gn(this, t))));
        else {
          t = this.a.V();
          for (var n = 0; n < t.length; n++) e = G(e, t[n]);
        }
        return e;
      }),
      (t.set = function (t, e) {
        return (
          qn(this),
          (this.c = null),
          Kn(this, (t = Gn(this, t))) && (this.b -= this.a.get(t).length),
          this.a.set(t, [e]),
          (this.b += 1),
          this
        );
      }),
      (t.get = function (t, e) {
        return t && 0 < (t = this.V(t)).length ? String(t[0]) : e;
      }),
      (t.toString = function () {
        if (this.c) return this.c;
        if (!this.a) return '';
        for (var t = [], e = this.a.Y(), n = 0; n < e.length; n++)
          for (
            var r = e[n],
              i = encodeURIComponent(String(r)),
              r = this.V(r),
              o = 0;
            o < r.length;
            o++
          ) {
            var s = i;
            '' !== r[o] && (s += '=' + encodeURIComponent(String(r[o]))),
              t.push(s);
          }
        return (this.c = t.join('&'));
      });
    var Xn = {
        '"': '\\"',
        '\\': '\\\\',
        '/': '\\/',
        '\b': '\\b',
        '\f': '\\f',
        '\n': '\\n',
        '\r': '\\r',
        '\t': '\\t',
        '\v': '\\u000b'
      },
      Jn = /\uffff/.test('ï¿¿')
        ? /[\\"\x00-\x1f\x7f-\uffff]/g
        : /[\\"\x00-\x1f\x7f-\xff]/g;
    function $n(t, e) {
      e.push(
        '"',
        t.replace(Jn, function (t) {
          var e = Xn[t];
          return (
            e ||
              ((e = '\\u' + (65536 | t.charCodeAt(0)).toString(16).substr(1)),
              (Xn[t] = e)),
            e
          );
        }),
        '"'
      );
    }
    function Zn() {
      var t = mr();
      return (Wt && Zt && 11 == Zt) || /Edge\/\d+/.test(t);
    }
    function tr() {
      return (
        (l.window && l.window.location.href) ||
        (self && self.location && self.location.href) ||
        ''
      );
    }
    function er(t, e) {
      e = e || l.window;
      var n = 'about:blank';
      t && (n = Nt(Ot(t) || xt)), (e.location.href = n);
    }
    function nr(t) {
      return !!(
        (t = (t || mr()).toLowerCase()).match(/android/) ||
        t.match(/webos/) ||
        t.match(/iphone|ipad|ipod/) ||
        t.match(/blackberry/) ||
        t.match(/windows phone/) ||
        t.match(/iemobile/)
      );
    }
    function rr(t) {
      t = t || l.window;
      try {
        t.close();
      } catch (t) {}
    }
    function ir(t, e, n) {
      var r = Math.floor(1e9 * Math.random()).toString();
      (e = e || 500), (n = n || 600);
      var i = (window.screen.availHeight - n) / 2,
        o = (window.screen.availWidth - e) / 2;
      for (s in ((e = {
        width: e,
        height: n,
        top: 0 < i ? i : 0,
        left: 0 < o ? o : 0,
        location: !0,
        resizable: !0,
        statusbar: !0,
        toolbar: !1
      }),
      (n = mr().toLowerCase()),
      r && ((e.target = r), it(n, 'crios/') && (e.target = '_blank')),
      vr(mr()) == pr && ((t = t || 'http://localhost'), (e.scrollbars = !0)),
      (n = t || ''),
      (t = e) || (t = {}),
      (r = window),
      (e =
        n instanceof Ct ? n : Ot(void 0 !== n.href ? n.href : String(n)) || xt),
      (n = t.target || n.target),
      (i = []),
      t))
        switch (s) {
          case 'width':
          case 'height':
          case 'top':
          case 'left':
            i.push(s + '=' + t[s]);
            break;
          case 'target':
          case 'noopener':
          case 'noreferrer':
            break;
          default:
            i.push(s + '=' + (t[s] ? 1 : 0));
        }
      var s = i.join(',');
      if (
        (((at('iPhone') && !at('iPod') && !at('iPad')) ||
          at('iPad') ||
          at('iPod')) &&
        r.navigator &&
        r.navigator.standalone &&
        n &&
        '_self' != n
          ? (pt((s = ae(document, 'A')), 'HTMLAnchorElement'),
            (e = e instanceof Ct ? e : Pt(e)),
            (s.href = Nt(e)),
            s.setAttribute('target', n),
            t.noreferrer && s.setAttribute('rel', 'noreferrer'),
            (t = document.createEvent('MouseEvent')).initMouseEvent(
              'click',
              !0,
              !0,
              r,
              1
            ),
            s.dispatchEvent(t),
            (s = {}))
          : t.noreferrer
          ? ((s = Ft('', r, n, s)),
            (t = Nt(e)),
            s &&
              (Ht && it(t, ';') && (t = "'" + t.replace(/'/g, '%27') + "'"),
              (s.opener = null),
              (t =
                '<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url=' +
                jt(t) +
                '">'),
              (t = new Lt((t = (r = bt()) ? r.createHTML(t) : t), 0, Mt)),
              (r = s.document)) &&
              (r.write(
                (o = t) instanceof Lt && o.constructor === Lt
                  ? o.a
                  : (D(
                      "expected object of type SafeHtml, got '" +
                        o +
                        "' of type " +
                        p(o)
                    ),
                    'type_error:SafeHtml')
              ),
              r.close()))
          : (s = Ft(e, r, n, s)) && t.noopener && (s.opener = null),
        s)
      )
        try {
          s.focus();
        } catch (t) {}
      return s;
    }
    var or = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,
      sr = /^[^@]+@[^@]+$/;
    function ar() {
      var e = null;
      return new pe(function (t) {
        'complete' == l.document.readyState
          ? t()
          : ((e = function () {
              t();
            }),
            en(window, 'load', e));
      }).o(function (t) {
        throw (nn(window, 'load', e), t);
      });
    }
    function ur(t) {
      return (
        (t = t || mr()),
        !(
          ('file:' !== Ir() && 'ionic:' !== Ir()) ||
          !t.toLowerCase().match(/iphone|ipad|ipod|android/)
        )
      );
    }
    function cr() {
      var t = l.window;
      try {
        return t && t != t.top;
      } catch (t) {
        return;
      }
    }
    function hr() {
      return (
        void 0 !== l.WorkerGlobalScope && 'function' == typeof l.importScripts
      );
    }
    function lr() {
      return Jl.INTERNAL.hasOwnProperty('reactNative')
        ? 'ReactNative'
        : Jl.INTERNAL.hasOwnProperty('node')
        ? 'Node'
        : hr()
        ? 'Worker'
        : 'Browser';
    }
    function fr() {
      var t = lr();
      return 'ReactNative' === t || 'Node' === t;
    }
    var pr = 'Firefox',
      dr = 'Chrome';
    function vr(t) {
      var e = t.toLowerCase();
      return it(e, 'opera/') || it(e, 'opr/') || it(e, 'opios/')
        ? 'Opera'
        : it(e, 'iemobile')
        ? 'IEMobile'
        : it(e, 'msie') || it(e, 'trident/')
        ? 'IE'
        : it(e, 'edge/')
        ? 'Edge'
        : it(e, 'firefox/')
        ? pr
        : it(e, 'silk/')
        ? 'Silk'
        : it(e, 'blackberry')
        ? 'Blackberry'
        : it(e, 'webos')
        ? 'Webos'
        : !it(e, 'safari/') ||
          it(e, 'chrome/') ||
          it(e, 'crios/') ||
          it(e, 'android')
        ? (!it(e, 'chrome/') && !it(e, 'crios/')) || it(e, 'edge/')
          ? it(e, 'android')
            ? 'Android'
            : (t = t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/)) && 2 == t.length
            ? t[1]
            : 'Other'
          : dr
        : 'Safari';
    }
    var yr = { ld: 'FirebaseCore-web', nd: 'FirebaseUI-web' };
    function gr(t, e) {
      e = e || [];
      var n,
        r = [],
        i = {};
      for (n in yr) i[yr[n]] = !0;
      for (n = 0; n < e.length; n++)
        void 0 !== i[e[n]] && (delete i[e[n]], r.push(e[n]));
      return (
        r.sort(),
        (e = r).length || (e = ['FirebaseCore-web']),
        'Browser' === (r = lr())
          ? (r = vr((i = mr())))
          : 'Worker' === r && (r = vr((i = mr())) + '-' + r),
        r + '/JsCore/' + t + '/' + e.join(',')
      );
    }
    function mr() {
      return (l.navigator && l.navigator.userAgent) || '';
    }
    function br(t, e) {
      (t = t.split('.')), (e = e || l);
      for (var n = 0; n < t.length && 'object' == typeof e && null != e; n++)
        e = e[t[n]];
      return n != t.length && (e = void 0), e;
    }
    function _r() {
      try {
        var t = l.localStorage,
          e = Ar();
        if (t)
          return t.setItem(e, '1'), t.removeItem(e), !Zn() || !!l.indexedDB;
      } catch (t) {
        return hr() && !!l.indexedDB;
      }
      return !1;
    }
    function wr() {
      return (
        (Er() || 'chrome-extension:' === Ir() || ur()) && !fr() && _r() && !hr()
      );
    }
    function Er() {
      return 'http:' === Ir() || 'https:' === Ir();
    }
    function Ir() {
      return (l.location && l.location.protocol) || null;
    }
    function Tr(t) {
      return !nr((t = t || mr())) && vr(t) != pr;
    }
    function Sr(t) {
      return void 0 === t ? null : Qn(t);
    }
    function Cr(t) {
      var e,
        n = {};
      for (e in t)
        t.hasOwnProperty(e) &&
          null !== t[e] &&
          void 0 !== t[e] &&
          (n[e] = t[e]);
      return n;
    }
    function Nr(t) {
      if (null !== t) return JSON.parse(t);
    }
    function Ar(t) {
      return t || Math.floor(1e9 * Math.random()).toString();
    }
    function kr(t) {
      return (
        'Safari' != vr((t = t || mr())) &&
        !t.toLowerCase().match(/iphone|ipad|ipod/)
      );
    }
    function Rr() {
      var t = l.___jsl;
      if (t && t.H)
        for (var e in t.H)
          if (
            ((t.H[e].r = t.H[e].r || []),
            (t.H[e].L = t.H[e].L || []),
            (t.H[e].r = t.H[e].L.concat()),
            t.CP)
          )
            for (var n = 0; n < t.CP.length; n++) t.CP[n] = null;
    }
    function Or(t, e) {
      if (e < t) throw Error('Short delay should be less than long delay!');
      (this.a = t),
        (this.c = e),
        (t = mr()),
        (e = lr()),
        (this.b = nr(t) || 'ReactNative' === e);
    }
    function Pr() {
      var t = l.document;
      return (
        !t || void 0 === t.visibilityState || 'visible' == t.visibilityState
      );
    }
    function Dr(t) {
      'undefined' != typeof console &&
        'function' == typeof console.warn &&
        console.warn(t);
    }
    function xr(t) {
      try {
        var e = new Date(parseInt(t, 10));
        if (!isNaN(e.getTime()) && !/[^0-9]/.test(t)) return e.toUTCString();
      } catch (t) {}
      return null;
    }
    function Lr() {
      return br('fireauth.oauthhelper', l) || br('fireauth.iframe', l);
    }
    Or.prototype.get = function () {
      var t = l.navigator;
      return !t ||
        'boolean' != typeof t.onLine ||
        (!Er() && 'chrome-extension:' !== Ir() && void 0 === t.connection) ||
        t.onLine
        ? this.b
          ? this.c
          : this.a
        : Math.min(5e3, this.a);
    };
    var Mr,
      Fr = {};
    function Ur(t) {
      Fr[t] || ((Fr[t] = !0), Dr(t));
    }
    try {
      var jr = {};
      Object.defineProperty(jr, 'abcd', {
        configurable: !0,
        enumerable: !0,
        value: 1
      }),
        Object.defineProperty(jr, 'abcd', {
          configurable: !0,
          enumerable: !0,
          value: 2
        }),
        (Mr = 2 == jr.abcd);
    } catch (t) {
      Mr = !1;
    }
    function Vr(t, e, n) {
      Mr
        ? Object.defineProperty(t, e, {
            configurable: !0,
            enumerable: !0,
            value: n
          })
        : (t[e] = n);
    }
    function qr(t, e) {
      if (e) for (var n in e) e.hasOwnProperty(n) && Vr(t, n, e[n]);
    }
    function Br(t) {
      var e = {};
      return qr(e, t), e;
    }
    function Wr(t) {
      var e = t;
      if ('object' == typeof t && null != t)
        for (var n in ((e = 'length' in t ? [] : {}), t)) Vr(e, n, Wr(t[n]));
      return e;
    }
    function Kr(t) {
      var e = t && (t[Yr] ? 'phone' : null);
      if (!(e && t && t[Qr]))
        throw new I(
          'internal-error',
          'Internal assert: invalid MultiFactorInfo object'
        );
      Vr(this, 'uid', t[Qr]), Vr(this, 'displayName', t[zr] || null);
      var n = null;
      t[Gr] && (n = new Date(t[Gr]).toUTCString()),
        Vr(this, 'enrollmentTime', n),
        Vr(this, 'factorId', e);
    }
    function Hr(t) {
      try {
        var e = new Xr(t);
      } catch (t) {
        e = null;
      }
      return e;
    }
    Kr.prototype.w = function () {
      return {
        uid: this.uid,
        displayName: this.displayName,
        factorId: this.factorId,
        enrollmentTime: this.enrollmentTime
      };
    };
    var zr = 'displayName',
      Gr = 'enrolledAt',
      Qr = 'mfaEnrollmentId',
      Yr = 'phoneInfo';
    function Xr(t) {
      Kr.call(this, t), Vr(this, 'phoneNumber', t[Yr]);
    }
    function Jr(t) {
      var e = {},
        n = t[ei],
        r = t[ri],
        i = t[ii];
      if (
        ((t = Hr(t[ni])),
        !i || (i != Zr && i != ti && !n) || (i == ti && !r) || (i == $r && !t))
      )
        throw Error('Invalid checkActionCode response!');
      i == ti
        ? ((e[si] = n || null), (e[ui] = n || null), (e[oi] = r))
        : ((e[si] = r || null), (e[ui] = r || null), (e[oi] = n || null)),
        (e[ai] = t || null),
        Vr(this, hi, i),
        Vr(this, ci, Wr(e));
    }
    w(Xr, Kr),
      (Xr.prototype.w = function () {
        var t = Xr.$a.w.call(this);
        return (t.phoneNumber = this.phoneNumber), t;
      });
    var $r = 'REVERT_SECOND_FACTOR_ADDITION',
      Zr = 'EMAIL_SIGNIN',
      ti = 'VERIFY_AND_CHANGE_EMAIL',
      ei = 'email',
      ni = 'mfaInfo',
      ri = 'newEmail',
      ii = 'requestType',
      oi = 'email',
      si = 'fromEmail',
      ai = 'multiFactorInfo',
      ui = 'previousEmail',
      ci = 'data',
      hi = 'operation';
    function li(t) {
      var e = kn((t = Rn(t)), fi) || null,
        n = kn(t, pi) || null,
        r = ((r = kn(t, yi) || null) && mi[r]) || null;
      if (!e || !n || !r)
        throw new I(
          'argument-error',
          fi +
            ', ' +
            pi +
            'and ' +
            yi +
            ' are required in a valid action code URL.'
        );
      qr(this, {
        apiKey: e,
        operation: r,
        code: n,
        continueUrl: kn(t, di) || null,
        languageCode: kn(t, vi) || null,
        tenantId: kn(t, gi) || null
      });
    }
    var fi = 'apiKey',
      pi = 'oobCode',
      di = 'continueUrl',
      vi = 'languageCode',
      yi = 'mode',
      gi = 'tenantId',
      mi = {
        recoverEmail: 'RECOVER_EMAIL',
        resetPassword: 'PASSWORD_RESET',
        revertSecondFactorAddition: $r,
        signIn: Zr,
        verifyAndChangeEmail: ti,
        verifyEmail: 'VERIFY_EMAIL'
      };
    function bi(t) {
      try {
        return new li(t);
      } catch (t) {
        return null;
      }
    }
    function _i(t) {
      var e = t[Si];
      if (void 0 === e) throw new I('missing-continue-uri');
      if ('string' != typeof e || ('string' == typeof e && !e.length))
        throw new I('invalid-continue-uri');
      if (
        ((this.h = e),
        (this.b = this.a = null),
        (this.g = !1),
        (r = t[wi]) && 'object' == typeof r)
      ) {
        e = r[Ai];
        var n = r[Ci],
          r = r[Ni];
        if ('string' == typeof e && e.length) {
          if (((this.a = e), void 0 !== n && 'boolean' != typeof n))
            throw new I(
              'argument-error',
              Ci + ' property must be a boolean when specified.'
            );
          if (
            ((this.g = !!n),
            void 0 !== r &&
              ('string' != typeof r || ('string' == typeof r && !r.length)))
          )
            throw new I(
              'argument-error',
              Ni + ' property must be a non empty string when specified.'
            );
          this.b = r || null;
        } else {
          if (void 0 !== e)
            throw new I(
              'argument-error',
              Ai + ' property must be a non empty string when specified.'
            );
          if (void 0 !== n || void 0 !== r)
            throw new I('missing-android-pkg-name');
        }
      } else if (void 0 !== r)
        throw new I(
          'argument-error',
          wi + ' property must be a non null object when specified.'
        );
      if (((this.f = null), (e = t[Ti]) && 'object' == typeof e)) {
        if ('string' == typeof (e = e[ki]) && e.length) this.f = e;
        else if (void 0 !== e)
          throw new I(
            'argument-error',
            ki + ' property must be a non empty string when specified.'
          );
      } else if (void 0 !== e)
        throw new I(
          'argument-error',
          Ti + ' property must be a non null object when specified.'
        );
      if (void 0 !== (e = t[Ii]) && 'boolean' != typeof e)
        throw new I(
          'argument-error',
          Ii + ' property must be a boolean when specified.'
        );
      if (
        ((this.c = !!e),
        void 0 !== (t = t[Ei]) &&
          ('string' != typeof t || ('string' == typeof t && !t.length)))
      )
        throw new I(
          'argument-error',
          Ei + ' property must be a non empty string when specified.'
        );
      this.i = t || null;
    }
    var wi = 'android',
      Ei = 'dynamicLinkDomain',
      Ii = 'handleCodeInApp',
      Ti = 'iOS',
      Si = 'url',
      Ci = 'installApp',
      Ni = 'minimumVersion',
      Ai = 'packageName',
      ki = 'bundleId';
    function Ri(t) {
      var e,
        n = {};
      for (e in ((n.continueUrl = t.h),
      (n.canHandleCodeInApp = t.c),
      (n.androidPackageName = t.a) &&
        ((n.androidMinimumVersion = t.b), (n.androidInstallApp = t.g)),
      (n.iOSBundleId = t.f),
      (n.dynamicLinkDomain = t.i),
      n))
        null === n[e] && delete n[e];
      return n;
    }
    var Oi = null;
    function Pi(t) {
      var e = '';
      return (
        (function (r, t) {
          function e(t) {
            for (; i < r.length; ) {
              var e = r.charAt(i++),
                n = Oi[e];
              if (null != n) return n;
              if (!/^[\s\xa0]*$/.test(e))
                throw Error('Unknown base64 encoding at char: ' + e);
            }
            return t;
          }
          !(function () {
            if (!Oi) {
              Oi = {};
              for (
                var t = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'.split(
                    ''
                  ),
                  e = ['+/=', '+/', '-_=', '-_.', '-_'],
                  n = 0;
                n < 5;
                n++
              )
                for (
                  var r = t.concat(e[n].split('')), i = 0;
                  i < r.length;
                  i++
                ) {
                  var o = r[i];
                  void 0 === Oi[o] && (Oi[o] = i);
                }
            }
          })();
          for (var i = 0; ; ) {
            var n = e(-1),
              o = e(0),
              s = e(64),
              a = e(64);
            if (64 === a && -1 === n) break;
            t((n << 2) | (o >> 4)),
              64 != s &&
                (t(((o << 4) & 240) | (s >> 2)),
                64 != a && t(((s << 6) & 192) | a));
          }
        })(t, function (t) {
          e += String.fromCharCode(t);
        }),
        e
      );
    }
    function Di(t) {
      var e = Li(t);
      if (!(e && e.sub && e.iss && e.aud && e.exp)) throw Error('Invalid JWT');
      (this.g = t),
        (this.c = e.exp),
        (this.h = e.sub),
        (this.a =
          e.provider_id || (e.firebase && e.firebase.sign_in_provider) || null),
        (this.f = (e.firebase && e.firebase.tenant) || null),
        (this.b = !!e.is_anonymous || 'anonymous' == this.a);
    }
    function xi(t) {
      try {
        return new Di(t);
      } catch (t) {
        return null;
      }
    }
    function Li(t) {
      if (!t) return null;
      if (3 != (t = t.split('.')).length) return null;
      for (var e = (4 - ((t = t[1]).length % 4)) % 4, n = 0; n < e; n++)
        t += '.';
      try {
        return JSON.parse(Pi(t));
      } catch (t) {}
      return null;
    }
    (Di.prototype.S = function () {
      return this.f;
    }),
      (Di.prototype.i = function () {
        return this.b;
      }),
      (Di.prototype.toString = function () {
        return this.g;
      });
    var Mi = 'oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version'.split(
        ' '
      ),
      Fi = ['client_id', 'response_type', 'scope', 'redirect_uri', 'state'],
      Ui = {
        md: { Ja: 'locale', ua: 700, ta: 600, fa: 'facebook.com', Wa: Fi },
        od: { Ja: null, ua: 500, ta: 750, fa: 'github.com', Wa: Fi },
        pd: { Ja: 'hl', ua: 515, ta: 680, fa: 'google.com', Wa: Fi },
        vd: { Ja: 'lang', ua: 485, ta: 705, fa: 'twitter.com', Wa: Mi },
        jd: { Ja: 'locale', ua: 640, ta: 600, fa: 'apple.com', Wa: [] }
      };
    function ji(t) {
      for (var e in Ui) if (Ui[e].fa == t) return Ui[e];
      return null;
    }
    function Vi(t) {
      var e = {};
      (e['facebook.com'] = Hi),
        (e['google.com'] = Gi),
        (e['github.com'] = zi),
        (e['twitter.com'] = Qi);
      var n = t && t[Bi];
      try {
        if (n) return new (e[n] ? e[n] : Ki)(t);
        if (void 0 !== t[qi]) return new Wi(t);
      } catch (t) {}
      return null;
    }
    var qi = 'idToken',
      Bi = 'providerId';
    function Wi(t) {
      var e,
        n = t[Bi];
      if ((n || !t[qi] || ((e = xi(t[qi])) && e.a && (n = e.a)), !n))
        throw Error('Invalid additional user info!');
      ('anonymous' != n && 'custom' != n) || (n = null),
        (e = !1),
        void 0 !== t.isNewUser
          ? (e = !!t.isNewUser)
          : 'identitytoolkit#SignupNewUserResponse' === t.kind && (e = !0),
        Vr(this, 'providerId', n),
        Vr(this, 'isNewUser', e);
    }
    function Ki(t) {
      Wi.call(this, t),
        Vr(this, 'profile', Wr((t = Nr(t.rawUserInfo || '{}')) || {}));
    }
    function Hi(t) {
      if ((Ki.call(this, t), 'facebook.com' != this.providerId))
        throw Error('Invalid provider ID!');
    }
    function zi(t) {
      if ((Ki.call(this, t), 'github.com' != this.providerId))
        throw Error('Invalid provider ID!');
      Vr(this, 'username', (this.profile && this.profile.login) || null);
    }
    function Gi(t) {
      if ((Ki.call(this, t), 'google.com' != this.providerId))
        throw Error('Invalid provider ID!');
    }
    function Qi(t) {
      if ((Ki.call(this, t), 'twitter.com' != this.providerId))
        throw Error('Invalid provider ID!');
      Vr(this, 'username', t.screenName || null);
    }
    function Yi(t) {
      var e = kn((r = Rn(t)), 'link'),
        n = kn(Rn(e), 'link'),
        r = kn(r, 'deep_link_id');
      return kn(Rn(r), 'link') || r || n || e || t;
    }
    function Xi(t, e) {
      if (!t && !e)
        throw new I(
          'internal-error',
          'Internal assert: no raw session string available'
        );
      if (t && e)
        throw new I(
          'internal-error',
          'Internal assert: unable to determine the session type'
        );
      (this.a = t || null),
        (this.b = e || null),
        (this.type = this.a ? Ji : $i);
    }
    w(Ki, Wi), w(Hi, Ki), w(zi, Ki), w(Gi, Ki), w(Qi, Ki);
    var Ji = 'enroll',
      $i = 'signin';
    function Zi() {}
    function to(t, n) {
      return t
        .then(function (t) {
          if (t[Ws]) {
            var e = xi(t[Ws]);
            if (!e || n != e.h) throw new I('user-mismatch');
            return t;
          }
          throw new I('user-mismatch');
        })
        .o(function (t) {
          throw t && t.code && t.code == C + 'user-not-found'
            ? new I('user-mismatch')
            : t;
        });
    }
    function eo(t, e) {
      if (!e) throw new I('internal-error', 'failed to construct a credential');
      (this.a = e), Vr(this, 'providerId', t), Vr(this, 'signInMethod', t);
    }
    function no(t) {
      return { pendingToken: t.a, requestUri: 'http://localhost' };
    }
    function ro(t) {
      if (
        t &&
        t.providerId &&
        t.signInMethod &&
        0 == t.providerId.indexOf('saml.') &&
        t.pendingToken
      )
        try {
          return new eo(t.providerId, t.pendingToken);
        } catch (t) {}
      return null;
    }
    function io(t, e, n) {
      if (((this.a = null), e.idToken || e.accessToken))
        e.idToken && Vr(this, 'idToken', e.idToken),
          e.accessToken && Vr(this, 'accessToken', e.accessToken),
          e.nonce && !e.pendingToken && Vr(this, 'nonce', e.nonce),
          e.pendingToken && (this.a = e.pendingToken);
      else {
        if (!e.oauthToken || !e.oauthTokenSecret)
          throw new I('internal-error', 'failed to construct a credential');
        Vr(this, 'accessToken', e.oauthToken),
          Vr(this, 'secret', e.oauthTokenSecret);
      }
      Vr(this, 'providerId', t), Vr(this, 'signInMethod', n);
    }
    function oo(t) {
      var e = {};
      return (
        t.idToken && (e.id_token = t.idToken),
        t.accessToken && (e.access_token = t.accessToken),
        t.secret && (e.oauth_token_secret = t.secret),
        (e.providerId = t.providerId),
        t.nonce && !t.a && (e.nonce = t.nonce),
        (e = { postBody: Bn(e).toString(), requestUri: 'http://localhost' }),
        t.a && (delete e.postBody, (e.pendingToken = t.a)),
        e
      );
    }
    function so(t) {
      if (t && t.providerId && t.signInMethod) {
        var e = {
          idToken: t.oauthIdToken,
          accessToken: t.oauthTokenSecret ? null : t.oauthAccessToken,
          oauthTokenSecret: t.oauthTokenSecret,
          oauthToken: t.oauthTokenSecret && t.oauthAccessToken,
          nonce: t.nonce,
          pendingToken: t.pendingToken
        };
        try {
          return new io(t.providerId, e, t.signInMethod);
        } catch (t) {}
      }
      return null;
    }
    function ao(t, e) {
      (this.Pc = e || []),
        qr(this, { providerId: t, isOAuthProvider: !0 }),
        (this.Hb = {}),
        (this.ob = (ji(t) || {}).Ja || null),
        (this.nb = null);
    }
    function uo(t) {
      if ('string' != typeof t || 0 != t.indexOf('saml.'))
        throw new I(
          'argument-error',
          'SAML provider IDs must be prefixed with "saml."'
        );
      ao.call(this, t, []);
    }
    function co(t) {
      ao.call(this, t, Fi), (this.a = []);
    }
    function ho() {
      co.call(this, 'facebook.com');
    }
    function lo(t) {
      if (!t)
        throw new I(
          'argument-error',
          'credential failed: expected 1 argument (the OAuth access token).'
        );
      var e = t;
      return (
        y(t) && (e = t.accessToken), new ho().credential({ accessToken: e })
      );
    }
    function fo() {
      co.call(this, 'github.com');
    }
    function po(t) {
      if (!t)
        throw new I(
          'argument-error',
          'credential failed: expected 1 argument (the OAuth access token).'
        );
      var e = t;
      return (
        y(t) && (e = t.accessToken), new fo().credential({ accessToken: e })
      );
    }
    function vo() {
      co.call(this, 'google.com'), this.Ca('profile');
    }
    function yo(t, e) {
      var n = t;
      return (
        y(t) && ((n = t.idToken), (e = t.accessToken)),
        new vo().credential({ idToken: n, accessToken: e })
      );
    }
    function go() {
      ao.call(this, 'twitter.com', Mi);
    }
    function mo(t, e) {
      var n = t;
      if (
        (y(n) || (n = { oauthToken: t, oauthTokenSecret: e }),
        !n.oauthToken || !n.oauthTokenSecret)
      )
        throw new I(
          'argument-error',
          'credential failed: expected 2 arguments (the OAuth access token and secret).'
        );
      return new io('twitter.com', n, 'twitter.com');
    }
    function bo(t, e, n) {
      (this.a = t),
        (this.f = e),
        Vr(this, 'providerId', 'password'),
        Vr(
          this,
          'signInMethod',
          n === wo.EMAIL_LINK_SIGN_IN_METHOD
            ? wo.EMAIL_LINK_SIGN_IN_METHOD
            : wo.EMAIL_PASSWORD_SIGN_IN_METHOD
        );
    }
    function _o(t) {
      return t && t.email && t.password
        ? new bo(t.email, t.password, t.signInMethod)
        : null;
    }
    function wo() {
      qr(this, { providerId: 'password', isOAuthProvider: !1 });
    }
    function Eo(t, e) {
      if (!(e = Io(e))) throw new I('argument-error', 'Invalid email link!');
      return new bo(t, e.code, wo.EMAIL_LINK_SIGN_IN_METHOD);
    }
    function Io(t) {
      return (t = bi((t = Yi(t)))) && t.operation === Zr ? t : null;
    }
    function To(t) {
      if (!((t.cb && t.bb) || (t.La && t.ea))) throw new I('internal-error');
      (this.a = t),
        Vr(this, 'providerId', 'phone'),
        (this.fa = 'phone'),
        Vr(this, 'signInMethod', 'phone');
    }
    function So(e) {
      if (
        e &&
        'phone' === e.providerId &&
        ((e.verificationId && e.verificationCode) ||
          (e.temporaryProof && e.phoneNumber))
      ) {
        var n = {};
        return (
          V(
            [
              'verificationId',
              'verificationCode',
              'temporaryProof',
              'phoneNumber'
            ],
            function (t) {
              e[t] && (n[t] = e[t]);
            }
          ),
          new To(n)
        );
      }
      return null;
    }
    function Co(t) {
      return t.a.La && t.a.ea
        ? { temporaryProof: t.a.La, phoneNumber: t.a.ea }
        : { sessionInfo: t.a.cb, code: t.a.bb };
    }
    function No(t) {
      try {
        this.a = t || Jl.auth();
      } catch (t) {
        throw new I(
          'argument-error',
          'Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().'
        );
      }
      qr(this, { providerId: 'phone', isOAuthProvider: !1 });
    }
    function Ao(t, e) {
      if (!t) throw new I('missing-verification-id');
      if (!e) throw new I('missing-verification-code');
      return new To({ cb: t, bb: e });
    }
    function ko(t) {
      if (t.temporaryProof && t.phoneNumber)
        return new To({ La: t.temporaryProof, ea: t.phoneNumber });
      var e = t && t.providerId;
      if (!e || 'password' === e) return null;
      var n = t && t.oauthAccessToken,
        r = t && t.oauthTokenSecret,
        i = t && t.nonce,
        o = t && t.oauthIdToken,
        s = t && t.pendingToken;
      try {
        switch (e) {
          case 'google.com':
            return yo(o, n);
          case 'facebook.com':
            return lo(n);
          case 'github.com':
            return po(n);
          case 'twitter.com':
            return mo(n, r);
          default:
            return n || r || o || s
              ? s
                ? 0 == e.indexOf('saml.')
                  ? new eo(e, s)
                  : new io(
                      e,
                      {
                        pendingToken: s,
                        idToken: t.oauthIdToken,
                        accessToken: t.oauthAccessToken
                      },
                      e
                    )
                : new co(e).credential({
                    idToken: o,
                    accessToken: n,
                    rawNonce: i
                  })
              : null;
        }
      } catch (t) {
        return null;
      }
    }
    function Ro(t) {
      if (!t.isOAuthProvider) throw new I('invalid-oauth-provider');
    }
    function Oo(t, e, n, r, i, o, s) {
      if (
        ((this.c = t),
        (this.b = e || null),
        (this.g = n || null),
        (this.f = r || null),
        (this.i = o || null),
        (this.h = s || null),
        (this.a = i || null),
        !this.g && !this.a)
      )
        throw new I('invalid-auth-event');
      if (this.g && this.a) throw new I('invalid-auth-event');
      if (this.g && !this.f) throw new I('invalid-auth-event');
    }
    function Po(t) {
      return (t = t || {}).type
        ? new Oo(
            t.type,
            t.eventId,
            t.urlResponse,
            t.sessionId,
            t.error && T(t.error),
            t.postBody,
            t.tenantId
          )
        : null;
    }
    function Do() {
      (this.b = null), (this.a = []);
    }
    (Xi.prototype.Ha = function () {
      return this.a ? _e(this.a) : _e(this.b);
    }),
      (Xi.prototype.w = function () {
        return this.type == Ji
          ? { multiFactorSession: { idToken: this.a } }
          : { multiFactorSession: { pendingCredential: this.b } };
      }),
      (Zi.prototype.ja = function () {}),
      (Zi.prototype.b = function () {}),
      (Zi.prototype.c = function () {}),
      (Zi.prototype.w = function () {}),
      (eo.prototype.ja = function (t) {
        return la(t, no(this));
      }),
      (eo.prototype.b = function (t, e) {
        var n = no(this);
        return (n.idToken = e), fa(t, n);
      }),
      (eo.prototype.c = function (t, e) {
        return to(pa(t, no(this)), e);
      }),
      (eo.prototype.w = function () {
        return {
          providerId: this.providerId,
          signInMethod: this.signInMethod,
          pendingToken: this.a
        };
      }),
      (io.prototype.ja = function (t) {
        return la(t, oo(this));
      }),
      (io.prototype.b = function (t, e) {
        var n = oo(this);
        return (n.idToken = e), fa(t, n);
      }),
      (io.prototype.c = function (t, e) {
        return to(pa(t, oo(this)), e);
      }),
      (io.prototype.w = function () {
        var t = {
          providerId: this.providerId,
          signInMethod: this.signInMethod
        };
        return (
          this.idToken && (t.oauthIdToken = this.idToken),
          this.accessToken && (t.oauthAccessToken = this.accessToken),
          this.secret && (t.oauthTokenSecret = this.secret),
          this.nonce && (t.nonce = this.nonce),
          this.a && (t.pendingToken = this.a),
          t
        );
      }),
      (ao.prototype.Ka = function (t) {
        return (this.Hb = ht(t)), this;
      }),
      w(uo, ao),
      w(co, ao),
      (co.prototype.Ca = function (t) {
        return K(this.a, t) || this.a.push(t), this;
      }),
      (co.prototype.Pb = function () {
        return Q(this.a);
      }),
      (co.prototype.credential = function (t, e) {
        e = y(t)
          ? {
              idToken: t.idToken || null,
              accessToken: t.accessToken || null,
              nonce: t.rawNonce || null
            }
          : { idToken: t || null, accessToken: e || null };
        if (!e.idToken && !e.accessToken)
          throw new I(
            'argument-error',
            'credential failed: must provide the ID token and/or the access token.'
          );
        return new io(this.providerId, e, this.providerId);
      }),
      w(ho, co),
      Vr(ho, 'PROVIDER_ID', 'facebook.com'),
      Vr(ho, 'FACEBOOK_SIGN_IN_METHOD', 'facebook.com'),
      w(fo, co),
      Vr(fo, 'PROVIDER_ID', 'github.com'),
      Vr(fo, 'GITHUB_SIGN_IN_METHOD', 'github.com'),
      w(vo, co),
      Vr(vo, 'PROVIDER_ID', 'google.com'),
      Vr(vo, 'GOOGLE_SIGN_IN_METHOD', 'google.com'),
      w(go, ao),
      Vr(go, 'PROVIDER_ID', 'twitter.com'),
      Vr(go, 'TWITTER_SIGN_IN_METHOD', 'twitter.com'),
      (bo.prototype.ja = function (t) {
        return this.signInMethod == wo.EMAIL_LINK_SIGN_IN_METHOD
          ? Qa(t, wa, { email: this.a, oobCode: this.f })
          : Qa(t, Wa, { email: this.a, password: this.f });
      }),
      (bo.prototype.b = function (t, e) {
        return this.signInMethod == wo.EMAIL_LINK_SIGN_IN_METHOD
          ? Qa(t, Ea, { idToken: e, email: this.a, oobCode: this.f })
          : Qa(t, La, { idToken: e, email: this.a, password: this.f });
      }),
      (bo.prototype.c = function (t, e) {
        return to(this.ja(t), e);
      }),
      (bo.prototype.w = function () {
        return {
          email: this.a,
          password: this.f,
          signInMethod: this.signInMethod
        };
      }),
      qr(wo, { PROVIDER_ID: 'password' }),
      qr(wo, { EMAIL_LINK_SIGN_IN_METHOD: 'emailLink' }),
      qr(wo, { EMAIL_PASSWORD_SIGN_IN_METHOD: 'password' }),
      (To.prototype.ja = function (t) {
        return t.eb(Co(this));
      }),
      (To.prototype.b = function (t, e) {
        var n = Co(this);
        return (n.idToken = e), Qa(t, Ha, n);
      }),
      (To.prototype.c = function (t, e) {
        var n = Co(this);
        return (n.operation = 'REAUTH'), to((t = Qa(t, za, n)), e);
      }),
      (To.prototype.w = function () {
        var t = { providerId: 'phone' };
        return (
          this.a.cb && (t.verificationId = this.a.cb),
          this.a.bb && (t.verificationCode = this.a.bb),
          this.a.La && (t.temporaryProof = this.a.La),
          this.a.ea && (t.phoneNumber = this.a.ea),
          t
        );
      }),
      (No.prototype.eb = function (r, i) {
        var o = this.a.a;
        return _e(i.verify()).then(function (n) {
          if ('string' != typeof n)
            throw new I(
              'argument-error',
              'An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.'
            );
          if ('recaptcha' !== i.type)
            throw new I(
              'argument-error',
              'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.'
            );
          var t = y(r) ? r.session : null,
            e = y(r) ? r.phoneNumber : r,
            t =
              t && t.type == Ji
                ? t.Ha().then(function (t) {
                    return Qa(o, Fa, {
                      idToken: t,
                      phoneEnrollmentInfo: { phoneNumber: e, recaptchaToken: n }
                    }).then(function (t) {
                      return t.phoneSessionInfo.sessionInfo;
                    });
                  })
                : t && t.type == $i
                ? t.Ha().then(function (t) {
                    return (
                      (e = o),
                      (t = {
                        mfaPendingCredential: t,
                        mfaEnrollmentId:
                          (r.multiFactorHint && r.multiFactorHint.uid) ||
                          r.multiFactorUid,
                        phoneSignInInfo: { recaptchaToken: n }
                      }),
                      Qa(e, Ua, t).then(function (t) {
                        return t.phoneResponseInfo.sessionInfo;
                      })
                    );
                    var e;
                  })
                : Qa(o, Da, { phoneNumber: e, recaptchaToken: n });
          return t.then(
            function (t) {
              return 'function' == typeof i.reset && i.reset(), t;
            },
            function (t) {
              throw ('function' == typeof i.reset && i.reset(), t);
            }
          );
        });
      }),
      qr(No, { PROVIDER_ID: 'phone' }),
      qr(No, { PHONE_SIGN_IN_METHOD: 'phone' }),
      (Oo.prototype.getUid = function () {
        var t = [];
        return (
          t.push(this.c),
          this.b && t.push(this.b),
          this.f && t.push(this.f),
          this.h && t.push(this.h),
          t.join('-')
        );
      }),
      (Oo.prototype.S = function () {
        return this.h;
      }),
      (Oo.prototype.w = function () {
        return {
          type: this.c,
          eventId: this.b,
          urlResponse: this.g,
          sessionId: this.f,
          postBody: this.i,
          tenantId: this.h,
          error: this.a && this.a.w()
        };
      });
    var xo,
      Lo = null;
    function Mo(t) {
      var e = 'unauthorized-domain',
        n = void 0,
        r = Rn(t);
      (t = r.a),
        'chrome-extension' == (r = r.f)
          ? (n = Ut(
              'This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.',
              t
            ))
          : 'http' == r || 'https' == r
          ? (n = Ut(
              'This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.',
              t
            ))
          : (e = 'operation-not-supported-in-this-environment'),
        I.call(this, e, n);
    }
    function Fo(t, e, n) {
      I.call(this, t, n),
        (t = e || {}).Ib && Vr(this, 'email', t.Ib),
        t.ea && Vr(this, 'phoneNumber', t.ea),
        t.credential && Vr(this, 'credential', t.credential),
        t.Yb && Vr(this, 'tenantId', t.Yb);
    }
    function Uo(t) {
      if (t.code) {
        var e = t.code || '';
        0 == e.indexOf(C) && (e = e.substring(C.length));
        var n = { credential: ko(t), Yb: t.tenantId };
        if (t.email) n.Ib = t.email;
        else if (t.phoneNumber) n.ea = t.phoneNumber;
        else if (!n.credential) return new I(e, t.message || void 0);
        return new Fo(e, n, t.message);
      }
      return null;
    }
    function jo() {}
    function Vo(t) {
      return t.c || (t.c = t.b());
    }
    function qo() {}
    function Bo(t) {
      if (
        t.f ||
        'undefined' != typeof XMLHttpRequest ||
        'undefined' == typeof ActiveXObject
      )
        return t.f;
      for (
        var e = [
            'MSXML2.XMLHTTP.6.0',
            'MSXML2.XMLHTTP.3.0',
            'MSXML2.XMLHTTP',
            'Microsoft.XMLHTTP'
          ],
          n = 0;
        n < e.length;
        n++
      ) {
        var r = e[n];
        try {
          return new ActiveXObject(r), (t.f = r);
        } catch (t) {}
      }
      throw Error(
        'Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed'
      );
    }
    function Wo() {}
    function Ko() {
      (this.a = new XDomainRequest()),
        (this.readyState = 0),
        (this.onreadystatechange = null),
        (this.responseType = this.responseText = this.response = ''),
        (this.status = -1),
        (this.statusText = ''),
        (this.a.onload = m(this.pc, this)),
        (this.a.onerror = m(this.Rb, this)),
        (this.a.onprogress = m(this.qc, this)),
        (this.a.ontimeout = m(this.uc, this));
    }
    function Ho(t, e) {
      (t.readyState = e), t.onreadystatechange && t.onreadystatechange();
    }
    function zo(t, e, n) {
      this.reset(t, e, n, void 0, void 0);
    }
    function Go(t) {
      (this.f = t), (this.b = this.c = this.a = null);
    }
    function Qo(t, e) {
      (this.name = t), (this.value = e);
    }
    w(Mo, I),
      w(Fo, I),
      (Fo.prototype.w = function () {
        var t = { code: this.code, message: this.message };
        this.email && (t.email = this.email),
          this.phoneNumber && (t.phoneNumber = this.phoneNumber),
          this.tenantId && (t.tenantId = this.tenantId);
        var e = this.credential && this.credential.w();
        return e && ft(t, e), t;
      }),
      (Fo.prototype.toJSON = function () {
        return this.w();
      }),
      (jo.prototype.c = null),
      w(qo, jo),
      (qo.prototype.a = function () {
        var t = Bo(this);
        return t ? new ActiveXObject(t) : new XMLHttpRequest();
      }),
      (qo.prototype.b = function () {
        var t = {};
        return Bo(this) && ((t[0] = !0), (t[1] = !0)), t;
      }),
      (xo = new qo()),
      w(Wo, jo),
      (Wo.prototype.a = function () {
        var t = new XMLHttpRequest();
        if ('withCredentials' in t) return t;
        if ('undefined' != typeof XDomainRequest) return new Ko();
        throw Error('Unsupported browser');
      }),
      (Wo.prototype.b = function () {
        return {};
      }),
      ((t = Ko.prototype).open = function (t, e, n) {
        if (null != n && !n) throw Error('Only async requests are supported.');
        this.a.open(t, e);
      }),
      (t.send = function (t) {
        if (t) {
          if ('string' != typeof t)
            throw Error('Only string data is supported');
          this.a.send(t);
        } else this.a.send();
      }),
      (t.abort = function () {
        this.a.abort();
      }),
      (t.setRequestHeader = function () {}),
      (t.getResponseHeader = function (t) {
        return 'content-type' == t.toLowerCase() ? this.a.contentType : '';
      }),
      (t.pc = function () {
        (this.status = 200),
          (this.response = this.responseText = this.a.responseText),
          Ho(this, 4);
      }),
      (t.Rb = function () {
        (this.status = 500),
          (this.response = this.responseText = ''),
          Ho(this, 4);
      }),
      (t.uc = function () {
        this.Rb();
      }),
      (t.qc = function () {
        (this.status = 200), Ho(this, 1);
      }),
      (t.getAllResponseHeaders = function () {
        return 'content-type: ' + this.a.contentType;
      }),
      (zo.prototype.a = null),
      (zo.prototype.reset = function (t, e, n, r, i) {
        delete this.a;
      }),
      (Qo.prototype.toString = function () {
        return this.name;
      });
    var Yo = new Qo('SEVERE', 1e3),
      Xo = new Qo('WARNING', 900),
      Jo = new Qo('CONFIG', 700),
      $o = new Qo('FINE', 500);
    Go.prototype.log = function (t, e, n) {
      if (
        t.value >=
        (function t(e) {
          return e.c
            ? e.c
            : e.a
            ? t(e.a)
            : (D('Root logger has no level set.'), null);
        })(this).value
      )
        for (
          v(e) && (e = e()),
            t = new zo(t, String(e), this.f),
            n && (t.a = n),
            n = this;
          n;

        )
          n = n.a;
    };
    var Zo,
      ts = {},
      es = null;
    function ns(t) {
      var e, n, r;
      return (
        es || ((es = new Go('')), ((ts[''] = es).c = Jo)),
        (e = ts[t]) ||
          ((e = new Go(t)),
          (r = t.lastIndexOf('.')),
          (n = t.substr(r + 1)),
          (r = ns(t.substr(0, r))).b || (r.b = {}),
          ((r.b[n] = e).a = r),
          (ts[t] = e)),
        e
      );
    }
    function rs(t, e) {
      t && t.log($o, e, void 0);
    }
    function is(t) {
      this.f = t;
    }
    function os(t) {
      fn.call(this),
        (this.u = t),
        (this.h = void 0),
        (this.readyState = ss),
        (this.status = 0),
        (this.responseType = this.responseText = this.response = this.statusText =
          ''),
        (this.onreadystatechange = null),
        (this.l = new Headers()),
        (this.b = null),
        (this.s = 'GET'),
        (this.f = ''),
        (this.a = !1),
        (this.i = ns('goog.net.FetchXmlHttp')),
        (this.m = this.c = this.g = null);
    }
    w(is, jo),
      (is.prototype.a = function () {
        return new os(this.f);
      }),
      (is.prototype.b =
        ((Zo = {}),
        function () {
          return Zo;
        })),
      w(os, fn);
    var ss = 0;
    function as(t) {
      t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t));
    }
    function us(t) {
      (t.readyState = 4), (t.g = null), (t.c = null), (t.m = null), cs(t);
    }
    function cs(t) {
      t.onreadystatechange && t.onreadystatechange.call(t);
    }
    function hs(t) {
      fn.call(this),
        (this.headers = new _n()),
        (this.O = t || null),
        (this.c = !1),
        (this.A = this.a = null),
        (this.h = this.P = this.l = ''),
        (this.f = this.N = this.i = this.G = !1),
        (this.g = 0),
        (this.s = null),
        (this.m = ls),
        (this.u = this.R = !1);
    }
    ((t = os.prototype).open = function (t, e) {
      if (this.readyState != ss)
        throw (this.abort(), Error('Error reopening a connection'));
      (this.s = t), (this.f = e), (this.readyState = 1), cs(this);
    }),
      (t.send = function (t) {
        if (1 != this.readyState)
          throw (this.abort(), Error('need to call open() first. '));
        this.a = !0;
        var e = {
          headers: this.l,
          method: this.s,
          credentials: this.h,
          cache: void 0
        };
        t && (e.body = t),
          this.u
            .fetch(new Request(this.f, e))
            .then(this.tc.bind(this), this.Ta.bind(this));
      }),
      (t.abort = function () {
        (this.response = this.responseText = ''),
          (this.l = new Headers()),
          (this.status = 0),
          this.c && this.c.cancel('Request was aborted.'),
          1 <= this.readyState &&
            this.a &&
            4 != this.readyState &&
            ((this.a = !1), us(this)),
          (this.readyState = ss);
      }),
      (t.tc = function (t) {
        this.a &&
          ((this.g = t),
          this.b ||
            ((this.status = this.g.status),
            (this.statusText = this.g.statusText),
            (this.b = t.headers),
            (this.readyState = 2),
            cs(this)),
          this.a &&
            ((this.readyState = 3),
            cs(this),
            this.a &&
              ('arraybuffer' === this.responseType
                ? t.arrayBuffer().then(this.rc.bind(this), this.Ta.bind(this))
                : void 0 !== l.ReadableStream && 'body' in t
                ? ((this.response = this.responseText = ''),
                  (this.c = t.body.getReader()),
                  (this.m = new TextDecoder()),
                  as(this))
                : t.text().then(this.sc.bind(this), this.Ta.bind(this)))));
      }),
      (t.oc = function (t) {
        var e;
        this.a &&
          ((e = this.m.decode(t.value ? t.value : new Uint8Array(0), {
            stream: !t.done
          })) && (this.response = this.responseText += e),
          (t.done ? us : cs)(this),
          3 == this.readyState && as(this));
      }),
      (t.sc = function (t) {
        this.a && ((this.response = this.responseText = t), us(this));
      }),
      (t.rc = function (t) {
        this.a && ((this.response = t), us(this));
      }),
      (t.Ta = function (t) {
        var e = this.i;
        e &&
          e.log(
            Xo,
            'Failed to fetch url ' + this.f,
            t instanceof Error ? t : Error(t)
          ),
          this.a && us(this);
      }),
      (t.setRequestHeader = function (t, e) {
        this.l.append(t, e);
      }),
      (t.getResponseHeader = function (t) {
        return this.b
          ? this.b.get(t.toLowerCase()) || ''
          : ((t = this.i) &&
              t.log(
                Xo,
                'Attempting to get response header but no headers have been received for url: ' +
                  this.f,
                void 0
              ),
            '');
      }),
      (t.getAllResponseHeaders = function () {
        if (!this.b) {
          var t = this.i;
          return (
            t &&
              t.log(
                Xo,
                'Attempting to get all response headers but no headers have been received for url: ' +
                  this.f,
                void 0
              ),
            ''
          );
        }
        t = [];
        for (var e = this.b.entries(), n = e.next(); !n.done; )
          (n = n.value), t.push(n[0] + ': ' + n[1]), (n = e.next());
        return t.join('\r\n');
      }),
      Object.defineProperty(os.prototype, 'withCredentials', {
        get: function () {
          return 'include' === this.h;
        },
        set: function (t) {
          this.h = t ? 'include' : 'same-origin';
        }
      }),
      w(hs, fn);
    var ls = '';
    hs.prototype.b = ns('goog.net.XhrIo');
    var fs = /^https?$/i,
      ps = ['POST', 'PUT'];
    function ds(e, t, n, r, i) {
      if (e.a)
        throw Error(
          '[goog.net.XhrIo] Object is active with another request=' +
            e.l +
            '; newUri=' +
            t
        );
      (n = n ? n.toUpperCase() : 'GET'),
        (e.l = t),
        (e.h = ''),
        (e.P = n),
        (e.G = !1),
        (e.c = !0),
        (e.a = (e.O ? e.O : xo).a()),
        (e.A = e.O ? Vo(e.O) : Vo(xo)),
        (e.a.onreadystatechange = m(e.Ub, e));
      try {
        rs(e.b, Is(e, 'Opening Xhr')),
          (e.N = !0),
          e.a.open(n, String(t), !0),
          (e.N = !1);
      } catch (t) {
        return rs(e.b, Is(e, 'Error opening Xhr: ' + t.message)), void ys(e, t);
      }
      t = r || '';
      var o,
        s = new _n(e.headers);
      i &&
        (function (t, e) {
          if (t.forEach && 'function' == typeof t.forEach) t.forEach(e, void 0);
          else if (d(t) || 'string' == typeof t) V(t, e, void 0);
          else
            for (var n = bn(t), r = mn(t), i = r.length, o = 0; o < i; o++)
              e.call(void 0, r[o], n && n[o], t);
        })(i, function (t, e) {
          s.set(e, t);
        }),
        (i = (function (t) {
          t: {
            for (
              var e = vs,
                n = t.length,
                r = 'string' == typeof t ? t.split('') : t,
                i = 0;
              i < n;
              i++
            )
              if (i in r && e.call(void 0, r[i], i, t)) {
                e = i;
                break t;
              }
            e = -1;
          }
          return e < 0 ? null : 'string' == typeof t ? t.charAt(e) : t[e];
        })(s.Y())),
        (r = l.FormData && t instanceof l.FormData),
        !K(ps, n) ||
          i ||
          r ||
          s.set(
            'Content-Type',
            'application/x-www-form-urlencoded;charset=utf-8'
          ),
        s.forEach(function (t, e) {
          this.a.setRequestHeader(e, t);
        }, e),
        e.m && (e.a.responseType = e.m),
        'withCredentials' in e.a &&
          e.a.withCredentials !== e.R &&
          (e.a.withCredentials = e.R);
      try {
        _s(e),
          0 < e.g &&
            ((e.u =
              ((o = e.a),
              Wt &&
                $t(9) &&
                'number' == typeof o.timeout &&
                void 0 !== o.ontimeout)),
            rs(
              e.b,
              Is(e, 'Will abort after ' + e.g + 'ms if incomplete, xhr2 ' + e.u)
            ),
            e.u
              ? ((e.a.timeout = e.g), (e.a.ontimeout = m(e.Ma, e)))
              : (e.s = yn(e.Ma, e.g, e))),
          rs(e.b, Is(e, 'Sending request')),
          (e.i = !0),
          e.a.send(t),
          (e.i = !1);
      } catch (t) {
        rs(e.b, Is(e, 'Send error: ' + t.message)), ys(e, t);
      }
    }
    function vs(t) {
      return 'content-type' == t.toLowerCase();
    }
    function ys(t, e) {
      (t.c = !1),
        t.a && ((t.f = !0), t.a.abort(), (t.f = !1)),
        (t.h = e),
        gs(t),
        bs(t);
    }
    function gs(t) {
      t.G ||
        ((t.G = !0), t.dispatchEvent('complete'), t.dispatchEvent('error'));
    }
    function ms(e) {
      if (e.c && void 0 !== h)
        if (e.A[1] && 4 == ws(e) && 2 == Es(e))
          rs(e.b, Is(e, 'Local request error detected and ignored'));
        else if (e.i && 4 == ws(e)) yn(e.Ub, 0, e);
        else if ((e.dispatchEvent('readystatechange'), 4 == ws(e))) {
          rs(e.b, Is(e, 'Request complete')), (e.c = !1);
          try {
            var t,
              n,
              r,
              i,
              o = Es(e);
            t: switch (o) {
              case 200:
              case 201:
              case 202:
              case 204:
              case 206:
              case 304:
              case 1223:
                var s = !0;
                break t;
              default:
                s = !1;
            }
            if (
              ((t = s) ||
                ((n = 0 === o) &&
                  (!(i = String(e.l).match(In)[1] || null) &&
                    l.self &&
                    l.self.location &&
                    (i = (r = l.self.location.protocol).substr(
                      0,
                      r.length - 1
                    )),
                  (n = !fs.test(i ? i.toLowerCase() : ''))),
                (t = n)),
              t)
            )
              e.dispatchEvent('complete'), e.dispatchEvent('success');
            else {
              try {
                var a = 2 < ws(e) ? e.a.statusText : '';
              } catch (t) {
                rs(e.b, 'Can not get status: ' + t.message), (a = '');
              }
              (e.h = a + ' [' + Es(e) + ']'), gs(e);
            }
          } finally {
            bs(e);
          }
        }
    }
    function bs(e, t) {
      if (e.a) {
        _s(e);
        var n = e.a,
          r = e.A[0] ? s : null;
        (e.a = null), (e.A = null), t || e.dispatchEvent('ready');
        try {
          n.onreadystatechange = r;
        } catch (t) {
          (e = e.b) &&
            e.log(
              Yo,
              'Problem encountered resetting onreadystatechange: ' + t.message,
              void 0
            );
        }
      }
    }
    function _s(t) {
      t.a && t.u && (t.a.ontimeout = null),
        t.s && (l.clearTimeout(t.s), (t.s = null));
    }
    function ws(t) {
      return t.a ? t.a.readyState : 0;
    }
    function Es(t) {
      try {
        return 2 < ws(t) ? t.a.status : -1;
      } catch (t) {
        return -1;
      }
    }
    function Is(t, e) {
      return e + ' [' + t.P + ' ' + t.l + ' ' + Es(t) + ']';
    }
    function Ts(t) {
      var e = Ls;
      (this.g = []),
        (this.u = e),
        (this.s = t || null),
        (this.f = this.a = !1),
        (this.c = void 0),
        (this.m = this.A = this.i = !1),
        (this.h = 0),
        (this.b = null),
        (this.l = 0);
    }
    function Ss(t, e, n) {
      (t.a = !0), (t.c = n), (t.f = !e), ks(t);
    }
    function Cs(t) {
      if (t.a) {
        if (!t.m) throw new Rs();
        t.m = !1;
      }
    }
    function Ns(t, e, n, r) {
      t.g.push([e, n, r]), t.a && ks(t);
    }
    function As(t) {
      return W(t.g, function (t) {
        return v(t[1]);
      });
    }
    function ks(e) {
      var n, r;
      e.h &&
        e.a &&
        As(e) &&
        ((n = e.h),
        (r = Ds[n]) && (l.clearTimeout(r.a), delete Ds[n]),
        (e.h = 0)),
        e.b && (e.b.l--, delete e.b),
        (n = e.c);
      for (var t = (r = !1); e.g.length && !e.i; ) {
        var i = (s = e.g.shift())[0],
          o = s[1],
          s = s[2];
        if ((i = e.f ? o : i))
          try {
            var a = i.call(s || e.s, n);
            void 0 !== a &&
              ((e.f = e.f && (a == n || a instanceof Error)), (e.c = n = a)),
              (R(n) ||
                ('function' == typeof l.Promise && n instanceof l.Promise)) &&
                ((t = !0), (e.i = !0));
          } catch (t) {
            (n = t), (e.f = !0), As(e) || (r = !0);
          }
      }
      (e.c = n),
        t &&
          ((a = m(e.v, e, !0)),
          (t = m(e.v, e, !1)),
          n instanceof Ts ? (Ns(n, a, t), (n.A = !0)) : n.then(a, t)),
        r && ((n = new Ps(n)), (Ds[n.a] = n), (e.h = n.a));
    }
    function Rs() {
      O.call(this);
    }
    function Os() {
      O.call(this);
    }
    function Ps(t) {
      (this.a = l.setTimeout(m(this.c, this), 0)), (this.b = t);
    }
    ((t = hs.prototype).Ma = function () {
      void 0 !== h &&
        this.a &&
        ((this.h = 'Timed out after ' + this.g + 'ms, aborting'),
        rs(this.b, Is(this, this.h)),
        this.dispatchEvent('timeout'),
        this.abort(8));
    }),
      (t.abort = function () {
        this.a &&
          this.c &&
          (rs(this.b, Is(this, 'Aborting')),
          (this.c = !1),
          (this.f = !0),
          this.a.abort(),
          (this.f = !1),
          this.dispatchEvent('complete'),
          this.dispatchEvent('abort'),
          bs(this));
      }),
      (t.Da = function () {
        this.a &&
          (this.c &&
            ((this.c = !1), (this.f = !0), this.a.abort(), (this.f = !1)),
          bs(this, !0)),
          hs.$a.Da.call(this);
      }),
      (t.Ub = function () {
        this.xa || (this.N || this.i || this.f ? ms(this) : this.Ic());
      }),
      (t.Ic = function () {
        ms(this);
      }),
      (t.getResponse = function () {
        try {
          if (!this.a) return null;
          if ('response' in this.a) return this.a.response;
          switch (this.m) {
            case ls:
            case 'text':
              return this.a.responseText;
            case 'arraybuffer':
              if ('mozResponseArrayBuffer' in this.a)
                return this.a.mozResponseArrayBuffer;
          }
          var t = this.b;
          return (
            t &&
              t.log(
                Yo,
                'Response type ' + this.m + ' is not supported on this browser',
                void 0
              ),
            null
          );
        } catch (t) {
          return rs(this.b, 'Can not get response: ' + t.message), null;
        }
      }),
      (Ts.prototype.cancel = function (t) {
        var e;
        this.a
          ? this.c instanceof Ts && this.c.cancel()
          : (this.b &&
              ((e = this.b),
              delete this.b,
              t ? e.cancel(t) : (e.l--, e.l <= 0 && e.cancel())),
            this.u ? this.u.call(this.s, this) : (this.m = !0),
            this.a || ((t = new Os()), Cs(this), Ss(this, !1, t)));
      }),
      (Ts.prototype.v = function (t, e) {
        (this.i = !1), Ss(this, t, e);
      }),
      (Ts.prototype.then = function (t, e, n) {
        var r,
          i,
          o = new pe(function (t, e) {
            (r = t), (i = e);
          });
        return (
          Ns(this, r, function (t) {
            t instanceof Os ? o.cancel() : i(t);
          }),
          o.then(t, e, n)
        );
      }),
      (Ts.prototype.$goog_Thenable = !0),
      w(Rs, O),
      (Rs.prototype.message = 'Deferred has already fired'),
      (Rs.prototype.name = 'AlreadyCalledError'),
      w(Os, O),
      (Os.prototype.message = 'Deferred was canceled'),
      (Os.prototype.name = 'CanceledError'),
      (Ps.prototype.c = function () {
        throw (delete Ds[this.a], this.b);
      });
    var Ds = {};
    function xs(t) {
      var e = document,
        n = wt(t).toString(),
        r = ae(document, 'SCRIPT'),
        i = { Vb: r, Ma: void 0 },
        o = new Ts(i),
        s = window.setTimeout(function () {
          Ms(r, !0);
          var t = new js(Us, 'Timeout reached for loading script ' + n);
          Cs(o), Ss(o, !1, t);
        }, 5e3);
      return (
        (i.Ma = s),
        (r.onload = r.onreadystatechange = function () {
          (r.readyState &&
            'loaded' != r.readyState &&
            'complete' != r.readyState) ||
            (Ms(r, !1, s), Cs(o), Ss(o, !0, null));
        }),
        (r.onerror = function () {
          Ms(r, !0, s);
          var t = new js(Fs, 'Error while loading script ' + n);
          Cs(o), Ss(o, !1, t);
        }),
        ft((i = {}), { type: 'text/javascript', charset: 'UTF-8' }),
        ne(r, i),
        (i = t),
        pt((t = r), 'HTMLScriptElement'),
        (t.src = wt(i)),
        (i =
          (i = t.ownerDocument && t.ownerDocument.defaultView) && i != l
            ? f(i.document)
            : (null === a && (a = f(l.document)), a)) &&
          t.setAttribute('nonce', i),
        ((e = ((i = e) || document).getElementsByTagName('HEAD')) &&
        0 != e.length
          ? e[0]
          : i.documentElement
        ).appendChild(r),
        o
      );
    }
    function Ls() {
      var t;
      this &&
        this.Vb &&
        (t = this.Vb) &&
        'SCRIPT' == t.tagName &&
        Ms(t, !0, this.Ma);
    }
    function Ms(t, e, n) {
      null != n && l.clearTimeout(n),
        (t.onload = s),
        (t.onerror = s),
        (t.onreadystatechange = s),
        e &&
          window.setTimeout(function () {
            t && t.parentNode && t.parentNode.removeChild(t);
          }, 0);
    }
    var Fs = 0,
      Us = 1;
    function js(t, e) {
      var n = 'Jsloader error (code #' + t + ')';
      e && (n += ': ' + e), O.call(this, n), (this.code = t);
    }
    function Vs(t) {
      this.f = t;
    }
    function qs(t, e, n) {
      if (
        ((this.c = t),
        (t = e || {}),
        (this.l =
          t.secureTokenEndpoint ||
          'https://securetoken.googleapis.com/v1/token'),
        (this.v = t.secureTokenTimeout || Ks),
        (this.g = ht(t.secureTokenHeaders || Hs)),
        (this.h =
          t.firebaseEndpoint ||
          'https://www.googleapis.com/identitytoolkit/v3/relyingparty/'),
        (this.i =
          t.identityPlatformEndpoint ||
          'https://identitytoolkit.googleapis.com/v2/'),
        (this.m = t.firebaseTimeout || zs),
        (this.a = ht(t.firebaseHeaders || Gs)),
        n &&
          ((this.a['X-Client-Version'] = n), (this.g['X-Client-Version'] = n)),
        (n = 'Node' == lr()),
        !(n =
          l.XMLHttpRequest ||
          (n && Jl.INTERNAL.node && Jl.INTERNAL.node.XMLHttpRequest)) && !hr())
      )
        throw new I(
          'internal-error',
          'The XMLHttpRequest compatibility library was not found.'
        );
      (this.f = void 0),
        hr()
          ? (this.f = new is(self))
          : fr()
          ? (this.f = new Vs(n))
          : (this.f = new Wo()),
        (this.b = null);
    }
    w(js, O),
      w(Vs, jo),
      (Vs.prototype.a = function () {
        return new this.f();
      }),
      (Vs.prototype.b = function () {
        return {};
      });
    var Bs,
      Ws = 'idToken',
      Ks = new Or(3e4, 6e4),
      Hs = { 'Content-Type': 'application/x-www-form-urlencoded' },
      zs = new Or(3e4, 6e4),
      Gs = { 'Content-Type': 'application/json' };
    function Qs(t, e) {
      e ? (t.a['X-Firebase-Locale'] = e) : delete t.a['X-Firebase-Locale'];
    }
    function Ys(t, e) {
      e &&
        ((t.l = Xs('https://securetoken.googleapis.com/v1/token', e)),
        (t.h = Xs(
          'https://www.googleapis.com/identitytoolkit/v3/relyingparty/',
          e
        )),
        (t.i = Xs('https://identitytoolkit.googleapis.com/v2/', e)));
    }
    function Xs(t, e) {
      return (
        (t = Rn(t)),
        (e = Rn(e.url)),
        (t.c = t.a + t.c),
        Sn(t, e.f),
        (t.a = e.a),
        Cn(t, e.g),
        t.toString()
      );
    }
    function Js(t, e) {
      e
        ? ((t.a['X-Client-Version'] = e), (t.g['X-Client-Version'] = e))
        : (delete t.a['X-Client-Version'], delete t.g['X-Client-Version']);
    }
    function $s(t, e, n, r, i, o, s) {
      var a;
      (t =
        (((a =
          vr((a = mr())) == dr &&
          (a = a.match(/\sChrome\/(\d+)/i)) &&
          2 == a.length
            ? parseInt(a[1], 10)
            : null) &&
          a < 30) ||
          (Wt && Zt && !(9 < Zt))) &&
        !hr()
          ? ((Bs =
              Bs ||
              new pe(function (t, e) {
                !(function (t, e) {
                  {
                    ((window.gapi || {}).client || {}).request
                      ? t()
                      : ((l[ta] = function () {
                          ((window.gapi || {}).client || {}).request
                            ? t()
                            : e(Error('CORS_UNSUPPORTED'));
                        }),
                        (function (t, e) {
                          Ns(t, null, e, void 0);
                        })(xs(Et(Zs, { onload: ta })), function () {
                          e(Error('CORS_UNSUPPORTED'));
                        }));
                  }
                })(t, e);
              })),
            m(t.s, t))
          : m(t.u, t))(e, n, r, i, o, s);
    }
    (qs.prototype.S = function () {
      return this.b;
    }),
      (qs.prototype.u = function (t, n, e, r, i, o) {
        if (
          hr() &&
          (void 0 === l.fetch || void 0 === l.Headers || void 0 === l.Request)
        )
          throw new I(
            'operation-not-supported-in-this-environment',
            'fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.'
          );
        var s,
          a = new hs(this.f);
        o &&
          ((a.g = Math.max(0, o)),
          (s = setTimeout(function () {
            a.dispatchEvent('timeout');
          }, o))),
          pn(a, 'complete', function () {
            s && clearTimeout(s);
            var e = null;
            try {
              e =
                JSON.parse(
                  (function (e) {
                    try {
                      return e.a ? e.a.responseText : '';
                    } catch (t) {
                      return (
                        rs(e.b, 'Can not get responseText: ' + t.message), ''
                      );
                    }
                  })(this)
                ) || null;
            } catch (t) {
              e = null;
            }
            n && n(e);
          }),
          dn(a, 'ready', function () {
            s && clearTimeout(s), Me(this);
          }),
          dn(a, 'timeout', function () {
            s && clearTimeout(s), Me(this), n && n(null);
          }),
          ds(a, t, e, r, i);
      });
    var Zs = new dt(
        mt,
        'https://apis.google.com/js/client.js?onload=%{onload}'
      ),
      ta = '__fcb' + Math.floor(1e6 * Math.random()).toString();
    function ea(t, e, n, r, i, o, s) {
      var a = Rn(e + n);
      An(a, 'key', t.c), s && An(a, 'cb', _().toString());
      var u = 'GET' == r;
      if (u) for (var c in i) i.hasOwnProperty(c) && An(a, c, i[c]);
      return new pe(function (e, n) {
        $s(
          t,
          a.toString(),
          function (t) {
            t
              ? t.error
                ? n(Xa(t, o || {}))
                : e(t)
              : n(new I('network-request-failed'));
          },
          r,
          u ? void 0 : Qn(Cr(i)),
          t.a,
          t.m.get()
        );
      });
    }
    function na(t) {
      if ('string' != typeof (t = t.email) || !sr.test(t))
        throw new I('invalid-email');
    }
    function ra(t) {
      'email' in t && na(t);
    }
    function ia(t) {
      if (!t[Ws]) {
        if (t.mfaPendingCredential)
          throw new I('multi-factor-auth-required', null, ht(t));
        throw new I('internal-error');
      }
    }
    function oa(t) {
      if (t.phoneNumber || t.temporaryProof) {
        if (!t.phoneNumber || !t.temporaryProof) throw new I('internal-error');
      } else {
        if (!t.sessionInfo) throw new I('missing-verification-id');
        if (!t.code) throw new I('missing-verification-code');
      }
    }
    (qs.prototype.s = function (t, n, r, i, o) {
      var s = this;
      Bs.then(function () {
        window.gapi.client.setApiKey(s.c);
        var e = window.gapi.auth.getToken();
        window.gapi.auth.setToken(null),
          window.gapi.client.request({
            path: t,
            method: r,
            body: i,
            headers: o,
            authType: 'none',
            callback: function (t) {
              window.gapi.auth.setToken(e), n && n(t);
            }
          });
      }).o(function (t) {
        n && n({ error: { message: (t && t.message) || 'CORS_UNSUPPORTED' } });
      });
    }),
      (qs.prototype.yb = function () {
        return Qa(this, Ma, {});
      }),
      (qs.prototype.Ab = function (t, e) {
        return Qa(this, xa, { idToken: t, email: e });
      }),
      (qs.prototype.Bb = function (t, e) {
        return Qa(this, La, { idToken: t, password: e });
      });
    var sa = { displayName: 'DISPLAY_NAME', photoUrl: 'PHOTO_URL' };
    function aa(t) {
      if (!t.phoneVerificationInfo) throw new I('internal-error');
      if (!t.phoneVerificationInfo.sessionInfo)
        throw new I('missing-verification-id');
      if (!t.phoneVerificationInfo.code)
        throw new I('missing-verification-code');
    }
    function ua(t) {
      if (!t.requestUri || (!t.sessionId && !t.postBody && !t.pendingToken))
        throw new I('internal-error');
    }
    function ca(t, e) {
      return (
        e.oauthIdToken &&
          e.providerId &&
          0 == e.providerId.indexOf('oidc.') &&
          !e.pendingToken &&
          (t.sessionId
            ? (e.nonce = t.sessionId)
            : t.postBody &&
              Kn((t = new Vn(t.postBody)), 'nonce') &&
              (e.nonce = t.get('nonce'))),
        e
      );
    }
    function ha(t) {
      var e = null;
      if (
        (t.needConfirmation
          ? ((t.code = 'account-exists-with-different-credential'), (e = Uo(t)))
          : 'FEDERATED_USER_ID_ALREADY_LINKED' == t.errorMessage
          ? ((t.code = 'credential-already-in-use'), (e = Uo(t)))
          : 'EMAIL_EXISTS' == t.errorMessage
          ? ((t.code = 'email-already-in-use'), (e = Uo(t)))
          : t.errorMessage && (e = Ya(t.errorMessage)),
        e)
      )
        throw e;
      ia(t);
    }
    function la(t, e) {
      return (e.returnIdpCredential = !0), Qa(t, ja, e);
    }
    function fa(t, e) {
      return (e.returnIdpCredential = !0), Qa(t, qa, e);
    }
    function pa(t, e) {
      return (e.returnIdpCredential = !0), (e.autoCreate = !1), Qa(t, Va, e);
    }
    function da(t) {
      if (!t.oobCode) throw new I('invalid-action-code');
    }
    ((t = qs.prototype).Cb = function (t, r) {
      var i = { idToken: t },
        o = [];
      return (
        ut(sa, function (t, e) {
          var n = r[e];
          null === n ? o.push(t) : e in r && (i[e] = n);
        }),
        o.length && (i.deleteAttribute = o),
        Qa(this, xa, i)
      );
    }),
      (t.ub = function (t, e) {
        return (
          ft((t = { requestType: 'PASSWORD_RESET', email: t }), e),
          Qa(this, ka, t)
        );
      }),
      (t.vb = function (t, e) {
        return (
          ft((t = { requestType: 'EMAIL_SIGNIN', email: t }), e),
          Qa(this, Ca, t)
        );
      }),
      (t.tb = function (t, e) {
        return (
          ft((t = { requestType: 'VERIFY_EMAIL', idToken: t }), e),
          Qa(this, Na, t)
        );
      }),
      (t.Db = function (t, e, n) {
        return (
          ft(
            (t = {
              requestType: 'VERIFY_AND_CHANGE_EMAIL',
              idToken: t,
              newEmail: e
            }),
            n
          ),
          Qa(this, Aa, t)
        );
      }),
      (t.eb = function (t) {
        return Qa(this, Ka, t);
      }),
      (t.mb = function (t, e) {
        return Qa(this, Pa, { oobCode: t, newPassword: e });
      }),
      (t.Qa = function (t) {
        return Qa(this, ya, { oobCode: t });
      }),
      (t.ib = function (t) {
        return Qa(this, va, { oobCode: t });
      });
    var va = { endpoint: 'setAccountInfo', B: da, Z: 'email', C: !0 },
      ya = {
        endpoint: 'resetPassword',
        B: da,
        F: function (t) {
          var e = t.requestType;
          if (
            !e ||
            (!t.email && 'EMAIL_SIGNIN' != e && 'VERIFY_AND_CHANGE_EMAIL' != e)
          )
            throw new I('internal-error');
        },
        C: !0
      },
      ga = {
        endpoint: 'signupNewUser',
        B: function (t) {
          if ((na(t), !t.password)) throw new I('weak-password');
        },
        F: ia,
        U: !0,
        C: !0
      },
      ma = { endpoint: 'createAuthUri', C: !0 },
      ba = { endpoint: 'deleteAccount', M: ['idToken'] },
      _a = {
        endpoint: 'setAccountInfo',
        M: ['idToken', 'deleteProvider'],
        B: function (t) {
          if (!Array.isArray(t.deleteProvider)) throw new I('internal-error');
        }
      },
      wa = {
        endpoint: 'emailLinkSignin',
        M: ['email', 'oobCode'],
        B: na,
        F: ia,
        U: !0,
        C: !0
      },
      Ea = {
        endpoint: 'emailLinkSignin',
        M: ['idToken', 'email', 'oobCode'],
        B: na,
        F: ia,
        U: !0
      },
      Ia = {
        endpoint: 'accounts/mfaEnrollment:finalize',
        M: ['idToken', 'phoneVerificationInfo'],
        B: aa,
        F: ia,
        C: !0,
        Na: !0
      },
      Ta = {
        endpoint: 'accounts/mfaSignIn:finalize',
        M: ['mfaPendingCredential', 'phoneVerificationInfo'],
        B: aa,
        F: ia,
        C: !0,
        Na: !0
      },
      Sa = { endpoint: 'getAccountInfo' },
      Ca = {
        endpoint: 'getOobConfirmationCode',
        M: ['requestType'],
        B: function (t) {
          if ('EMAIL_SIGNIN' != t.requestType) throw new I('internal-error');
          na(t);
        },
        Z: 'email',
        C: !0
      },
      Na = {
        endpoint: 'getOobConfirmationCode',
        M: ['idToken', 'requestType'],
        B: function (t) {
          if ('VERIFY_EMAIL' != t.requestType) throw new I('internal-error');
        },
        Z: 'email',
        C: !0
      },
      Aa = {
        endpoint: 'getOobConfirmationCode',
        M: ['idToken', 'newEmail', 'requestType'],
        B: function (t) {
          if ('VERIFY_AND_CHANGE_EMAIL' != t.requestType)
            throw new I('internal-error');
        },
        Z: 'email',
        C: !0
      },
      ka = {
        endpoint: 'getOobConfirmationCode',
        M: ['requestType'],
        B: function (t) {
          if ('PASSWORD_RESET' != t.requestType) throw new I('internal-error');
          na(t);
        },
        Z: 'email',
        C: !0
      },
      Ra = { kb: !0, endpoint: 'getProjectConfig', Tb: 'GET' },
      Oa = {
        kb: !0,
        endpoint: 'getRecaptchaParam',
        Tb: 'GET',
        F: function (t) {
          if (!t.recaptchaSiteKey) throw new I('internal-error');
        }
      },
      Pa = { endpoint: 'resetPassword', B: da, Z: 'email', C: !0 },
      Da = {
        endpoint: 'sendVerificationCode',
        M: ['phoneNumber', 'recaptchaToken'],
        Z: 'sessionInfo',
        C: !0
      },
      xa = { endpoint: 'setAccountInfo', M: ['idToken'], B: ra, U: !0 },
      La = {
        endpoint: 'setAccountInfo',
        M: ['idToken'],
        B: function (t) {
          if ((ra(t), !t.password)) throw new I('weak-password');
        },
        F: ia,
        U: !0
      },
      Ma = { endpoint: 'signupNewUser', F: ia, U: !0, C: !0 },
      Fa = {
        endpoint: 'accounts/mfaEnrollment:start',
        M: ['idToken', 'phoneEnrollmentInfo'],
        B: function (t) {
          if (!t.phoneEnrollmentInfo) throw new I('internal-error');
          if (!t.phoneEnrollmentInfo.phoneNumber)
            throw new I('missing-phone-number');
          if (!t.phoneEnrollmentInfo.recaptchaToken)
            throw new I('missing-app-credential');
        },
        F: function (t) {
          if (!t.phoneSessionInfo || !t.phoneSessionInfo.sessionInfo)
            throw new I('internal-error');
        },
        C: !0,
        Na: !0
      },
      Ua = {
        endpoint: 'accounts/mfaSignIn:start',
        M: ['mfaPendingCredential', 'mfaEnrollmentId', 'phoneSignInInfo'],
        B: function (t) {
          if (!t.phoneSignInInfo || !t.phoneSignInInfo.recaptchaToken)
            throw new I('missing-app-credential');
        },
        F: function (t) {
          if (!t.phoneResponseInfo || !t.phoneResponseInfo.sessionInfo)
            throw new I('internal-error');
        },
        C: !0,
        Na: !0
      },
      ja = { endpoint: 'verifyAssertion', B: ua, Xa: ca, F: ha, U: !0, C: !0 },
      Va = {
        endpoint: 'verifyAssertion',
        B: ua,
        Xa: ca,
        F: function (t) {
          if (t.errorMessage && 'USER_NOT_FOUND' == t.errorMessage)
            throw new I('user-not-found');
          if (t.errorMessage) throw Ya(t.errorMessage);
          ia(t);
        },
        U: !0,
        C: !0
      },
      qa = {
        endpoint: 'verifyAssertion',
        B: function (t) {
          if ((ua(t), !t.idToken)) throw new I('internal-error');
        },
        Xa: ca,
        F: ha,
        U: !0
      },
      Ba = {
        endpoint: 'verifyCustomToken',
        B: function (t) {
          if (!t.token) throw new I('invalid-custom-token');
        },
        F: ia,
        U: !0,
        C: !0
      },
      Wa = {
        endpoint: 'verifyPassword',
        B: function (t) {
          if ((na(t), !t.password)) throw new I('wrong-password');
        },
        F: ia,
        U: !0,
        C: !0
      },
      Ka = { endpoint: 'verifyPhoneNumber', B: oa, F: ia, C: !0 },
      Ha = {
        endpoint: 'verifyPhoneNumber',
        B: function (t) {
          if (!t.idToken) throw new I('internal-error');
          oa(t);
        },
        F: function (t) {
          if (t.temporaryProof)
            throw ((t.code = 'credential-already-in-use'), Uo(t));
          ia(t);
        }
      },
      za = {
        Gb: { USER_NOT_FOUND: 'user-not-found' },
        endpoint: 'verifyPhoneNumber',
        B: oa,
        F: ia,
        C: !0
      },
      Ga = {
        endpoint: 'accounts/mfaEnrollment:withdraw',
        M: ['idToken', 'mfaEnrollmentId'],
        F: function (t) {
          if (!!t[Ws] ^ !!t.refreshToken) throw new I('internal-error');
        },
        C: !0,
        Na: !0
      };
    function Qa(t, e, n) {
      if (
        !(function (t, e) {
          if (!e || !e.length) return 1;
          if (t) {
            for (var n = 0; n < e.length; n++) {
              var r = t[e[n]];
              if (null == r || '' === r) return;
            }
            return 1;
          }
        })(n, e.M)
      )
        return we(new I('internal-error'));
      var r,
        i = !!e.Na,
        o = e.Tb || 'POST';
      return _e(n)
        .then(e.B)
        .then(function () {
          return (
            e.U && (n.returnSecureToken = !0),
            e.C && t.b && void 0 === n.tenantId && (n.tenantId = t.b),
            ea(t, i ? t.i : t.h, e.endpoint, o, n, e.Gb, e.kb || !1)
          );
        })
        .then(function (t) {
          return (r = t), e.Xa ? e.Xa(n, r) : r;
        })
        .then(e.F)
        .then(function () {
          if (!e.Z) return r;
          if (!(e.Z in r)) throw new I('internal-error');
          return r[e.Z];
        });
    }
    function Ya(t) {
      return Xa({ error: { errors: [{ message: t }], code: 400, message: t } });
    }
    function Xa(t, e) {
      var n,
        r =
          ((t.error && t.error.errors && t.error.errors[0]) || {}).reason || '',
        i = {
          keyInvalid: 'invalid-api-key',
          ipRefererBlocked: 'app-not-authorized'
        };
      if ((r = i[r] ? new I(i[r]) : null)) return r;
      for (n in ((r = (t.error && t.error.message) || ''),
      ft(
        (i = {
          INVALID_CUSTOM_TOKEN: 'invalid-custom-token',
          CREDENTIAL_MISMATCH: 'custom-token-mismatch',
          MISSING_CUSTOM_TOKEN: 'internal-error',
          INVALID_IDENTIFIER: 'invalid-email',
          MISSING_CONTINUE_URI: 'internal-error',
          INVALID_EMAIL: 'invalid-email',
          INVALID_PASSWORD: 'wrong-password',
          USER_DISABLED: 'user-disabled',
          MISSING_PASSWORD: 'internal-error',
          EMAIL_EXISTS: 'email-already-in-use',
          PASSWORD_LOGIN_DISABLED: 'operation-not-allowed',
          INVALID_IDP_RESPONSE: 'invalid-credential',
          INVALID_PENDING_TOKEN: 'invalid-credential',
          FEDERATED_USER_ID_ALREADY_LINKED: 'credential-already-in-use',
          MISSING_OR_INVALID_NONCE: 'missing-or-invalid-nonce',
          INVALID_MESSAGE_PAYLOAD: 'invalid-message-payload',
          INVALID_RECIPIENT_EMAIL: 'invalid-recipient-email',
          INVALID_SENDER: 'invalid-sender',
          EMAIL_NOT_FOUND: 'user-not-found',
          RESET_PASSWORD_EXCEED_LIMIT: 'too-many-requests',
          EXPIRED_OOB_CODE: 'expired-action-code',
          INVALID_OOB_CODE: 'invalid-action-code',
          MISSING_OOB_CODE: 'internal-error',
          INVALID_PROVIDER_ID: 'invalid-provider-id',
          CREDENTIAL_TOO_OLD_LOGIN_AGAIN: 'requires-recent-login',
          INVALID_ID_TOKEN: 'invalid-user-token',
          TOKEN_EXPIRED: 'user-token-expired',
          USER_NOT_FOUND: 'user-token-expired',
          CORS_UNSUPPORTED: 'cors-unsupported',
          DYNAMIC_LINK_NOT_ACTIVATED: 'dynamic-link-not-activated',
          INVALID_APP_ID: 'invalid-app-id',
          TOO_MANY_ATTEMPTS_TRY_LATER: 'too-many-requests',
          WEAK_PASSWORD: 'weak-password',
          OPERATION_NOT_ALLOWED: 'operation-not-allowed',
          USER_CANCELLED: 'user-cancelled',
          CAPTCHA_CHECK_FAILED: 'captcha-check-failed',
          INVALID_APP_CREDENTIAL: 'invalid-app-credential',
          INVALID_CODE: 'invalid-verification-code',
          INVALID_PHONE_NUMBER: 'invalid-phone-number',
          INVALID_SESSION_INFO: 'invalid-verification-id',
          INVALID_TEMPORARY_PROOF: 'invalid-credential',
          MISSING_APP_CREDENTIAL: 'missing-app-credential',
          MISSING_CODE: 'missing-verification-code',
          MISSING_PHONE_NUMBER: 'missing-phone-number',
          MISSING_SESSION_INFO: 'missing-verification-id',
          QUOTA_EXCEEDED: 'quota-exceeded',
          SESSION_EXPIRED: 'code-expired',
          REJECTED_CREDENTIAL: 'rejected-credential',
          INVALID_CONTINUE_URI: 'invalid-continue-uri',
          MISSING_ANDROID_PACKAGE_NAME: 'missing-android-pkg-name',
          MISSING_IOS_BUNDLE_ID: 'missing-ios-bundle-id',
          UNAUTHORIZED_DOMAIN: 'unauthorized-continue-uri',
          INVALID_DYNAMIC_LINK_DOMAIN: 'invalid-dynamic-link-domain',
          INVALID_OAUTH_CLIENT_ID: 'invalid-oauth-client-id',
          INVALID_CERT_HASH: 'invalid-cert-hash',
          UNSUPPORTED_TENANT_OPERATION: 'unsupported-tenant-operation',
          INVALID_TENANT_ID: 'invalid-tenant-id',
          TENANT_ID_MISMATCH: 'tenant-id-mismatch',
          ADMIN_ONLY_OPERATION: 'admin-restricted-operation',
          INVALID_MFA_PENDING_CREDENTIAL: 'invalid-multi-factor-session',
          MFA_ENROLLMENT_NOT_FOUND: 'multi-factor-info-not-found',
          MISSING_MFA_PENDING_CREDENTIAL: 'missing-multi-factor-session',
          MISSING_MFA_ENROLLMENT_ID: 'missing-multi-factor-info',
          EMAIL_CHANGE_NEEDS_VERIFICATION: 'email-change-needs-verification',
          SECOND_FACTOR_EXISTS: 'second-factor-already-in-use',
          SECOND_FACTOR_LIMIT_EXCEEDED: 'maximum-second-factor-count-exceeded',
          UNSUPPORTED_FIRST_FACTOR: 'unsupported-first-factor',
          UNVERIFIED_EMAIL: 'unverified-email'
        }),
        e || {}
      ),
      (e =
        (e = r.match(/^[^\s]+\s*:\s*([\s\S]*)$/)) && 1 < e.length
          ? e[1]
          : void 0),
      i))
        if (0 === r.indexOf(n)) return new I(i[n], e);
      return !e && t && (e = Sr(t)), new I('internal-error', e);
    }
    function Ja(t) {
      var o;
      (this.b = t),
        (this.a = null),
        (this.qb =
          ((o = this),
          (
            eu ||
            (eu = new pe(function (t, e) {
              function n() {
                Rr(),
                  br('gapi.load')('gapi.iframes', {
                    callback: t,
                    ontimeout: function () {
                      Rr(), e(Error('Network Error'));
                    },
                    timeout: Za.get()
                  });
              }
              var r;
              br('gapi.iframes.Iframe')
                ? t()
                : br('gapi.load')
                ? n()
                : ((r =
                    '__iframefcb' + Math.floor(1e6 * Math.random()).toString()),
                  (l[r] = function () {
                    br('gapi.load') ? n() : e(Error('Network Error'));
                  }),
                  _e(xs((r = Et($a, { onload: r })))).o(function () {
                    e(Error('Network Error'));
                  }));
            }).o(function (t) {
              throw ((eu = null), t);
            }))
          ).then(function () {
            return new pe(function (r, i) {
              br('gapi.iframes.getContext')().open(
                {
                  where: document.body,
                  url: o.b,
                  messageHandlersFilter: br(
                    'gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER'
                  ),
                  attributes: {
                    style: {
                      position: 'absolute',
                      top: '-100px',
                      width: '1px',
                      height: '1px'
                    }
                  },
                  dontclear: !0
                },
                function (t) {
                  function e() {
                    clearTimeout(n), r();
                  }
                  (o.a = t), o.a.restyle({ setHideOnLeave: !1 });
                  var n = setTimeout(function () {
                    i(Error('Network Error'));
                  }, tu.get());
                  t.ping(e).then(e, function () {
                    i(Error('Network Error'));
                  });
                }
              );
            });
          })));
    }
    var $a = new dt(mt, 'https://apis.google.com/js/api.js?onload=%{onload}'),
      Za = new Or(3e4, 6e4),
      tu = new Or(5e3, 15e3),
      eu = null;
    function nu(t, e, n, r) {
      (this.l = t),
        (this.h = e),
        (this.i = n),
        (this.g = r),
        (this.f = null),
        (t = this.g
          ? On((t = Rn(this.g.url)).f, t.a, t.g, '/emulator/auth/iframe')
          : On('https', this.l, null, '/__/auth/iframe')),
        (this.a = t),
        An(this.a, 'apiKey', this.h),
        An(this.a, 'appName', this.i),
        (this.b = null),
        (this.c = []);
    }
    function ru(t, e, n, r, i, o) {
      (this.u = t),
        (this.s = e),
        (this.c = n),
        (this.v = r),
        (this.m = o),
        (this.i = this.g = this.l = null),
        (this.a = i),
        (this.h = this.f = null);
    }
    function iu(t) {
      try {
        return Jl.app(t).auth().Ga();
      } catch (t) {
        return [];
      }
    }
    function ou(t, e, n, r, i, o) {
      (this.s = t),
        (this.g = e),
        (this.b = n),
        (this.f = o),
        (this.c = r || null),
        (this.i = i || null),
        (this.l = this.u = this.A = null),
        (this.h = []),
        (this.v = this.a = null);
    }
    function su(t) {
      var a = tr();
      return Qa(t, Ra, {})
        .then(function (t) {
          return t.authorizedDomains || [];
        })
        .then(function (t) {
          t: {
            for (var e = (n = Rn(a)).f, n = n.a, r = 0; r < t.length; r++) {
              var i = t[r],
                o = n,
                s = e;
              if (
                (o =
                  0 == i.indexOf('chrome-extension://')
                    ? Rn(i).a == o && 'chrome-extension' == s
                    : ('http' == s || 'https' == s) &&
                      (or.test(i)
                        ? o == i
                        : ((i = i.split('.').join('\\.')),
                          new RegExp('^(.+\\.' + i + '|' + i + ')$', 'i').test(
                            o
                          ))))
              ) {
                t = !0;
                break t;
              }
            }
            t = !1;
          }
          if (!t) throw new Mo(tr());
        });
    }
    function au(i) {
      return (
        i.v ||
          (i.v = ar().then(function () {
            var t, e, n, r;
            i.u ||
              ((t = i.c),
              (e = i.i),
              (n = iu(i.b)),
              ((r = new nu(i.s, i.g, i.b, i.f)).f = t),
              (r.b = e),
              (r.c = Q(n || [])),
              (i.u = r.toString())),
              (i.m = new Ja(i.u)),
              (function (r) {
                if (!r.m) throw Error('IfcHandler must be initialized!');
                !(function (t, e) {
                  t.qb.then(function () {
                    t.a.register(
                      'authEvent',
                      e,
                      br('gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER')
                    );
                  });
                })(r.m, function (t) {
                  var e = {};
                  if (t && t.authEvent) {
                    var n = !1;
                    for (t = Po(t.authEvent), e = 0; e < r.h.length; e++)
                      n = r.h[e](t) || n;
                    return ((e = {}).status = n ? 'ACK' : 'ERROR'), _e(e);
                  }
                  return (e.status = 'ERROR'), _e(e);
                });
              })(i);
          })),
        i.v
      );
    }
    function uu(t) {
      return (
        t.l ||
          ((t.A = t.c ? gr(t.c, iu(t.b)) : null),
          (t.l = new qs(t.g, k(t.i), t.A)),
          t.f && Ys(t.l, t.f)),
        t.l
      );
    }
    function cu(t, e, n, r, i, o, s, a, u, c, h, l) {
      return (
        ((t = new ru(t, e, n, r, i, l)).l = o),
        (t.g = s),
        (t.i = a),
        (t.b = ht(u || null)),
        (t.f = c),
        t.xb(h).toString()
      );
    }
    function hu(t) {
      if (
        ((this.a =
          t ||
          (Jl.INTERNAL.reactNative && Jl.INTERNAL.reactNative.AsyncStorage)),
        !this.a)
      )
        throw new I(
          'internal-error',
          'The React Native compatibility library was not found.'
        );
      this.type = 'asyncStorage';
    }
    function lu(t) {
      (this.b = t), (this.a = {}), (this.f = m(this.c, this));
    }
    (nu.prototype.toString = function () {
      return (
        this.f ? An(this.a, 'v', this.f) : Wn(this.a.b, 'v'),
        this.b ? An(this.a, 'eid', this.b) : Wn(this.a.b, 'eid'),
        this.c.length ? An(this.a, 'fw', this.c.join(',')) : Wn(this.a.b, 'fw'),
        this.a.toString()
      );
    }),
      (ru.prototype.xb = function (t) {
        return (this.h = t), this;
      }),
      (ru.prototype.toString = function () {
        var t;
        if (
          (An(
            (t = this.m
              ? On((t = Rn(this.m.url)).f, t.a, t.g, '/emulator/auth/handler')
              : On('https', this.u, null, '/__/auth/handler')),
            'apiKey',
            this.s
          ),
          An(t, 'appName', this.c),
          An(t, 'authType', this.v),
          this.a.isOAuthProvider)
        ) {
          var e,
            n = this.a;
          try {
            var r = Jl.app(this.c).auth().ka();
          } catch (t) {
            r = null;
          }
          for (e in ((n.nb = r),
          An(t, 'providerId', this.a.providerId),
          (n = Cr((r = this.a).Hb))))
            n[e] = n[e].toString();
          (e = r.Pc), (n = ht(n));
          for (var i = 0; i < e.length; i++) {
            var o = e[i];
            o in n && delete n[o];
          }
          r.ob && r.nb && !n[r.ob] && (n[r.ob] = r.nb),
            ct(n) || An(t, 'customParameters', Sr(n));
        }
        if (
          ('function' == typeof this.a.Pb &&
            (r = this.a.Pb()).length &&
            An(t, 'scopes', r.join(',')),
          this.l ? An(t, 'redirectUrl', this.l) : Wn(t.b, 'redirectUrl'),
          this.g ? An(t, 'eventId', this.g) : Wn(t.b, 'eventId'),
          this.i ? An(t, 'v', this.i) : Wn(t.b, 'v'),
          this.b)
        )
          for (var s in this.b)
            this.b.hasOwnProperty(s) && !kn(t, s) && An(t, s, this.b[s]);
        return (
          this.h ? An(t, 'tid', this.h) : Wn(t.b, 'tid'),
          this.f ? An(t, 'eid', this.f) : Wn(t.b, 'eid'),
          (s = iu(this.c)).length && An(t, 'fw', s.join(',')),
          t.toString()
        );
      }),
      ((t = ou.prototype).Nb = function (e, n, t) {
        var r = new I('popup-closed-by-user'),
          i = new I('web-storage-unsupported'),
          o = this,
          s = !1;
        return this.la()
          .then(function () {
            var t, r;
            (r = { type: 'webStorageSupport' }),
              au((t = o))
                .then(function () {
                  return (
                    (e = t.m),
                    (n = r),
                    e.qb.then(function () {
                      return new pe(function (t) {
                        e.a.send(
                          n.type,
                          n,
                          t,
                          br('gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER')
                        );
                      });
                    })
                  );
                  var e, n;
                })
                .then(function (t) {
                  if (t && t.length && void 0 !== t[0].webStorageSupport)
                    return t[0].webStorageSupport;
                  throw Error();
                })
                .then(function (t) {
                  t || (e && rr(e), n(i), (s = !0));
                });
          })
          .o(function () {})
          .then(function () {
            if (!s)
              return (
                (n = e),
                new pe(function (e) {
                  return (function t() {
                    gn(2e3).then(function () {
                      return n && !n.closed ? t() : void e();
                    });
                  })();
                })
              );
            var n;
          })
          .then(function () {
            if (!s)
              return gn(t).then(function () {
                n(r);
              });
          });
      }),
      (t.Wb = function () {
        var t = mr();
        return !Tr(t) && !kr(t);
      }),
      (t.Sb = function () {
        return !1;
      }),
      (t.Lb = function (e, t, n, r, i, o, s, a) {
        if (!e) return we(new I('popup-blocked'));
        if (s && !Tr())
          return (
            this.la().o(function (t) {
              rr(e), i(t);
            }),
            r(),
            _e()
          );
        this.a || (this.a = su(uu(this)));
        var u = this;
        return this.a
          .then(function () {
            var t = u.la().o(function (t) {
              throw (rr(e), i(t), t);
            });
            return r(), t;
          })
          .then(function () {
            Ro(n),
              s ||
                er(
                  cu(u.s, u.g, u.b, t, n, null, o, u.c, void 0, u.i, a, u.f),
                  e
                );
          })
          .o(function (t) {
            throw ('auth/network-request-failed' == t.code && (u.a = null), t);
          });
      }),
      (t.Mb = function (t, e, n, r) {
        this.a || (this.a = su(uu(this)));
        var i = this;
        return this.a
          .then(function () {
            Ro(e),
              er(cu(i.s, i.g, i.b, t, e, tr(), n, i.c, void 0, i.i, r, i.f));
          })
          .o(function (t) {
            throw ('auth/network-request-failed' == t.code && (i.a = null), t);
          });
      }),
      (t.la = function () {
        var t = this;
        return au(this)
          .then(function () {
            return t.m.qb;
          })
          .o(function () {
            throw ((t.a = null), new I('network-request-failed'));
          });
      }),
      (t.Zb = function () {
        return !0;
      }),
      (t.Ea = function (t) {
        this.h.push(t);
      }),
      (t.Ra = function (e) {
        z(this.h, function (t) {
          return t == e;
        });
      }),
      ((t = hu.prototype).get = function (t) {
        return _e(this.a.getItem(t)).then(function (t) {
          return t && Nr(t);
        });
      }),
      (t.set = function (t, e) {
        return _e(this.a.setItem(t, Sr(e)));
      }),
      (t.T = function (t) {
        return _e(this.a.removeItem(t));
      }),
      (t.ca = function () {}),
      (t.ia = function () {});
    var fu,
      pu = [];
    function du(t, e, n) {
      ct(t.a) && t.b.addEventListener('message', t.f),
        void 0 === t.a[e] && (t.a[e] = []),
        t.a[e].push(n);
    }
    function vu(t) {
      this.a = t;
    }
    function yu(t) {
      (this.c = t), (this.b = !1), (this.a = []);
    }
    function gu(r, t, e, n) {
      var i,
        o,
        s,
        a,
        u = e || {},
        c = null;
      if (r.b) return we(Error('connection_unavailable'));
      var h = n ? 800 : 50,
        l = 'undefined' != typeof MessageChannel ? new MessageChannel() : null;
      return new pe(function (e, n) {
        l
          ? ((i = Math.floor(Math.random() * Math.pow(10, 20)).toString()),
            l.port1.start(),
            (s = setTimeout(function () {
              n(Error('unsupported_event'));
            }, h)),
            (c = {
              messageChannel: l,
              onMessage: (o = function (t) {
                t.data.eventId === i &&
                  ('ack' === t.data.status
                    ? (clearTimeout(s),
                      (a = setTimeout(function () {
                        n(Error('timeout'));
                      }, 3e3)))
                    : 'done' === t.data.status
                    ? (clearTimeout(a),
                      void 0 !== t.data.response
                        ? e(t.data.response)
                        : n(Error('unknown_error')))
                    : (clearTimeout(s),
                      clearTimeout(a),
                      n(Error('invalid_response'))));
              })
            }),
            r.a.push(c),
            l.port1.addEventListener('message', o),
            r.c.postMessage({ eventType: t, eventId: i, data: u }, [l.port2]))
          : n(Error('connection_unavailable'));
      })
        .then(function (t) {
          return mu(r, c), t;
        })
        .o(function (t) {
          throw (mu(r, c), t);
        });
    }
    function mu(t, e) {
      var n, r;
      e &&
        ((n = e.messageChannel),
        (r = e.onMessage),
        n && (n.port1.removeEventListener('message', r), n.port1.close()),
        z(t.a, function (t) {
          return t == e;
        }));
    }
    function bu() {
      if (!Iu()) throw new I('web-storage-unsupported');
      (this.c = {}),
        (this.a = []),
        (this.b = 0),
        (this.v = l.indexedDB),
        (this.type = 'indexedDB'),
        (this.g = this.m = this.f = this.l = null),
        (this.s = !1),
        (this.h = null);
      var t,
        e,
        n,
        r = this;
      hr() && self
        ? ((this.m =
            ((n = hr() ? self : null),
            V(pu, function (t) {
              t.b == n && (e = t);
            }),
            e || ((e = new lu(n)), pu.push(e)),
            e)),
          du(this.m, 'keyChanged', function (t, n) {
            return Au(r).then(function (e) {
              return (
                0 < e.length &&
                  V(r.a, function (t) {
                    t(e);
                  }),
                { keyProcessed: K(e, n.key) }
              );
            });
          }),
          du(this.m, 'ping', function () {
            return _e(['keyChanged']);
          }))
        : ((t = l.navigator) && t.serviceWorker
            ? _e()
                .then(function () {
                  return t.serviceWorker.ready;
                })
                .then(function (t) {
                  return t.active || null;
                })
                .o(function () {
                  return null;
                })
            : _e(null)
          ).then(function (t) {
            (r.h = t) &&
              ((r.g = new yu(new vu(t))),
              gu(r.g, 'ping', null, !0)
                .then(function (t) {
                  t[0].fulfilled && K(t[0].value, 'keyChanged') && (r.s = !0);
                })
                .o(function () {}));
          });
    }
    function _u(i) {
      return new pe(function (e, n) {
        var t = i.v.open('firebaseLocalStorageDb', 1);
        (t.onerror = function (t) {
          try {
            t.preventDefault();
          } catch (t) {}
          n(Error(t.target.error));
        }),
          (t.onupgradeneeded = function (t) {
            t = t.target.result;
            try {
              t.createObjectStore('firebaseLocalStorage', {
                keyPath: 'fbase_key'
              });
            } catch (t) {
              n(t);
            }
          }),
          (t.onsuccess = function (t) {
            var r;
            (t = t.target.result).objectStoreNames.contains(
              'firebaseLocalStorage'
            )
              ? e(t)
              : ((r = i),
                new pe(function (t, e) {
                  var n = r.v.deleteDatabase('firebaseLocalStorageDb');
                  (n.onsuccess = function () {
                    t();
                  }),
                    (n.onerror = function (t) {
                      e(Error(t.target.error));
                    });
                })
                  .then(function () {
                    return _u(i);
                  })
                  .then(function (t) {
                    e(t);
                  })
                  .o(function (t) {
                    n(t);
                  }));
          });
      });
    }
    function wu(t) {
      return t.i || (t.i = _u(t)), t.i;
    }
    function Eu(i, t) {
      var o = 0;
      return new pe(function e(n, r) {
        wu(i)
          .then(t)
          .then(n)
          .o(function (t) {
            return 3 < ++o
              ? void r(t)
              : wu(i)
                  .then(function (t) {
                    return t.close(), (i.i = void 0), e(n, r);
                  })
                  .o(function (t) {
                    r(t);
                  });
          });
      });
    }
    function Iu() {
      try {
        return l.indexedDB;
      } catch (t) {
        return;
      }
    }
    function Tu(t) {
      return t.objectStore('firebaseLocalStorage');
    }
    function Su(t, e) {
      return t.transaction(
        ['firebaseLocalStorage'],
        e ? 'readwrite' : 'readonly'
      );
    }
    function Cu(t) {
      return new pe(function (e, n) {
        (t.onsuccess = function (t) {
          t && t.target ? e(t.target.result) : e();
        }),
          (t.onerror = function (t) {
            n(t.target.error);
          });
      });
    }
    function Nu(t, e) {
      return t.g &&
        t.h &&
        (((n = l.navigator) && n.serviceWorker && n.serviceWorker.controller) ||
          null) === t.h
        ? gu(t.g, 'keyChanged', { key: e }, t.s)
            .then(function () {})
            .o(function () {})
        : _e();
      var n;
    }
    function Au(r) {
      return wu(r)
        .then(function (t) {
          var i = Tu(Su(t, !1));
          return i.getAll
            ? Cu(i.getAll())
            : new pe(function (e, n) {
                var r = [],
                  t = i.openCursor();
                (t.onsuccess = function (t) {
                  (t = t.target.result)
                    ? (r.push(t.value), t.continue())
                    : e(r);
                }),
                  (t.onerror = function (t) {
                    n(t.target.error);
                  });
              });
        })
        .then(function (t) {
          var e = {},
            n = [];
          if (0 == r.b) {
            for (n = 0; n < t.length; n++) e[t[n].fbase_key] = t[n].value;
            (n = (function t(e, n) {
              var r,
                i = [];
              for (r in e)
                r in n && typeof e[r] == typeof n[r]
                  ? 'object' == typeof e[r] && null != e[r] && null != n[r]
                    ? 0 < t(e[r], n[r]).length && i.push(r)
                    : e[r] !== n[r] && i.push(r)
                  : i.push(r);
              for (r in n) r in e || i.push(r);
              return i;
            })(r.c, e)),
              (r.c = e);
          }
          return n;
        });
    }
    function ku(t) {
      t.l && t.l.cancel('STOP_EVENT'), t.f && (clearTimeout(t.f), (t.f = null));
    }
    function Ru(t) {
      var r = this,
        i = null;
      (this.a = []),
        (this.type = 'indexedDB'),
        (this.c = t),
        (this.b = _e()
          .then(function () {
            if (Iu()) {
              var e = Ar(),
                n = '__sak' + e;
              return (
                (fu = fu || new bu()),
                (i = fu)
                  .set(n, e)
                  .then(function () {
                    return i.get(n);
                  })
                  .then(function (t) {
                    if (t !== e) throw Error('indexedDB not supported!');
                    return i.T(n);
                  })
                  .then(function () {
                    return i;
                  })
                  .o(function () {
                    return r.c;
                  })
              );
            }
            return r.c;
          })
          .then(function (t) {
            return (
              (r.type = t.type),
              t.ca(function (e) {
                V(r.a, function (t) {
                  t(e);
                });
              }),
              t
            );
          }));
    }
    function Ou() {
      (this.a = {}), (this.type = 'inMemory');
    }
    function Pu() {
      if (
        !(function () {
          var t = 'Node' == lr();
          if (
            !(t =
              Du() || (t && Jl.INTERNAL.node && Jl.INTERNAL.node.localStorage))
          )
            return !1;
          try {
            return t.setItem('__sak', '1'), t.removeItem('__sak'), !0;
          } catch (t) {
            return !1;
          }
        })()
      ) {
        if ('Node' == lr())
          throw new I(
            'internal-error',
            'The LocalStorage compatibility library was not found.'
          );
        throw new I('web-storage-unsupported');
      }
      (this.a = Du() || Jl.INTERNAL.node.localStorage),
        (this.type = 'localStorage');
    }
    function Du() {
      try {
        var t = l.localStorage,
          e = Ar();
        return t && (t.setItem(e, '1'), t.removeItem(e)), t;
      } catch (t) {
        return null;
      }
    }
    function xu() {
      this.type = 'nullStorage';
    }
    function Lu() {
      if (
        !(function () {
          var t = 'Node' == lr();
          if (
            !(t =
              Mu() ||
              (t && Jl.INTERNAL.node && Jl.INTERNAL.node.sessionStorage))
          )
            return !1;
          try {
            return t.setItem('__sak', '1'), t.removeItem('__sak'), !0;
          } catch (t) {
            return !1;
          }
        })()
      ) {
        if ('Node' == lr())
          throw new I(
            'internal-error',
            'The SessionStorage compatibility library was not found.'
          );
        throw new I('web-storage-unsupported');
      }
      (this.a = Mu() || Jl.INTERNAL.node.sessionStorage),
        (this.type = 'sessionStorage');
    }
    function Mu() {
      try {
        var t = l.sessionStorage,
          e = Ar();
        return t && (t.setItem(e, '1'), t.removeItem(e)), t;
      } catch (t) {
        return null;
      }
    }
    function Fu() {
      var t = {};
      (t.Browser = Vu),
        (t.Node = qu),
        (t.ReactNative = Bu),
        (t.Worker = Wu),
        (this.a = t[lr()]);
    }
    (lu.prototype.c = function (n) {
      var e,
        r = n.data.eventType,
        i = n.data.eventId,
        t = this.a[r];
      t &&
        0 < t.length &&
        (n.ports[0].postMessage({
          status: 'ack',
          eventId: i,
          eventType: r,
          response: null
        }),
        (e = []),
        V(t, function (t) {
          e.push(
            _e().then(function () {
              return t(n.origin, n.data.data);
            })
          );
        }),
        Ie(e).then(function (t) {
          var e = [];
          V(t, function (t) {
            e.push({
              fulfilled: t.Ob,
              value: t.value,
              reason: t.reason ? t.reason.message : void 0
            });
          }),
            V(e, function (t) {
              for (var e in t) void 0 === t[e] && delete t[e];
            }),
            n.ports[0].postMessage({
              status: 'done',
              eventId: i,
              eventType: r,
              response: e
            });
        }));
    }),
      (vu.prototype.postMessage = function (t, e) {
        this.a.postMessage(t, e);
      }),
      (yu.prototype.close = function () {
        for (; 0 < this.a.length; ) mu(this, this.a[0]);
        this.b = !0;
      }),
      ((t = bu.prototype).set = function (r, i) {
        var o = this,
          s = !1;
        return Eu(this, function (t) {
          return Cu((t = Tu(Su(t, !0))).get(r));
        })
          .then(function (n) {
            return Eu(o, function (t) {
              if (((t = Tu(Su(t, !0))), n)) return (n.value = i), Cu(t.put(n));
              o.b++, (s = !0);
              var e = {};
              return (e.fbase_key = r), (e.value = i), Cu(t.add(e));
            });
          })
          .then(function () {
            return (o.c[r] = i), Nu(o, r);
          })
          .na(function () {
            s && o.b--;
          });
      }),
      (t.get = function (e) {
        return Eu(this, function (t) {
          return Cu(Tu(Su(t, !1)).get(e));
        }).then(function (t) {
          return t && t.value;
        });
      }),
      (t.T = function (e) {
        var n = this,
          r = !1;
        return Eu(this, function (t) {
          return (r = !0), n.b++, Cu(Tu(Su(t, !0)).delete(e));
        })
          .then(function () {
            return delete n.c[e], Nu(n, e);
          })
          .na(function () {
            r && n.b--;
          });
      }),
      (t.ca = function (t) {
        var n;
        0 == this.a.length &&
          (ku((n = this)),
          (function e() {
            n.f = setTimeout(function () {
              n.l = Au(n)
                .then(function (e) {
                  0 < e.length &&
                    V(n.a, function (t) {
                      t(e);
                    });
                })
                .then(function () {
                  e();
                })
                .o(function (t) {
                  'STOP_EVENT' != t.message && e();
                });
            }, 800);
          })()),
          this.a.push(t);
      }),
      (t.ia = function (e) {
        z(this.a, function (t) {
          return t == e;
        }),
          0 == this.a.length && ku(this);
      }),
      ((t = Ru.prototype).get = function (e) {
        return this.b.then(function (t) {
          return t.get(e);
        });
      }),
      (t.set = function (e, n) {
        return this.b.then(function (t) {
          return t.set(e, n);
        });
      }),
      (t.T = function (e) {
        return this.b.then(function (t) {
          return t.T(e);
        });
      }),
      (t.ca = function (t) {
        this.a.push(t);
      }),
      (t.ia = function (e) {
        z(this.a, function (t) {
          return t == e;
        });
      }),
      ((t = Ou.prototype).get = function (t) {
        return _e(this.a[t]);
      }),
      (t.set = function (t, e) {
        return (this.a[t] = e), _e();
      }),
      (t.T = function (t) {
        return delete this.a[t], _e();
      }),
      (t.ca = function () {}),
      (t.ia = function () {}),
      ((t = Pu.prototype).get = function (t) {
        var e = this;
        return _e().then(function () {
          return Nr(e.a.getItem(t));
        });
      }),
      (t.set = function (e, n) {
        var r = this;
        return _e().then(function () {
          var t = Sr(n);
          null === t ? r.T(e) : r.a.setItem(e, t);
        });
      }),
      (t.T = function (t) {
        var e = this;
        return _e().then(function () {
          e.a.removeItem(t);
        });
      }),
      (t.ca = function (t) {
        l.window && Ze(l.window, 'storage', t);
      }),
      (t.ia = function (t) {
        l.window && nn(l.window, 'storage', t);
      }),
      ((t = xu.prototype).get = function () {
        return _e(null);
      }),
      (t.set = function () {
        return _e();
      }),
      (t.T = function () {
        return _e();
      }),
      (t.ca = function () {}),
      (t.ia = function () {}),
      ((t = Lu.prototype).get = function (t) {
        var e = this;
        return _e().then(function () {
          return Nr(e.a.getItem(t));
        });
      }),
      (t.set = function (e, n) {
        var r = this;
        return _e().then(function () {
          var t = Sr(n);
          null === t ? r.T(e) : r.a.setItem(e, t);
        });
      }),
      (t.T = function (t) {
        var e = this;
        return _e().then(function () {
          e.a.removeItem(t);
        });
      }),
      (t.ca = function () {}),
      (t.ia = function () {});
    var Uu,
      ju,
      Vu = { D: Pu, ab: Lu },
      qu = { D: Pu, ab: Lu },
      Bu = { D: hu, ab: xu },
      Wu = { D: Pu, ab: xu },
      Ku = { qd: 'local', NONE: 'none', sd: 'session' };
    function Hu() {
      var t = !(kr(mr()) || !cr()),
        e = Tr(),
        n = _r();
      (this.v = t),
        (this.h = e),
        (this.l = n),
        (this.a = {}),
        (t = Uu = Uu || new Fu());
      try {
        this.g =
          (!Zn() && Lr()) || !l.indexedDB
            ? new t.a.D()
            : new Ru(new (hr() ? Ou : t.a.D)());
      } catch (t) {
        (this.g = new Ou()), (this.h = !0);
      }
      try {
        this.i = new t.a.ab();
      } catch (t) {
        this.i = new Ou();
      }
      (this.m = new Ou()), (this.f = m(this.Xb, this)), (this.b = {});
    }
    function zu() {
      return (ju = ju || new Hu());
    }
    function Gu(t, e) {
      switch (e) {
        case 'session':
          return t.i;
        case 'none':
          return t.m;
        default:
          return t.g;
      }
    }
    function Qu(t, e) {
      return 'firebase:' + t.name + (e ? ':' + e : '');
    }
    function Yu(t, e, n) {
      return (n = Qu(e, n)), 'local' == e.D && (t.b[n] = null), Gu(t, e.D).T(n);
    }
    function Xu(t) {
      t.c && (clearInterval(t.c), (t.c = null));
    }
    function Ju(t) {
      (this.a = t), (this.b = zu());
    }
    ((t = Hu.prototype).get = function (t, e) {
      return Gu(this, t.D).get(Qu(t, e));
    }),
      (t.set = function (e, t, n) {
        var r = Qu(e, n),
          i = this,
          o = Gu(this, e.D);
        return o
          .set(r, t)
          .then(function () {
            return o.get(r);
          })
          .then(function (t) {
            'local' == e.D && (i.b[r] = t);
          });
      }),
      (t.addListener = function (t, e, n) {
        var r;
        (t = Qu(t, e)),
          this.l && (this.b[t] = l.localStorage.getItem(t)),
          ct(this.a) &&
            (Gu(this, 'local').ca(this.f),
            this.h ||
              ((Zn() || !Lr()) && l.indexedDB) ||
              !this.l ||
              (Xu((r = this)),
              (r.c = setInterval(function () {
                for (var t in r.a) {
                  var e = l.localStorage.getItem(t),
                    n = r.b[t];
                  e != n &&
                    ((r.b[t] = e),
                    (e = new Be({
                      type: 'storage',
                      key: t,
                      target: window,
                      oldValue: n,
                      newValue: e,
                      a: !0
                    })),
                    r.Xb(e));
                }
              }, 1e3)))),
          this.a[t] || (this.a[t] = []),
          this.a[t].push(n);
      }),
      (t.removeListener = function (t, e, n) {
        (t = Qu(t, e)),
          this.a[t] &&
            (z(this.a[t], function (t) {
              return t == n;
            }),
            0 == this.a[t].length && delete this.a[t]),
          ct(this.a) && (Gu(this, 'local').ia(this.f), Xu(this));
      }),
      (t.Xb = function (t) {
        if (t && t.g) {
          var e = t.a.key;
          if (null == e)
            for (var n in this.a) {
              var r = this.b[n];
              void 0 === r && (r = null);
              var i = l.localStorage.getItem(n);
              i !== r && ((this.b[n] = i), this.lb(n));
            }
          else if (0 == e.indexOf('firebase:') && this.a[e]) {
            if (
              (void 0 !== t.a.a ? Gu(this, 'local').ia(this.f) : Xu(this),
              this.v)
            )
              if (((n = l.localStorage.getItem(e)), (r = t.a.newValue) !== n))
                null !== r
                  ? l.localStorage.setItem(e, r)
                  : l.localStorage.removeItem(e);
              else if (this.b[e] === r && void 0 === t.a.a) return;
            var o = this,
              n = function () {
                (void 0 === t.a.a && o.b[e] === l.localStorage.getItem(e)) ||
                  ((o.b[e] = l.localStorage.getItem(e)), o.lb(e));
              };
            Wt &&
            Zt &&
            10 == Zt &&
            l.localStorage.getItem(e) !== t.a.newValue &&
            t.a.newValue !== t.a.oldValue
              ? setTimeout(n, 10)
              : n();
          }
        } else V(t, m(this.lb, this));
      }),
      (t.lb = function (t) {
        this.a[t] &&
          V(this.a[t], function (t) {
            t();
          });
      });
    var $u,
      Zu = { name: 'authEvent', D: 'local' };
    function tc() {
      this.a = zu();
    }
    function ec(t, e) {
      (this.b = nc),
        (this.f = l.Uint8Array ? new Uint8Array(this.b) : Array(this.b)),
        (this.g = this.c = 0),
        (this.a = []),
        (this.i = t),
        (this.h = e),
        (this.l = l.Int32Array ? new Int32Array(64) : Array(64)),
        void 0 === $u && ($u = l.Int32Array ? new Int32Array(cc) : cc),
        this.reset();
    }
    w(ec, function () {
      this.b = -1;
    });
    for (var nc = 64, rc = nc - 1, ic = [], oc = 0; oc < rc; oc++) ic[oc] = 0;
    var sc = G(128, ic);
    function ac(t) {
      for (var e = t.f, n = t.l, r = 0, i = 0; i < e.length; )
        (n[r++] = (e[i] << 24) | (e[i + 1] << 16) | (e[i + 2] << 8) | e[i + 3]),
          (i = 4 * r);
      for (e = 16; e < 64; e++) {
        (i = 0 | n[e - 15]), (r = 0 | n[e - 2]);
        var o =
            ((0 | n[e - 16]) +
              (((i >>> 7) | (i << 25)) ^
                ((i >>> 18) | (i << 14)) ^
                (i >>> 3))) |
            0,
          s =
            ((0 | n[e - 7]) +
              (((r >>> 17) | (r << 15)) ^
                ((r >>> 19) | (r << 13)) ^
                (r >>> 10))) |
            0;
        n[e] = (o + s) | 0;
      }
      (r = 0 | t.a[0]), (i = 0 | t.a[1]);
      var a = 0 | t.a[2],
        u = 0 | t.a[3],
        c = 0 | t.a[4],
        h = 0 | t.a[5],
        l = 0 | t.a[6];
      for (o = 0 | t.a[7], e = 0; e < 64; e++) {
        var f =
          ((((r >>> 2) | (r << 30)) ^
            ((r >>> 13) | (r << 19)) ^
            ((r >>> 22) | (r << 10))) +
            ((r & i) ^ (r & a) ^ (i & a))) |
          0;
        (s =
          ((o =
            (o +
              (((c >>> 6) | (c << 26)) ^
                ((c >>> 11) | (c << 21)) ^
                ((c >>> 25) | (c << 7)))) |
            0) +
            (((s = ((s = (c & h) ^ (~c & l)) + (0 | $u[e])) | 0) + (0 | n[e])) |
              0)) |
          0),
          (o = l),
          (l = h),
          (h = c),
          (c = (u + s) | 0),
          (u = a),
          (a = i),
          (i = r),
          (r = (s + f) | 0);
      }
      (t.a[0] = (t.a[0] + r) | 0),
        (t.a[1] = (t.a[1] + i) | 0),
        (t.a[2] = (t.a[2] + a) | 0),
        (t.a[3] = (t.a[3] + u) | 0),
        (t.a[4] = (t.a[4] + c) | 0),
        (t.a[5] = (t.a[5] + h) | 0),
        (t.a[6] = (t.a[6] + l) | 0),
        (t.a[7] = (t.a[7] + o) | 0);
    }
    function uc(t, e, n) {
      void 0 === n && (n = e.length);
      var r = 0,
        i = t.c;
      if ('string' == typeof e)
        for (; r < n; )
          (t.f[i++] = e.charCodeAt(r++)), i == t.b && (ac(t), (i = 0));
      else {
        if (!d(e)) throw Error('message must be string or array');
        for (; r < n; ) {
          var o = e[r++];
          if (!('number' == typeof o && 0 <= o && o <= 255 && o == (0 | o)))
            throw Error('message must be a byte array');
          (t.f[i++] = o), i == t.b && (ac(t), (i = 0));
        }
      }
      (t.c = i), (t.g += n);
    }
    ec.prototype.reset = function () {
      (this.g = this.c = 0),
        (this.a = l.Int32Array ? new Int32Array(this.h) : Q(this.h));
    };
    var cc = [
      1116352408,
      1899447441,
      3049323471,
      3921009573,
      961987163,
      1508970993,
      2453635748,
      2870763221,
      3624381080,
      310598401,
      607225278,
      1426881987,
      1925078388,
      2162078206,
      2614888103,
      3248222580,
      3835390401,
      4022224774,
      264347078,
      604807628,
      770255983,
      1249150122,
      1555081692,
      1996064986,
      2554220882,
      2821834349,
      2952996808,
      3210313671,
      3336571891,
      3584528711,
      113926993,
      338241895,
      666307205,
      773529912,
      1294757372,
      1396182291,
      1695183700,
      1986661051,
      2177026350,
      2456956037,
      2730485921,
      2820302411,
      3259730800,
      3345764771,
      3516065817,
      3600352804,
      4094571909,
      275423344,
      430227734,
      506948616,
      659060556,
      883997877,
      958139571,
      1322822218,
      1537002063,
      1747873779,
      1955562222,
      2024104815,
      2227730452,
      2361852424,
      2428436474,
      2756734187,
      3204031479,
      3329325298
    ];
    function hc() {
      ec.call(this, 8, lc);
    }
    w(hc, ec);
    var lc = [
      1779033703,
      3144134277,
      1013904242,
      2773480762,
      1359893119,
      2600822924,
      528734635,
      1541459225
    ];
    function fc(t, e, n, r, i, o) {
      (this.m = t),
        (this.i = e),
        (this.l = n),
        (this.v = r || null),
        (this.u = i || null),
        (this.s = o),
        (this.h = e + ':' + n),
        (this.A = new tc()),
        (this.g = new Ju(this.h)),
        (this.f = null),
        (this.b = []),
        (this.a = this.c = null);
    }
    function pc(t) {
      return new I('invalid-cordova-configuration', t);
    }
    function dc(t) {
      var e = new hc();
      uc(e, t), (t = []);
      var n = 8 * e.g;
      e.c < 56 ? uc(e, sc, 56 - e.c) : uc(e, sc, e.b - (e.c - 56));
      for (var r = 63; 56 <= r; r--) (e.f[r] = 255 & n), (n /= 256);
      for (ac(e), r = n = 0; r < e.i; r++)
        for (var i = 24; 0 <= i; i -= 8) t[n++] = (e.a[r] >> i) & 255;
      return B(t, function (t) {
        return 1 < (t = t.toString(16)).length ? t : '0' + t;
      }).join('');
    }
    function vc(t, e) {
      for (var n = 0; n < t.b.length; n++)
        try {
          t.b[n](e);
        } catch (t) {}
    }
    function yc(a) {
      return (
        a.f ||
          (a.f = a.la().then(function () {
            return new pe(function (n) {
              function e(r) {
                (t = !0),
                  s && s.cancel(),
                  gc(i).then(function (t) {
                    var e,
                      n = o;
                    t &&
                      r &&
                      r.url &&
                      ((e = null),
                      -1 != (n = Yi(r.url)).indexOf('/__/auth/callback') &&
                        (e = (e =
                          'object' ==
                          typeof (e = Nr(
                            kn((e = Rn(n)), 'firebaseError') || null
                          ))
                            ? T(e)
                            : null)
                          ? new Oo(t.c, t.b, null, null, e, null, t.S())
                          : new Oo(t.c, t.b, n, t.f, null, null, t.S())),
                      (n = e || o)),
                      vc(i, n);
                  });
              }
              var i, o, t, s, r;
              a.Ea(function t(e) {
                return n(e), a.Ra(t), !1;
              }),
                (i = a),
                (o = new Oo(
                  'unknown',
                  null,
                  null,
                  null,
                  new I('no-auth-event')
                )),
                (t = !1),
                (s = gn(500).then(function () {
                  return gc(i).then(function () {
                    t || vc(i, o);
                  });
                })),
                (r = l.handleOpenURL),
                (l.handleOpenURL = function (t) {
                  if (
                    (0 ==
                      t
                        .toLowerCase()
                        .indexOf(
                          br('BuildInfo.packageName', l).toLowerCase() + '://'
                        ) && e({ url: t }),
                    'function' == typeof r)
                  )
                    try {
                      r(t);
                    } catch (t) {
                      console.error(t);
                    }
                }),
                (Lo = Lo || new Do()),
                (function (t) {
                  var n = Lo;
                  n.a.push(t),
                    n.b ||
                      ((n.b = function (t) {
                        for (var e = 0; e < n.a.length; e++) n.a[e](t);
                      }),
                      'function' ==
                        typeof (t = br('universalLinks.subscribe', l)) &&
                        t(null, n.b));
                })(e);
            });
          })),
        a.f
      );
    }
    function gc(e) {
      var t,
        n = null;
      return (t = e.g).b
        .get(Zu, t.a)
        .then(Po)
        .then(function (t) {
          return (n = t), Yu((t = e.g).b, Zu, t.a);
        })
        .then(function () {
          return n;
        });
    }
    function mc(t) {
      (this.a = t), (this.b = zu());
    }
    ((t = fc.prototype).la = function () {
      return this.Ia
        ? this.Ia
        : (this.Ia = (ur(void 0)
            ? ar().then(function () {
                return new pe(function (t, e) {
                  var n = l.document,
                    r = setTimeout(function () {
                      e(Error('Cordova framework is not ready.'));
                    }, 1e3);
                  n.addEventListener(
                    'deviceready',
                    function () {
                      clearTimeout(r), t();
                    },
                    !1
                  );
                });
              })
            : we(Error('Cordova must run in an Android or iOS file scheme.'))
          ).then(
            function () {
              if ('function' != typeof br('universalLinks.subscribe', l))
                throw pc('cordova-universal-links-plugin-fix is not installed');
              if (void 0 === br('BuildInfo.packageName', l))
                throw pc('cordova-plugin-buildinfo is not installed');
              if (
                'function' != typeof br('cordova.plugins.browsertab.openUrl', l)
              )
                throw pc('cordova-plugin-browsertab is not installed');
              if ('function' != typeof br('cordova.InAppBrowser.open', l))
                throw pc('cordova-plugin-inappbrowser is not installed');
            },
            function () {
              throw new I('cordova-not-ready');
            }
          ));
    }),
      (t.Nb = function (t, e) {
        return e(new I('operation-not-supported-in-this-environment')), _e();
      }),
      (t.Lb = function () {
        return we(new I('operation-not-supported-in-this-environment'));
      }),
      (t.Zb = function () {
        return !1;
      }),
      (t.Wb = function () {
        return !0;
      }),
      (t.Sb = function () {
        return !0;
      }),
      (t.Mb = function (t, e, n, r) {
        if (this.c) return we(new I('redirect-operation-pending'));
        var i = this,
          o = l.document,
          s = null,
          a = null,
          u = null,
          c = null;
        return (this.c = _e()
          .then(function () {
            return Ro(e), yc(i);
          })
          .then(function () {
            return (function (n, t, e, r, i) {
              var o = (function () {
                  for (var t = 20, e = []; 0 < t; )
                    e.push(
                      '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'.charAt(
                        Math.floor(62 * Math.random())
                      )
                    ),
                      t--;
                  return e.join('');
                })(),
                s = new Oo(t, r, null, o, new I('no-auth-event'), null, i),
                a = br('BuildInfo.packageName', l);
              if ('string' != typeof a)
                throw new I('invalid-cordova-configuration');
              var u = br('BuildInfo.displayName', l),
                c = {};
              if (
                mr()
                  .toLowerCase()
                  .match(/iphone|ipad|ipod/)
              )
                c.ibi = a;
              else {
                if (
                  !mr()
                    .toLowerCase()
                    .match(/android/)
                )
                  return we(
                    new I('operation-not-supported-in-this-environment')
                  );
                c.apn = a;
              }
              u && (c.appDisplayName = u), (o = dc(o)), (c.sessionId = o);
              var h = cu(n.m, n.i, n.l, t, e, null, r, n.v, c, n.u, i, n.s);
              return n
                .la()
                .then(function () {
                  var t = n.h;
                  return n.A.a.set(Zu, s.w(), t);
                })
                .then(function () {
                  var t = br('cordova.plugins.browsertab.isAvailable', l);
                  if ('function' != typeof t)
                    throw new I('invalid-cordova-configuration');
                  var e = null;
                  t(function (t) {
                    if (t) {
                      if (
                        'function' !=
                        typeof (e = br('cordova.plugins.browsertab.openUrl', l))
                      )
                        throw new I('invalid-cordova-configuration');
                      e(h);
                    } else {
                      if (
                        'function' !=
                        typeof (e = br('cordova.InAppBrowser.open', l))
                      )
                        throw new I('invalid-cordova-configuration');
                      (t = mr()),
                        (n.a = e(
                          h,
                          t.match(/(iPad|iPhone|iPod).*OS 7_\d/i) ||
                            t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)
                            ? '_blank'
                            : '_system',
                          'location=yes'
                        ));
                    }
                  });
                });
            })(i, t, e, n, r);
          })
          .then(function () {
            return new pe(function (e, t) {
              (a = function () {
                var t = br('cordova.plugins.browsertab.close', l);
                return (
                  e(),
                  'function' == typeof t && t(),
                  i.a &&
                    'function' == typeof i.a.close &&
                    (i.a.close(), (i.a = null)),
                  !1
                );
              }),
                i.Ea(a),
                (u = function () {
                  s =
                    s ||
                    gn(2e3).then(function () {
                      t(new I('redirect-cancelled-by-user'));
                    });
                }),
                (c = function () {
                  Pr() && u();
                }),
                o.addEventListener('resume', u, !1),
                mr()
                  .toLowerCase()
                  .match(/android/) ||
                  o.addEventListener('visibilitychange', c, !1);
            }).o(function (t) {
              return gc(i).then(function () {
                throw t;
              });
            });
          })
          .na(function () {
            u && o.removeEventListener('resume', u, !1),
              c && o.removeEventListener('visibilitychange', c, !1),
              s && s.cancel(),
              a && i.Ra(a),
              (i.c = null);
          }));
      }),
      (t.Ea = function (e) {
        this.b.push(e),
          yc(this).o(function (t) {
            'auth/invalid-cordova-configuration' === t.code &&
              ((t = new Oo(
                'unknown',
                null,
                null,
                null,
                new I('no-auth-event')
              )),
              e(t));
          });
      }),
      (t.Ra = function (e) {
        z(this.b, function (t) {
          return t == e;
        });
      });
    var bc = { name: 'pendingRedirect', D: 'session' };
    function _c(t) {
      return Yu(t.b, bc, t.a);
    }
    function wc(t, e, n, r) {
      (this.i = {}),
        (this.u = 0),
        (this.O = t),
        (this.m = e),
        (this.v = n),
        (this.G = r),
        (this.h = []),
        (this.f = !1),
        (this.l = m(this.s, this)),
        (this.b = new Mc()),
        (this.A = new qc()),
        (this.g = new mc(xc(this.m, this.v))),
        (this.c = {}),
        (this.c.unknown = this.b),
        (this.c.signInViaRedirect = this.b),
        (this.c.linkViaRedirect = this.b),
        (this.c.reauthViaRedirect = this.b),
        (this.c.signInViaPopup = this.A),
        (this.c.linkViaPopup = this.A),
        (this.c.reauthViaPopup = this.A),
        (this.a = Ec(this.O, this.m, this.v, S, this.G));
    }
    function Ec(t, e, n, r, i) {
      var o = Jl.SDK_VERSION || null;
      return new (ur() ? fc : ou)(t, e, n, o, r, i);
    }
    function Ic(e) {
      e.f || ((e.f = !0), e.a.Ea(e.l));
      var n = e.a;
      return e.a.la().o(function (t) {
        throw (e.a == n && e.reset(), t);
      });
    }
    function Tc(n) {
      n.a.Wb() &&
        Ic(n).o(function (t) {
          var e = new Oo(
            'unknown',
            null,
            null,
            null,
            new I('operation-not-supported-in-this-environment')
          );
          Rc(t) && n.s(e);
        }),
        n.a.Sb() || Fc(n.b);
    }
    function Sc(n, t) {
      K(n.h, t) || n.h.push(t),
        n.f ||
          (t = n.g).b
            .get(bc, t.a)
            .then(function (t) {
              return 'pending' == t;
            })
            .then(function (t) {
              t
                ? _c(n.g).then(function () {
                    Ic(n).o(function (t) {
                      var e = new Oo(
                        'unknown',
                        null,
                        null,
                        null,
                        new I('operation-not-supported-in-this-environment')
                      );
                      Rc(t) && n.s(e);
                    });
                  })
                : Tc(n);
            })
            .o(function () {
              Tc(n);
            });
    }
    function Cc(t, e) {
      z(t.h, function (t) {
        return t == e;
      });
    }
    (wc.prototype.reset = function () {
      (this.f = !1),
        this.a.Ra(this.l),
        (this.a = Ec(this.O, this.m, this.v, null, this.G)),
        (this.i = {});
    }),
      (wc.prototype.s = function (t) {
        if (!t) throw new I('invalid-auth-event');
        if (
          (6e5 <= _() - this.u && ((this.i = {}), (this.u = 0)),
          t && t.getUid() && this.i.hasOwnProperty(t.getUid()))
        )
          return !1;
        for (var e = !1, n = 0; n < this.h.length; n++) {
          var r = this.h[n];
          if (r.Eb(t.c, t.b)) {
            (e = this.c[t.c]) &&
              (e.h(t, r),
              t && (t.f || t.b) && ((this.i[t.getUid()] = !0), (this.u = _()))),
              (e = !0);
            break;
          }
        }
        return Fc(this.b), e;
      });
    var Nc = new Or(2e3, 1e4),
      Ac = new Or(3e4, 6e4);
    function kc(t, e, n, r, i, o, s) {
      return t.a.Lb(
        e,
        n,
        r,
        function () {
          t.f || ((t.f = !0), t.a.Ea(t.l));
        },
        function () {
          t.reset();
        },
        i,
        o,
        s
      );
    }
    function Rc(t) {
      return !(!t || 'auth/cordova-not-ready' != t.code);
    }
    function Oc(e, t, n, r, i) {
      var o, s;
      return (s = e.g).b.set(bc, 'pending', s.a).then(function () {
        return e.a
          .Mb(t, n, r, i)
          .o(function (t) {
            if (Rc(t))
              throw new I('operation-not-supported-in-this-environment');
            return (
              (o = t),
              _c(e.g).then(function () {
                throw o;
              })
            );
          })
          .then(function () {
            return e.a.Zb()
              ? new pe(function () {})
              : _c(e.g)
                  .then(function () {
                    return e.qa();
                  })
                  .then(function () {})
                  .o(function () {});
          });
      });
    }
    function Pc(t, e, n, r, i) {
      return t.a.Nb(
        r,
        function (t) {
          e.ma(n, null, t, i);
        },
        Nc.get()
      );
    }
    wc.prototype.qa = function () {
      return this.b.qa();
    };
    var Dc = {};
    function xc(t, e, n) {
      return (t = t + ':' + e), n && (t = t + ':' + n.url), t;
    }
    function Lc(t, e, n, r) {
      var i = xc(e, n, r);
      return Dc[i] || (Dc[i] = new wc(t, e, n, r)), Dc[i];
    }
    function Mc() {
      (this.b = null),
        (this.f = []),
        (this.c = []),
        (this.a = null),
        (this.i = this.g = !1);
    }
    function Fc(t) {
      t.g || ((t.g = !0), Vc(t, !1, null, null));
    }
    function Uc(t) {
      t.g && !t.i && Vc(t, !1, null, null);
    }
    function jc(t, e) {
      if (
        ((t.b = function () {
          return _e(e);
        }),
        t.f.length)
      )
        for (var n = 0; n < t.f.length; n++) t.f[n](e);
    }
    function Vc(t, e, n, r) {
      e
        ? r
          ? (function (t, e) {
              if (
                ((t.b = function () {
                  return we(e);
                }),
                t.c.length)
              )
                for (var n = 0; n < t.c.length; n++) t.c[n](e);
            })(t, r)
          : jc(t, n)
        : jc(t, { user: null }),
        (t.f = []),
        (t.c = []);
    }
    function qc() {}
    function Bc() {
      (this.hb = !1),
        Object.defineProperty(this, 'appVerificationDisabled', {
          get: function () {
            return this.hb;
          },
          set: function (t) {
            this.hb = t;
          },
          enumerable: !1
        });
    }
    function Wc(t, e) {
      (this.a = e), Vr(this, 'verificationId', t);
    }
    function Kc(t, e, n, r) {
      return new No(t).eb(e, n).then(function (t) {
        return new Wc(t, r);
      });
    }
    function Hc(t) {
      var e = Li(t);
      if (!(e && e.exp && e.auth_time && e.iat))
        throw new I(
          'internal-error',
          'An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.'
        );
      qr(this, {
        token: t,
        expirationTime: xr(1e3 * e.exp),
        authTime: xr(1e3 * e.auth_time),
        issuedAtTime: xr(1e3 * e.iat),
        signInProvider:
          e.firebase && e.firebase.sign_in_provider
            ? e.firebase.sign_in_provider
            : null,
        signInSecondFactor:
          e.firebase && e.firebase.sign_in_second_factor
            ? e.firebase.sign_in_second_factor
            : null,
        claims: e
      });
    }
    function zc(t, e, n) {
      var r = e && e[Qc];
      if (!r)
        throw new I(
          'argument-error',
          'Internal assert: Invalid MultiFactorResolver'
        );
      (this.a = t),
        (this.f = ht(e)),
        (this.g = n),
        (this.c = new Xi(null, r)),
        (this.b = []);
      var i = this;
      V(e[Gc] || [], function (t) {
        (t = Hr(t)) && i.b.push(t);
      }),
        Vr(this, 'auth', this.a),
        Vr(this, 'session', this.c),
        Vr(this, 'hints', this.b);
    }
    (Mc.prototype.reset = function () {
      (this.b = null), this.a && (this.a.cancel(), (this.a = null));
    }),
      (Mc.prototype.h = function (t, e) {
        var n, r, i, o;
        t
          ? (this.reset(),
            (this.g = !0),
            (n = t.c),
            (r = t.b),
            (i = t.a && 'auth/web-storage-unsupported' == t.a.code),
            (o =
              t.a &&
              'auth/operation-not-supported-in-this-environment' == t.a.code),
            (this.i = !(!i && !o)),
            'unknown' != n || i || o
              ? t.a
                ? (Vc(this, !0, null, t.a), _e())
                : e.Fa(n, r)
                ? (function (e, t, n) {
                    n = n.Fa(t.c, t.b);
                    var r = t.g,
                      i = t.f,
                      o = t.i,
                      s = t.S(),
                      a = !!t.c.match(/Redirect$/);
                    n(r, i, s, o)
                      .then(function (t) {
                        Vc(e, a, t, null);
                      })
                      .o(function (t) {
                        Vc(e, a, null, t);
                      });
                  })(this, t, e)
                : we(new I('invalid-auth-event'))
              : (Vc(this, !1, null, null), _e()))
          : we(new I('invalid-auth-event'));
      }),
      (Mc.prototype.qa = function () {
        var i = this;
        return new pe(function (t, e) {
          var n, r;
          i.b
            ? i.b().then(t, e)
            : (i.f.push(t),
              i.c.push(e),
              (n = i),
              (r = new I('timeout')),
              n.a && n.a.cancel(),
              (n.a = gn(Ac.get()).then(function () {
                n.b || ((n.g = !0), Vc(n, !0, null, r));
              })));
        });
      }),
      (qc.prototype.h = function (t, e) {
        var n, r, i, o, s;
        t
          ? ((n = t.c),
            (r = t.b),
            t.a
              ? (e.ma(t.c, null, t.a, t.b), _e())
              : e.Fa(n, r)
              ? ((i = e),
                (o = (t = t).b),
                (s = t.c),
                i
                  .Fa(s, o)(t.g, t.f, t.S(), t.i)
                  .then(function (t) {
                    i.ma(s, t, null, o);
                  })
                  .o(function (t) {
                    i.ma(s, null, t, o);
                  }))
              : we(new I('invalid-auth-event')))
          : we(new I('invalid-auth-event'));
      }),
      (Wc.prototype.confirm = function (t) {
        return (t = Ao(this.verificationId, t)), this.a(t);
      });
    var Gc = 'mfaInfo',
      Qc = 'mfaPendingCredential';
    function Yc(t, e, n, r) {
      I.call(this, 'multi-factor-auth-required', r, e),
        (this.b = new zc(t, e, n)),
        Vr(this, 'resolver', this.b);
    }
    function Xc(t, e, n) {
      if (
        t &&
        y(t.serverResponse) &&
        'auth/multi-factor-auth-required' === t.code
      )
        try {
          return new Yc(e, t.serverResponse, n, t.message);
        } catch (t) {}
      return null;
    }
    function Jc() {}
    function $c(t) {
      Vr(this, 'factorId', t.fa), (this.a = t);
    }
    function Zc(t) {
      if (($c.call(this, t), this.a.fa != No.PROVIDER_ID))
        throw new I(
          'argument-error',
          'firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential'
        );
    }
    function th(t, e) {
      for (var n in (qe.call(this, t), e)) this[n] = e[n];
    }
    function eh(t, e) {
      (this.a = t),
        (this.b = []),
        (this.c = m(this.xc, this)),
        Ze(this.a, 'userReloaded', this.c);
      var r = [];
      e &&
        e.multiFactor &&
        e.multiFactor.enrolledFactors &&
        V(e.multiFactor.enrolledFactors, function (t) {
          var e = null,
            n = {};
          if (t) {
            t.uid && (n[Qr] = t.uid),
              t.displayName && (n[zr] = t.displayName),
              t.enrollmentTime &&
                (n[Gr] = new Date(t.enrollmentTime).toISOString()),
              t.phoneNumber && (n[Yr] = t.phoneNumber);
            try {
              e = new Xr(n);
            } catch (t) {}
            t = e;
          } else t = null;
          t && r.push(t);
        }),
        nh(this, r);
    }
    function nh(t, e) {
      (t.b = e), Vr(t, 'enrolledFactors', e);
    }
    function rh(t, e, n) {
      if (
        ((this.h = t),
        (this.i = e),
        (this.g = n),
        (this.c = 3e4),
        (this.f = 96e4),
        (this.b = null),
        (this.a = this.c),
        this.f < this.c)
      )
        throw Error('Proactive refresh lower bound greater than upper bound!');
    }
    function ih(t, e) {
      return e
        ? ((t.a = t.c), t.g())
        : ((e = t.a), (t.a *= 2), t.a > t.f && (t.a = t.f), e);
    }
    function oh(t) {
      (this.c = t), (this.b = this.a = null);
    }
    function sh(t) {
      return (t.b && 1e3 * t.b.c) || 0;
    }
    function ah(t, e) {
      var n = e.refreshToken;
      (t.b = xi(e[Ws] || '')), (t.a = n);
    }
    function uh(e, t) {
      return (
        (r = e.c),
        (i = t),
        new pe(function (e, n) {
          ('refresh_token' == i.grant_type && i.refresh_token) ||
          ('authorization_code' == i.grant_type && i.code)
            ? $s(
                r,
                r.l + '?key=' + encodeURIComponent(r.c),
                function (t) {
                  t
                    ? t.error
                      ? n(Xa(t))
                      : t.access_token && t.refresh_token
                      ? e(t)
                      : n(new I('internal-error'))
                    : n(new I('network-request-failed'));
                },
                'POST',
                Bn(i).toString(),
                r.g,
                r.v.get()
              )
            : n(new I('internal-error'));
        })
          .then(function (t) {
            return (
              (e.b = xi(t.access_token)),
              (e.a = t.refresh_token),
              { accessToken: e.b.toString(), refreshToken: e.a }
            );
          })
          .o(function (t) {
            throw ('auth/user-token-expired' == t.code && (e.a = null), t);
          })
      );
      var r, i;
    }
    function ch(t, e) {
      (this.a = t || null),
        (this.b = e || null),
        qr(this, {
          lastSignInTime: xr(e || null),
          creationTime: xr(t || null)
        });
    }
    function hh(t, e, n, r, i, o) {
      qr(this, {
        uid: t,
        displayName: r || null,
        photoURL: i || null,
        email: n || null,
        phoneNumber: o || null,
        providerId: e
      });
    }
    function lh(t, e, n) {
      (this.G = []),
        (this.l = t.apiKey),
        (this.m = t.appName),
        (this.s = t.authDomain || null);
      var r,
        i = Jl.SDK_VERSION ? gr(Jl.SDK_VERSION) : null;
      (this.a = new qs(this.l, k(S), i)),
        t.emulatorConfig && Ys(this.a, t.emulatorConfig),
        (this.b = new oh(this.a)),
        bh(this, e[Ws]),
        ah(this.b, e),
        Vr(this, 'refreshToken', this.b.a),
        Eh(this, n || {}),
        fn.call(this),
        (this.P = !1),
        this.s && wr() && (this.i = Lc(this.s, this.l, this.m)),
        (this.R = []),
        (this.f = null),
        (this.u =
          ((r = this),
          new rh(
            function () {
              return r.I(!0);
            },
            function (t) {
              return !(!t || 'auth/network-request-failed' != t.code);
            },
            function () {
              var t = sh(r.b) - _() - 3e5;
              return 0 < t ? t : 0;
            }
          ))),
        (this.$ = m(this.gb, this));
      var o = this;
      (this.pa = null),
        (this.Ba = function (t) {
          o.wa(t.h);
        }),
        (this.ba = null),
        (this.za = function (t) {
          Ys(o.a, t.c);
        }),
        (this.W = null),
        (this.X = []),
        (this.Aa = function (t) {
          dh(o, t.f);
        }),
        (this.aa = null),
        (this.N = new eh(this, n)),
        Vr(this, 'multiFactor', this.N);
    }
    function fh(t, e) {
      t.ba && nn(t.ba, 'languageCodeChanged', t.Ba),
        (t.ba = e) && Ze(e, 'languageCodeChanged', t.Ba);
    }
    function ph(t, e) {
      t.W && nn(t.W, 'emulatorConfigChanged', t.za),
        (t.W = e) && Ze(e, 'emulatorConfigChanged', t.za);
    }
    function dh(t, e) {
      (t.X = e), Js(t.a, Jl.SDK_VERSION ? gr(Jl.SDK_VERSION, t.X) : null);
    }
    function vh(t, e) {
      t.aa && nn(t.aa, 'frameworkChanged', t.Aa),
        (t.aa = e) && Ze(e, 'frameworkChanged', t.Aa);
    }
    function yh(e) {
      try {
        return Jl.app(e.m).auth();
      } catch (t) {
        throw new I(
          'internal-error',
          "No firebase.auth.Auth instance is available for the Firebase App '" +
            e.m +
            "'!"
        );
      }
    }
    function gh(t) {
      t.A ||
        t.u.b ||
        (t.u.start(), nn(t, 'tokenChanged', t.$), Ze(t, 'tokenChanged', t.$));
    }
    function mh(t) {
      nn(t, 'tokenChanged', t.$), t.u.stop();
    }
    function bh(t, e) {
      (t.ya = e), Vr(t, '_lat', e);
    }
    function _h(t) {
      for (var e = [], n = 0; n < t.R.length; n++) e.push(t.R[n](t));
      return Ie(e).then(function () {
        return t;
      });
    }
    function wh(t) {
      t.i && !t.P && ((t.P = !0), Sc(t.i, t));
    }
    function Eh(t, e) {
      qr(t, {
        uid: e.uid,
        displayName: e.displayName || null,
        photoURL: e.photoURL || null,
        email: e.email || null,
        emailVerified: e.emailVerified || !1,
        phoneNumber: e.phoneNumber || null,
        isAnonymous: e.isAnonymous || !1,
        tenantId: e.tenantId || null,
        metadata: new ch(e.createdAt, e.lastLoginAt),
        providerData: []
      }),
        (t.a.b = t.tenantId);
    }
    function Ih() {}
    function Th(t) {
      return _e().then(function () {
        if (t.A) throw new I('app-deleted');
      });
    }
    function Sh(t) {
      return B(t.providerData, function (t) {
        return t.providerId;
      });
    }
    function Ch(t, e) {
      e && (Nh(t, e.providerId), t.providerData.push(e));
    }
    function Nh(t, e) {
      z(t.providerData, function (t) {
        return t.providerId == e;
      });
    }
    function Ah(t, e, n) {
      ('uid' != e || n) && t.hasOwnProperty(e) && Vr(t, e, n);
    }
    function kh(e, t) {
      var n, r;
      e != t &&
        (qr(e, {
          uid: t.uid,
          displayName: t.displayName,
          photoURL: t.photoURL,
          email: t.email,
          emailVerified: t.emailVerified,
          phoneNumber: t.phoneNumber,
          isAnonymous: t.isAnonymous,
          tenantId: t.tenantId,
          providerData: []
        }),
        t.metadata
          ? Vr(e, 'metadata', new ch((r = t.metadata).a, r.b))
          : Vr(e, 'metadata', new ch()),
        V(t.providerData, function (t) {
          Ch(e, t);
        }),
        (n = e.b),
        (r = t.b),
        (n.b = r.b),
        (n.a = r.a),
        Vr(e, 'refreshToken', e.b.a),
        nh(e.N, t.N.b));
    }
    function Rh(i) {
      return i.I().then(function (t) {
        var e,
          n,
          r = i.isAnonymous;
        return (
          (n = t),
          Qa((e = i).a, Sa, { idToken: n })
            .then(m(e.Jc, e))
            .then(function () {
              return r || Ah(i, 'isAnonymous', !1), t;
            })
        );
      });
    }
    function Oh(t, e) {
      e[Ws] &&
        t.ya != e[Ws] &&
        (ah(t.b, e),
        t.dispatchEvent(new th('tokenChanged')),
        bh(t, e[Ws]),
        Ah(t, 'refreshToken', t.b.a));
    }
    function Ph(t, e) {
      return Rh(t).then(function () {
        if (K(Sh(t), e))
          return _h(t).then(function () {
            throw new I('provider-already-linked');
          });
      });
    }
    function Dh(t, e, n) {
      return Br({
        user: t,
        credential: ko(e),
        additionalUserInfo: (e = Vi(e)),
        operationType: n
      });
    }
    function xh(t, e) {
      return (
        Oh(t, e),
        t.reload().then(function () {
          return t;
        })
      );
    }
    function Lh(n, r, t, e, i) {
      if (!wr())
        return we(new I('operation-not-supported-in-this-environment'));
      if (n.f && !i) return we(n.f);
      var o = ji(t.providerId),
        s = Ar(n.uid + ':::'),
        a = null;
      (!Tr() || cr()) &&
        n.s &&
        t.isOAuthProvider &&
        (a = cu(
          n.s,
          n.l,
          n.m,
          r,
          t,
          null,
          s,
          Jl.SDK_VERSION || null,
          null,
          null,
          n.tenantId
        ));
      var u = ir(a, o && o.ua, o && o.ta);
      return (
        (e = e()
          .then(function () {
            if ((Fh(n), !i)) return n.I().then(function () {});
          })
          .then(function () {
            return kc(n.i, u, r, t, s, !!a, n.tenantId);
          })
          .then(function () {
            return new pe(function (t, e) {
              n.ma(r, null, new I('cancelled-popup-request'), n.h || null),
                (n.g = t),
                (n.O = e),
                (n.h = s),
                (n.c = Pc(n.i, n, r, u, s));
            });
          })
          .then(function (t) {
            return u && rr(u), t ? Br(t) : null;
          })
          .o(function (t) {
            throw (u && rr(u), t);
          })),
        Uh(n, e, i)
      );
    }
    function Mh(e, t, n, r, i) {
      if (!wr())
        return we(new I('operation-not-supported-in-this-environment'));
      if (e.f && !i) return we(e.f);
      var o = null,
        s = Ar(e.uid + ':::');
      return (
        (r = r()
          .then(function () {
            if ((Fh(e), !i)) return e.I().then(function () {});
          })
          .then(function () {
            return (e.ga = s), _h(e);
          })
          .then(function (t) {
            return e.ha && (t = (t = e.ha).b.set(qh, e.w(), t.a)), t;
          })
          .then(function () {
            return Oc(e.i, t, n, s, e.tenantId);
          })
          .o(function (t) {
            if (((o = t), e.ha)) return Bh(e.ha);
            throw o;
          })
          .then(function () {
            if (o) throw o;
          })),
        Uh(e, r, i)
      );
    }
    function Fh(t) {
      if (!t.i || !t.P) {
        if (t.i && !t.P) throw new I('internal-error');
        throw new I('auth-domain-config-required');
      }
    }
    function Uh(n, t, e) {
      var r,
        i =
          ((t = t),
          (e = e),
          (r = n).f && !e
            ? (t.cancel(), we(r.f))
            : t.o(function (t) {
                throw (
                  (!t ||
                    ('auth/user-disabled' != t.code &&
                      'auth/user-token-expired' != t.code) ||
                    (r.f || r.dispatchEvent(new th('userInvalidated')),
                    (r.f = t)),
                  t)
                );
              }));
      return (
        n.G.push(i),
        i.na(function () {
          H(n.G, i);
        }),
        i.o(function (t) {
          var e = null;
          throw (
            (t &&
              'auth/multi-factor-auth-required' === t.code &&
              (e = Xc(t.w(), yh(n), m(n.ic, n))),
            e || t)
          );
        })
      );
    }
    function jh(t) {
      if (!t.apiKey) return null;
      var e = {
          apiKey: t.apiKey,
          authDomain: t.authDomain,
          appName: t.appName,
          emulatorConfig: t.emulatorConfig
        },
        n = {};
      if (!t.stsTokenManager || !t.stsTokenManager.accessToken) return null;
      (n[Ws] = t.stsTokenManager.accessToken),
        (n.refreshToken = t.stsTokenManager.refreshToken || null);
      var r = new lh(e, n, t);
      return (
        t.providerData &&
          V(t.providerData, function (t) {
            t && Ch(r, Br(t));
          }),
        t.redirectEventId && (r.ga = t.redirectEventId),
        r
      );
    }
    function Vh(t) {
      (this.a = t), (this.b = zu());
    }
    (zc.prototype.Qc = function (t) {
      var n = this;
      return t.rb(this.a.a, this.c).then(function (t) {
        var e = ht(n.f);
        return delete e[Gc], delete e[Qc], ft(e, t), n.g(e);
      });
    }),
      w(Yc, I),
      (Jc.prototype.rb = function (t, e, n) {
        return e.type == Ji
          ? ((o = this),
            (s = t),
            (a = n),
            e.Ha().then(function (t) {
              return (
                (t = { idToken: t }),
                void 0 !== a && (t.displayName = a),
                ft(t, { phoneVerificationInfo: Co(o.a) }),
                Qa(s, Ia, t)
              );
            }))
          : ((r = this),
            (i = t),
            e.Ha().then(function (t) {
              return (
                ft((t = { mfaPendingCredential: t }), {
                  phoneVerificationInfo: Co(r.a)
                }),
                Qa(i, Ta, t)
              );
            }));
        var r, i, o, s, a;
      }),
      w($c, Jc),
      w(Zc, $c),
      w(th, qe),
      ((t = eh.prototype).xc = function (t) {
        var e;
        nh(
          this,
          ((t = t.gd),
          (e = []),
          V(t.mfaInfo || [], function (t) {
            (t = Hr(t)) && e.push(t);
          }),
          e)
        );
      }),
      (t.Qb = function () {
        return this.a.I().then(function (t) {
          return new Xi(t, null);
        });
      }),
      (t.ec = function (e, n) {
        var r = this,
          i = this.a.a;
        return this.Qb()
          .then(function (t) {
            return e.rb(i, t, n);
          })
          .then(function (t) {
            return Oh(r.a, t), r.a.reload();
          });
      }),
      (t.ad = function (t) {
        var n = this,
          r = 'string' == typeof t ? t : t.uid,
          e = this.a.a;
        return this.a
          .I()
          .then(function (t) {
            return Qa(e, Ga, { idToken: t, mfaEnrollmentId: r });
          })
          .then(function (t) {
            var e = q(n.b, function (t) {
              return t.uid != r;
            });
            return (
              nh(n, e),
              Oh(n.a, t),
              n.a.reload().o(function (t) {
                if ('auth/user-token-expired' != t.code) throw t;
              })
            );
          });
      }),
      (t.w = function () {
        return {
          multiFactor: {
            enrolledFactors: B(this.b, function (t) {
              return t.w();
            })
          }
        };
      }),
      (rh.prototype.start = function () {
        (this.a = this.c),
          (function e(n, t) {
            n.stop();
            n.b = gn(ih(n, t))
              .then(function () {
                return (
                  (e = l.document),
                  (n = null),
                  Pr() || !e
                    ? _e()
                    : new pe(function (t) {
                        (n = function () {
                          Pr() &&
                            (e.removeEventListener('visibilitychange', n, !1),
                            t());
                        }),
                          e.addEventListener('visibilitychange', n, !1);
                      }).o(function (t) {
                        throw (
                          (e.removeEventListener('visibilitychange', n, !1), t)
                        );
                      })
                );
                var e, n;
              })
              .then(function () {
                return n.h();
              })
              .then(function () {
                e(n, !0);
              })
              .o(function (t) {
                n.i(t) && e(n, !1);
              });
          })(this, !0);
      }),
      (rh.prototype.stop = function () {
        this.b && (this.b.cancel(), (this.b = null));
      }),
      (oh.prototype.w = function () {
        return {
          apiKey: this.c.c,
          refreshToken: this.a,
          accessToken: this.b && this.b.toString(),
          expirationTime: sh(this)
        };
      }),
      (oh.prototype.getToken = function (t) {
        return (
          (t = !!t),
          this.b && !this.a
            ? we(new I('user-token-expired'))
            : t || !this.b || _() > sh(this) - 3e4
            ? this.a
              ? uh(this, { grant_type: 'refresh_token', refresh_token: this.a })
              : _e(null)
            : _e({ accessToken: this.b.toString(), refreshToken: this.a })
        );
      }),
      (ch.prototype.w = function () {
        return { lastLoginAt: this.b, createdAt: this.a };
      }),
      w(lh, fn),
      (lh.prototype.wa = function (t) {
        (this.pa = t), Qs(this.a, t);
      }),
      (lh.prototype.ka = function () {
        return this.pa;
      }),
      (lh.prototype.Ga = function () {
        return Q(this.X);
      }),
      (lh.prototype.gb = function () {
        this.u.b && (this.u.stop(), this.u.start());
      }),
      Vr(lh.prototype, 'providerId', 'firebase'),
      ((t = lh.prototype).reload = function () {
        var t = this;
        return Uh(
          this,
          Th(this).then(function () {
            return Rh(t)
              .then(function () {
                return _h(t);
              })
              .then(Ih);
          })
        );
      }),
      (t.nc = function (t) {
        return this.I(t).then(function (t) {
          return new Hc(t);
        });
      }),
      (t.I = function (t) {
        var e = this;
        return Uh(
          this,
          Th(this)
            .then(function () {
              return e.b.getToken(t);
            })
            .then(function (t) {
              if (!t) throw new I('internal-error');
              return (
                t.accessToken != e.ya &&
                  (bh(e, t.accessToken),
                  e.dispatchEvent(new th('tokenChanged'))),
                Ah(e, 'refreshToken', t.refreshToken),
                t.accessToken
              );
            })
        );
      }),
      (t.Jc = function (t) {
        if (!(t = t.users) || !t.length) throw new I('internal-error');
        Eh(this, {
          uid: (t = t[0]).localId,
          displayName: t.displayName,
          photoURL: t.photoUrl,
          email: t.email,
          emailVerified: !!t.emailVerified,
          phoneNumber: t.phoneNumber,
          lastLoginAt: t.lastLoginAt,
          createdAt: t.createdAt,
          tenantId: t.tenantId
        });
        for (
          var e,
            n =
              (e = (e = t).providerUserInfo) && e.length
                ? B(e, function (t) {
                    return new hh(
                      t.rawId,
                      t.providerId,
                      t.email,
                      t.displayName,
                      t.photoUrl,
                      t.phoneNumber
                    );
                  })
                : [],
            r = 0;
          r < n.length;
          r++
        )
          Ch(this, n[r]);
        Ah(
          this,
          'isAnonymous',
          !(
            (this.email && t.passwordHash) ||
            (this.providerData && this.providerData.length)
          )
        ),
          this.dispatchEvent(new th('userReloaded', { gd: t }));
      }),
      (t.Kc = function (t) {
        return (
          Ur(
            'firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead.'
          ),
          this.sb(t)
        );
      }),
      (t.sb = function (t) {
        var e = this,
          n = null;
        return Uh(
          this,
          t
            .c(this.a, this.uid)
            .then(function (t) {
              return (
                Oh(e, t),
                (n = Dh(e, t, 'reauthenticate')),
                (e.f = null),
                e.reload()
              );
            })
            .then(function () {
              return n;
            }),
          !0
        );
      }),
      (t.Bc = function (t) {
        return (
          Ur(
            'firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead.'
          ),
          this.pb(t)
        );
      }),
      (t.pb = function (e) {
        var n = this,
          r = null;
        return Uh(
          this,
          Ph(this, e.providerId)
            .then(function () {
              return n.I();
            })
            .then(function (t) {
              return e.b(n.a, t);
            })
            .then(function (t) {
              return (r = Dh(n, t, 'link')), xh(n, t);
            })
            .then(function () {
              return r;
            })
        );
      }),
      (t.Cc = function (t, e) {
        var n = this;
        return Uh(
          this,
          Ph(this, 'phone').then(function () {
            return Kc(yh(n), t, e, m(n.pb, n));
          })
        );
      }),
      (t.Lc = function (t, e) {
        var n = this;
        return Uh(
          this,
          _e().then(function () {
            return Kc(yh(n), t, e, m(n.sb, n));
          }),
          !0
        );
      }),
      (t.Ab = function (e) {
        var n = this;
        return Uh(
          this,
          this.I()
            .then(function (t) {
              return n.a.Ab(t, e);
            })
            .then(function (t) {
              return Oh(n, t), n.reload();
            })
        );
      }),
      (t.dd = function (e) {
        var n = this;
        return Uh(
          this,
          this.I()
            .then(function (t) {
              return e.b(n.a, t);
            })
            .then(function (t) {
              return Oh(n, t), n.reload();
            })
        );
      }),
      (t.Bb = function (e) {
        var n = this;
        return Uh(
          this,
          this.I()
            .then(function (t) {
              return n.a.Bb(t, e);
            })
            .then(function (t) {
              return Oh(n, t), n.reload();
            })
        );
      }),
      (t.Cb = function (e) {
        if (void 0 === e.displayName && void 0 === e.photoURL) return Th(this);
        var n = this;
        return Uh(
          this,
          this.I()
            .then(function (t) {
              return n.a.Cb(t, {
                displayName: e.displayName,
                photoUrl: e.photoURL
              });
            })
            .then(function (t) {
              return (
                Oh(n, t),
                Ah(n, 'displayName', t.displayName || null),
                Ah(n, 'photoURL', t.photoUrl || null),
                V(n.providerData, function (t) {
                  'password' === t.providerId &&
                    (Vr(t, 'displayName', n.displayName),
                    Vr(t, 'photoURL', n.photoURL));
                }),
                _h(n)
              );
            })
            .then(Ih)
        );
      }),
      (t.bd = function (e) {
        var n = this;
        return Uh(
          this,
          Rh(this).then(function (t) {
            return K(Sh(n), e)
              ? Qa(n.a, _a, { idToken: t, deleteProvider: [e] }).then(function (
                  t
                ) {
                  var e = {};
                  return (
                    V(t.providerUserInfo || [], function (t) {
                      e[t.providerId] = !0;
                    }),
                    V(Sh(n), function (t) {
                      e[t] || Nh(n, t);
                    }),
                    e[No.PROVIDER_ID] || Vr(n, 'phoneNumber', null),
                    _h(n)
                  );
                })
              : _h(n).then(function () {
                  throw new I('no-such-provider');
                });
          })
        );
      }),
      (t.delete = function () {
        var e = this;
        return Uh(
          this,
          this.I()
            .then(function (t) {
              return Qa(e.a, ba, { idToken: t });
            })
            .then(function () {
              e.dispatchEvent(new th('userDeleted'));
            })
        ).then(function () {
          for (var t = 0; t < e.G.length; t++) e.G[t].cancel('app-deleted');
          fh(e, null),
            ph(e, null),
            vh(e, null),
            (e.G = []),
            (e.A = !0),
            mh(e),
            Vr(e, 'refreshToken', null),
            e.i && Cc(e.i, e);
        });
      }),
      (t.Eb = function (t, e) {
        return !!(
          ('linkViaPopup' == t && (this.h || null) == e && this.g) ||
          ('reauthViaPopup' == t && (this.h || null) == e && this.g) ||
          ('linkViaRedirect' == t && (this.ga || null) == e) ||
          ('reauthViaRedirect' == t && (this.ga || null) == e)
        );
      }),
      (t.ma = function (t, e, n, r) {
        ('linkViaPopup' != t && 'reauthViaPopup' != t) ||
          r != (this.h || null) ||
          (n && this.O ? this.O(n) : e && !n && this.g && this.g(e),
          this.c && (this.c.cancel(), (this.c = null)),
          delete this.g,
          delete this.O);
      }),
      (t.Fa = function (t, e) {
        return 'linkViaPopup' == t && e == (this.h || null)
          ? m(this.Jb, this)
          : 'reauthViaPopup' == t && e == (this.h || null)
          ? m(this.Kb, this)
          : 'linkViaRedirect' == t && (this.ga || null) == e
          ? m(this.Jb, this)
          : 'reauthViaRedirect' == t && (this.ga || null) == e
          ? m(this.Kb, this)
          : null;
      }),
      (t.Dc = function (t) {
        var e = this;
        return Lh(
          this,
          'linkViaPopup',
          t,
          function () {
            return Ph(e, t.providerId).then(function () {
              return _h(e);
            });
          },
          !1
        );
      }),
      (t.Mc = function (t) {
        return Lh(
          this,
          'reauthViaPopup',
          t,
          function () {
            return _e();
          },
          !0
        );
      }),
      (t.Ec = function (t) {
        var e = this;
        return Mh(
          this,
          'linkViaRedirect',
          t,
          function () {
            return Ph(e, t.providerId);
          },
          !1
        );
      }),
      (t.Nc = function (t) {
        return Mh(
          this,
          'reauthViaRedirect',
          t,
          function () {
            return _e();
          },
          !0
        );
      }),
      (t.Jb = function (e, n, t, r) {
        var i = this;
        this.c && (this.c.cancel(), (this.c = null));
        var o = null;
        return (
          (t = this.I()
            .then(function (t) {
              return fa(i.a, {
                requestUri: e,
                postBody: r,
                sessionId: n,
                idToken: t
              });
            })
            .then(function (t) {
              return (o = Dh(i, t, 'link')), xh(i, t);
            })
            .then(function () {
              return o;
            })),
          Uh(this, t)
        );
      }),
      (t.Kb = function (t, e, n, r) {
        var i = this;
        this.c && (this.c.cancel(), (this.c = null));
        var o = null;
        return Uh(
          this,
          _e()
            .then(function () {
              return to(
                pa(i.a, {
                  requestUri: t,
                  sessionId: e,
                  postBody: r,
                  tenantId: n
                }),
                i.uid
              );
            })
            .then(function (t) {
              return (
                (o = Dh(i, t, 'reauthenticate')),
                Oh(i, t),
                (i.f = null),
                i.reload()
              );
            })
            .then(function () {
              return o;
            }),
          !0
        );
      }),
      (t.tb = function (e) {
        var n = this,
          r = null;
        return Uh(
          this,
          this.I()
            .then(function (t) {
              return (r = t), void 0 === e || ct(e) ? {} : Ri(new _i(e));
            })
            .then(function (t) {
              return n.a.tb(r, t);
            })
            .then(function (t) {
              if (n.email != t) return n.reload();
            })
            .then(function () {})
        );
      }),
      (t.Db = function (e, n) {
        var r = this,
          i = null;
        return Uh(
          this,
          this.I()
            .then(function (t) {
              return (i = t), void 0 === n || ct(n) ? {} : Ri(new _i(n));
            })
            .then(function (t) {
              return r.a.Db(i, e, t);
            })
            .then(function (t) {
              if (r.email != t) return r.reload();
            })
            .then(function () {})
        );
      }),
      (t.ic = function (t) {
        var e = null,
          n = this;
        return Uh(
          this,
          (t = to(_e(t), n.uid)
            .then(function (t) {
              return (
                (e = Dh(n, t, 'reauthenticate')),
                Oh(n, t),
                (n.f = null),
                n.reload()
              );
            })
            .then(function () {
              return e;
            })),
          !0
        );
      }),
      (t.toJSON = function () {
        return this.w();
      }),
      (t.w = function () {
        var e = {
          uid: this.uid,
          displayName: this.displayName,
          photoURL: this.photoURL,
          email: this.email,
          emailVerified: this.emailVerified,
          phoneNumber: this.phoneNumber,
          isAnonymous: this.isAnonymous,
          tenantId: this.tenantId,
          providerData: [],
          apiKey: this.l,
          appName: this.m,
          authDomain: this.s,
          stsTokenManager: this.b.w(),
          redirectEventId: this.ga || null
        };
        return (
          this.metadata && ft(e, this.metadata.w()),
          V(this.providerData, function (t) {
            e.providerData.push(
              (function (t) {
                var e,
                  n = {};
                for (e in t) t.hasOwnProperty(e) && (n[e] = t[e]);
                return n;
              })(t)
            );
          }),
          ft(e, this.N.w()),
          e
        );
      });
    var qh = { name: 'redirectUser', D: 'session' };
    function Bh(t) {
      return Yu(t.b, qh, t.a);
    }
    function Wh(t) {
      var e, n, r, i;
      (this.a = t),
        (this.b = zu()),
        (this.c = null),
        (this.f =
          ((n = zh('local')),
          (r = zh('session')),
          (i = zh('none')),
          (function (n, r, i) {
            var o = Qu(r, i),
              s = Gu(n, r.D);
            return n.get(r, i).then(function (t) {
              var e = null;
              try {
                e = Nr(l.localStorage.getItem(o));
              } catch (t) {}
              if (e && !t) return l.localStorage.removeItem(o), n.set(r, e, i);
              e &&
                t &&
                'localStorage' != s.type &&
                l.localStorage.removeItem(o);
            });
          })((e = this).b, n, e.a)
            .then(function () {
              return e.b.get(r, e.a);
            })
            .then(function (t) {
              return t
                ? r
                : e.b.get(i, e.a).then(function (t) {
                    return t
                      ? i
                      : e.b.get(n, e.a).then(function (t) {
                          return t
                            ? n
                            : e.b.get(Hh, e.a).then(function (t) {
                                return t ? zh(t) : n;
                              });
                        });
                  });
            })
            .then(function (t) {
              return (e.c = t), Kh(e, t.D);
            })
            .o(function () {
              e.c || (e.c = n);
            }))),
        this.b.addListener(zh('local'), this.a, m(this.g, this));
    }
    function Kh(t, e) {
      var n,
        a,
        r = [];
      for (n in Ku) Ku[n] !== e && r.push(Yu(t.b, zh(Ku[n]), t.a));
      return (
        r.push(Yu(t.b, Hh, t.a)),
        (a = r),
        new pe(function (n, e) {
          var r = a.length,
            i = [];
          if (r)
            for (
              var t = function (t, e) {
                  r--, (i[t] = e), 0 == r && n(i);
                },
                o = function (t) {
                  e(t);
                },
                s = 0;
              s < a.length;
              s++
            )
              Ee(a[s], b(t, s), o);
          else n(i);
        })
      );
    }
    Wh.prototype.g = function () {
      var e = this,
        n = zh('local');
      Xh(this, function () {
        return _e()
          .then(function () {
            return e.c && 'local' != e.c.D ? e.b.get(n, e.a) : null;
          })
          .then(function (t) {
            if (t)
              return Kh(e, 'local').then(function () {
                e.c = n;
              });
          });
      });
    };
    var Hh = { name: 'persistence', D: 'session' };
    function zh(t) {
      return { name: 'authUser', D: t };
    }
    function Gh(t, e) {
      return Xh(t, function () {
        return t.b.set(t.c, e.w(), t.a);
      });
    }
    function Qh(t) {
      return Xh(t, function () {
        return Yu(t.b, t.c, t.a);
      });
    }
    function Yh(t, e, n) {
      return Xh(t, function () {
        return t.b.get(t.c, t.a).then(function (t) {
          return (
            t && e && (t.authDomain = e),
            t && n && (t.emulatorConfig = n),
            jh(t || {})
          );
        });
      });
    }
    function Xh(t, e) {
      return (t.f = t.f.then(e, e)), t.f;
    }
    function Jh(t) {
      if (
        ((this.m = !1),
        Vr(this, 'settings', new Bc()),
        Vr(this, 'app', t),
        !this.app.options || !this.app.options.apiKey)
      )
        throw new I('invalid-api-key');
      var n, e, r, i, o, s;
      (t = Jl.SDK_VERSION ? gr(Jl.SDK_VERSION) : null),
        (this.a = new qs(this.app.options && this.app.options.apiKey, k(S), t)),
        (this.R = []),
        (this.u = []),
        (this.P = []),
        (this.ac = Jl.INTERNAL.createSubscribe(m(this.yc, this))),
        (this.X = void 0),
        (this.bc = Jl.INTERNAL.createSubscribe(m(this.zc, this))),
        il(this, null),
        (this.l = new Wh(this.app.options.apiKey + ':' + this.app.name)),
        (this.G = new Vh(this.app.options.apiKey + ':' + this.app.name)),
        (this.$ = cl(
          this,
          ((e = (n = this).app.options.authDomain),
          (t = (function (e) {
            var t = (function (t, e) {
              return t.b.get(qh, t.a).then(function (t) {
                return t && e && (t.authDomain = e), jh(t || {});
              });
            })(e.G, e.app.options.authDomain).then(function (t) {
              return (e.s = t) && (t.ha = e.G), Bh(e.G);
            });
            return cl(e, t);
          })(n)
            .then(function () {
              return Yh(n.l, e, n.f);
            })
            .then(function (e) {
              return e
                ? ((e.ha = n.G),
                  n.s && (n.s.ga || null) == (e.ga || null)
                    ? e
                    : e
                        .reload()
                        .then(function () {
                          return Gh(n.l, e).then(function () {
                            return e;
                          });
                        })
                        .o(function (t) {
                          return 'auth/network-request-failed' == t.code
                            ? e
                            : Qh(n.l);
                        }))
                : null;
            })
            .then(function (t) {
              il(n, t || null);
            })),
          cl(n, t))
        )),
        (this.i = cl(
          this,
          (r = this).$.then(function () {
            return nl(r);
          })
            .o(function () {})
            .then(function () {
              if (!r.m) return r.pa();
            })
            .o(function () {})
            .then(function () {
              var t;
              r.m ||
                ((r.ba = !0), (t = r.l).b.addListener(zh('local'), t.a, r.pa));
            })
        )),
        (this.ba = !1),
        (this.pa = m(this.Yc, this)),
        (this.Ba = m(this.da, this)),
        (this.ya = m(this.kc, this)),
        (this.za = m(this.vc, this)),
        (this.Aa = m(this.wc, this)),
        (this.b = null),
        (o = (i = this).app.options.authDomain),
        (s = i.app.options.apiKey),
        o &&
          wr() &&
          (i.gb = i.$.then(function () {
            var t;
            if (!i.m)
              return (
                (i.b = Lc(o, s, i.app.name, i.f)),
                Sc(i.b, i),
                sl(i) && wh(sl(i)),
                i.s &&
                  (wh(i.s),
                  (t = i.s).wa(i.ka()),
                  fh(t, i),
                  dh((t = i.s), i.N),
                  vh(t, i),
                  Ys((t = i.s).a, i.f),
                  ph(t, i),
                  (i.s = null)),
                i.b
              );
          })),
        (this.INTERNAL = {}),
        (this.INTERNAL.delete = m(this.delete, this)),
        (this.INTERNAL.logFramework = m(this.Fc, this)),
        (this.A = 0),
        fn.call(this),
        (t = this),
        Object.defineProperty(t, 'lc', {
          get: function () {
            return this.ka();
          },
          set: function (t) {
            this.wa(t);
          },
          enumerable: !1
        }),
        (t.aa = null),
        Object.defineProperty(t, 'ti', {
          get: function () {
            return this.S();
          },
          set: function (t) {
            this.xb(t);
          },
          enumerable: !1
        }),
        (t.W = null),
        (this.N = []),
        (this.f = null);
    }
    function $h(t) {
      qe.call(this, 'languageCodeChanged'), (this.h = t);
    }
    function Zh(t) {
      qe.call(this, 'emulatorConfigChanged'), (this.c = t);
    }
    function tl(t) {
      qe.call(this, 'frameworkChanged'), (this.f = t);
    }
    function el(t) {
      return t.gb || we(new I('auth-domain-config-required'));
    }
    function nl(t) {
      if (!wr())
        return we(new I('operation-not-supported-in-this-environment'));
      var e = el(t)
        .then(function () {
          return t.b.qa();
        })
        .then(function (t) {
          return t ? Br(t) : null;
        });
      return cl(t, e);
    }
    function rl(o, s) {
      var a = {};
      return (
        (a.apiKey = o.app.options.apiKey),
        (a.authDomain = o.app.options.authDomain),
        (a.appName = o.app.name),
        o.f && (a.emulatorConfig = o.f),
        o.$.then(function () {
          return (
            (t = a),
            (e = s),
            (n = o.G),
            (r = o.Ga()),
            (i = new lh(t, e)),
            n && (i.ha = n),
            r && dh(i, r),
            i.reload().then(function () {
              return i;
            })
          );
          var t, e, n, r, i;
        })
          .then(function (t) {
            return (
              sl(o) && t.uid == sl(o).uid ? kh(sl(o), t) : (il(o, t), wh(t)),
              o.da(t)
            );
          })
          .then(function () {
            ul(o);
          })
      );
    }
    function il(t, e) {
      var n, r;
      sl(t) &&
        ((n = sl(t)),
        (r = t.Ba),
        z(n.R, function (t) {
          return t == r;
        }),
        nn(sl(t), 'tokenChanged', t.ya),
        nn(sl(t), 'userDeleted', t.za),
        nn(sl(t), 'userInvalidated', t.Aa),
        mh(sl(t))),
        e &&
          (e.R.push(t.Ba),
          Ze(e, 'tokenChanged', t.ya),
          Ze(e, 'userDeleted', t.za),
          Ze(e, 'userInvalidated', t.Aa),
          0 < t.A && gh(e)),
        Vr(t, 'currentUser', e),
        e &&
          (e.wa(t.ka()),
          fh(e, t),
          dh(e, t.N),
          vh(e, t),
          Ys(e.a, t.f),
          ph(e, t));
    }
    function ol(n, t) {
      var e = null,
        r = null;
      return cl(
        n,
        t
          .then(
            function (t) {
              return (e = ko(t)), (r = Vi(t)), rl(n, t);
            },
            function (t) {
              var e = null;
              throw (
                (t &&
                  'auth/multi-factor-auth-required' === t.code &&
                  (e = Xc(t.w(), n, m(n.jc, n))),
                e || t)
              );
            }
          )
          .then(function () {
            return Br({
              user: sl(n),
              credential: e,
              additionalUserInfo: r,
              operationType: 'signIn'
            });
          })
      );
    }
    function sl(t) {
      return t.currentUser;
    }
    function al(t) {
      return (sl(t) && sl(t)._lat) || null;
    }
    function ul(t) {
      if (t.ba) {
        for (var e = 0; e < t.u.length; e++) t.u[e] && t.u[e](al(t));
        if (t.X !== t.getUid() && t.P.length)
          for (t.X = t.getUid(), e = 0; e < t.P.length; e++)
            t.P[e] && t.P[e](al(t));
      }
    }
    function cl(t, e) {
      return (
        t.R.push(e),
        e.na(function () {
          H(t.R, e);
        }),
        e
      );
    }
    function hl() {}
    function ll() {
      (this.a = {}), (this.b = 1e12);
    }
    (Wh.prototype.wb = function (e) {
      var n = null,
        r = this;
      return (
        (function (t) {
          var e = new I('invalid-persistence-type'),
            n = new I('unsupported-persistence-type');
          t: {
            for (r in Ku)
              if (Ku[r] == t) {
                var r = !0;
                break t;
              }
            r = !1;
          }
          if (!r || 'string' != typeof t) throw e;
          switch (lr()) {
            case 'ReactNative':
              if ('session' === t) throw n;
              break;
            case 'Node':
              if ('none' !== t) throw n;
              break;
            case 'Worker':
              if ('session' === t || (!Iu() && 'none' !== t)) throw n;
              break;
            default:
              if (!_r() && 'none' !== t) throw n;
          }
        })(e),
        Xh(this, function () {
          return e != r.c.D
            ? r.b
                .get(r.c, r.a)
                .then(function (t) {
                  return (n = t), Kh(r, e);
                })
                .then(function () {
                  if (((r.c = zh(e)), n)) return r.b.set(r.c, n, r.a);
                })
            : _e();
        })
      );
    }),
      w(Jh, fn),
      w($h, qe),
      w(Zh, qe),
      w(tl, qe),
      ((t = Jh.prototype).wb = function (t) {
        return (t = this.l.wb(t)), cl(this, t);
      }),
      (t.wa = function (t) {
        this.aa === t ||
          this.m ||
          ((this.aa = t),
          Qs(this.a, this.aa),
          this.dispatchEvent(new $h(this.ka())));
      }),
      (t.ka = function () {
        return this.aa;
      }),
      (t.ed = function () {
        var t = l.navigator;
        this.wa(
          (t &&
            ((t.languages && t.languages[0]) ||
              t.language ||
              t.userLanguage)) ||
            null
        );
      }),
      (t.fd = function (t) {
        if (!this.f) {
          if (!/^https?:\/\//.test(t))
            throw new I(
              'argument-error',
              'Emulator URL must start with a valid scheme (http:// or https://).'
            );
          Dr(
            'WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.'
          ),
            l.document &&
              ar().then(function () {
                var t = l.document.createElement('div');
                (t.innerText =
                  'Running in emulator mode. Do not use with production credentials.'),
                  (t.style.position = 'fixed'),
                  (t.style.width = '100%'),
                  (t.style.backgroundColor = '#ffffff'),
                  (t.style.border = '.1em solid #000000'),
                  (t.style.color = '#ff0000'),
                  (t.style.bottom = '0px'),
                  (t.style.left = '0px'),
                  (t.style.margin = '0px'),
                  (t.style.zIndex = 1e4),
                  (t.style.textAlign = 'center'),
                  t.classList.add('firebase-emulator-warning'),
                  l.document.body.appendChild(t);
              }),
            (this.f = { url: t }),
            (this.settings.hb = !0),
            Ys(this.a, this.f),
            this.dispatchEvent(new Zh(this.f));
        }
      }),
      (t.Fc = function (t) {
        this.N.push(t),
          Js(this.a, Jl.SDK_VERSION ? gr(Jl.SDK_VERSION, this.N) : null),
          this.dispatchEvent(new tl(this.N));
      }),
      (t.Ga = function () {
        return Q(this.N);
      }),
      (t.xb = function (t) {
        this.W === t || this.m || ((this.W = t), (this.a.b = this.W));
      }),
      (t.S = function () {
        return this.W;
      }),
      (t.toJSON = function () {
        return {
          apiKey: this.app.options.apiKey,
          authDomain: this.app.options.authDomain,
          appName: this.app.name,
          currentUser: sl(this) && sl(this).w()
        };
      }),
      (t.Eb = function (t, e) {
        switch (t) {
          case 'unknown':
          case 'signInViaRedirect':
            return !0;
          case 'signInViaPopup':
            return this.h == e && !!this.g;
          default:
            return !1;
        }
      }),
      (t.ma = function (t, e, n, r) {
        'signInViaPopup' == t &&
          this.h == r &&
          (n && this.O ? this.O(n) : e && !n && this.g && this.g(e),
          this.c && (this.c.cancel(), (this.c = null)),
          delete this.g,
          delete this.O);
      }),
      (t.Fa = function (t, e) {
        return 'signInViaRedirect' == t ||
          ('signInViaPopup' == t && this.h == e && this.g)
          ? m(this.hc, this)
          : null;
      }),
      (t.hc = function (t, e, n, r) {
        var i = this,
          o = { requestUri: t, postBody: r, sessionId: e, tenantId: n };
        return (
          this.c && (this.c.cancel(), (this.c = null)),
          i.$.then(function () {
            return ol(i, la(i.a, o));
          })
        );
      }),
      (t.Wc = function (e) {
        if (!wr())
          return we(new I('operation-not-supported-in-this-environment'));
        var n = this,
          t = ji(e.providerId),
          r = Ar(),
          i = null;
        (!Tr() || cr()) &&
          this.app.options.authDomain &&
          e.isOAuthProvider &&
          (i = cu(
            this.app.options.authDomain,
            this.app.options.apiKey,
            this.app.name,
            'signInViaPopup',
            e,
            null,
            r,
            Jl.SDK_VERSION || null,
            null,
            null,
            this.S(),
            this.f
          ));
        var o = ir(i, t && t.ua, t && t.ta);
        return cl(
          this,
          (t = el(this)
            .then(function (t) {
              return kc(t, o, 'signInViaPopup', e, r, !!i, n.S());
            })
            .then(function () {
              return new pe(function (t, e) {
                n.ma(
                  'signInViaPopup',
                  null,
                  new I('cancelled-popup-request'),
                  n.h
                ),
                  (n.g = t),
                  (n.O = e),
                  (n.h = r),
                  (n.c = Pc(n.b, n, 'signInViaPopup', o, r));
              });
            })
            .then(function (t) {
              return o && rr(o), t ? Br(t) : null;
            })
            .o(function (t) {
              throw (o && rr(o), t);
            }))
        );
      }),
      (t.Xc = function (t) {
        if (!wr())
          return we(new I('operation-not-supported-in-this-environment'));
        var e = this;
        return cl(
          this,
          el(this)
            .then(function () {
              return Xh((t = e.l), function () {
                return t.b.set(Hh, t.c.D, t.a);
              });
              var t;
            })
            .then(function () {
              return Oc(e.b, 'signInViaRedirect', t, void 0, e.S());
            })
        );
      }),
      (t.qa = function () {
        var e = this;
        return nl(this)
          .then(function (t) {
            return e.b && Uc(e.b.b), t;
          })
          .o(function (t) {
            throw (e.b && Uc(e.b.b), t);
          });
      }),
      (t.cd = function (t) {
        if (!t) return we(new I('null-user'));
        if (this.W != t.tenantId) return we(new I('tenant-id-mismatch'));
        var e = this,
          n = {};
        (n.apiKey = this.app.options.apiKey),
          (n.authDomain = this.app.options.authDomain),
          (n.appName = this.app.name);
        var r,
          i,
          o,
          s,
          a,
          u =
            ((r = t),
            (i = n),
            (o = e.G),
            (s = e.Ga()),
            (a = r.b),
            ((n = {})[Ws] = a.b && a.b.toString()),
            (n.refreshToken = a.a),
            (i = new lh(
              i || { apiKey: r.l, authDomain: r.s, appName: r.m },
              n
            )),
            o && (i.ha = o),
            s && dh(i, s),
            kh(i, r),
            i);
        return cl(
          this,
          this.i
            .then(function () {
              if (e.app.options.apiKey != t.l) return u.reload();
            })
            .then(function () {
              return sl(e) && t.uid == sl(e).uid
                ? (kh(sl(e), t), e.da(t))
                : (il(e, u), wh(u), e.da(u));
            })
            .then(function () {
              ul(e);
            })
        );
      }),
      (t.zb = function () {
        var t = this,
          e = this.i.then(function () {
            return (
              t.b && Uc(t.b.b),
              sl(t)
                ? (il(t, null),
                  Qh(t.l).then(function () {
                    ul(t);
                  }))
                : _e()
            );
          });
        return cl(this, e);
      }),
      (t.Yc = function () {
        var r = this;
        return Yh(this.l, this.app.options.authDomain).then(function (t) {
          if (!r.m) {
            var e, n;
            if (
              ((n = sl(r) && t) &&
                ((n = sl(r).uid),
                (e = t.uid),
                (n = null != n && '' !== n && null != e && '' !== e && n == e)),
              n)
            )
              return kh(sl(r), t), sl(r).I();
            (sl(r) || t) &&
              (il(r, t), t && (wh(t), (t.ha = r.G)), r.b && Sc(r.b, r), ul(r));
          }
        });
      }),
      (t.da = function (t) {
        return Gh(this.l, t);
      }),
      (t.kc = function () {
        ul(this), this.da(sl(this));
      }),
      (t.vc = function () {
        this.zb();
      }),
      (t.wc = function () {
        this.zb();
      }),
      (t.jc = function (t) {
        var e = this;
        return this.i.then(function () {
          return ol(e, _e(t));
        });
      }),
      (t.yc = function (t) {
        var e = this;
        this.addAuthTokenListener(function () {
          t.next(sl(e));
        });
      }),
      (t.zc = function (t) {
        var e,
          n,
          r = this;
        (n = function () {
          t.next(sl(r));
        }),
          (e = this).P.push(n),
          cl(
            e,
            e.i.then(function () {
              !e.m &&
                K(e.P, n) &&
                e.X !== e.getUid() &&
                ((e.X = e.getUid()), n(al(e)));
            })
          );
      }),
      (t.Hc = function (t, e, n) {
        var r = this;
        return (
          this.ba &&
            Promise.resolve().then(function () {
              'function' == typeof t
                ? t(sl(r))
                : 'function' == typeof t.next && t.next(sl(r));
            }),
          this.ac(t, e, n)
        );
      }),
      (t.Gc = function (t, e, n) {
        var r = this;
        return (
          this.ba &&
            Promise.resolve().then(function () {
              (r.X = r.getUid()),
                'function' == typeof t
                  ? t(sl(r))
                  : 'function' == typeof t.next && t.next(sl(r));
            }),
          this.bc(t, e, n)
        );
      }),
      (t.mc = function (t) {
        var e = this,
          n = this.i.then(function () {
            return sl(e)
              ? sl(e)
                  .I(t)
                  .then(function (t) {
                    return { accessToken: t };
                  })
              : null;
          });
        return cl(this, n);
      }),
      (t.Sc = function (t) {
        var n = this;
        return this.i
          .then(function () {
            return ol(n, Qa(n.a, Ba, { token: t }));
          })
          .then(function (t) {
            var e = t.user;
            return Ah(e, 'isAnonymous', !1), n.da(e), t;
          });
      }),
      (t.Tc = function (t, e) {
        var n = this;
        return this.i.then(function () {
          return ol(n, Qa(n.a, Wa, { email: t, password: e }));
        });
      }),
      (t.dc = function (t, e) {
        var n = this;
        return this.i.then(function () {
          return ol(n, Qa(n.a, ga, { email: t, password: e }));
        });
      }),
      (t.Za = function (t) {
        var e = this;
        return this.i.then(function () {
          return ol(e, t.ja(e.a));
        });
      }),
      (t.Rc = function (t) {
        return (
          Ur(
            'firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead.'
          ),
          this.Za(t)
        );
      }),
      (t.yb = function () {
        var n = this;
        return this.i.then(function () {
          var t = sl(n);
          if (t && t.isAnonymous) {
            var e = Br({ providerId: null, isNewUser: !1 });
            return Br({
              user: t,
              credential: null,
              additionalUserInfo: e,
              operationType: 'signIn'
            });
          }
          return ol(n, n.a.yb()).then(function (t) {
            var e = t.user;
            return Ah(e, 'isAnonymous', !0), n.da(e), t;
          });
        });
      }),
      (t.getUid = function () {
        return (sl(this) && sl(this).uid) || null;
      }),
      (t.cc = function (t) {
        this.addAuthTokenListener(t),
          this.A++,
          0 < this.A && sl(this) && gh(sl(this));
      }),
      (t.Oc = function (e) {
        var n = this;
        V(this.u, function (t) {
          t == e && n.A--;
        }),
          this.A < 0 && (this.A = 0),
          0 == this.A && sl(this) && mh(sl(this)),
          this.removeAuthTokenListener(e);
      }),
      (t.addAuthTokenListener = function (t) {
        var e = this;
        this.u.push(t),
          cl(
            this,
            this.i.then(function () {
              e.m || (K(e.u, t) && t(al(e)));
            })
          );
      }),
      (t.removeAuthTokenListener = function (e) {
        z(this.u, function (t) {
          return t == e;
        });
      }),
      (t.delete = function () {
        this.m = !0;
        for (var t = 0; t < this.R.length; t++) this.R[t].cancel('app-deleted');
        return (
          (this.R = []),
          this.l && (t = this.l).b.removeListener(zh('local'), t.a, this.pa),
          this.b && (Cc(this.b, this), Uc(this.b.b)),
          Promise.resolve()
        );
      }),
      (t.gc = function (t) {
        return cl(
          this,
          Qa(this.a, ma, {
            identifier: t,
            continueUri: Er() ? tr() : 'http://localhost'
          }).then(function (t) {
            return t.signinMethods || [];
          })
        );
      }),
      (t.Ac = function (t) {
        return !!Io(t);
      }),
      (t.vb = function (e, n) {
        var r = this;
        return cl(
          this,
          _e()
            .then(function () {
              var t = new _i(n);
              if (!t.c)
                throw new I(
                  'argument-error',
                  Ii + ' must be true when sending sign in link to email'
                );
              return Ri(t);
            })
            .then(function (t) {
              return r.a.vb(e, t);
            })
            .then(function () {})
        );
      }),
      (t.hd = function (t) {
        return this.Qa(t).then(function (t) {
          return t.data.email;
        });
      }),
      (t.mb = function (t, e) {
        return cl(
          this,
          this.a.mb(t, e).then(function () {})
        );
      }),
      (t.Qa = function (t) {
        return cl(
          this,
          this.a.Qa(t).then(function (t) {
            return new Jr(t);
          })
        );
      }),
      (t.ib = function (t) {
        return cl(
          this,
          this.a.ib(t).then(function () {})
        );
      }),
      (t.ub = function (e, t) {
        var n = this;
        return cl(
          this,
          _e()
            .then(function () {
              return void 0 === t || ct(t) ? {} : Ri(new _i(t));
            })
            .then(function (t) {
              return n.a.ub(e, t);
            })
            .then(function () {})
        );
      }),
      (t.Vc = function (t, e) {
        return cl(this, Kc(this, t, e, m(this.Za, this)));
      }),
      (t.Uc = function (n, r) {
        var i = this;
        return cl(
          this,
          _e().then(function () {
            var t = r || tr(),
              e = Eo(n, t);
            if (!(t = Io(t)))
              throw new I('argument-error', 'Invalid email link!');
            if (t.tenantId !== i.S()) throw new I('tenant-id-mismatch');
            return i.Za(e);
          })
        );
      }),
      (hl.prototype.render = function () {}),
      (hl.prototype.reset = function () {}),
      (hl.prototype.getResponse = function () {}),
      (hl.prototype.execute = function () {});
    var fl = null;
    function pl(t, e) {
      return ((e = dl(e)) && t.a[e]) || null;
    }
    function dl(t) {
      return (t = void 0 === t ? 1e12 : t) ? t.toString() : null;
    }
    function vl(t, e) {
      (this.g = !1),
        (this.c = e),
        (this.a = this.b = null),
        (this.h = 'invisible' !== this.c.size),
        (this.f = ee(t));
      var n = this;
      (this.i = function () {
        n.execute();
      }),
        this.h ? this.execute() : Ze(this.f, 'click', this.i);
    }
    function yl(t) {
      if (t.g) throw Error('reCAPTCHA mock was already deleted!');
    }
    function gl() {}
    function ml() {}
    (ll.prototype.render = function (t, e) {
      return (this.a[this.b.toString()] = new vl(t, e)), this.b++;
    }),
      (ll.prototype.reset = function (t) {
        var e = pl(this, t);
        (t = dl(t)), e && t && (e.delete(), delete this.a[t]);
      }),
      (ll.prototype.getResponse = function (t) {
        return (t = pl(this, t)) ? t.getResponse() : null;
      }),
      (ll.prototype.execute = function (t) {
        (t = pl(this, t)) && t.execute();
      }),
      (vl.prototype.getResponse = function () {
        return yl(this), this.b;
      }),
      (vl.prototype.execute = function () {
        yl(this);
        var n = this;
        this.a ||
          (this.a = setTimeout(function () {
            n.b = (function () {
              for (var t = 50, e = []; 0 < t; )
                e.push(
                  '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'.charAt(
                    Math.floor(62 * Math.random())
                  )
                ),
                  t--;
              return e.join('');
            })();
            var t = n.c.callback,
              e = n.c['expired-callback'];
            if (t)
              try {
                t(n.b);
              } catch (t) {}
            n.a = setTimeout(function () {
              if (((n.a = null), (n.b = null), e))
                try {
                  e();
                } catch (t) {}
              n.h && n.execute();
            }, 6e4);
          }, 500));
      }),
      (vl.prototype.delete = function () {
        yl(this),
          (this.g = !0),
          clearTimeout(this.a),
          (this.a = null),
          nn(this.f, 'click', this.i);
      }),
      Vr(gl, 'FACTOR_ID', 'phone'),
      (ml.prototype.g = function () {
        return _e((fl = fl || new ll()));
      }),
      (ml.prototype.c = function () {});
    var bl = null;
    function _l() {
      (this.b = l.grecaptcha ? 1 / 0 : 0),
        (this.f = null),
        (this.a = '__rcb' + Math.floor(1e6 * Math.random()).toString());
    }
    var wl = new dt(
        mt,
        'https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}'
      ),
      El = new Or(3e4, 6e4);
    (_l.prototype.g = function (i) {
      var o = this;
      return new pe(function (t, e) {
        var r = setTimeout(function () {
          e(new I('network-request-failed'));
        }, El.get());
        !l.grecaptcha || (i !== o.f && !o.b)
          ? ((l[o.a] = function () {
              var n;
              l.grecaptcha
                ? ((o.f = i),
                  (n = l.grecaptcha.render),
                  (l.grecaptcha.render = function (t, e) {
                    return (t = n(t, e)), o.b++, t;
                  }),
                  clearTimeout(r),
                  t(l.grecaptcha))
                : (clearTimeout(r), e(new I('internal-error'))),
                delete l[o.a];
            }),
            _e(xs(Et(wl, { onload: o.a, hl: i || '' }))).o(function () {
              clearTimeout(r),
                e(
                  new I(
                    'internal-error',
                    'Unable to load external reCAPTCHA dependencies!'
                  )
                );
            }))
          : (clearTimeout(r), t(l.grecaptcha));
      });
    }),
      (_l.prototype.c = function () {
        this.b--;
      });
    var Il = null;
    function Tl(t, e, n, r, i, o, s) {
      if (
        (Vr(this, 'type', 'recaptcha'),
        (this.c = this.f = null),
        (this.A = !1),
        (this.m = e),
        (this.g = null),
        (s = s ? (bl = bl || new ml()) : (Il = Il || new _l())),
        (this.v = s),
        (this.a = n || { theme: 'light', type: 'image' }),
        (this.h = []),
        this.a[Nl])
      )
        throw new I(
          'argument-error',
          'sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.'
        );
      if (((this.i = 'invisible' === this.a[Al]), !l.document))
        throw new I(
          'operation-not-supported-in-this-environment',
          'RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.'
        );
      if (!ee(e) || (!this.i && ee(e).hasChildNodes()))
        throw new I(
          'argument-error',
          'reCAPTCHA container is either not found or already contains inner elements!'
        );
      (this.s = new qs(t, o || null, i || null)),
        (this.u =
          r ||
          function () {
            return null;
          });
      var a = this;
      this.l = [];
      var u = this.a[Sl];
      this.a[Sl] = function (t) {
        var e;
        kl(a, t),
          'function' == typeof u
            ? u(t)
            : 'string' != typeof u ||
              ('function' == typeof (e = br(u, l)) && e(t));
      };
      var c = this.a[Cl];
      this.a[Cl] = function () {
        var t;
        kl(a, null),
          'function' == typeof c
            ? c()
            : 'string' != typeof c ||
              ('function' == typeof (t = br(c, l)) && t());
      };
    }
    var Sl = 'callback',
      Cl = 'expired-callback',
      Nl = 'sitekey',
      Al = 'size';
    function kl(t, e) {
      for (var n = 0; n < t.l.length; n++)
        try {
          t.l[n](e);
        } catch (t) {}
    }
    function Rl(t, e) {
      return (
        t.h.push(e),
        e.na(function () {
          H(t.h, e);
        }),
        e
      );
    }
    function Ol(t) {
      if (t.A)
        throw new I(
          'internal-error',
          'RecaptchaVerifier instance has been destroyed.'
        );
    }
    function Pl(t, e, n) {
      var r = !1;
      try {
        this.b = n || Jl.app();
      } catch (t) {
        throw new I(
          'argument-error',
          'No firebase.app.App instance is currently initialized.'
        );
      }
      if (!this.b.options || !this.b.options.apiKey)
        throw new I('invalid-api-key');
      n = this.b.options.apiKey;
      var i = this,
        o = null;
      try {
        o = this.b.auth().Ga();
      } catch (t) {}
      try {
        r = this.b.auth().settings.appVerificationDisabledForTesting;
      } catch (t) {}
      (o = Jl.SDK_VERSION ? gr(Jl.SDK_VERSION, o) : null),
        Tl.call(
          this,
          n,
          t,
          e,
          function () {
            try {
              var e = i.b.auth().ka();
            } catch (t) {
              e = null;
            }
            return e;
          },
          o,
          k(S),
          r
        );
    }
    function Dl(t, e, n, r) {
      t: {
        n = Array.prototype.slice.call(n);
        for (var i = 0, o = !1, s = 0; s < e.length; s++)
          if (e[s].optional) o = !0;
          else {
            if (o)
              throw new I(
                'internal-error',
                'Argument validator encountered a required argument after an optional argument.'
              );
            i++;
          }
        if (((o = e.length), n.length < i || o < n.length))
          r =
            'Expected ' +
            (i == o
              ? 1 == i
                ? '1 argument'
                : i + ' arguments'
              : i + '-' + o + ' arguments') +
            ' but got ' +
            n.length +
            '.';
        else {
          for (i = 0; i < n.length; i++)
            if (((o = e[i].optional && void 0 === n[i]), !e[i].K(n[i]) && !o)) {
              if (((e = e[i]), i < 0 || i >= xl.length))
                throw new I(
                  'internal-error',
                  'Argument validator received an unsupported number of arguments.'
                );
              (n = xl[i]),
                (r =
                  (r ? '' : n + ' argument ') +
                  (e.name ? '"' + e.name + '" ' : '') +
                  'must be ' +
                  e.J +
                  '.');
              break t;
            }
          r = null;
        }
      }
      if (r) throw new I('argument-error', t + ' failed: ' + r);
    }
    ((t = Tl.prototype).Ia = function () {
      var e = this;
      return this.f
        ? this.f
        : (this.f = Rl(
            this,
            _e()
              .then(function () {
                if (Er() && !hr()) return ar();
                throw new I(
                  'operation-not-supported-in-this-environment',
                  'RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.'
                );
              })
              .then(function () {
                return e.v.g(e.u());
              })
              .then(function (t) {
                return (e.g = t), Qa(e.s, Oa, {});
              })
              .then(function (t) {
                e.a[Nl] = t.recaptchaSiteKey;
              })
              .o(function (t) {
                throw ((e.f = null), t);
              })
          ));
    }),
      (t.render = function () {
        Ol(this);
        var n = this;
        return Rl(
          this,
          this.Ia().then(function () {
            var t, e;
            return (
              null === n.c &&
                ((e = n.m),
                n.i || ((t = ee(e)), (e = se('DIV')), t.appendChild(e)),
                (n.c = n.g.render(e, n.a))),
              n.c
            );
          })
        );
      }),
      (t.verify = function () {
        Ol(this);
        var i = this;
        return Rl(
          this,
          this.render().then(function (e) {
            return new pe(function (n) {
              var r,
                t = i.g.getResponse(e);
              t
                ? n(t)
                : ((r = function (t) {
                    var e;
                    t &&
                      ((e = r),
                      z(i.l, function (t) {
                        return t == e;
                      }),
                      n(t));
                  }),
                  i.l.push(r),
                  i.i && i.g.execute(i.c));
            });
          })
        );
      }),
      (t.reset = function () {
        Ol(this), null !== this.c && this.g.reset(this.c);
      }),
      (t.clear = function () {
        Ol(this), (this.A = !0), this.v.c();
        for (var t, e = 0; e < this.h.length; e++)
          this.h[e].cancel('RecaptchaVerifier instance has been destroyed.');
        if (!this.i) {
          e = ee(this.m);
          for (; (t = e.firstChild); ) e.removeChild(t);
        }
      }),
      w(Pl, Tl);
    var xl = 'First Second Third Fourth Fifth Sixth Seventh Eighth Ninth'.split(
      ' '
    );
    function Ll(t, e) {
      return {
        name: t || '',
        J: 'a valid string',
        optional: !!e,
        K: function (t) {
          return 'string' == typeof t;
        }
      };
    }
    function Ml(t, e) {
      return {
        name: t || '',
        J: 'a boolean',
        optional: !!e,
        K: function (t) {
          return 'boolean' == typeof t;
        }
      };
    }
    function Fl(t, e) {
      return { name: t || '', J: 'a valid object', optional: !!e, K: y };
    }
    function Ul(t, e) {
      return {
        name: t || '',
        J: 'a function',
        optional: !!e,
        K: function (t) {
          return 'function' == typeof t;
        }
      };
    }
    function jl(t, e) {
      return {
        name: t || '',
        J: 'null',
        optional: !!e,
        K: function (t) {
          return null === t;
        }
      };
    }
    function Vl(n) {
      return {
        name: n ? n + 'Credential' : 'credential',
        J: n ? 'a valid ' + n + ' credential' : 'a valid credential',
        optional: !1,
        K: function (t) {
          if (!t) return !1;
          var e = !n || t.providerId === n;
          return !(!t.ja || !e);
        }
      };
    }
    function ql() {
      return {
        name: 'multiFactorAssertion',
        J: 'a valid multiFactorAssertion',
        optional: !1,
        K: function (t) {
          return !!t && !!t.rb;
        }
      };
    }
    function Bl() {
      return {
        name: 'authProvider',
        J: 'a valid Auth provider',
        optional: !1,
        K: function (t) {
          return !!(
            t &&
            t.providerId &&
            t.hasOwnProperty &&
            t.hasOwnProperty('isOAuthProvider')
          );
        }
      };
    }
    function Wl(t, e) {
      return (
        y(t) &&
        'string' == typeof t.type &&
        t.type === e &&
        'function' == typeof t.Ha
      );
    }
    function Kl(t) {
      return y(t) && 'string' == typeof t.uid;
    }
    function Hl() {
      return {
        name: 'applicationVerifier',
        J: 'an implementation of firebase.auth.ApplicationVerifier',
        optional: !1,
        K: function (t) {
          return !(
            !t ||
            'string' != typeof t.type ||
            'function' != typeof t.verify
          );
        }
      };
    }
    function zl(e, n, t, r) {
      return {
        name: t || '',
        J: e.J + ' or ' + n.J,
        optional: !!r,
        K: function (t) {
          return e.K(t) || n.K(t);
        }
      };
    }
    function Gl(t, e) {
      for (var n in e) {
        var r = e[n].name;
        t[r] = Xl(r, t[n], e[n].j);
      }
    }
    function Ql(t, e) {
      for (var n in e) {
        var r = e[n].name;
        r !== n &&
          Object.defineProperty(t, r, {
            get: b(function (t) {
              return this[t];
            }, n),
            set: b(
              function (t, e, n, r) {
                Dl(t, [n], [r], !0), (this[e] = r);
              },
              r,
              n,
              e[n].jb
            ),
            enumerable: !0
          });
      }
    }
    function Yl(t, e, n, r) {
      t[e] = Xl(e, n, r);
    }
    function Xl(t, e, n) {
      function r() {
        var t = Array.prototype.slice.call(arguments);
        return Dl(o, n, t), e.apply(this, t);
      }
      if (!n) return e;
      var i,
        o = (t = (t = t).split('.'))[t.length - 1];
      for (i in e) r[i] = e[i];
      for (i in e.prototype) r.prototype[i] = e.prototype[i];
      return r;
    }
    Gl(Jh.prototype, {
      ib: { name: 'applyActionCode', j: [Ll('code')] },
      Qa: { name: 'checkActionCode', j: [Ll('code')] },
      mb: { name: 'confirmPasswordReset', j: [Ll('code'), Ll('newPassword')] },
      dc: {
        name: 'createUserWithEmailAndPassword',
        j: [Ll('email'), Ll('password')]
      },
      gc: { name: 'fetchSignInMethodsForEmail', j: [Ll('email')] },
      qa: { name: 'getRedirectResult', j: [] },
      Ac: { name: 'isSignInWithEmailLink', j: [Ll('emailLink')] },
      Gc: {
        name: 'onAuthStateChanged',
        j: [
          zl(Fl(), Ul(), 'nextOrObserver'),
          Ul('opt_error', !0),
          Ul('opt_completed', !0)
        ]
      },
      Hc: {
        name: 'onIdTokenChanged',
        j: [
          zl(Fl(), Ul(), 'nextOrObserver'),
          Ul('opt_error', !0),
          Ul('opt_completed', !0)
        ]
      },
      ub: {
        name: 'sendPasswordResetEmail',
        j: [
          Ll('email'),
          zl(
            Fl('opt_actionCodeSettings', !0),
            jl(null, !0),
            'opt_actionCodeSettings',
            !0
          )
        ]
      },
      vb: {
        name: 'sendSignInLinkToEmail',
        j: [Ll('email'), Fl('actionCodeSettings')]
      },
      wb: { name: 'setPersistence', j: [Ll('persistence')] },
      Rc: { name: 'signInAndRetrieveDataWithCredential', j: [Vl()] },
      yb: { name: 'signInAnonymously', j: [] },
      Za: { name: 'signInWithCredential', j: [Vl()] },
      Sc: { name: 'signInWithCustomToken', j: [Ll('token')] },
      Tc: {
        name: 'signInWithEmailAndPassword',
        j: [Ll('email'), Ll('password')]
      },
      Uc: {
        name: 'signInWithEmailLink',
        j: [Ll('email'), Ll('emailLink', !0)]
      },
      Vc: { name: 'signInWithPhoneNumber', j: [Ll('phoneNumber'), Hl()] },
      Wc: { name: 'signInWithPopup', j: [Bl()] },
      Xc: { name: 'signInWithRedirect', j: [Bl()] },
      cd: {
        name: 'updateCurrentUser',
        j: [
          zl(
            {
              name: 'user',
              J: 'an instance of Firebase User',
              optional: !1,
              K: function (t) {
                return !!(t && t instanceof lh);
              }
            },
            jl(),
            'user'
          )
        ]
      },
      zb: { name: 'signOut', j: [] },
      toJSON: { name: 'toJSON', j: [Ll(null, !0)] },
      ed: { name: 'useDeviceLanguage', j: [] },
      fd: { name: 'useEmulator', j: [Ll('url')] },
      hd: { name: 'verifyPasswordResetCode', j: [Ll('code')] }
    }),
      Ql(Jh.prototype, {
        lc: { name: 'languageCode', jb: zl(Ll(), jl(), 'languageCode') },
        ti: { name: 'tenantId', jb: zl(Ll(), jl(), 'tenantId') }
      }),
      ((Jh.Persistence = Ku).LOCAL = 'local'),
      (Jh.Persistence.SESSION = 'session'),
      (Jh.Persistence.NONE = 'none'),
      Gl(lh.prototype, {
        delete: { name: 'delete', j: [] },
        nc: { name: 'getIdTokenResult', j: [Ml('opt_forceRefresh', !0)] },
        I: { name: 'getIdToken', j: [Ml('opt_forceRefresh', !0)] },
        Bc: { name: 'linkAndRetrieveDataWithCredential', j: [Vl()] },
        pb: { name: 'linkWithCredential', j: [Vl()] },
        Cc: { name: 'linkWithPhoneNumber', j: [Ll('phoneNumber'), Hl()] },
        Dc: { name: 'linkWithPopup', j: [Bl()] },
        Ec: { name: 'linkWithRedirect', j: [Bl()] },
        Kc: { name: 'reauthenticateAndRetrieveDataWithCredential', j: [Vl()] },
        sb: { name: 'reauthenticateWithCredential', j: [Vl()] },
        Lc: {
          name: 'reauthenticateWithPhoneNumber',
          j: [Ll('phoneNumber'), Hl()]
        },
        Mc: { name: 'reauthenticateWithPopup', j: [Bl()] },
        Nc: { name: 'reauthenticateWithRedirect', j: [Bl()] },
        reload: { name: 'reload', j: [] },
        tb: {
          name: 'sendEmailVerification',
          j: [
            zl(
              Fl('opt_actionCodeSettings', !0),
              jl(null, !0),
              'opt_actionCodeSettings',
              !0
            )
          ]
        },
        toJSON: { name: 'toJSON', j: [Ll(null, !0)] },
        bd: { name: 'unlink', j: [Ll('provider')] },
        Ab: { name: 'updateEmail', j: [Ll('email')] },
        Bb: { name: 'updatePassword', j: [Ll('password')] },
        dd: { name: 'updatePhoneNumber', j: [Vl('phone')] },
        Cb: { name: 'updateProfile', j: [Fl('profile')] },
        Db: {
          name: 'verifyBeforeUpdateEmail',
          j: [
            Ll('email'),
            zl(
              Fl('opt_actionCodeSettings', !0),
              jl(null, !0),
              'opt_actionCodeSettings',
              !0
            )
          ]
        }
      }),
      Gl(ll.prototype, {
        execute: { name: 'execute' },
        render: { name: 'render' },
        reset: { name: 'reset' },
        getResponse: { name: 'getResponse' }
      }),
      Gl(hl.prototype, {
        execute: { name: 'execute' },
        render: { name: 'render' },
        reset: { name: 'reset' },
        getResponse: { name: 'getResponse' }
      }),
      Gl(pe.prototype, {
        na: { name: 'finally' },
        o: { name: 'catch' },
        then: { name: 'then' }
      }),
      Ql(Bc.prototype, {
        appVerificationDisabled: {
          name: 'appVerificationDisabledForTesting',
          jb: Ml('appVerificationDisabledForTesting')
        }
      }),
      Gl(Wc.prototype, {
        confirm: { name: 'confirm', j: [Ll('verificationCode')] }
      }),
      Yl(
        Zi,
        'fromJSON',
        function (t) {
          t = 'string' == typeof t ? JSON.parse(t) : t;
          for (var e, n = [so, _o, So, ro], r = 0; r < n.length; r++)
            if ((e = n[r](t))) return e;
          return null;
        },
        [zl(Ll(), Fl(), 'json')]
      ),
      Yl(
        wo,
        'credential',
        function (t, e) {
          return new bo(t, e);
        },
        [Ll('email'), Ll('password')]
      ),
      Gl(bo.prototype, { w: { name: 'toJSON', j: [Ll(null, !0)] } }),
      Gl(ho.prototype, {
        Ca: { name: 'addScope', j: [Ll('scope')] },
        Ka: { name: 'setCustomParameters', j: [Fl('customOAuthParameters')] }
      }),
      Yl(ho, 'credential', lo, [zl(Ll(), Fl(), 'token')]),
      Yl(wo, 'credentialWithLink', Eo, [Ll('email'), Ll('emailLink')]),
      Gl(fo.prototype, {
        Ca: { name: 'addScope', j: [Ll('scope')] },
        Ka: { name: 'setCustomParameters', j: [Fl('customOAuthParameters')] }
      }),
      Yl(fo, 'credential', po, [zl(Ll(), Fl(), 'token')]),
      Gl(vo.prototype, {
        Ca: { name: 'addScope', j: [Ll('scope')] },
        Ka: { name: 'setCustomParameters', j: [Fl('customOAuthParameters')] }
      }),
      Yl(vo, 'credential', yo, [
        zl(Ll(), zl(Fl(), jl()), 'idToken'),
        zl(Ll(), jl(), 'accessToken', !0)
      ]),
      Gl(go.prototype, {
        Ka: { name: 'setCustomParameters', j: [Fl('customOAuthParameters')] }
      }),
      Yl(go, 'credential', mo, [zl(Ll(), Fl(), 'token'), Ll('secret', !0)]),
      Gl(co.prototype, {
        Ca: { name: 'addScope', j: [Ll('scope')] },
        credential: {
          name: 'credential',
          j: [
            zl(Ll(), zl(Fl(), jl()), 'optionsOrIdToken'),
            zl(Ll(), jl(), 'accessToken', !0)
          ]
        },
        Ka: { name: 'setCustomParameters', j: [Fl('customOAuthParameters')] }
      }),
      Gl(io.prototype, { w: { name: 'toJSON', j: [Ll(null, !0)] } }),
      Gl(eo.prototype, { w: { name: 'toJSON', j: [Ll(null, !0)] } }),
      Yl(No, 'credential', Ao, [Ll('verificationId'), Ll('verificationCode')]),
      Gl(No.prototype, {
        eb: {
          name: 'verifyPhoneNumber',
          j: [
            zl(
              Ll(),
              {
                name: 'phoneInfoOptions',
                J: 'valid phone info options',
                optional: !1,
                K: function (t) {
                  return (
                    !!t &&
                    (t.session && t.phoneNumber
                      ? Wl(t.session, Ji) && 'string' == typeof t.phoneNumber
                      : t.session && t.multiFactorHint
                      ? Wl(t.session, $i) && Kl(t.multiFactorHint)
                      : t.session && t.multiFactorUid
                      ? Wl(t.session, $i) && 'string' == typeof t.multiFactorUid
                      : !!t.phoneNumber && 'string' == typeof t.phoneNumber)
                  );
                }
              },
              'phoneInfoOptions'
            ),
            Hl()
          ]
        }
      }),
      Gl(To.prototype, { w: { name: 'toJSON', j: [Ll(null, !0)] } }),
      Gl(I.prototype, { toJSON: { name: 'toJSON', j: [Ll(null, !0)] } }),
      Gl(Fo.prototype, { toJSON: { name: 'toJSON', j: [Ll(null, !0)] } }),
      Gl(Mo.prototype, { toJSON: { name: 'toJSON', j: [Ll(null, !0)] } }),
      Gl(Yc.prototype, { toJSON: { name: 'toJSON', j: [Ll(null, !0)] } }),
      Gl(zc.prototype, { Qc: { name: 'resolveSignIn', j: [ql()] } }),
      Gl(eh.prototype, {
        Qb: { name: 'getSession', j: [] },
        ec: { name: 'enroll', j: [ql(), Ll('displayName', !0)] },
        ad: {
          name: 'unenroll',
          j: [
            zl(
              {
                name: 'multiFactorInfo',
                J: 'a valid multiFactorInfo',
                optional: !1,
                K: Kl
              },
              Ll(),
              'multiFactorInfoIdentifier'
            )
          ]
        }
      }),
      Gl(Pl.prototype, {
        clear: { name: 'clear', j: [] },
        render: { name: 'render', j: [] },
        verify: { name: 'verify', j: [] }
      }),
      Yl(li, 'parseLink', bi, [Ll('link')]),
      Yl(
        gl,
        'assertion',
        function (t) {
          return new Zc(t);
        },
        [Vl('phone')]
      ),
      (function () {
        if (void 0 === Jl || !Jl.INTERNAL || !Jl.INTERNAL.registerComponent)
          throw Error(
            'Cannot find the firebase namespace; be sure to include firebase-app.js before this library.'
          );
        var t = {
          ActionCodeInfo: {
            Operation: {
              EMAIL_SIGNIN: Zr,
              PASSWORD_RESET: 'PASSWORD_RESET',
              RECOVER_EMAIL: 'RECOVER_EMAIL',
              REVERT_SECOND_FACTOR_ADDITION: $r,
              VERIFY_AND_CHANGE_EMAIL: ti,
              VERIFY_EMAIL: 'VERIFY_EMAIL'
            }
          },
          Auth: Jh,
          AuthCredential: Zi,
          Error: I
        };
        Yl(t, 'EmailAuthProvider', wo, []),
          Yl(t, 'FacebookAuthProvider', ho, []),
          Yl(t, 'GithubAuthProvider', fo, []),
          Yl(t, 'GoogleAuthProvider', vo, []),
          Yl(t, 'TwitterAuthProvider', go, []),
          Yl(t, 'OAuthProvider', co, [Ll('providerId')]),
          Yl(t, 'SAMLAuthProvider', uo, [Ll('providerId')]),
          Yl(t, 'PhoneAuthProvider', No, [
            {
              name: 'auth',
              J: 'an instance of Firebase Auth',
              optional: !0,
              K: function (t) {
                return !!(t && t instanceof Jh);
              }
            }
          ]),
          Yl(t, 'RecaptchaVerifier', Pl, [
            zl(
              Ll(),
              {
                name: '',
                J: 'an HTML element',
                optional: !1,
                K: function (t) {
                  return !!(t && t instanceof Element);
                }
              },
              'recaptchaContainer'
            ),
            Fl('recaptchaParameters', !0),
            {
              name: 'app',
              J: 'an instance of Firebase App',
              optional: !0,
              K: function (t) {
                return !!(t && t instanceof Jl.app.App);
              }
            }
          ]),
          Yl(t, 'ActionCodeURL', li, []),
          Yl(t, 'PhoneMultiFactorGenerator', gl, []),
          Jl.INTERNAL.registerComponent({
            name: 'auth',
            instanceFactory: function (t) {
              return new Jh((t = t.getProvider('app').getImmediate()));
            },
            multipleInstances: !1,
            serviceProps: t,
            instantiationMode: 'LAZY',
            type: 'PUBLIC'
          }),
          Jl.INTERNAL.registerComponent({
            name: 'auth-internal',
            instanceFactory: function (t) {
              return {
                getUid: m((t = t.getProvider('auth').getImmediate()).getUid, t),
                getToken: m(t.mc, t),
                addAuthTokenListener: m(t.cc, t),
                removeAuthTokenListener: m(t.Oc, t)
              };
            },
            multipleInstances: !1,
            instantiationMode: 'LAZY',
            type: 'PRIVATE'
          }),
          Jl.registerVersion('@firebase/auth', '0.15.2'),
          Jl.INTERNAL.extendNamespace({ User: lh });
      })();
  }.apply(
    'undefined' != typeof global
      ? global
      : 'undefined' != typeof self
      ? self
      : 'undefined' != typeof window
      ? window
      : {}
  ));
  var Js =
    (($s.prototype.set = function (t, e) {
      null == e
        ? this.domStorage_.removeItem(this.prefixedName_(t))
        : this.domStorage_.setItem(this.prefixedName_(t), $o(e));
    }),
    ($s.prototype.get = function (t) {
      t = this.domStorage_.getItem(this.prefixedName_(t));
      return null == t ? null : Jo(t);
    }),
    ($s.prototype.remove = function (t) {
      this.domStorage_.removeItem(this.prefixedName_(t));
    }),
    ($s.prototype.prefixedName_ = function (t) {
      return this.prefix_ + t;
    }),
    ($s.prototype.toString = function () {
      return this.domStorage_.toString();
    }),
    $s);
  function $s(t) {
    (this.domStorage_ = t), (this.prefix_ = 'firebase:');
  }
  var Zs =
    ((ta.prototype.set = function (t, e) {
      null == e ? delete this.cache_[t] : (this.cache_[t] = e);
    }),
    (ta.prototype.get = function (t) {
      return ts(this.cache_, t) ? this.cache_[t] : null;
    }),
    (ta.prototype.remove = function (t) {
      delete this.cache_[t];
    }),
    ta);
  function ta() {
    (this.cache_ = {}), (this.isInMemoryStorage = !0);
  }
  function ea(t) {
    var e = (function (t) {
      for (var e = [], n = 0, r = 0; r < t.length; r++) {
        var i,
          o = t.charCodeAt(r);
        55296 <= o &&
          o <= 56319 &&
          ((i = o - 55296),
          ko(++r < t.length, 'Surrogate pair missing trail surrogate.'),
          (o = 65536 + (i << 10) + (t.charCodeAt(r) - 56320))),
          o < 128
            ? (e[n++] = o)
            : (o < 2048
                ? (e[n++] = (o >> 6) | 192)
                : (o < 65536
                    ? (e[n++] = (o >> 12) | 224)
                    : ((e[n++] = (o >> 18) | 240),
                      (e[n++] = ((o >> 12) & 63) | 128)),
                  (e[n++] = ((o >> 6) & 63) | 128)),
              (e[n++] = (63 & o) | 128));
      }
      return e;
    })(t);
    return (t = new is()).update(e), (t = t.digest()), Oo.encodeByteArray(t);
  }
  function na(t, e) {
    ko(
      !e || !0 === t || !1 === t,
      "Can't turn on custom loggers persistently."
    ),
      !0 === t
        ? ((pa.logLevel = As.VERBOSE),
          (ya = pa.log.bind(pa)),
          e && fa.set('logging_enabled', !0))
        : 'function' == typeof t
        ? (ya = t)
        : ((ya = null), fa.remove('logging_enabled'));
  }
  function ra() {
    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
    var n = 'FIREBASE INTERNAL ERROR: ' + va.apply(void 0, To(t));
    pa.error(n);
  }
  function ia() {
    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
    var n = 'FIREBASE FATAL ERROR: ' + va.apply(void 0, To(t));
    throw (pa.error(n), new Error(n));
  }
  function oa() {
    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
    var n = 'FIREBASE WARNING: ' + va.apply(void 0, To(t));
    pa.warn(n);
  }
  function sa(t) {
    return (
      'number' == typeof t &&
      (t != t ||
        t === Number.POSITIVE_INFINITY ||
        t === Number.NEGATIVE_INFINITY)
    );
  }
  function aa(t, e) {
    return t === e ? 0 : t < e ? -1 : 1;
  }
  function ua(t, e) {
    if (e && t in e) return e[t];
    throw new Error('Missing required key (' + t + ') in object: ' + $o(e));
  }
  function ca(t, e) {
    var n = t.length;
    if (n <= e) return [t];
    for (var r = [], i = 0; i < n; i += e)
      n < i + e ? r.push(t.substring(i, n)) : r.push(t.substring(i, i + e));
    return r;
  }
  var ha,
    Gn = function (t) {
      try {
        if ('undefined' != typeof window && void 0 !== window[t]) {
          var e = window[t];
          return (
            e.setItem('firebase:sentinel', 'cache'),
            e.removeItem('firebase:sentinel'),
            new Js(e)
          );
        }
      } catch (t) {}
      return new Zs();
    },
    la = Gn('localStorage'),
    fa = Gn('sessionStorage'),
    pa = new xs('@firebase/database'),
    da =
      ((ha = 1),
      function () {
        return ha++;
      }),
    va = function () {
      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
      for (var n = '', r = 0; r < t.length; r++) {
        var i = t[r];
        Array.isArray(i) ||
        (i && 'object' == typeof i && 'number' == typeof i.length)
          ? (n += va.apply(null, i))
          : (n += 'object' == typeof i ? $o(i) : i),
          (n += ' ');
      }
      return n;
    },
    ya = null,
    ga = !0,
    ma = function () {
      for (var t, e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
      !0 === ga &&
        ((ga = !1), null === ya && !0 === fa.get('logging_enabled') && na(!0)),
        ya && ((t = va.apply(null, e)), ya(t));
    },
    ba = function (n) {
      return function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        ma.apply(void 0, To([n], t));
      };
    },
    _a = '[MIN_NAME]',
    wa = '[MAX_NAME]',
    Ea = function (t, e) {
      if (t === e) return 0;
      if (t === _a || e === wa) return -1;
      if (e === _a || t === wa) return 1;
      var n = ka(t),
        r = ka(e);
      return null !== n
        ? null !== r
          ? n - r == 0
            ? t.length - e.length
            : n - r
          : -1
        : null === r && t < e
        ? -1
        : 1;
    },
    Ia = function (t) {
      if ('object' != typeof t || null === t) return $o(t);
      var e,
        n = [];
      for (e in t) n.push(e);
      n.sort();
      for (var r = '{', i = 0; i < n.length; i++)
        0 !== i && (r += ','), (r += $o(n[i])), (r += ':'), (r += Ia(t[n[i]]));
      return (r += '}');
    };
  function Ta(t, e) {
    for (var n in t) t.hasOwnProperty(n) && e(n, t[n]);
  }
  function Sa(t) {
    var e, n, r, i;
    ko(!sa(t), 'Invalid JSON number'),
      0 === t
        ? (e = 1 / t == -1 / (r = n = 0) ? 1 : 0)
        : ((e = t < 0),
          (r =
            (t = Math.abs(t)) >= Math.pow(2, -1022)
              ? ((n =
                  (i = Math.min(Math.floor(Math.log(t) / Math.LN2), 1023)) +
                  1023),
                Math.round(t * Math.pow(2, 52 - i) - Math.pow(2, 52)))
              : ((n = 0), Math.round(t / Math.pow(2, -1074)))));
    for (var o = [], s = 52; s; --s)
      o.push(r % 2 ? 1 : 0), (r = Math.floor(r / 2));
    for (s = 11; s; --s) o.push(n % 2 ? 1 : 0), (n = Math.floor(n / 2));
    o.push(e ? 1 : 0), o.reverse();
    var a = o.join(''),
      u = '';
    for (s = 0; s < 64; s += 8) {
      var c = parseInt(a.substr(s, 8), 2).toString(16);
      1 === c.length && (c = '0' + c), (u += c);
    }
    return u.toLowerCase();
  }
  function Ca(t) {
    try {
      t();
    } catch (e) {
      setTimeout(function () {
        var t = e.stack || '';
        throw (oa('Exception was thrown by user callback.', t), e);
      }, Math.floor(0));
    }
  }
  function Na(t, e) {
    return 'object' == typeof (e = setTimeout(t, e)) && e.unref && e.unref(), e;
  }
  var Aa = new RegExp('^-?(0*)\\d{1,10}$'),
    ka = function (t) {
      if (Aa.test(t)) {
        t = Number(t);
        if (-2147483648 <= t && t <= 2147483647) return t;
      }
      return null;
    },
    Ra =
      (Object.defineProperty(Oa, 'Empty', {
        get: function () {
          return new Oa('');
        },
        enumerable: !1,
        configurable: !0
      }),
      (Oa.prototype.getFront = function () {
        return this.pieceNum_ >= this.pieces_.length
          ? null
          : this.pieces_[this.pieceNum_];
      }),
      (Oa.prototype.getLength = function () {
        return this.pieces_.length - this.pieceNum_;
      }),
      (Oa.prototype.popFront = function () {
        var t = this.pieceNum_;
        return t < this.pieces_.length && t++, new Oa(this.pieces_, t);
      }),
      (Oa.prototype.getBack = function () {
        return this.pieceNum_ < this.pieces_.length
          ? this.pieces_[this.pieces_.length - 1]
          : null;
      }),
      (Oa.prototype.toString = function () {
        for (var t = '', e = this.pieceNum_; e < this.pieces_.length; e++)
          '' !== this.pieces_[e] && (t += '/' + this.pieces_[e]);
        return t || '/';
      }),
      (Oa.prototype.toUrlEncodedString = function () {
        for (var t = '', e = this.pieceNum_; e < this.pieces_.length; e++)
          '' !== this.pieces_[e] &&
            (t += '/' + encodeURIComponent(String(this.pieces_[e])));
        return t || '/';
      }),
      (Oa.prototype.slice = function (t) {
        return void 0 === t && (t = 0), this.pieces_.slice(this.pieceNum_ + t);
      }),
      (Oa.prototype.parent = function () {
        if (this.pieceNum_ >= this.pieces_.length) return null;
        for (var t = [], e = this.pieceNum_; e < this.pieces_.length - 1; e++)
          t.push(this.pieces_[e]);
        return new Oa(t, 0);
      }),
      (Oa.prototype.child = function (t) {
        for (var e = [], n = this.pieceNum_; n < this.pieces_.length; n++)
          e.push(this.pieces_[n]);
        if (t instanceof Oa)
          for (n = t.pieceNum_; n < t.pieces_.length; n++) e.push(t.pieces_[n]);
        else
          for (var r = t.split('/'), n = 0; n < r.length; n++)
            0 < r[n].length && e.push(r[n]);
        return new Oa(e, 0);
      }),
      (Oa.prototype.isEmpty = function () {
        return this.pieceNum_ >= this.pieces_.length;
      }),
      (Oa.relativePath = function (t, e) {
        var n = t.getFront(),
          r = e.getFront();
        if (null === n) return e;
        if (n === r) return Oa.relativePath(t.popFront(), e.popFront());
        throw new Error(
          'INTERNAL ERROR: innerPath (' +
            e +
            ') is not within outerPath (' +
            t +
            ')'
        );
      }),
      (Oa.comparePaths = function (t, e) {
        for (
          var n = t.slice(), r = e.slice(), i = 0;
          i < n.length && i < r.length;
          i++
        ) {
          var o = Ea(n[i], r[i]);
          if (0 !== o) return o;
        }
        return n.length === r.length ? 0 : n.length < r.length ? -1 : 1;
      }),
      (Oa.prototype.equals = function (t) {
        if (this.getLength() !== t.getLength()) return !1;
        for (
          var e = this.pieceNum_, n = t.pieceNum_;
          e <= this.pieces_.length;
          e++, n++
        )
          if (this.pieces_[e] !== t.pieces_[n]) return !1;
        return !0;
      }),
      (Oa.prototype.contains = function (t) {
        var e = this.pieceNum_,
          n = t.pieceNum_;
        if (this.getLength() > t.getLength()) return !1;
        for (; e < this.pieces_.length; ) {
          if (this.pieces_[e] !== t.pieces_[n]) return !1;
          ++e, ++n;
        }
        return !0;
      }),
      Oa);
  function Oa(t, e) {
    if (void 0 === e) {
      this.pieces_ = t.split('/');
      for (var n = 0, r = 0; r < this.pieces_.length; r++)
        0 < this.pieces_[r].length &&
          ((this.pieces_[n] = this.pieces_[r]), n++);
      (this.pieces_.length = n), (this.pieceNum_ = 0);
    } else (this.pieces_ = t), (this.pieceNum_ = e);
  }
  var Pa =
    (Object.defineProperty(Da, 'MAX_PATH_DEPTH', {
      get: function () {
        return 32;
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(Da, 'MAX_PATH_LENGTH_BYTES', {
      get: function () {
        return 768;
      },
      enumerable: !1,
      configurable: !0
    }),
    (Da.prototype.push = function (t) {
      0 < this.parts_.length && (this.byteLength_ += 1),
        this.parts_.push(t),
        (this.byteLength_ += ds(t)),
        this.checkValid_();
    }),
    (Da.prototype.pop = function () {
      var t = this.parts_.pop();
      (this.byteLength_ -= ds(t)), 0 < this.parts_.length && --this.byteLength_;
    }),
    (Da.prototype.checkValid_ = function () {
      if (this.byteLength_ > Da.MAX_PATH_LENGTH_BYTES)
        throw new Error(
          this.errorPrefix_ +
            'has a key path longer than ' +
            Da.MAX_PATH_LENGTH_BYTES +
            ' bytes (' +
            this.byteLength_ +
            ').'
        );
      if (this.parts_.length > Da.MAX_PATH_DEPTH)
        throw new Error(
          this.errorPrefix_ +
            'path specified exceeds the maximum depth that can be written (' +
            Da.MAX_PATH_DEPTH +
            ') or object contains a cycle ' +
            this.toErrorString()
        );
    }),
    (Da.prototype.toErrorString = function () {
      return 0 === this.parts_.length
        ? ''
        : "in property '" + this.parts_.join('.') + "'";
    }),
    Da);
  function Da(t, e) {
    (this.errorPrefix_ = e),
      (this.parts_ = t.slice()),
      (this.byteLength_ = Math.max(1, this.parts_.length));
    for (var n = 0; n < this.parts_.length; n++)
      this.byteLength_ += ds(this.parts_[n]);
    this.checkValid_();
  }
  var xa = 'firebaseio.com',
    La = 'websocket',
    Ma = 'long_polling',
    Fa =
      ((Ua.prototype.needsQueryParam = function () {
        return (
          this.host !== this.internalHost ||
          this.isCustomHost() ||
          this.includeNamespaceInQueryParams
        );
      }),
      (Ua.prototype.isCacheableHost = function () {
        return 's-' === this.internalHost.substr(0, 2);
      }),
      (Ua.prototype.isDemoHost = function () {
        return 'firebaseio-demo.com' === this.domain;
      }),
      (Ua.prototype.isCustomHost = function () {
        return (
          'firebaseio.com' !== this.domain &&
          'firebaseio-demo.com' !== this.domain
        );
      }),
      (Ua.prototype.updateHost = function (t) {
        t !== this.internalHost &&
          ((this.internalHost = t),
          this.isCacheableHost() &&
            la.set('host:' + this.host, this.internalHost));
      }),
      (Ua.prototype.connectionURL = function (t, e) {
        var n;
        if (
          (ko('string' == typeof t, 'typeof type must == string'),
          ko('object' == typeof e, 'typeof params must == object'),
          t === La)
        )
          n = (this.secure ? 'wss://' : 'ws://') + this.internalHost + '/.ws?';
        else {
          if (t !== Ma) throw new Error('Unknown connection type: ' + t);
          n =
            (this.secure ? 'https://' : 'http://') +
            this.internalHost +
            '/.lp?';
        }
        this.needsQueryParam() && (e.ns = this.namespace);
        var r = [];
        return (
          Ta(e, function (t, e) {
            r.push(t + '=' + e);
          }),
          n + r.join('&')
        );
      }),
      (Ua.prototype.toString = function () {
        var t = this.toURLString();
        return this.persistenceKey && (t += '<' + this.persistenceKey + '>'), t;
      }),
      (Ua.prototype.toURLString = function () {
        return (this.secure ? 'https://' : 'http://') + this.host;
      }),
      Ua);
  function Ua(t, e, n, r, i, o, s) {
    void 0 === i && (i = !1),
      void 0 === o && (o = ''),
      void 0 === s && (s = !1),
      (this.secure = e),
      (this.namespace = n),
      (this.webSocketOnly = r),
      (this.nodeAdmin = i),
      (this.persistenceKey = o),
      (this.includeNamespaceInQueryParams = s),
      (this.host = t.toLowerCase()),
      (this.domain = this.host.substr(this.host.indexOf('.') + 1)),
      (this.internalHost = la.get('host:' + t) || this.host);
  }
  function ja(t, e) {
    var n = Ja(t),
      r = n.namespace;
    return (
      'firebase.com' === n.domain &&
        ia(
          n.host +
            ' is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead'
        ),
      (r && 'undefined' !== r) ||
        'localhost' === n.domain ||
        ia(
          'Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com'
        ),
      n.secure ||
        ('undefined' != typeof window &&
          window.location &&
          window.location.protocol &&
          -1 !== window.location.protocol.indexOf('https:') &&
          oa(
            'Insecure Firebase access from a secure page. Please use https in calls to new Firebase().'
          )),
      (t = 'ws' === n.scheme || 'wss' === n.scheme),
      {
        repoInfo: new Fa(n.host, n.secure, r, e, t, '', r !== n.subdomain),
        path: new Ra(n.pathString)
      }
    );
  }
  function Va(t) {
    return 'string' == typeof t && 0 !== t.length && !$a.test(t);
  }
  function qa(t) {
    return 'string' == typeof t && 0 !== t.length && !Za.test(t);
  }
  function Ba(t) {
    return (
      null === t ||
      'string' == typeof t ||
      ('number' == typeof t && !sa(t)) ||
      (t && 'object' == typeof t && ts(t, '.sv'))
    );
  }
  function Wa(t, e, n, r, i) {
    (i && void 0 === n) || eu(ls(t, e, i), n, r);
  }
  function Ka(t, e, n, r, i) {
    if (!i || void 0 !== n) {
      var o = ls(t, e, i);
      if (!n || 'object' != typeof n || Array.isArray(n))
        throw new Error(
          o + ' must be an object containing the children to replace.'
        );
      var s = [];
      Ta(n, function (t, e) {
        t = new Ra(t);
        if ((eu(o, e, r.child(t)), '.priority' === t.getBack() && !Ba(e)))
          throw new Error(
            o +
              "contains an invalid value for '" +
              t.toString() +
              "', which must be a valid Firebase priority (a string, finite number, server value, or null)."
          );
        s.push(t);
      }),
        (function (t, e) {
          for (var n, r = 0; r < e.length; r++)
            for (var i = (n = e[r]).slice(), o = 0; o < i.length; o++)
              if (('.priority' !== i[o] || o !== i.length - 1) && !Va(i[o]))
                throw new Error(
                  t +
                    'contains an invalid key (' +
                    i[o] +
                    ') in path ' +
                    n.toString() +
                    '. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"'
                );
          e.sort(Ra.comparePaths);
          var s = null;
          for (r = 0; r < e.length; r++) {
            if (((n = e[r]), null !== s && s.contains(n)))
              throw new Error(
                t +
                  'contains a path ' +
                  s.toString() +
                  ' that is ancestor of another path ' +
                  n.toString()
              );
            s = n;
          }
        })(o, s);
    }
  }
  function Ha(t, e, n, r) {
    if (!r || void 0 !== n) {
      if (sa(n))
        throw new Error(
          ls(t, e, r) +
            'is ' +
            n.toString() +
            ', but must be a valid Firebase priority (a string, finite number, server value, or null).'
        );
      if (!Ba(n))
        throw new Error(
          ls(t, e, r) +
            'must be a valid Firebase priority (a string, finite number, server value, or null).'
        );
    }
  }
  function za(t, e, n, r) {
    if (!r || void 0 !== n)
      switch (n) {
        case 'value':
        case 'child_added':
        case 'child_removed':
        case 'child_changed':
        case 'child_moved':
          break;
        default:
          throw new Error(
            ls(t, e, r) +
              'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".'
          );
      }
  }
  function Ga(t, e, n, r) {
    if (!((r && void 0 === n) || Va(n)))
      throw new Error(
        ls(t, e, r) +
          'was an invalid key = "' +
          n +
          '".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").'
      );
  }
  function Qa(t, e, n, r) {
    if (!((r && void 0 === n) || qa(n)))
      throw new Error(
        ls(t, e, r) +
          'was an invalid path = "' +
          n +
          '". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"'
      );
  }
  function Ya(t, e) {
    if ('.info' === e.getFront())
      throw new Error(t + " failed = Can't modify data under /.info/");
  }
  function Xa(t, e, n) {
    var r = n.path.toString();
    if (
      'string' != typeof n.repoInfo.host ||
      0 === n.repoInfo.host.length ||
      (!Va(n.repoInfo.namespace) &&
        'localhost' !== n.repoInfo.host.split(':')[0]) ||
      (0 !== r.length &&
        ((r = (r = r) && r.replace(/^\/*\.info(\/|$)/, '/')), !qa(r)))
    )
      throw new Error(
        ls(t, e, !1) +
          'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".'
      );
  }
  var Ja = function (t) {
      var e,
        n,
        r,
        i = '',
        o = '',
        s = '',
        a = '',
        u = '',
        c = !0,
        h = 'https',
        l = 443;
      return (
        'string' == typeof t &&
          (0 <= (r = t.indexOf('//')) &&
            ((h = t.substring(0, r - 1)), (t = t.substring(r + 2))),
          -1 === (e = t.indexOf('/')) && (e = t.length),
          -1 === (n = t.indexOf('?')) && (n = t.length),
          (i = t.substring(0, Math.min(e, n))),
          e < n &&
            (a = (function (t) {
              for (var e = '', n = t.split('/'), r = 0; r < n.length; r++)
                if (0 < n[r].length) {
                  var i = n[r];
                  try {
                    i = decodeURIComponent(i.replace(/\+/g, ' '));
                  } catch (t) {}
                  e += '/' + i;
                }
              return e;
            })(t.substring(e, n))),
          (n = (function (t) {
            var e,
              n,
              r = {};
            '?' === t.charAt(0) && (t = t.substring(1));
            try {
              for (
                var i = Eo(t.split('&')), o = i.next();
                !o.done;
                o = i.next()
              ) {
                var s,
                  a = o.value;
                0 !== a.length &&
                  (2 === (s = a.split('=')).length
                    ? (r[decodeURIComponent(s[0])] = decodeURIComponent(s[1]))
                    : oa(
                        "Invalid query segment '" + a + "' in query '" + t + "'"
                      ));
              }
            } catch (t) {
              e = { error: t };
            } finally {
              try {
                o && !o.done && (n = i.return) && n.call(i);
              } finally {
                if (e) throw e.error;
              }
            }
            return r;
          })(t.substring(Math.min(t.length, n)))),
          0 <= (r = i.indexOf(':'))
            ? ((c = 'https' === h || 'wss' === h),
              (l = parseInt(i.substring(r + 1), 10)))
            : (r = i.length),
          'localhost' === (r = i.slice(0, r)).toLowerCase()
            ? (o = 'localhost')
            : r.split('.').length <= 2
            ? (o = r)
            : ((r = i.indexOf('.')),
              (s = i.substring(0, r).toLowerCase()),
              (o = i.substring(r + 1)),
              (u = s)),
          'ns' in n && (u = n.ns)),
        {
          host: i,
          port: l,
          domain: o,
          subdomain: s,
          secure: c,
          scheme: h,
          pathString: a,
          namespace: u
        }
      );
    },
    $a = /[\[\].#$\/\u0000-\u001F\u007F]/,
    Za = /[\[\].#$\u0000-\u001F\u007F]/,
    tu = 10485760,
    eu = function (n, t, e) {
      var r = e instanceof Ra ? new Pa(e, n) : e;
      if (void 0 === t)
        throw new Error(n + 'contains undefined ' + r.toErrorString());
      if ('function' == typeof t)
        throw new Error(
          n +
            'contains a function ' +
            r.toErrorString() +
            ' with contents = ' +
            t.toString()
        );
      if (sa(t))
        throw new Error(
          n + 'contains ' + t.toString() + ' ' + r.toErrorString()
        );
      if ('string' == typeof t && t.length > tu / 3 && ds(t) > tu)
        throw new Error(
          n +
            'contains a string greater than ' +
            tu +
            ' utf8 bytes ' +
            r.toErrorString() +
            " ('" +
            t.substring(0, 50) +
            "...')"
        );
      if (t && 'object' == typeof t) {
        var i = !1,
          o = !1;
        if (
          (Ta(t, function (t, e) {
            if ('.value' === t) i = !0;
            else if ('.priority' !== t && '.sv' !== t && ((o = !0), !Va(t)))
              throw new Error(
                n +
                  ' contains an invalid key (' +
                  t +
                  ') ' +
                  r.toErrorString() +
                  '.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"'
              );
            r.push(t), eu(n, e, r), r.pop();
          }),
          i && o)
        )
          throw new Error(
            n +
              ' contains ".value" child ' +
              r.toErrorString() +
              ' in addition to actual children.'
          );
      }
    },
    nu =
      ((ru.prototype.cancel = function (t) {
        hs('OnDisconnect.cancel', 0, 1, arguments.length),
          fs('OnDisconnect.cancel', 1, t, !0);
        var e = new xo();
        return (
          this.repo_.onDisconnectCancel(this.path_, e.wrapCallback(t)),
          e.promise
        );
      }),
      (ru.prototype.remove = function (t) {
        hs('OnDisconnect.remove', 0, 1, arguments.length),
          Ya('OnDisconnect.remove', this.path_),
          fs('OnDisconnect.remove', 1, t, !0);
        var e = new xo();
        return (
          this.repo_.onDisconnectSet(this.path_, null, e.wrapCallback(t)),
          e.promise
        );
      }),
      (ru.prototype.set = function (t, e) {
        hs('OnDisconnect.set', 1, 2, arguments.length),
          Ya('OnDisconnect.set', this.path_),
          Wa('OnDisconnect.set', 1, t, this.path_, !1),
          fs('OnDisconnect.set', 2, e, !0);
        var n = new xo();
        return (
          this.repo_.onDisconnectSet(this.path_, t, n.wrapCallback(e)),
          n.promise
        );
      }),
      (ru.prototype.setWithPriority = function (t, e, n) {
        hs('OnDisconnect.setWithPriority', 2, 3, arguments.length),
          Ya('OnDisconnect.setWithPriority', this.path_),
          Wa('OnDisconnect.setWithPriority', 1, t, this.path_, !1),
          Ha('OnDisconnect.setWithPriority', 2, e, !1),
          fs('OnDisconnect.setWithPriority', 3, n, !0);
        var r = new xo();
        return (
          this.repo_.onDisconnectSetWithPriority(
            this.path_,
            t,
            e,
            r.wrapCallback(n)
          ),
          r.promise
        );
      }),
      (ru.prototype.update = function (t, e) {
        if (
          (hs('OnDisconnect.update', 1, 2, arguments.length),
          Ya('OnDisconnect.update', this.path_),
          Array.isArray(t))
        ) {
          for (var n = {}, r = 0; r < t.length; ++r) n['' + r] = t[r];
          (t = n),
            oa(
              'Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.'
            );
        }
        Ka('OnDisconnect.update', 1, t, this.path_, !1),
          fs('OnDisconnect.update', 2, e, !0);
        var i = new xo();
        return (
          this.repo_.onDisconnectUpdate(this.path_, t, i.wrapCallback(e)),
          i.promise
        );
      }),
      ru);
  function ru(t, e) {
    (this.repo_ = t), (this.path_ = e);
  }
  var iu =
    ((ou.prototype.toJSON = function () {
      return (
        hs('TransactionResult.toJSON', 0, 1, arguments.length),
        { committed: this.committed, snapshot: this.snapshot.toJSON() }
      );
    }),
    ou);
  function ou(t, e) {
    (this.committed = t), (this.snapshot = e);
  }
  var su,
    au,
    uu,
    cu =
      ((su =
        '-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz'),
      (au = 0),
      (uu = []),
      function (t) {
        var e = t === au;
        au = t;
        for (var n = new Array(8), r = 7; 0 <= r; r--)
          (n[r] = su.charAt(t % 64)), (t = Math.floor(t / 64));
        ko(0 === t, 'Cannot push at time == 0');
        var i = n.join('');
        if (e) {
          for (r = 11; 0 <= r && 63 === uu[r]; r--) uu[r] = 0;
          uu[r]++;
        } else for (r = 0; r < 12; r++) uu[r] = Math.floor(64 * Math.random());
        for (r = 0; r < 12; r++) i += su.charAt(uu[r]);
        return ko(20 === i.length, 'nextPushId: Length should be 20.'), i;
      }),
    hu =
      ((lu.Wrap = function (t, e) {
        return new lu(t, e);
      }),
      lu);
  function lu(t, e) {
    (this.name = t), (this.node = e);
  }
  var fu,
    vt =
      ((pu.prototype.getCompare = function () {
        return this.compare.bind(this);
      }),
      (pu.prototype.indexedValueChanged = function (t, e) {
        (t = new hu(_a, t)), (e = new hu(_a, e));
        return 0 !== this.compare(t, e);
      }),
      (pu.prototype.minPost = function () {
        return hu.MIN;
      }),
      pu);
  function pu() {}
  var du,
    vu =
      (mo(yu, (du = vt)),
      Object.defineProperty(yu, '__EMPTY_NODE', {
        get: function () {
          return fu;
        },
        set: function (t) {
          fu = t;
        },
        enumerable: !1,
        configurable: !0
      }),
      (yu.prototype.compare = function (t, e) {
        return Ea(t.name, e.name);
      }),
      (yu.prototype.isDefinedOn = function (t) {
        throw Ro('KeyIndex.isDefinedOn not expected to be called.');
      }),
      (yu.prototype.indexedValueChanged = function (t, e) {
        return !1;
      }),
      (yu.prototype.minPost = function () {
        return hu.MIN;
      }),
      (yu.prototype.maxPost = function () {
        return new hu(wa, fu);
      }),
      (yu.prototype.makePost = function (t, e) {
        return (
          ko(
            'string' == typeof t,
            'KeyIndex indexValue must always be a string.'
          ),
          new hu(t, fu)
        );
      }),
      (yu.prototype.toString = function () {
        return '.key';
      }),
      yu);
  function yu() {
    return (null !== du && du.apply(this, arguments)) || this;
  }
  var gu,
    mu = new vu();
  function bu(t) {
    return 'number' == typeof t ? 'number:' + Sa(t) : 'string:' + t;
  }
  var _u,
    wu,
    Eu,
    Iu,
    Tu = function (t) {
      var e;
      t.isLeafNode()
        ? ((e = t.val()),
          ko(
            'string' == typeof e ||
              'number' == typeof e ||
              ('object' == typeof e && ts(e, '.sv')),
            'Priority must be a string or number.'
          ))
        : ko(t === gu || t.isEmpty(), 'priority of unexpected type.'),
        ko(
          t === gu || t.getPriority().isEmpty(),
          "Priority nodes can't have a priority of their own."
        );
    },
    Su =
      (Object.defineProperty(Cu, '__childrenNodeConstructor', {
        get: function () {
          return _u;
        },
        set: function (t) {
          _u = t;
        },
        enumerable: !1,
        configurable: !0
      }),
      (Cu.prototype.isLeafNode = function () {
        return !0;
      }),
      (Cu.prototype.getPriority = function () {
        return this.priorityNode_;
      }),
      (Cu.prototype.updatePriority = function (t) {
        return new Cu(this.value_, t);
      }),
      (Cu.prototype.getImmediateChild = function (t) {
        return '.priority' === t
          ? this.priorityNode_
          : Cu.__childrenNodeConstructor.EMPTY_NODE;
      }),
      (Cu.prototype.getChild = function (t) {
        return t.isEmpty()
          ? this
          : '.priority' === t.getFront()
          ? this.priorityNode_
          : Cu.__childrenNodeConstructor.EMPTY_NODE;
      }),
      (Cu.prototype.hasChild = function () {
        return !1;
      }),
      (Cu.prototype.getPredecessorChildName = function (t, e) {
        return null;
      }),
      (Cu.prototype.updateImmediateChild = function (t, e) {
        return '.priority' === t
          ? this.updatePriority(e)
          : e.isEmpty() && '.priority' !== t
          ? this
          : Cu.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(
              t,
              e
            ).updatePriority(this.priorityNode_);
      }),
      (Cu.prototype.updateChild = function (t, e) {
        var n = t.getFront();
        return null === n
          ? e
          : e.isEmpty() && '.priority' !== n
          ? this
          : (ko(
              '.priority' !== n || 1 === t.getLength(),
              '.priority must be the last token in a path'
            ),
            this.updateImmediateChild(
              n,
              Cu.__childrenNodeConstructor.EMPTY_NODE.updateChild(
                t.popFront(),
                e
              )
            ));
      }),
      (Cu.prototype.isEmpty = function () {
        return !1;
      }),
      (Cu.prototype.numChildren = function () {
        return 0;
      }),
      (Cu.prototype.forEachChild = function (t, e) {
        return !1;
      }),
      (Cu.prototype.val = function (t) {
        return t && !this.getPriority().isEmpty()
          ? { '.value': this.getValue(), '.priority': this.getPriority().val() }
          : this.getValue();
      }),
      (Cu.prototype.hash = function () {
        var t, e;
        return (
          null === this.lazyHash_ &&
            ((t = ''),
            this.priorityNode_.isEmpty() ||
              (t += 'priority:' + bu(this.priorityNode_.val()) + ':'),
            (t += (e = typeof this.value_) + ':'),
            (t += 'number' == e ? Sa(this.value_) : this.value_),
            (this.lazyHash_ = ea(t))),
          this.lazyHash_
        );
      }),
      (Cu.prototype.getValue = function () {
        return this.value_;
      }),
      (Cu.prototype.compareTo = function (t) {
        return t === Cu.__childrenNodeConstructor.EMPTY_NODE
          ? 1
          : t instanceof Cu.__childrenNodeConstructor
          ? -1
          : (ko(t.isLeafNode(), 'Unknown node type'),
            this.compareToLeafNode_(t));
      }),
      (Cu.prototype.compareToLeafNode_ = function (t) {
        var e = typeof t.value_,
          n = typeof this.value_,
          r = Cu.VALUE_TYPE_ORDER.indexOf(e),
          i = Cu.VALUE_TYPE_ORDER.indexOf(n);
        return (
          ko(0 <= r, 'Unknown leaf type: ' + e),
          ko(0 <= i, 'Unknown leaf type: ' + n),
          r === i
            ? 'object' == n
              ? 0
              : this.value_ < t.value_
              ? -1
              : this.value_ === t.value_
              ? 0
              : 1
            : i - r
        );
      }),
      (Cu.prototype.withIndex = function () {
        return this;
      }),
      (Cu.prototype.isIndexed = function () {
        return !0;
      }),
      (Cu.prototype.equals = function (t) {
        return (
          t === this ||
          (!!t.isLeafNode() &&
            this.value_ === t.value_ &&
            this.priorityNode_.equals(t.priorityNode_))
        );
      }),
      (Cu.VALUE_TYPE_ORDER = ['object', 'boolean', 'number', 'string']),
      Cu);
  function Cu(t, e) {
    void 0 === e && (e = Cu.__childrenNodeConstructor.EMPTY_NODE),
      (this.value_ = t),
      (this.priorityNode_ = e),
      (this.lazyHash_ = null),
      ko(
        void 0 !== this.value_ && null !== this.value_,
        "LeafNode shouldn't be created with null/undefined value."
      ),
      Tu(this.priorityNode_);
  }
  function Nu() {
    return (null !== Iu && Iu.apply(this, arguments)) || this;
  }
  var Au = new (mo(Nu, (Iu = vt)),
    (Nu.prototype.compare = function (t, e) {
      var n = t.node.getPriority(),
        r = e.node.getPriority(),
        r = n.compareTo(r);
      return 0 === r ? Ea(t.name, e.name) : r;
    }),
    (Nu.prototype.isDefinedOn = function (t) {
      return !t.getPriority().isEmpty();
    }),
    (Nu.prototype.indexedValueChanged = function (t, e) {
      return !t.getPriority().equals(e.getPriority());
    }),
    (Nu.prototype.minPost = function () {
      return hu.MIN;
    }),
    (Nu.prototype.maxPost = function () {
      return new hu(wa, new Su('[PRIORITY-POST]', Eu));
    }),
    (Nu.prototype.makePost = function (t, e) {
      t = wu(t);
      return new hu(e, new Su('[PRIORITY-POST]', t));
    }),
    (Nu.prototype.toString = function () {
      return '.priority';
    }),
    Nu)(),
    ku =
      ((Ru.prototype.getNext = function () {
        if (0 === this.nodeStack_.length) return null;
        var t = this.nodeStack_.pop(),
          e = this.resultGenerator_
            ? this.resultGenerator_(t.key, t.value)
            : { key: t.key, value: t.value };
        if (this.isReverse_)
          for (t = t.left; !t.isEmpty(); )
            this.nodeStack_.push(t), (t = t.right);
        else
          for (t = t.right; !t.isEmpty(); )
            this.nodeStack_.push(t), (t = t.left);
        return e;
      }),
      (Ru.prototype.hasNext = function () {
        return 0 < this.nodeStack_.length;
      }),
      (Ru.prototype.peek = function () {
        if (0 === this.nodeStack_.length) return null;
        var t = this.nodeStack_[this.nodeStack_.length - 1];
        return this.resultGenerator_
          ? this.resultGenerator_(t.key, t.value)
          : { key: t.key, value: t.value };
      }),
      Ru);
  function Ru(t, e, n, r, i) {
    void 0 === i && (i = null),
      (this.isReverse_ = r),
      (this.resultGenerator_ = i),
      (this.nodeStack_ = []);
    for (var o = 1; !t.isEmpty(); )
      if (((o = e ? n(t.key, e) : 1), r && (o *= -1), o < 0))
        t = this.isReverse_ ? t.left : t.right;
      else {
        if (0 === o) {
          this.nodeStack_.push(t);
          break;
        }
        this.nodeStack_.push(t), (t = this.isReverse_ ? t.right : t.left);
      }
  }
  var Ou =
    ((Pu.prototype.copy = function (t, e, n, r, i) {
      return new Pu(
        null != t ? t : this.key,
        null != e ? e : this.value,
        null != n ? n : this.color,
        null != r ? r : this.left,
        null != i ? i : this.right
      );
    }),
    (Pu.prototype.count = function () {
      return this.left.count() + 1 + this.right.count();
    }),
    (Pu.prototype.isEmpty = function () {
      return !1;
    }),
    (Pu.prototype.inorderTraversal = function (t) {
      return (
        this.left.inorderTraversal(t) ||
        !!t(this.key, this.value) ||
        this.right.inorderTraversal(t)
      );
    }),
    (Pu.prototype.reverseTraversal = function (t) {
      return (
        this.right.reverseTraversal(t) ||
        t(this.key, this.value) ||
        this.left.reverseTraversal(t)
      );
    }),
    (Pu.prototype.min_ = function () {
      return this.left.isEmpty() ? this : this.left.min_();
    }),
    (Pu.prototype.minKey = function () {
      return this.min_().key;
    }),
    (Pu.prototype.maxKey = function () {
      return this.right.isEmpty() ? this.key : this.right.maxKey();
    }),
    (Pu.prototype.insert = function (t, e, n) {
      var r = this,
        i = n(t, r.key);
      return (r =
        i < 0
          ? r.copy(null, null, null, r.left.insert(t, e, n), null)
          : 0 === i
          ? r.copy(null, e, null, null, null)
          : r.copy(null, null, null, null, r.right.insert(t, e, n))).fixUp_();
    }),
    (Pu.prototype.removeMin_ = function () {
      if (this.left.isEmpty()) return xu.EMPTY_NODE;
      var t = this;
      return (
        t.left.isRed_() || t.left.left.isRed_() || (t = t.moveRedLeft_()),
        (t = t.copy(null, null, null, t.left.removeMin_(), null)).fixUp_()
      );
    }),
    (Pu.prototype.remove = function (t, e) {
      var n,
        r = this;
      if (e(t, r.key) < 0)
        r.left.isEmpty() ||
          r.left.isRed_() ||
          r.left.left.isRed_() ||
          (r = r.moveRedLeft_()),
          (r = r.copy(null, null, null, r.left.remove(t, e), null));
      else {
        if (
          (r.left.isRed_() && (r = r.rotateRight_()),
          r.right.isEmpty() ||
            r.right.isRed_() ||
            r.right.left.isRed_() ||
            (r = r.moveRedRight_()),
          0 === e(t, r.key))
        ) {
          if (r.right.isEmpty()) return xu.EMPTY_NODE;
          (n = r.right.min_()),
            (r = r.copy(n.key, n.value, null, null, r.right.removeMin_()));
        }
        r = r.copy(null, null, null, null, r.right.remove(t, e));
      }
      return r.fixUp_();
    }),
    (Pu.prototype.isRed_ = function () {
      return this.color;
    }),
    (Pu.prototype.fixUp_ = function () {
      var t = this;
      return (
        t.right.isRed_() && !t.left.isRed_() && (t = t.rotateLeft_()),
        t.left.isRed_() && t.left.left.isRed_() && (t = t.rotateRight_()),
        t.left.isRed_() && t.right.isRed_() && (t = t.colorFlip_()),
        t
      );
    }),
    (Pu.prototype.moveRedLeft_ = function () {
      var t = this.colorFlip_();
      return (
        t.right.left.isRed_() &&
          (t = (t = (t = t.copy(
            null,
            null,
            null,
            null,
            t.right.rotateRight_()
          )).rotateLeft_()).colorFlip_()),
        t
      );
    }),
    (Pu.prototype.moveRedRight_ = function () {
      var t = this.colorFlip_();
      return (
        t.left.left.isRed_() && (t = (t = t.rotateRight_()).colorFlip_()), t
      );
    }),
    (Pu.prototype.rotateLeft_ = function () {
      var t = this.copy(null, null, Pu.RED, null, this.right.left);
      return this.right.copy(null, null, this.color, t, null);
    }),
    (Pu.prototype.rotateRight_ = function () {
      var t = this.copy(null, null, Pu.RED, this.left.right, null);
      return this.left.copy(null, null, this.color, null, t);
    }),
    (Pu.prototype.colorFlip_ = function () {
      var t = this.left.copy(null, null, !this.left.color, null, null),
        e = this.right.copy(null, null, !this.right.color, null, null);
      return this.copy(null, null, !this.color, t, e);
    }),
    (Pu.prototype.checkMaxDepth_ = function () {
      var t = this.check_();
      return Math.pow(2, t) <= this.count() + 1;
    }),
    (Pu.prototype.check_ = function () {
      if (this.isRed_() && this.left.isRed_())
        throw new Error(
          'Red node has red child(' + this.key + ',' + this.value + ')'
        );
      if (this.right.isRed_())
        throw new Error(
          'Right child of (' + this.key + ',' + this.value + ') is red'
        );
      var t = this.left.check_();
      if (t !== this.right.check_()) throw new Error('Black depths differ');
      return t + (this.isRed_() ? 0 : 1);
    }),
    (Pu.RED = !0),
    (Pu.BLACK = !1),
    Pu);
  function Pu(t, e, n, r, i) {
    (this.key = t),
      (this.value = e),
      (this.color = null != n ? n : Pu.RED),
      (this.left = null != r ? r : xu.EMPTY_NODE),
      (this.right = null != i ? i : xu.EMPTY_NODE);
  }
  (Du.prototype.copy = function (t, e, n, r, i) {
    return this;
  }),
    (Du.prototype.insert = function (t, e, n) {
      return new Ou(t, e, null);
    }),
    (Du.prototype.remove = function (t, e) {
      return this;
    }),
    (Du.prototype.count = function () {
      return 0;
    }),
    (Du.prototype.isEmpty = function () {
      return !0;
    }),
    (Du.prototype.inorderTraversal = function (t) {
      return !1;
    }),
    (Du.prototype.reverseTraversal = function (t) {
      return !1;
    }),
    (Du.prototype.minKey = function () {
      return null;
    }),
    (Du.prototype.maxKey = function () {
      return null;
    }),
    (Du.prototype.check_ = function () {
      return 0;
    }),
    (Du.prototype.isRed_ = function () {
      return !1;
    }),
    (dt = Du);
  function Du() {}
  var xu =
    ((Lu.prototype.insert = function (t, e) {
      return new Lu(
        this.comparator_,
        this.root_
          .insert(t, e, this.comparator_)
          .copy(null, null, Ou.BLACK, null, null)
      );
    }),
    (Lu.prototype.remove = function (t) {
      return new Lu(
        this.comparator_,
        this.root_
          .remove(t, this.comparator_)
          .copy(null, null, Ou.BLACK, null, null)
      );
    }),
    (Lu.prototype.get = function (t) {
      for (var e, n = this.root_; !n.isEmpty(); ) {
        if (0 === (e = this.comparator_(t, n.key))) return n.value;
        e < 0 ? (n = n.left) : 0 < e && (n = n.right);
      }
      return null;
    }),
    (Lu.prototype.getPredecessorKey = function (t) {
      for (var e, n = this.root_, r = null; !n.isEmpty(); ) {
        if (0 === (e = this.comparator_(t, n.key))) {
          if (n.left.isEmpty()) return r ? r.key : null;
          for (n = n.left; !n.right.isEmpty(); ) n = n.right;
          return n.key;
        }
        e < 0 ? (n = n.left) : 0 < e && (n = (r = n).right);
      }
      throw new Error(
        'Attempted to find predecessor key for a nonexistent key.  What gives?'
      );
    }),
    (Lu.prototype.isEmpty = function () {
      return this.root_.isEmpty();
    }),
    (Lu.prototype.count = function () {
      return this.root_.count();
    }),
    (Lu.prototype.minKey = function () {
      return this.root_.minKey();
    }),
    (Lu.prototype.maxKey = function () {
      return this.root_.maxKey();
    }),
    (Lu.prototype.inorderTraversal = function (t) {
      return this.root_.inorderTraversal(t);
    }),
    (Lu.prototype.reverseTraversal = function (t) {
      return this.root_.reverseTraversal(t);
    }),
    (Lu.prototype.getIterator = function (t) {
      return new ku(this.root_, null, this.comparator_, !1, t);
    }),
    (Lu.prototype.getIteratorFrom = function (t, e) {
      return new ku(this.root_, t, this.comparator_, !1, e);
    }),
    (Lu.prototype.getReverseIteratorFrom = function (t, e) {
      return new ku(this.root_, t, this.comparator_, !0, e);
    }),
    (Lu.prototype.getReverseIterator = function (t) {
      return new ku(this.root_, null, this.comparator_, !0, t);
    }),
    (Lu.EMPTY_NODE = new dt()),
    Lu);
  function Lu(t, e) {
    void 0 === e && (e = Lu.EMPTY_NODE),
      (this.comparator_ = t),
      (this.root_ = e);
  }
  var Mu = Math.log(2),
    Fu =
      ((Uu.prototype.nextBitIsOne = function () {
        var t = !(this.bits_ & (1 << this.current_));
        return this.current_--, t;
      }),
      Uu);
  function Uu(t) {
    var e;
    (this.count = ((e = t + 1), parseInt(Math.log(e) / Mu, 10))),
      (this.current_ = this.count - 1);
    var n,
      r = ((n = this.count), parseInt(Array(n + 1).join('1'), 2));
    this.bits_ = (t + 1) & r;
  }
  var ju,
    Vu,
    qu = function (c, t, h, e) {
      c.sort(t);
      var l = function (t, e) {
          var n = e - t;
          if (0 == n) return null;
          if (1 == n)
            return (
              (r = c[t]),
              (i = h ? h(r) : r),
              new Ou(i, r.node, Ou.BLACK, null, null)
            );
          var n = parseInt(n / 2, 10) + t,
            t = l(t, n),
            e = l(n + 1, e),
            r = c[n],
            i = h ? h(r) : r;
          return new Ou(i, r.node, Ou.BLACK, t, e);
        },
        n = (function (t) {
          for (
            var e = null,
              n = null,
              i = c.length,
              r = function (t, e) {
                var n = i - t,
                  r = i;
                i -= t;
                (t = l(1 + n, r)), (r = c[n]), (n = h ? h(r) : r);
                o(new Ou(n, r.node, e, null, t));
              },
              o = function (t) {
                e = e ? (e.left = t) : (n = t);
              },
              s = 0;
            s < t.count;
            ++s
          ) {
            var a = t.nextBitIsOne(),
              u = Math.pow(2, t.count - (s + 1));
            a ? r(u, Ou.BLACK) : (r(u, Ou.BLACK), r(u, Ou.RED));
          }
          return n;
        })(new Fu(c.length));
      return new xu(e || t, n);
    },
    Bu = {},
    Wu =
      (Object.defineProperty(Ku, 'Default', {
        get: function () {
          return (
            ko(Au, 'ChildrenNode.ts has not been loaded'),
            (ju = ju || new Ku({ '.priority': Bu }, { '.priority': Au }))
          );
        },
        enumerable: !1,
        configurable: !0
      }),
      (Ku.prototype.get = function (t) {
        var e = es(this.indexes_, t);
        if (!e) throw new Error('No index defined for ' + t);
        return e instanceof xu ? e : null;
      }),
      (Ku.prototype.hasIndex = function (t) {
        return ts(this.indexSet_, t.toString());
      }),
      (Ku.prototype.addIndex = function (t, e) {
        ko(
          t !== mu,
          "KeyIndex always exists and isn't meant to be added to the IndexMap."
        );
        for (
          var n, r = [], i = !1, o = e.getIterator(hu.Wrap), s = o.getNext();
          s;

        )
          (i = i || t.isDefinedOn(s.node)), r.push(s), (s = o.getNext());
        n = i ? qu(r, t.getCompare()) : Bu;
        var a = t.toString(),
          u = bo({}, this.indexSet_);
        u[a] = t;
        e = bo({}, this.indexes_);
        return (e[a] = n), new Ku(e, u);
      }),
      (Ku.prototype.addToIndexes = function (s, a) {
        var u = this;
        return new Ku(
          rs(this.indexes_, function (t, e) {
            var n = es(u.indexSet_, e);
            if ((ko(n, 'Missing index implementation for ' + e), t === Bu)) {
              if (n.isDefinedOn(s.node)) {
                for (
                  var r = [], i = a.getIterator(hu.Wrap), o = i.getNext();
                  o;

                )
                  o.name !== s.name && r.push(o), (o = i.getNext());
                return r.push(s), qu(r, n.getCompare());
              }
              return Bu;
            }
            n = a.get(s.name);
            return n && (t = t.remove(new hu(s.name, n))), t.insert(s, s.node);
          }),
          this.indexSet_
        );
      }),
      (Ku.prototype.removeFromIndexes = function (n, r) {
        return new Ku(
          rs(this.indexes_, function (t) {
            if (t === Bu) return t;
            var e = r.get(n.name);
            return e ? t.remove(new hu(n.name, e)) : t;
          }),
          this.indexSet_
        );
      }),
      Ku);
  function Ku(t, e) {
    (this.indexes_ = t), (this.indexSet_ = e);
  }
  function Hu(t, e) {
    return Ea(t.name, e.name);
  }
  function zu(t, e) {
    return Ea(t, e);
  }
  var Gu,
    Qu =
      (Object.defineProperty(Yu, 'EMPTY_NODE', {
        get: function () {
          return (Vu = Vu || new Yu(new xu(zu), null, Wu.Default));
        },
        enumerable: !1,
        configurable: !0
      }),
      (Yu.prototype.isLeafNode = function () {
        return !1;
      }),
      (Yu.prototype.getPriority = function () {
        return this.priorityNode_ || Vu;
      }),
      (Yu.prototype.updatePriority = function (t) {
        return this.children_.isEmpty()
          ? this
          : new Yu(this.children_, t, this.indexMap_);
      }),
      (Yu.prototype.getImmediateChild = function (t) {
        if ('.priority' === t) return this.getPriority();
        t = this.children_.get(t);
        return null === t ? Vu : t;
      }),
      (Yu.prototype.getChild = function (t) {
        var e = t.getFront();
        return null === e
          ? this
          : this.getImmediateChild(e).getChild(t.popFront());
      }),
      (Yu.prototype.hasChild = function (t) {
        return null !== this.children_.get(t);
      }),
      (Yu.prototype.updateImmediateChild = function (t, e) {
        if (
          (ko(e, 'We should always be passing snapshot nodes'),
          '.priority' === t)
        )
          return this.updatePriority(e);
        var n = new hu(t, e),
          r = void 0,
          i = void 0,
          i = e.isEmpty()
            ? ((r = this.children_.remove(t)),
              this.indexMap_.removeFromIndexes(n, this.children_))
            : ((r = this.children_.insert(t, e)),
              this.indexMap_.addToIndexes(n, this.children_)),
          n = r.isEmpty() ? Vu : this.priorityNode_;
        return new Yu(r, n, i);
      }),
      (Yu.prototype.updateChild = function (t, e) {
        var n = t.getFront();
        if (null === n) return e;
        ko(
          '.priority' !== t.getFront() || 1 === t.getLength(),
          '.priority must be the last token in a path'
        );
        e = this.getImmediateChild(n).updateChild(t.popFront(), e);
        return this.updateImmediateChild(n, e);
      }),
      (Yu.prototype.isEmpty = function () {
        return this.children_.isEmpty();
      }),
      (Yu.prototype.numChildren = function () {
        return this.children_.count();
      }),
      (Yu.prototype.val = function (n) {
        if (this.isEmpty()) return null;
        var r = {},
          i = 0,
          o = 0,
          s = !0;
        if (
          (this.forEachChild(Au, function (t, e) {
            (r[t] = e.val(n)),
              i++,
              s && Yu.INTEGER_REGEXP_.test(t)
                ? (o = Math.max(o, Number(t)))
                : (s = !1);
          }),
          !n && s && o < 2 * i)
        ) {
          var t,
            e = [];
          for (t in r) e[t] = r[t];
          return e;
        }
        return (
          n &&
            !this.getPriority().isEmpty() &&
            (r['.priority'] = this.getPriority().val()),
          r
        );
      }),
      (Yu.prototype.hash = function () {
        var n;
        return (
          null === this.lazyHash_ &&
            ((n = ''),
            this.getPriority().isEmpty() ||
              (n += 'priority:' + bu(this.getPriority().val()) + ':'),
            this.forEachChild(Au, function (t, e) {
              e = e.hash();
              '' !== e && (n += ':' + t + ':' + e);
            }),
            (this.lazyHash_ = '' === n ? '' : ea(n))),
          this.lazyHash_
        );
      }),
      (Yu.prototype.getPredecessorChildName = function (t, e, n) {
        n = this.resolveIndex_(n);
        if (n) {
          e = n.getPredecessorKey(new hu(t, e));
          return e ? e.name : null;
        }
        return this.children_.getPredecessorKey(t);
      }),
      (Yu.prototype.getFirstChildName = function (t) {
        t = this.resolveIndex_(t);
        if (t) {
          t = t.minKey();
          return t && t.name;
        }
        return this.children_.minKey();
      }),
      (Yu.prototype.getFirstChild = function (t) {
        t = this.getFirstChildName(t);
        return t ? new hu(t, this.children_.get(t)) : null;
      }),
      (Yu.prototype.getLastChildName = function (t) {
        t = this.resolveIndex_(t);
        if (t) {
          t = t.maxKey();
          return t && t.name;
        }
        return this.children_.maxKey();
      }),
      (Yu.prototype.getLastChild = function (t) {
        t = this.getLastChildName(t);
        return t ? new hu(t, this.children_.get(t)) : null;
      }),
      (Yu.prototype.forEachChild = function (t, e) {
        t = this.resolveIndex_(t);
        return t
          ? t.inorderTraversal(function (t) {
              return e(t.name, t.node);
            })
          : this.children_.inorderTraversal(e);
      }),
      (Yu.prototype.getIterator = function (t) {
        return this.getIteratorFrom(t.minPost(), t);
      }),
      (Yu.prototype.getIteratorFrom = function (t, e) {
        var n = this.resolveIndex_(e);
        if (n)
          return n.getIteratorFrom(t, function (t) {
            return t;
          });
        for (
          var r = this.children_.getIteratorFrom(t.name, hu.Wrap), i = r.peek();
          null != i && e.compare(i, t) < 0;

        )
          r.getNext(), (i = r.peek());
        return r;
      }),
      (Yu.prototype.getReverseIterator = function (t) {
        return this.getReverseIteratorFrom(t.maxPost(), t);
      }),
      (Yu.prototype.getReverseIteratorFrom = function (t, e) {
        var n = this.resolveIndex_(e);
        if (n)
          return n.getReverseIteratorFrom(t, function (t) {
            return t;
          });
        for (
          var r = this.children_.getReverseIteratorFrom(t.name, hu.Wrap),
            i = r.peek();
          null != i && 0 < e.compare(i, t);

        )
          r.getNext(), (i = r.peek());
        return r;
      }),
      (Yu.prototype.compareTo = function (t) {
        return this.isEmpty()
          ? t.isEmpty()
            ? 0
            : -1
          : t.isLeafNode() || t.isEmpty()
          ? 1
          : t === Ju
          ? -1
          : 0;
      }),
      (Yu.prototype.withIndex = function (t) {
        if (t === mu || this.indexMap_.hasIndex(t)) return this;
        t = this.indexMap_.addIndex(t, this.children_);
        return new Yu(this.children_, this.priorityNode_, t);
      }),
      (Yu.prototype.isIndexed = function (t) {
        return t === mu || this.indexMap_.hasIndex(t);
      }),
      (Yu.prototype.equals = function (t) {
        if (t === this) return !0;
        if (t.isLeafNode()) return !1;
        if (this.getPriority().equals(t.getPriority())) {
          if (this.children_.count() !== t.children_.count()) return !1;
          for (
            var e = this.getIterator(Au),
              n = t.getIterator(Au),
              r = e.getNext(),
              i = n.getNext();
            r && i;

          ) {
            if (r.name !== i.name || !r.node.equals(i.node)) return !1;
            (r = e.getNext()), (i = n.getNext());
          }
          return null === r && null === i;
        }
        return !1;
      }),
      (Yu.prototype.resolveIndex_ = function (t) {
        return t === mu ? null : this.indexMap_.get(t.toString());
      }),
      (Yu.INTEGER_REGEXP_ = /^(0|[1-9]\d*)$/),
      Yu);
  function Yu(t, e, n) {
    (this.children_ = t),
      (this.priorityNode_ = e),
      (this.indexMap_ = n),
      (this.lazyHash_ = null),
      this.priorityNode_ && Tu(this.priorityNode_),
      this.children_.isEmpty() &&
        ko(
          !this.priorityNode_ || this.priorityNode_.isEmpty(),
          'An empty node cannot have a priority'
        );
  }
  function Xu() {
    return Gu.call(this, new xu(zu), Qu.EMPTY_NODE, Wu.Default) || this;
  }
  var Ju = new (mo(Xu, (Gu = Qu)),
  (Xu.prototype.compareTo = function (t) {
    return t === this ? 0 : 1;
  }),
  (Xu.prototype.equals = function (t) {
    return t === this;
  }),
  (Xu.prototype.getPriority = function () {
    return this;
  }),
  (Xu.prototype.getImmediateChild = function (t) {
    return Qu.EMPTY_NODE;
  }),
  (Xu.prototype.isEmpty = function () {
    return !1;
  }),
  Xu)();
  Object.defineProperties(hu, {
    MIN: { value: new hu(_a, Qu.EMPTY_NODE) },
    MAX: { value: new hu(wa, Ju) }
  }),
    (vu.__EMPTY_NODE = Qu.EMPTY_NODE),
    (Su.__childrenNodeConstructor = Qu),
    (gu = Ju),
    (Eu = Ju);
  var $u,
    Zu = !0;
  function tc(n, t) {
    if ((void 0 === t && (t = null), null === n)) return Qu.EMPTY_NODE;
    if (
      ('object' == typeof n && '.priority' in n && (t = n['.priority']),
      ko(
        null === t ||
          'string' == typeof t ||
          'number' == typeof t ||
          ('object' == typeof t && '.sv' in t),
        'Invalid priority type found: ' + typeof t
      ),
      'object' == typeof n &&
        '.value' in n &&
        null !== n['.value'] &&
        (n = n['.value']),
      'object' != typeof n || '.sv' in n)
    )
      return new Su(n, tc(t));
    if (n instanceof Array || !Zu) {
      var r = Qu.EMPTY_NODE;
      return (
        Ta(n, function (t, e) {
          ts(n, t) &&
            '.' !== t.substring(0, 1) &&
            ((!(e = tc(e)).isLeafNode() && e.isEmpty()) ||
              (r = r.updateImmediateChild(t, e)));
        }),
        r.updatePriority(tc(t))
      );
    }
    var i = [],
      o = !1;
    if (
      (Ta(n, function (t, e) {
        '.' !== t.substring(0, 1) &&
          ((e = tc(e)).isEmpty() ||
            ((o = o || !e.getPriority().isEmpty()), i.push(new hu(t, e))));
      }),
      0 === i.length)
    )
      return Qu.EMPTY_NODE;
    var e = qu(
      i,
      Hu,
      function (t) {
        return t.name;
      },
      zu
    );
    if (o) {
      var s = qu(i, Au.getCompare());
      return new Qu(e, tc(t), new Wu({ '.priority': s }, { '.priority': Au }));
    }
    return new Qu(e, tc(t), Wu.Default);
  }
  function ec() {
    return (null !== $u && $u.apply(this, arguments)) || this;
  }
  wu = tc;
  var nc,
    rc = new (mo(ec, ($u = vt)),
    (ec.prototype.compare = function (t, e) {
      var n = t.node.compareTo(e.node);
      return 0 === n ? Ea(t.name, e.name) : n;
    }),
    (ec.prototype.isDefinedOn = function (t) {
      return !0;
    }),
    (ec.prototype.indexedValueChanged = function (t, e) {
      return !t.equals(e);
    }),
    (ec.prototype.minPost = function () {
      return hu.MIN;
    }),
    (ec.prototype.maxPost = function () {
      return hu.MAX;
    }),
    (ec.prototype.makePost = function (t, e) {
      t = tc(t);
      return new hu(e, t);
    }),
    (ec.prototype.toString = function () {
      return '.value';
    }),
    ec)(),
    ic =
      (mo(oc, (nc = vt)),
      (oc.prototype.extractChild = function (t) {
        return t.getChild(this.indexPath_);
      }),
      (oc.prototype.isDefinedOn = function (t) {
        return !t.getChild(this.indexPath_).isEmpty();
      }),
      (oc.prototype.compare = function (t, e) {
        var n = this.extractChild(t.node),
          r = this.extractChild(e.node),
          r = n.compareTo(r);
        return 0 === r ? Ea(t.name, e.name) : r;
      }),
      (oc.prototype.makePost = function (t, e) {
        (t = tc(t)), (t = Qu.EMPTY_NODE.updateChild(this.indexPath_, t));
        return new hu(e, t);
      }),
      (oc.prototype.maxPost = function () {
        var t = Qu.EMPTY_NODE.updateChild(this.indexPath_, Ju);
        return new hu(wa, t);
      }),
      (oc.prototype.toString = function () {
        return this.indexPath_.slice().join('/');
      }),
      oc);
  function oc(t) {
    var e = nc.call(this) || this;
    return (
      (e.indexPath_ = t),
      ko(
        !t.isEmpty() && '.priority' !== t.getFront(),
        "Can't create PathIndex with empty path or .priority key"
      ),
      e
    );
  }
  var sc =
    ((ac.prototype.val = function () {
      return hs('DataSnapshot.val', 0, 0, arguments.length), this.node_.val();
    }),
    (ac.prototype.exportVal = function () {
      return (
        hs('DataSnapshot.exportVal', 0, 0, arguments.length), this.node_.val(!0)
      );
    }),
    (ac.prototype.toJSON = function () {
      return (
        hs('DataSnapshot.toJSON', 0, 1, arguments.length), this.exportVal()
      );
    }),
    (ac.prototype.exists = function () {
      return (
        hs('DataSnapshot.exists', 0, 0, arguments.length), !this.node_.isEmpty()
      );
    }),
    (ac.prototype.child = function (t) {
      hs('DataSnapshot.child', 0, 1, arguments.length),
        (t = String(t)),
        Qa('DataSnapshot.child', 1, t, !1);
      var e = new Ra(t),
        t = this.ref_.child(e);
      return new ac(this.node_.getChild(e), t, Au);
    }),
    (ac.prototype.hasChild = function (t) {
      hs('DataSnapshot.hasChild', 1, 1, arguments.length),
        Qa('DataSnapshot.hasChild', 1, t, !1);
      t = new Ra(t);
      return !this.node_.getChild(t).isEmpty();
    }),
    (ac.prototype.getPriority = function () {
      return (
        hs('DataSnapshot.getPriority', 0, 0, arguments.length),
        this.node_.getPriority().val()
      );
    }),
    (ac.prototype.forEach = function (n) {
      var r = this;
      return (
        hs('DataSnapshot.forEach', 1, 1, arguments.length),
        fs('DataSnapshot.forEach', 1, n, !1),
        !this.node_.isLeafNode() &&
          !!this.node_.forEachChild(this.index_, function (t, e) {
            return n(new ac(e, r.ref_.child(t), Au));
          })
      );
    }),
    (ac.prototype.hasChildren = function () {
      return (
        hs('DataSnapshot.hasChildren', 0, 0, arguments.length),
        !this.node_.isLeafNode() && !this.node_.isEmpty()
      );
    }),
    Object.defineProperty(ac.prototype, 'key', {
      get: function () {
        return this.ref_.getKey();
      },
      enumerable: !1,
      configurable: !0
    }),
    (ac.prototype.numChildren = function () {
      return (
        hs('DataSnapshot.numChildren', 0, 0, arguments.length),
        this.node_.numChildren()
      );
    }),
    (ac.prototype.getRef = function () {
      return hs('DataSnapshot.ref', 0, 0, arguments.length), this.ref_;
    }),
    Object.defineProperty(ac.prototype, 'ref', {
      get: function () {
        return this.getRef();
      },
      enumerable: !1,
      configurable: !0
    }),
    ac);
  function ac(t, e, n) {
    (this.node_ = t), (this.ref_ = e), (this.index_ = n);
  }
  var uc =
    ((cc.prototype.getPath = function () {
      var t = this.snapshot.getRef();
      return ('value' === this.eventType ? t : t.getParent()).path;
    }),
    (cc.prototype.getEventType = function () {
      return this.eventType;
    }),
    (cc.prototype.getEventRunner = function () {
      return this.eventRegistration.getEventRunner(this);
    }),
    (cc.prototype.toString = function () {
      return (
        this.getPath().toString() +
        ':' +
        this.eventType +
        ':' +
        $o(this.snapshot.exportVal())
      );
    }),
    cc);
  function cc(t, e, n, r) {
    (this.eventType = t),
      (this.eventRegistration = e),
      (this.snapshot = n),
      (this.prevName = r);
  }
  var hc =
    ((lc.prototype.getPath = function () {
      return this.path;
    }),
    (lc.prototype.getEventType = function () {
      return 'cancel';
    }),
    (lc.prototype.getEventRunner = function () {
      return this.eventRegistration.getEventRunner(this);
    }),
    (lc.prototype.toString = function () {
      return this.path.toString() + ':cancel';
    }),
    lc);
  function lc(t, e, n) {
    (this.eventRegistration = t), (this.error = e), (this.path = n);
  }
  var fc =
    ((pc.prototype.respondsTo = function (t) {
      return 'value' === t;
    }),
    (pc.prototype.createEvent = function (t, e) {
      var n = e.getQueryParams().getIndex();
      return new uc('value', this, new sc(t.snapshotNode, e.getRef(), n));
    }),
    (pc.prototype.getEventRunner = function (t) {
      var e = this.context_;
      if ('cancel' === t.getEventType()) {
        ko(
          this.cancelCallback_,
          'Raising a cancel event on a listener with no cancel callback'
        );
        var n = this.cancelCallback_;
        return function () {
          n.call(e, t.error);
        };
      }
      var r = this.callback_;
      return function () {
        r.call(e, t.snapshot);
      };
    }),
    (pc.prototype.createCancelEvent = function (t, e) {
      return this.cancelCallback_ ? new hc(this, t, e) : null;
    }),
    (pc.prototype.matches = function (t) {
      return (
        t instanceof pc &&
        (!t.callback_ ||
          !this.callback_ ||
          (t.callback_ === this.callback_ && t.context_ === this.context_))
      );
    }),
    (pc.prototype.hasAnyCallback = function () {
      return null !== this.callback_;
    }),
    pc);
  function pc(t, e, n) {
    (this.callback_ = t), (this.cancelCallback_ = e), (this.context_ = n);
  }
  var dc,
    vc =
      ((yc.prototype.respondsTo = function (t) {
        t =
          'children_removed' ===
          (t = 'children_added' === t ? 'child_added' : t)
            ? 'child_removed'
            : t;
        return ts(this.callbacks_, t);
      }),
      (yc.prototype.createCancelEvent = function (t, e) {
        return this.cancelCallback_ ? new hc(this, t, e) : null;
      }),
      (yc.prototype.createEvent = function (t, e) {
        ko(null != t.childName, 'Child events should have a childName.');
        var n = e.getRef().child(t.childName),
          e = e.getQueryParams().getIndex();
        return new uc(t.type, this, new sc(t.snapshotNode, n, e), t.prevName);
      }),
      (yc.prototype.getEventRunner = function (t) {
        var e = this.context_;
        if ('cancel' === t.getEventType()) {
          ko(
            this.cancelCallback_,
            'Raising a cancel event on a listener with no cancel callback'
          );
          var n = this.cancelCallback_;
          return function () {
            n.call(e, t.error);
          };
        }
        var r = this.callbacks_[t.eventType];
        return function () {
          r.call(e, t.snapshot, t.prevName);
        };
      }),
      (yc.prototype.matches = function (e) {
        var n = this;
        if (e instanceof yc) {
          if (!this.callbacks_ || !e.callbacks_) return !0;
          if (this.context_ === e.context_) {
            var t = Object.keys(e.callbacks_),
              r = Object.keys(this.callbacks_),
              i = t.length;
            if (i === r.length) {
              if (1 !== i)
                return r.every(function (t) {
                  return e.callbacks_[t] === n.callbacks_[t];
                });
              (t = t[0]), (r = r[0]);
              return !(
                r !== t ||
                (e.callbacks_[t] &&
                  this.callbacks_[r] &&
                  e.callbacks_[t] !== this.callbacks_[r])
              );
            }
          }
        }
        return !1;
      }),
      (yc.prototype.hasAnyCallback = function () {
        return null !== this.callbacks_;
      }),
      yc);
  function yc(t, e, n) {
    (this.callbacks_ = t), (this.cancelCallback_ = e), (this.context_ = n);
  }
  var gc =
    (Object.defineProperty(mc, '__referenceConstructor', {
      get: function () {
        return ko(dc, 'Reference.ts has not been loaded'), dc;
      },
      set: function (t) {
        dc = t;
      },
      enumerable: !1,
      configurable: !0
    }),
    (mc.validateQueryEndpoints_ = function (t) {
      var e = null,
        n = null;
      if (
        (t.hasStart() && (e = t.getIndexStartValue()),
        t.hasEnd() && (n = t.getIndexEndValue()),
        t.getIndex() === mu)
      ) {
        var r =
            'Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().',
          i =
            'Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.';
        if (t.hasStart()) {
          if (t.getIndexStartName() !== _a) throw new Error(r);
          if ('string' != typeof e) throw new Error(i);
        }
        if (t.hasEnd()) {
          if (t.getIndexEndName() !== wa) throw new Error(r);
          if ('string' != typeof n) throw new Error(i);
        }
      } else if (t.getIndex() === Au) {
        if ((null != e && !Ba(e)) || (null != n && !Ba(n)))
          throw new Error(
            'Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).'
          );
      } else if (
        (ko(
          t.getIndex() instanceof ic || t.getIndex() === rc,
          'unknown index type.'
        ),
        (null != e && 'object' == typeof e) ||
          (null != n && 'object' == typeof n))
      )
        throw new Error(
          'Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.'
        );
    }),
    (mc.validateLimit_ = function (t) {
      if (t.hasStart() && t.hasEnd() && t.hasLimit() && !t.hasAnchoredLimit())
        throw new Error(
          "Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead."
        );
    }),
    (mc.prototype.validateNoPreviousOrderByCall_ = function (t) {
      if (!0 === this.orderByCalled_)
        throw new Error(t + ": You can't combine multiple orderBy calls.");
    }),
    (mc.prototype.getQueryParams = function () {
      return this.queryParams_;
    }),
    (mc.prototype.getRef = function () {
      return (
        hs('Query.ref', 0, 0, arguments.length),
        new mc.__referenceConstructor(this.repo, this.path)
      );
    }),
    (mc.prototype.on = function (t, e, n, r) {
      hs('Query.on', 2, 4, arguments.length),
        za('Query.on', 1, t, !1),
        fs('Query.on', 2, e, !1);
      n = mc.getCancelAndContextArgs_('Query.on', n, r);
      return (
        'value' === t
          ? this.onValueEvent(e, n.cancel, n.context)
          : (((r = {})[t] = e), this.onChildEvent(r, n.cancel, n.context)),
        e
      );
    }),
    (mc.prototype.onValueEvent = function (t, e, n) {
      n = new fc(t, e || null, n || null);
      this.repo.addEventCallbackForQuery(this, n);
    }),
    (mc.prototype.onChildEvent = function (t, e, n) {
      n = new vc(t, e, n);
      this.repo.addEventCallbackForQuery(this, n);
    }),
    (mc.prototype.off = function (t, e, n) {
      hs('Query.off', 0, 3, arguments.length),
        za('Query.off', 1, t, !0),
        fs('Query.off', 2, e, !0),
        ps('Query.off', 3, n, !0);
      var r = null,
        i = null;
      'value' === t
        ? (r = new fc(e || null, null, n || null))
        : t && (e && ((i = {})[t] = e), (r = new vc(i, null, n || null))),
        this.repo.removeEventCallbackForQuery(this, r);
    }),
    (mc.prototype.get = function () {
      return this.repo.getValue(this);
    }),
    (mc.prototype.once = function (e, n, t, r) {
      var i = this;
      hs('Query.once', 1, 4, arguments.length),
        za('Query.once', 1, e, !1),
        fs('Query.once', 2, n, !0);
      var o = mc.getCancelAndContextArgs_('Query.once', t, r),
        s = !0,
        a = new xo();
      a.promise.catch(function () {});
      var u = function (t) {
        s && ((s = !1), i.off(e, u), n && n.bind(o.context)(t), a.resolve(t));
      };
      return (
        this.on(e, u, function (t) {
          i.off(e, u), o.cancel && o.cancel.bind(o.context)(t), a.reject(t);
        }),
        a.promise
      );
    }),
    (mc.prototype.limitToFirst = function (t) {
      if (
        (hs('Query.limitToFirst', 1, 1, arguments.length),
        'number' != typeof t || Math.floor(t) !== t || t <= 0)
      )
        throw new Error(
          'Query.limitToFirst: First argument must be a positive integer.'
        );
      if (this.queryParams_.hasLimit())
        throw new Error(
          'Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).'
        );
      return new mc(
        this.repo,
        this.path,
        this.queryParams_.limitToFirst(t),
        this.orderByCalled_
      );
    }),
    (mc.prototype.limitToLast = function (t) {
      if (
        (hs('Query.limitToLast', 1, 1, arguments.length),
        'number' != typeof t || Math.floor(t) !== t || t <= 0)
      )
        throw new Error(
          'Query.limitToLast: First argument must be a positive integer.'
        );
      if (this.queryParams_.hasLimit())
        throw new Error(
          'Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).'
        );
      return new mc(
        this.repo,
        this.path,
        this.queryParams_.limitToLast(t),
        this.orderByCalled_
      );
    }),
    (mc.prototype.orderByChild = function (t) {
      if ((hs('Query.orderByChild', 1, 1, arguments.length), '$key' === t))
        throw new Error(
          'Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.'
        );
      if ('$priority' === t)
        throw new Error(
          'Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.'
        );
      if ('$value' === t)
        throw new Error(
          'Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.'
        );
      Qa('Query.orderByChild', 1, t, !1),
        this.validateNoPreviousOrderByCall_('Query.orderByChild');
      t = new Ra(t);
      if (t.isEmpty())
        throw new Error(
          'Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.'
        );
      (t = new ic(t)), (t = this.queryParams_.orderBy(t));
      return mc.validateQueryEndpoints_(t), new mc(this.repo, this.path, t, !0);
    }),
    (mc.prototype.orderByKey = function () {
      hs('Query.orderByKey', 0, 0, arguments.length),
        this.validateNoPreviousOrderByCall_('Query.orderByKey');
      var t = this.queryParams_.orderBy(mu);
      return mc.validateQueryEndpoints_(t), new mc(this.repo, this.path, t, !0);
    }),
    (mc.prototype.orderByPriority = function () {
      hs('Query.orderByPriority', 0, 0, arguments.length),
        this.validateNoPreviousOrderByCall_('Query.orderByPriority');
      var t = this.queryParams_.orderBy(Au);
      return mc.validateQueryEndpoints_(t), new mc(this.repo, this.path, t, !0);
    }),
    (mc.prototype.orderByValue = function () {
      hs('Query.orderByValue', 0, 0, arguments.length),
        this.validateNoPreviousOrderByCall_('Query.orderByValue');
      var t = this.queryParams_.orderBy(rc);
      return mc.validateQueryEndpoints_(t), new mc(this.repo, this.path, t, !0);
    }),
    (mc.prototype.startAt = function (t, e) {
      void 0 === t && (t = null),
        hs('Query.startAt', 0, 2, arguments.length),
        Wa('Query.startAt', 1, t, this.path, !0),
        Ga('Query.startAt', 2, e, !0);
      var n = this.queryParams_.startAt(t, e);
      if (
        (mc.validateLimit_(n),
        mc.validateQueryEndpoints_(n),
        this.queryParams_.hasStart())
      )
        throw new Error(
          'Query.startAt: Starting point was already set (by another call to startAt or equalTo).'
        );
      return (
        void 0 === t && (e = t = null),
        new mc(this.repo, this.path, n, this.orderByCalled_)
      );
    }),
    (mc.prototype.endAt = function (t, e) {
      void 0 === t && (t = null),
        hs('Query.endAt', 0, 2, arguments.length),
        Wa('Query.endAt', 1, t, this.path, !0),
        Ga('Query.endAt', 2, e, !0);
      e = this.queryParams_.endAt(t, e);
      if (
        (mc.validateLimit_(e),
        mc.validateQueryEndpoints_(e),
        this.queryParams_.hasEnd())
      )
        throw new Error(
          'Query.endAt: Ending point was already set (by another call to endAt or equalTo).'
        );
      return new mc(this.repo, this.path, e, this.orderByCalled_);
    }),
    (mc.prototype.equalTo = function (t, e) {
      if (
        (hs('Query.equalTo', 1, 2, arguments.length),
        Wa('Query.equalTo', 1, t, this.path, !1),
        Ga('Query.equalTo', 2, e, !0),
        this.queryParams_.hasStart())
      )
        throw new Error(
          'Query.equalTo: Starting point was already set (by another call to startAt or equalTo).'
        );
      if (this.queryParams_.hasEnd())
        throw new Error(
          'Query.equalTo: Ending point was already set (by another call to endAt or equalTo).'
        );
      return this.startAt(t, e).endAt(t, e);
    }),
    (mc.prototype.toString = function () {
      return (
        hs('Query.toString', 0, 0, arguments.length),
        this.repo.toString() + this.path.toUrlEncodedString()
      );
    }),
    (mc.prototype.toJSON = function () {
      return hs('Query.toJSON', 0, 1, arguments.length), this.toString();
    }),
    (mc.prototype.queryObject = function () {
      return this.queryParams_.getQueryObject();
    }),
    (mc.prototype.queryIdentifier = function () {
      var t = this.queryObject(),
        t = Ia(t);
      return '{}' === t ? 'default' : t;
    }),
    (mc.prototype.isEqual = function (t) {
      if ((hs('Query.isEqual', 1, 1, arguments.length), !(t instanceof mc))) {
        throw new Error(
          'Query.isEqual failed: First argument must be an instance of firebase.database.Query.'
        );
      }
      var e = this.repo === t.repo,
        n = this.path.equals(t.path),
        t = this.queryIdentifier() === t.queryIdentifier();
      return e && n && t;
    }),
    (mc.getCancelAndContextArgs_ = function (t, e, n) {
      var r = { cancel: null, context: null };
      if (e && n)
        (r.cancel = e),
          fs(t, 3, r.cancel, !0),
          (r.context = n),
          ps(t, 4, r.context, !0);
      else if (e)
        if ('object' == typeof e && null !== e) r.context = e;
        else {
          if ('function' != typeof e)
            throw new Error(
              ls(t, 3, !0) +
                ' must either be a cancel callback or a context object.'
            );
          r.cancel = e;
        }
      return r;
    }),
    Object.defineProperty(mc.prototype, 'ref', {
      get: function () {
        return this.getRef();
      },
      enumerable: !1,
      configurable: !0
    }),
    mc);
  function mc(t, e, n, r) {
    (this.repo = t),
      (this.path = e),
      (this.queryParams_ = n),
      (this.orderByCalled_ = r);
  }
  var bc =
    ((_c.prototype.getImmediateChild = function (t) {
      return new _c(this.node_.getImmediateChild(t));
    }),
    (_c.prototype.node = function () {
      return this.node_;
    }),
    _c);
  function _c(t) {
    this.node_ = t;
  }
  var wc =
    ((Ec.prototype.getImmediateChild = function (t) {
      t = this.path_.child(t);
      return new Ec(this.syncTree_, t);
    }),
    (Ec.prototype.node = function () {
      return this.syncTree_.calcCompleteEventCache(this.path_);
    }),
    Ec);
  function Ec(t, e) {
    (this.syncTree_ = t), (this.path_ = e);
  }
  function Ic(t, e, n, r) {
    return Ac(e, new wc(n, t), r);
  }
  function Tc(t, e, n) {
    return Ac(t, new bc(e), n);
  }
  var Sc = function (t, e, n) {
      return t && 'object' == typeof t
        ? (ko('.sv' in t, 'Unexpected leaf node or priority contents'),
          'string' == typeof t['.sv']
            ? Cc(t['.sv'], e, n)
            : 'object' == typeof t['.sv']
            ? Nc(t['.sv'], e)
            : void ko(
                !1,
                'Unexpected server value: ' + JSON.stringify(t, null, 2)
              ))
        : t;
    },
    Cc = function (t, e, n) {
      if ('timestamp' === t) return n.timestamp;
      ko(!1, 'Unexpected server value: ' + t);
    },
    Nc = function (t, e, n) {
      t.hasOwnProperty('increment') ||
        ko(!1, 'Unexpected server value: ' + JSON.stringify(t, null, 2));
      t = t.increment;
      'number' != typeof t && ko(!1, 'Unexpected increment value: ' + t);
      e = e.node();
      if (
        (ko(null != e, 'Expected ChildrenNode.EMPTY_NODE for nulls'),
        !e.isLeafNode())
      )
        return t;
      e = e.getValue();
      return 'number' != typeof e ? t : e + t;
    };
  function Ac(t, r, i) {
    var e = t.getPriority().val(),
      n = Sc(e, r.getImmediateChild('.priority'), i);
    if (t.isLeafNode()) {
      var o = t,
        e = Sc(o.getValue(), r, i);
      return e !== o.getValue() || n !== o.getPriority().val()
        ? new Su(e, tc(n))
        : t;
    }
    var t = t,
      s = t;
    return (
      n !== t.getPriority().val() && (s = s.updatePriority(new Su(n))),
      t.forEachChild(Au, function (t, e) {
        var n = Ac(e, r.getImmediateChild(t), i);
        n !== e && (s = s.updateImmediateChild(t, n));
      }),
      s
    );
  }
  var kc,
    Rc =
      ((Oc.prototype.find = function (t) {
        if (null != this.value) return this.value.getChild(t);
        if (!t.isEmpty() && 0 < this.children.size) {
          var e = t.getFront();
          return (
            (t = t.popFront()),
            this.children.has(e) ? this.children.get(e).find(t) : null
          );
        }
        return null;
      }),
      (Oc.prototype.remember = function (t, e) {
        var n;
        t.isEmpty()
          ? ((this.value = e), this.children.clear())
          : null !== this.value
          ? (this.value = this.value.updateChild(t, e))
          : ((n = t.getFront()),
            this.children.has(n) || this.children.set(n, new Oc()),
            (n = this.children.get(n)),
            (t = t.popFront()),
            n.remember(t, e));
      }),
      (Oc.prototype.forget = function (t) {
        if (t.isEmpty()) return (this.value = null), this.children.clear(), !0;
        if (null !== this.value) {
          if (this.value.isLeafNode()) return !1;
          var e = this.value;
          this.value = null;
          var n = this;
          return (
            e.forEachChild(Au, function (t, e) {
              n.remember(new Ra(t), e);
            }),
            this.forget(t)
          );
        }
        if (0 < this.children.size) {
          e = t.getFront();
          return (
            (t = t.popFront()),
            this.children.has(e) &&
              this.children.get(e).forget(t) &&
              this.children.delete(e),
            0 === this.children.size
          );
        }
        return !0;
      }),
      (Oc.prototype.forEachTree = function (n, r) {
        null !== this.value
          ? r(n, this.value)
          : this.forEachChild(function (t, e) {
              t = new Ra(n.toString() + '/' + t);
              e.forEachTree(t, r);
            });
      }),
      (Oc.prototype.forEachChild = function (n) {
        this.children.forEach(function (t, e) {
          n(e, t);
        });
      }),
      Oc);
  function Oc() {
    (this.value = null), (this.children = new Map());
  }
  ((Gn = kc = kc || {})[(Gn.OVERWRITE = 0)] = 'OVERWRITE'),
    (Gn[(Gn.MERGE = 1)] = 'MERGE'),
    (Gn[(Gn.ACK_USER_WRITE = 2)] = 'ACK_USER_WRITE'),
    (Gn[(Gn.LISTEN_COMPLETE = 3)] = 'LISTEN_COMPLETE');
  var Pc =
    ((Dc.User = new Dc(!0, !1, null, !1)),
    (Dc.Server = new Dc(!1, !0, null, !1)),
    (Dc.forServerTaggedQuery = function (t) {
      return new Dc(!1, !0, t, !0);
    }),
    Dc);
  function Dc(t, e, n, r) {
    (this.fromUser = t),
      (this.fromServer = e),
      (this.queryId = n),
      (this.tagged = r),
      ko(!r || e, 'Tagged queries must be from server.');
  }
  var xc,
    Lc =
      ((Mc.prototype.operationForChild = function (t) {
        if (this.path.isEmpty()) {
          if (null != this.affectedTree.value)
            return (
              ko(
                this.affectedTree.children.isEmpty(),
                'affectedTree should not have overlapping affected paths.'
              ),
              this
            );
          var e = this.affectedTree.subtree(new Ra(t));
          return new Mc(Ra.Empty, e, this.revert);
        }
        return (
          ko(
            this.path.getFront() === t,
            'operationForChild called for unrelated child.'
          ),
          new Mc(this.path.popFront(), this.affectedTree, this.revert)
        );
      }),
      Mc);
  function Mc(t, e, n) {
    (this.path = t),
      (this.affectedTree = e),
      (this.revert = n),
      (this.type = kc.ACK_USER_WRITE),
      (this.source = Pc.User);
  }
  var Fc =
    ((Uc.fromObject = function (t) {
      var n = Uc.Empty;
      return (
        Ta(t, function (t, e) {
          n = n.set(new Ra(t), e);
        }),
        n
      );
    }),
    (Uc.prototype.isEmpty = function () {
      return null === this.value && this.children.isEmpty();
    }),
    (Uc.prototype.findRootMostMatchingPathAndValue = function (t, e) {
      if (null != this.value && e(this.value))
        return { path: Ra.Empty, value: this.value };
      if (t.isEmpty()) return null;
      var n = t.getFront(),
        r = this.children.get(n);
      if (null === r) return null;
      e = r.findRootMostMatchingPathAndValue(t.popFront(), e);
      return null == e
        ? null
        : { path: new Ra(n).child(e.path), value: e.value };
    }),
    (Uc.prototype.findRootMostValueAndPath = function (t) {
      return this.findRootMostMatchingPathAndValue(t, function () {
        return !0;
      });
    }),
    (Uc.prototype.subtree = function (t) {
      if (t.isEmpty()) return this;
      var e = t.getFront(),
        e = this.children.get(e);
      return null !== e ? e.subtree(t.popFront()) : Uc.Empty;
    }),
    (Uc.prototype.set = function (t, e) {
      if (t.isEmpty()) return new Uc(e, this.children);
      var n = t.getFront(),
        e = (this.children.get(n) || Uc.Empty).set(t.popFront(), e),
        e = this.children.insert(n, e);
      return new Uc(this.value, e);
    }),
    (Uc.prototype.remove = function (t) {
      if (t.isEmpty())
        return this.children.isEmpty() ? Uc.Empty : new Uc(null, this.children);
      var e = t.getFront(),
        n = this.children.get(e);
      if (n) {
        (n = n.remove(t.popFront())),
          (t = void 0),
          (t = n.isEmpty()
            ? this.children.remove(e)
            : this.children.insert(e, n));
        return null === this.value && t.isEmpty()
          ? Uc.Empty
          : new Uc(this.value, t);
      }
      return this;
    }),
    (Uc.prototype.get = function (t) {
      if (t.isEmpty()) return this.value;
      var e = t.getFront(),
        e = this.children.get(e);
      return e ? e.get(t.popFront()) : null;
    }),
    (Uc.prototype.setTree = function (t, e) {
      if (t.isEmpty()) return e;
      var n = t.getFront(),
        t = (this.children.get(n) || Uc.Empty).setTree(t.popFront(), e),
        e = void 0,
        e = t.isEmpty() ? this.children.remove(n) : this.children.insert(n, t);
      return new Uc(this.value, e);
    }),
    (Uc.prototype.fold = function (t) {
      return this.fold_(Ra.Empty, t);
    }),
    (Uc.prototype.fold_ = function (n, r) {
      var i = {};
      return (
        this.children.inorderTraversal(function (t, e) {
          i[t] = e.fold_(n.child(t), r);
        }),
        r(n, this.value, i)
      );
    }),
    (Uc.prototype.findOnPath = function (t, e) {
      return this.findOnPath_(t, Ra.Empty, e);
    }),
    (Uc.prototype.findOnPath_ = function (t, e, n) {
      var r = !!this.value && n(e, this.value);
      if (r) return r;
      if (t.isEmpty()) return null;
      var i = t.getFront(),
        r = this.children.get(i);
      return r ? r.findOnPath_(t.popFront(), e.child(i), n) : null;
    }),
    (Uc.prototype.foreachOnPath = function (t, e) {
      return this.foreachOnPath_(t, Ra.Empty, e);
    }),
    (Uc.prototype.foreachOnPath_ = function (t, e, n) {
      if (t.isEmpty()) return this;
      this.value && n(e, this.value);
      var r = t.getFront(),
        i = this.children.get(r);
      return i ? i.foreachOnPath_(t.popFront(), e.child(r), n) : Uc.Empty;
    }),
    (Uc.prototype.foreach = function (t) {
      this.foreach_(Ra.Empty, t);
    }),
    (Uc.prototype.foreach_ = function (n, r) {
      this.children.inorderTraversal(function (t, e) {
        e.foreach_(n.child(t), r);
      }),
        this.value && r(n, this.value);
    }),
    (Uc.prototype.foreachChild = function (n) {
      this.children.inorderTraversal(function (t, e) {
        e.value && n(t, e.value);
      });
    }),
    (Uc.Empty = new Uc(null)),
    Uc);
  function Uc(t, e) {
    void 0 === e && (e = xc = xc || new xu(aa)),
      (this.value = t),
      (this.children = e);
  }
  var jc =
    ((Vc.prototype.operationForChild = function (t) {
      return this.path.isEmpty()
        ? new Vc(this.source, Ra.Empty)
        : new Vc(this.source, this.path.popFront());
    }),
    Vc);
  function Vc(t, e) {
    (this.source = t), (this.path = e), (this.type = kc.LISTEN_COMPLETE);
  }
  var qc =
    ((Bc.prototype.operationForChild = function (t) {
      return this.path.isEmpty()
        ? new Bc(this.source, Ra.Empty, this.snap.getImmediateChild(t))
        : new Bc(this.source, this.path.popFront(), this.snap);
    }),
    Bc);
  function Bc(t, e, n) {
    (this.source = t),
      (this.path = e),
      (this.snap = n),
      (this.type = kc.OVERWRITE);
  }
  var Wc =
    ((Kc.prototype.operationForChild = function (t) {
      if (this.path.isEmpty()) {
        var e = this.children.subtree(new Ra(t));
        return e.isEmpty()
          ? null
          : e.value
          ? new qc(this.source, Ra.Empty, e.value)
          : new Kc(this.source, Ra.Empty, e);
      }
      return (
        ko(
          this.path.getFront() === t,
          "Can't get a merge for a child not on the path of the operation"
        ),
        new Kc(this.source, this.path.popFront(), this.children)
      );
    }),
    (Kc.prototype.toString = function () {
      return (
        'Operation(' +
        this.path +
        ': ' +
        this.source.toString() +
        ' merge: ' +
        this.children.toString() +
        ')'
      );
    }),
    Kc);
  function Kc(t, e, n) {
    (this.source = t),
      (this.path = e),
      (this.children = n),
      (this.type = kc.MERGE);
  }
  var Hc =
    ((zc.prototype.isFullyInitialized = function () {
      return this.fullyInitialized_;
    }),
    (zc.prototype.isFiltered = function () {
      return this.filtered_;
    }),
    (zc.prototype.isCompleteForPath = function (t) {
      if (t.isEmpty()) return this.isFullyInitialized() && !this.filtered_;
      t = t.getFront();
      return this.isCompleteForChild(t);
    }),
    (zc.prototype.isCompleteForChild = function (t) {
      return (
        (this.isFullyInitialized() && !this.filtered_) || this.node_.hasChild(t)
      );
    }),
    (zc.prototype.getNode = function () {
      return this.node_;
    }),
    zc);
  function zc(t, e, n) {
    (this.node_ = t), (this.fullyInitialized_ = e), (this.filtered_ = n);
  }
  var Gc =
    ((Qc.prototype.updateEventSnap = function (t, e, n) {
      return new Qc(new Hc(t, e, n), this.serverCache_);
    }),
    (Qc.prototype.updateServerSnap = function (t, e, n) {
      return new Qc(this.eventCache_, new Hc(t, e, n));
    }),
    (Qc.prototype.getEventCache = function () {
      return this.eventCache_;
    }),
    (Qc.prototype.getCompleteEventSnap = function () {
      return this.eventCache_.isFullyInitialized()
        ? this.eventCache_.getNode()
        : null;
    }),
    (Qc.prototype.getServerCache = function () {
      return this.serverCache_;
    }),
    (Qc.prototype.getCompleteServerSnap = function () {
      return this.serverCache_.isFullyInitialized()
        ? this.serverCache_.getNode()
        : null;
    }),
    (Qc.Empty = new Qc(
      new Hc(Qu.EMPTY_NODE, !1, !1),
      new Hc(Qu.EMPTY_NODE, !1, !1)
    )),
    Qc);
  function Qc(t, e) {
    (this.eventCache_ = t), (this.serverCache_ = e);
  }
  var Yc =
    ((Xc.valueChange = function (t) {
      return new Xc(Xc.VALUE, t);
    }),
    (Xc.childAddedChange = function (t, e) {
      return new Xc(Xc.CHILD_ADDED, e, t);
    }),
    (Xc.childRemovedChange = function (t, e) {
      return new Xc(Xc.CHILD_REMOVED, e, t);
    }),
    (Xc.childChangedChange = function (t, e, n) {
      return new Xc(Xc.CHILD_CHANGED, e, t, n);
    }),
    (Xc.childMovedChange = function (t, e) {
      return new Xc(Xc.CHILD_MOVED, e, t);
    }),
    (Xc.CHILD_ADDED = 'child_added'),
    (Xc.CHILD_REMOVED = 'child_removed'),
    (Xc.CHILD_CHANGED = 'child_changed'),
    (Xc.CHILD_MOVED = 'child_moved'),
    (Xc.VALUE = 'value'),
    Xc);
  function Xc(t, e, n, r, i) {
    (this.type = t),
      (this.snapshotNode = e),
      (this.childName = n),
      (this.oldSnap = r),
      (this.prevName = i);
  }
  var Jc =
    (($c.prototype.updateChild = function (t, e, n, r, i, o) {
      ko(
        t.isIndexed(this.index_),
        'A node must be indexed if only a child is updated'
      );
      var s = t.getImmediateChild(e);
      return s.getChild(r).equals(n.getChild(r)) && s.isEmpty() === n.isEmpty()
        ? t
        : (null != o &&
            (n.isEmpty()
              ? t.hasChild(e)
                ? o.trackChildChange(Yc.childRemovedChange(e, s))
                : ko(
                    t.isLeafNode(),
                    'A child remove without an old child only makes sense on a leaf node'
                  )
              : s.isEmpty()
              ? o.trackChildChange(Yc.childAddedChange(e, n))
              : o.trackChildChange(Yc.childChangedChange(e, n, s))),
          t.isLeafNode() && n.isEmpty()
            ? t
            : t.updateImmediateChild(e, n).withIndex(this.index_));
    }),
    ($c.prototype.updateFullNode = function (r, n, i) {
      return (
        null != i &&
          (r.isLeafNode() ||
            r.forEachChild(Au, function (t, e) {
              n.hasChild(t) || i.trackChildChange(Yc.childRemovedChange(t, e));
            }),
          n.isLeafNode() ||
            n.forEachChild(Au, function (t, e) {
              var n;
              r.hasChild(t)
                ? (n = r.getImmediateChild(t)).equals(e) ||
                  i.trackChildChange(Yc.childChangedChange(t, e, n))
                : i.trackChildChange(Yc.childAddedChange(t, e));
            })),
        n.withIndex(this.index_)
      );
    }),
    ($c.prototype.updatePriority = function (t, e) {
      return t.isEmpty() ? Qu.EMPTY_NODE : t.updatePriority(e);
    }),
    ($c.prototype.filtersNodes = function () {
      return !1;
    }),
    ($c.prototype.getIndexedFilter = function () {
      return this;
    }),
    ($c.prototype.getIndex = function () {
      return this.index_;
    }),
    $c);
  function $c(t) {
    this.index_ = t;
  }
  var Zc =
    ((th.prototype.trackChildChange = function (t) {
      var e = t.type,
        n = t.childName;
      ko(
        e === Yc.CHILD_ADDED ||
          e === Yc.CHILD_CHANGED ||
          e === Yc.CHILD_REMOVED,
        'Only child changes supported for tracking'
      ),
        ko(
          '.priority' !== n,
          'Only non-priority child changes can be tracked.'
        );
      var r = this.changeMap.get(n);
      if (r) {
        var i = r.type;
        if (e === Yc.CHILD_ADDED && i === Yc.CHILD_REMOVED)
          this.changeMap.set(
            n,
            Yc.childChangedChange(n, t.snapshotNode, r.snapshotNode)
          );
        else if (e === Yc.CHILD_REMOVED && i === Yc.CHILD_ADDED)
          this.changeMap.delete(n);
        else if (e === Yc.CHILD_REMOVED && i === Yc.CHILD_CHANGED)
          this.changeMap.set(n, Yc.childRemovedChange(n, r.oldSnap));
        else if (e === Yc.CHILD_CHANGED && i === Yc.CHILD_ADDED)
          this.changeMap.set(n, Yc.childAddedChange(n, t.snapshotNode));
        else {
          if (e !== Yc.CHILD_CHANGED || i !== Yc.CHILD_CHANGED)
            throw Ro(
              'Illegal combination of changes: ' + t + ' occurred after ' + r
            );
          this.changeMap.set(
            n,
            Yc.childChangedChange(n, t.snapshotNode, r.oldSnap)
          );
        }
      } else this.changeMap.set(n, t);
    }),
    (th.prototype.getChanges = function () {
      return Array.from(this.changeMap.values());
    }),
    th);
  function th() {
    this.changeMap = new Map();
  }
  function eh() {}
  var nh = new ((eh.prototype.getCompleteChild = function (t) {
      return null;
    }),
    (eh.prototype.getChildAfterChild = function (t, e, n) {
      return null;
    }),
    eh)(),
    rh =
      ((ih.prototype.getCompleteChild = function (t) {
        var e = this.viewCache_.getEventCache();
        if (e.isCompleteForChild(t)) return e.getNode().getImmediateChild(t);
        e =
          null != this.optCompleteServerCache_
            ? new Hc(this.optCompleteServerCache_, !0, !1)
            : this.viewCache_.getServerCache();
        return this.writes_.calcCompleteChild(t, e);
      }),
      (ih.prototype.getChildAfterChild = function (t, e, n) {
        var r =
            null != this.optCompleteServerCache_
              ? this.optCompleteServerCache_
              : this.viewCache_.getCompleteServerSnap(),
          t = this.writes_.calcIndexedSlice(r, e, 1, n, t);
        return 0 === t.length ? null : t[0];
      }),
      ih);
  function ih(t, e, n) {
    void 0 === n && (n = null),
      (this.writes_ = t),
      (this.viewCache_ = e),
      (this.optCompleteServerCache_ = n);
  }
  var oh = function (t, e) {
      (this.viewCache = t), (this.changes = e);
    },
    sh =
      ((ah.prototype.assertIndexed = function (t) {
        ko(
          t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),
          'Event snap not indexed'
        ),
          ko(
            t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),
            'Server snap not indexed'
          );
      }),
      (ah.prototype.applyOperation = function (t, e, n, r) {
        var i = new Zc();
        if (e.type === kc.OVERWRITE)
          var o = e,
            s = o.source.fromUser
              ? this.applyUserOverwrite_(t, o.path, o.snap, n, r, i)
              : (ko(o.source.fromServer, 'Unknown source.'),
                (a =
                  o.source.tagged ||
                  (t.getServerCache().isFiltered() && !o.path.isEmpty())),
                this.applyServerOverwrite_(t, o.path, o.snap, n, r, a, i));
        else if (e.type === kc.MERGE) {
          o = e;
          s = o.source.fromUser
            ? this.applyUserMerge_(t, o.path, o.children, n, r, i)
            : (ko(o.source.fromServer, 'Unknown source.'),
              (a = o.source.tagged || t.getServerCache().isFiltered()),
              this.applyServerMerge_(t, o.path, o.children, n, r, a, i));
        } else if (e.type === kc.ACK_USER_WRITE) {
          var a = e;
          s = a.revert
            ? this.revertUserWrite_(t, a.path, n, r, i)
            : this.ackUserWrite_(t, a.path, a.affectedTree, n, r, i);
        } else {
          if (e.type !== kc.LISTEN_COMPLETE)
            throw Ro('Unknown operation type: ' + e.type);
          s = this.listenComplete_(t, e.path, n, i);
        }
        i = i.getChanges();
        return ah.maybeAddValueEvent_(t, s, i), new oh(s, i);
      }),
      (ah.maybeAddValueEvent_ = function (t, e, n) {
        var r,
          i,
          o = e.getEventCache();
        o.isFullyInitialized() &&
          ((r = o.getNode().isLeafNode() || o.getNode().isEmpty()),
          (i = t.getCompleteEventSnap()),
          (0 < n.length ||
            !t.getEventCache().isFullyInitialized() ||
            (r && !o.getNode().equals(i)) ||
            !o.getNode().getPriority().equals(i.getPriority())) &&
            n.push(Yc.valueChange(e.getCompleteEventSnap())));
      }),
      (ah.prototype.generateEventCacheAfterServerEvent_ = function (
        t,
        e,
        n,
        r,
        i
      ) {
        var o = t.getEventCache();
        if (null != n.shadowingWrite(e)) return t;
        var s,
          a,
          u,
          c,
          h = void 0,
          l = void 0;
        return (
          (h = e.isEmpty()
            ? (ko(
                t.getServerCache().isFullyInitialized(),
                'If change path is empty, we must have complete server data'
              ),
              t.getServerCache().isFiltered()
                ? ((s =
                    (s = t.getCompleteServerSnap()) instanceof Qu
                      ? s
                      : Qu.EMPTY_NODE),
                  (s = n.calcCompleteEventChildren(s)),
                  this.filter_.updateFullNode(
                    t.getEventCache().getNode(),
                    s,
                    i
                  ))
                : ((a = n.calcCompleteEventCache(t.getCompleteServerSnap())),
                  this.filter_.updateFullNode(
                    t.getEventCache().getNode(),
                    a,
                    i
                  )))
            : '.priority' === (a = e.getFront())
            ? (ko(
                1 === e.getLength(),
                "Can't have a priority with additional path components"
              ),
              (u = o.getNode()),
              (l = t.getServerCache().getNode()),
              null != (c = n.calcEventCacheAfterServerOverwrite(e, u, l))
                ? this.filter_.updatePriority(u, c)
                : o.getNode())
            : ((u = e.popFront()),
              (c = void 0),
              null !=
              (c = o.isCompleteForChild(a)
                ? ((l = t.getServerCache().getNode()),
                  null !=
                  (l = n.calcEventCacheAfterServerOverwrite(e, o.getNode(), l))
                    ? o.getNode().getImmediateChild(a).updateChild(u, l)
                    : o.getNode().getImmediateChild(a))
                : n.calcCompleteChild(a, t.getServerCache()))
                ? this.filter_.updateChild(o.getNode(), a, c, u, r, i)
                : o.getNode())),
          t.updateEventSnap(
            h,
            o.isFullyInitialized() || e.isEmpty(),
            this.filter_.filtersNodes()
          )
        );
      }),
      (ah.prototype.applyServerOverwrite_ = function (t, e, n, r, i, o, s) {
        var a = t.getServerCache(),
          u = o ? this.filter_ : this.filter_.getIndexedFilter();
        if (e.isEmpty()) h = u.updateFullNode(a.getNode(), n, null);
        else if (u.filtersNodes() && !a.isFiltered())
          var c = a.getNode().updateChild(e, n),
            h = u.updateFullNode(a.getNode(), c, null);
        else {
          o = e.getFront();
          if (!a.isCompleteForPath(e) && 1 < e.getLength()) return t;
          (c = e.popFront()),
            (n = a.getNode().getImmediateChild(o).updateChild(c, n));
          h =
            '.priority' === o
              ? u.updatePriority(a.getNode(), n)
              : u.updateChild(a.getNode(), o, n, c, nh, null);
        }
        (u = t.updateServerSnap(
          h,
          a.isFullyInitialized() || e.isEmpty(),
          u.filtersNodes()
        )),
          (i = new rh(r, u, i));
        return this.generateEventCacheAfterServerEvent_(u, e, r, i, s);
      }),
      (ah.prototype.applyUserOverwrite_ = function (t, e, n, r, i, o) {
        var s,
          a,
          u = t.getEventCache(),
          c = new rh(r, t, i);
        return e.isEmpty()
          ? ((a = this.filter_.updateFullNode(
              t.getEventCache().getNode(),
              n,
              o
            )),
            t.updateEventSnap(a, !0, this.filter_.filtersNodes()))
          : '.priority' === (s = e.getFront())
          ? ((a = this.filter_.updatePriority(t.getEventCache().getNode(), n)),
            t.updateEventSnap(a, u.isFullyInitialized(), u.isFiltered()))
          : ((r = e.popFront()),
            (i = u.getNode().getImmediateChild(s)),
            (a = void 0),
            (a = r.isEmpty()
              ? n
              : null != (e = c.getCompleteChild(s))
              ? '.priority' === r.getBack() && e.getChild(r.parent()).isEmpty()
                ? e
                : e.updateChild(r, n)
              : Qu.EMPTY_NODE),
            i.equals(a)
              ? t
              : ((o = this.filter_.updateChild(u.getNode(), s, a, r, c, o)),
                t.updateEventSnap(
                  o,
                  u.isFullyInitialized(),
                  this.filter_.filtersNodes()
                )));
      }),
      (ah.cacheHasChild_ = function (t, e) {
        return t.getEventCache().isCompleteForChild(e);
      }),
      (ah.prototype.applyUserMerge_ = function (n, r, t, i, o, s) {
        var a = this,
          u = n;
        return (
          t.foreach(function (t, e) {
            t = r.child(t);
            ah.cacheHasChild_(n, t.getFront()) &&
              (u = a.applyUserOverwrite_(u, t, e, i, o, s));
          }),
          t.foreach(function (t, e) {
            t = r.child(t);
            ah.cacheHasChild_(n, t.getFront()) ||
              (u = a.applyUserOverwrite_(u, t, e, i, o, s));
          }),
          u
        );
      }),
      (ah.prototype.applyMerge_ = function (n, t) {
        return (
          t.foreach(function (t, e) {
            n = n.updateChild(t, e);
          }),
          n
        );
      }),
      (ah.prototype.applyServerMerge_ = function (r, t, e, i, o, s, a) {
        var u = this;
        if (
          r.getServerCache().getNode().isEmpty() &&
          !r.getServerCache().isFullyInitialized()
        )
          return r;
        var c = r,
          e = t.isEmpty() ? e : Fc.Empty.setTree(t, e),
          h = r.getServerCache().getNode();
        return (
          e.children.inorderTraversal(function (t, e) {
            var n;
            h.hasChild(t) &&
              ((n = r.getServerCache().getNode().getImmediateChild(t)),
              (e = u.applyMerge_(n, e)),
              (c = u.applyServerOverwrite_(c, new Ra(t), e, i, o, s, a)));
          }),
          e.children.inorderTraversal(function (t, e) {
            var n =
              !r.getServerCache().isCompleteForChild(t) && null == e.value;
            h.hasChild(t) ||
              n ||
              ((n = r.getServerCache().getNode().getImmediateChild(t)),
              (e = u.applyMerge_(n, e)),
              (c = u.applyServerOverwrite_(c, new Ra(t), e, i, o, s, a)));
          }),
          c
        );
      }),
      (ah.prototype.ackUserWrite_ = function (t, r, e, n, i, o) {
        if (null != n.shadowingWrite(r)) return t;
        var s = t.getServerCache().isFiltered(),
          a = t.getServerCache();
        if (null != e.value) {
          if ((r.isEmpty() && a.isFullyInitialized()) || a.isCompleteForPath(r))
            return this.applyServerOverwrite_(
              t,
              r,
              a.getNode().getChild(r),
              n,
              i,
              s,
              o
            );
          if (r.isEmpty()) {
            var u = Fc.Empty;
            return (
              a.getNode().forEachChild(mu, function (t, e) {
                u = u.set(new Ra(t), e);
              }),
              this.applyServerMerge_(t, r, u, n, i, s, o)
            );
          }
          return t;
        }
        var c = Fc.Empty;
        return (
          e.foreach(function (t, e) {
            var n = r.child(t);
            a.isCompleteForPath(n) && (c = c.set(t, a.getNode().getChild(n)));
          }),
          this.applyServerMerge_(t, r, c, n, i, s, o)
        );
      }),
      (ah.prototype.listenComplete_ = function (t, e, n, r) {
        var i = t.getServerCache(),
          i = t.updateServerSnap(
            i.getNode(),
            i.isFullyInitialized() || e.isEmpty(),
            i.isFiltered()
          );
        return this.generateEventCacheAfterServerEvent_(i, e, n, nh, r);
      }),
      (ah.prototype.revertUserWrite_ = function (t, e, n, r, i) {
        var o;
        if (null != n.shadowingWrite(e)) return t;
        var s,
          a,
          u = new rh(n, t, r),
          c = t.getEventCache().getNode(),
          r = void 0;
        return (
          e.isEmpty() || '.priority' === e.getFront()
            ? ((a = void 0),
              (a = t.getServerCache().isFullyInitialized()
                ? n.calcCompleteEventCache(t.getCompleteServerSnap())
                : ((s = t.getServerCache().getNode()),
                  ko(
                    s instanceof Qu,
                    'serverChildren would be complete if leaf node'
                  ),
                  n.calcCompleteEventChildren(s))),
              (r = this.filter_.updateFullNode(c, a, i)))
            : ((s = e.getFront()),
              null == (a = n.calcCompleteChild(s, t.getServerCache())) &&
                t.getServerCache().isCompleteForChild(s) &&
                (a = c.getImmediateChild(s)),
              (r =
                null != a
                  ? this.filter_.updateChild(c, s, a, e.popFront(), u, i)
                  : t.getEventCache().getNode().hasChild(s)
                  ? this.filter_.updateChild(
                      c,
                      s,
                      Qu.EMPTY_NODE,
                      e.popFront(),
                      u,
                      i
                    )
                  : c).isEmpty() &&
                t.getServerCache().isFullyInitialized() &&
                (o = n.calcCompleteEventCache(
                  t.getCompleteServerSnap()
                )).isLeafNode() &&
                (r = this.filter_.updateFullNode(r, o, i))),
          (o =
            t.getServerCache().isFullyInitialized() ||
            null != n.shadowingWrite(Ra.Empty)),
          t.updateEventSnap(r, o, this.filter_.filtersNodes())
        );
      }),
      ah);
  function ah(t) {
    this.filter_ = t;
  }
  var uh =
    ((ch.prototype.generateEventsForChanges = function (t, e, n) {
      var r = this,
        i = [],
        o = [];
      return (
        t.forEach(function (t) {
          t.type === Yc.CHILD_CHANGED &&
            r.index_.indexedValueChanged(t.oldSnap, t.snapshotNode) &&
            o.push(Yc.childMovedChange(t.childName, t.snapshotNode));
        }),
        this.generateEventsForType_(i, Yc.CHILD_REMOVED, t, n, e),
        this.generateEventsForType_(i, Yc.CHILD_ADDED, t, n, e),
        this.generateEventsForType_(i, Yc.CHILD_MOVED, o, n, e),
        this.generateEventsForType_(i, Yc.CHILD_CHANGED, t, n, e),
        this.generateEventsForType_(i, Yc.VALUE, t, n, e),
        i
      );
    }),
    (ch.prototype.generateEventsForType_ = function (r, e, t, i, o) {
      var s = this,
        t = t.filter(function (t) {
          return t.type === e;
        });
      t.sort(this.compareChanges_.bind(this)),
        t.forEach(function (e) {
          var n = s.materializeSingleChange_(e, o);
          i.forEach(function (t) {
            t.respondsTo(e.type) && r.push(t.createEvent(n, s.query_));
          });
        });
    }),
    (ch.prototype.materializeSingleChange_ = function (t, e) {
      return (
        'value' === t.type ||
          'child_removed' === t.type ||
          (t.prevName = e.getPredecessorChildName(
            t.childName,
            t.snapshotNode,
            this.index_
          )),
        t
      );
    }),
    (ch.prototype.compareChanges_ = function (t, e) {
      if (null == t.childName || null == e.childName)
        throw Ro('Should only compare child_ events.');
      (t = new hu(t.childName, t.snapshotNode)),
        (e = new hu(e.childName, e.snapshotNode));
      return this.index_.compare(t, e);
    }),
    ch);
  function ch(t) {
    (this.query_ = t), (this.index_ = this.query_.getQueryParams().getIndex());
  }
  var hh,
    lh =
      ((fh.prototype.getQuery = function () {
        return this.query_;
      }),
      (fh.prototype.getServerCache = function () {
        return this.viewCache_.getServerCache().getNode();
      }),
      (fh.prototype.getCompleteServerCache = function (t) {
        var e = this.viewCache_.getCompleteServerSnap();
        return e &&
          (this.query_.getQueryParams().loadsAllData() ||
            (!t.isEmpty() && !e.getImmediateChild(t.getFront()).isEmpty()))
          ? e.getChild(t)
          : null;
      }),
      (fh.prototype.isEmpty = function () {
        return 0 === this.eventRegistrations_.length;
      }),
      (fh.prototype.addEventRegistration = function (t) {
        this.eventRegistrations_.push(t);
      }),
      (fh.prototype.removeEventRegistration = function (t, e) {
        var n,
          r = [];
        if (
          (e &&
            (ko(null == t, 'A cancel should cancel all event registrations.'),
            (n = this.query_.path),
            this.eventRegistrations_.forEach(function (t) {
              t = t.createCancelEvent(e, n);
              t && r.push(t);
            })),
          t)
        ) {
          for (var i = [], o = 0; o < this.eventRegistrations_.length; ++o) {
            var s = this.eventRegistrations_[o];
            if (s.matches(t)) {
              if (t.hasAnyCallback()) {
                i = i.concat(this.eventRegistrations_.slice(o + 1));
                break;
              }
            } else i.push(s);
          }
          this.eventRegistrations_ = i;
        } else this.eventRegistrations_ = [];
        return r;
      }),
      (fh.prototype.applyOperation = function (t, e, n) {
        t.type === kc.MERGE &&
          null !== t.source.queryId &&
          (ko(
            this.viewCache_.getCompleteServerSnap(),
            'We should always have a full cache before handling merges'
          ),
          ko(
            this.viewCache_.getCompleteEventSnap(),
            'Missing event cache, even though we have a server cache'
          ));
        var r = this.viewCache_,
          n = this.processor_.applyOperation(r, t, e, n);
        return (
          this.processor_.assertIndexed(n.viewCache),
          ko(
            n.viewCache.getServerCache().isFullyInitialized() ||
              !r.getServerCache().isFullyInitialized(),
            'Once a server snap is complete, it should never go back'
          ),
          (this.viewCache_ = n.viewCache),
          this.generateEventsForChanges_(
            n.changes,
            n.viewCache.getEventCache().getNode(),
            null
          )
        );
      }),
      (fh.prototype.getInitialEvents = function (t) {
        var e = this.viewCache_.getEventCache(),
          n = [];
        return (
          e.getNode().isLeafNode() ||
            e.getNode().forEachChild(Au, function (t, e) {
              n.push(Yc.childAddedChange(t, e));
            }),
          e.isFullyInitialized() && n.push(Yc.valueChange(e.getNode())),
          this.generateEventsForChanges_(n, e.getNode(), t)
        );
      }),
      (fh.prototype.generateEventsForChanges_ = function (t, e, n) {
        n = n ? [n] : this.eventRegistrations_;
        return this.eventGenerator_.generateEventsForChanges(t, e, n);
      }),
      fh);
  function fh(t, e) {
    (this.query_ = t), (this.eventRegistrations_ = []);
    var n = this.query_.getQueryParams(),
      r = new Jc(n.getIndex()),
      i = n.getNodeFilter();
    this.processor_ = new sh(i);
    var o = e.getServerCache(),
      t = e.getEventCache(),
      n = r.updateFullNode(Qu.EMPTY_NODE, o.getNode(), null),
      e = i.updateFullNode(Qu.EMPTY_NODE, t.getNode(), null),
      r = new Hc(n, o.isFullyInitialized(), r.filtersNodes()),
      i = new Hc(e, t.isFullyInitialized(), i.filtersNodes());
    (this.viewCache_ = new Gc(i, r)),
      (this.eventGenerator_ = new uh(this.query_));
  }
  var ph =
    (Object.defineProperty(dh, '__referenceConstructor', {
      get: function () {
        return ko(hh, 'Reference.ts has not been loaded'), hh;
      },
      set: function (t) {
        ko(!hh, '__referenceConstructor has already been defined'), (hh = t);
      },
      enumerable: !1,
      configurable: !0
    }),
    (dh.prototype.isEmpty = function () {
      return 0 === this.views.size;
    }),
    (dh.prototype.applyOperation = function (t, e, n) {
      var r,
        i,
        o = t.source.queryId;
      if (null !== o) {
        var s = this.views.get(o);
        return (
          ko(null != s, 'SyncTree gave us an op for an invalid query.'),
          s.applyOperation(t, e, n)
        );
      }
      var a = [];
      try {
        for (
          var u = Eo(this.views.values()), c = u.next();
          !c.done;
          c = u.next()
        )
          (s = c.value), (a = a.concat(s.applyOperation(t, e, n)));
      } catch (t) {
        r = { error: t };
      } finally {
        try {
          c && !c.done && (i = u.return) && i.call(u);
        } finally {
          if (r) throw r.error;
        }
      }
      return a;
    }),
    (dh.prototype.addEventRegistration = function (t, e, n, r, i) {
      var o,
        s,
        a = t.queryIdentifier(),
        u = this.views.get(a);
      return (
        u ||
          ((s = !1),
          (s =
            !!(o = n.calcCompleteEventCache(i ? r : null)) ||
            ((o =
              r instanceof Qu ? n.calcCompleteEventChildren(r) : Qu.EMPTY_NODE),
            !1)),
          (i = new Gc(new Hc(o, s, !1), new Hc(r, i, !1))),
          (u = new lh(t, i)),
          this.views.set(a, u)),
        u.addEventRegistration(e),
        u.getInitialEvents(e)
      );
    }),
    (dh.prototype.removeEventRegistration = function (t, e, n) {
      var r,
        i,
        o = t.queryIdentifier(),
        s = [],
        a = [],
        u = this.hasCompleteView();
      if ('default' === o)
        try {
          for (
            var c = Eo(this.views.entries()), h = c.next();
            !h.done;
            h = c.next()
          ) {
            var l = Io(h.value, 2),
              f = l[0],
              p = l[1],
              a = a.concat(p.removeEventRegistration(e, n));
            p.isEmpty() &&
              (this.views.delete(f),
              p.getQuery().getQueryParams().loadsAllData() ||
                s.push(p.getQuery()));
          }
        } catch (t) {
          r = { error: t };
        } finally {
          try {
            h && !h.done && (i = c.return) && i.call(c);
          } finally {
            if (r) throw r.error;
          }
        }
      else
        (p = this.views.get(o)) &&
          ((a = a.concat(p.removeEventRegistration(e, n))),
          p.isEmpty() &&
            (this.views.delete(o),
            p.getQuery().getQueryParams().loadsAllData() ||
              s.push(p.getQuery())));
      return (
        u &&
          !this.hasCompleteView() &&
          s.push(new dh.__referenceConstructor(t.repo, t.path)),
        { removed: s, events: a }
      );
    }),
    (dh.prototype.getQueryViews = function () {
      var e,
        t,
        n = [];
      try {
        for (
          var r = Eo(this.views.values()), i = r.next();
          !i.done;
          i = r.next()
        ) {
          var o = i.value;
          o.getQuery().getQueryParams().loadsAllData() || n.push(o);
        }
      } catch (t) {
        e = { error: t };
      } finally {
        try {
          i && !i.done && (t = r.return) && t.call(r);
        } finally {
          if (e) throw e.error;
        }
      }
      return n;
    }),
    (dh.prototype.getCompleteServerCache = function (t) {
      var e,
        n,
        r = null;
      try {
        for (
          var i = Eo(this.views.values()), o = i.next();
          !o.done;
          o = i.next()
        )
          var s = o.value, r = r || s.getCompleteServerCache(t);
      } catch (t) {
        e = { error: t };
      } finally {
        try {
          o && !o.done && (n = i.return) && n.call(i);
        } finally {
          if (e) throw e.error;
        }
      }
      return r;
    }),
    (dh.prototype.viewForQuery = function (t) {
      if (t.getQueryParams().loadsAllData()) return this.getCompleteView();
      t = t.queryIdentifier();
      return this.views.get(t);
    }),
    (dh.prototype.viewExistsForQuery = function (t) {
      return null != this.viewForQuery(t);
    }),
    (dh.prototype.hasCompleteView = function () {
      return null != this.getCompleteView();
    }),
    (dh.prototype.getCompleteView = function () {
      var e, t;
      try {
        for (
          var n = Eo(this.views.values()), r = n.next();
          !r.done;
          r = n.next()
        ) {
          var i = r.value;
          if (i.getQuery().getQueryParams().loadsAllData()) return i;
        }
      } catch (t) {
        e = { error: t };
      } finally {
        try {
          r && !r.done && (t = n.return) && t.call(n);
        } finally {
          if (e) throw e.error;
        }
      }
      return null;
    }),
    dh);
  function dh() {
    this.views = new Map();
  }
  var vh =
    ((yh.prototype.addWrite = function (t, e) {
      if (t.isEmpty()) return new yh(new Fc(e));
      var n = this.writeTree_.findRootMostValueAndPath(t);
      if (null != n) {
        var r = n.path,
          i = n.value,
          n = Ra.relativePath(r, t),
          i = i.updateChild(n, e);
        return new yh(this.writeTree_.set(r, i));
      }
      e = new Fc(e);
      return new yh(this.writeTree_.setTree(t, e));
    }),
    (yh.prototype.addWrites = function (n, t) {
      var r = this;
      return (
        Ta(t, function (t, e) {
          r = r.addWrite(n.child(t), e);
        }),
        r
      );
    }),
    (yh.prototype.removeWrite = function (t) {
      return t.isEmpty()
        ? yh.Empty
        : new yh(this.writeTree_.setTree(t, Fc.Empty));
    }),
    (yh.prototype.hasCompleteWrite = function (t) {
      return null != this.getCompleteNode(t);
    }),
    (yh.prototype.getCompleteNode = function (t) {
      var e = this.writeTree_.findRootMostValueAndPath(t);
      return null != e
        ? this.writeTree_.get(e.path).getChild(Ra.relativePath(e.path, t))
        : null;
    }),
    (yh.prototype.getCompleteChildren = function () {
      var n = [],
        t = this.writeTree_.value;
      return (
        null != t
          ? t.isLeafNode() ||
            t.forEachChild(Au, function (t, e) {
              n.push(new hu(t, e));
            })
          : this.writeTree_.children.inorderTraversal(function (t, e) {
              null != e.value && n.push(new hu(t, e.value));
            }),
        n
      );
    }),
    (yh.prototype.childCompoundWrite = function (t) {
      if (t.isEmpty()) return this;
      var e = this.getCompleteNode(t);
      return new yh(null != e ? new Fc(e) : this.writeTree_.subtree(t));
    }),
    (yh.prototype.isEmpty = function () {
      return this.writeTree_.isEmpty();
    }),
    (yh.prototype.apply = function (t) {
      return (function n(r, t, i) {
        {
          if (null != t.value) return i.updateChild(r, t.value);
          var o = null;
          return (
            t.children.inorderTraversal(function (t, e) {
              '.priority' === t
                ? (ko(
                    null !== e.value,
                    'Priority writes must always be leaf nodes'
                  ),
                  (o = e.value))
                : (i = n(r.child(t), e, i));
            }),
            i.getChild(r).isEmpty() ||
              null === o ||
              (i = i.updateChild(r.child('.priority'), o)),
            i
          );
        }
      })(Ra.Empty, this.writeTree_, t);
    }),
    (yh.Empty = new yh(new Fc(null))),
    yh);
  function yh(t) {
    this.writeTree_ = t;
  }
  var gh =
    ((mh.prototype.childWrites = function (t) {
      return new bh(t, this);
    }),
    (mh.prototype.addOverwrite = function (t, e, n, r) {
      ko(n > this.lastWriteId_, 'Stacking an older write on top of newer ones'),
        void 0 === r && (r = !0),
        this.allWrites_.push({ path: t, snap: e, writeId: n, visible: r }),
        r && (this.visibleWrites_ = this.visibleWrites_.addWrite(t, e)),
        (this.lastWriteId_ = n);
    }),
    (mh.prototype.addMerge = function (t, e, n) {
      ko(n > this.lastWriteId_, 'Stacking an older merge on top of newer ones'),
        this.allWrites_.push({ path: t, children: e, writeId: n, visible: !0 }),
        (this.visibleWrites_ = this.visibleWrites_.addWrites(t, e)),
        (this.lastWriteId_ = n);
    }),
    (mh.prototype.getWrite = function (t) {
      for (var e = 0; e < this.allWrites_.length; e++) {
        var n = this.allWrites_[e];
        if (n.writeId === t) return n;
      }
      return null;
    }),
    (mh.prototype.removeWrite = function (e) {
      var n = this,
        t = this.allWrites_.findIndex(function (t) {
          return t.writeId === e;
        });
      ko(0 <= t, 'removeWrite called with nonexistent writeId.');
      var r = this.allWrites_[t];
      this.allWrites_.splice(t, 1);
      for (
        var i = r.visible, o = !1, s = this.allWrites_.length - 1;
        i && 0 <= s;

      ) {
        var a = this.allWrites_[s];
        a.visible &&
          (t <= s && this.recordContainsPath_(a, r.path)
            ? (i = !1)
            : r.path.contains(a.path) && (o = !0)),
          s--;
      }
      return (
        !!i &&
        (o
          ? this.resetTree_()
          : r.snap
          ? (this.visibleWrites_ = this.visibleWrites_.removeWrite(r.path))
          : Ta(r.children, function (t) {
              n.visibleWrites_ = n.visibleWrites_.removeWrite(r.path.child(t));
            }),
        !0)
      );
    }),
    (mh.prototype.getCompleteWriteData = function (t) {
      return this.visibleWrites_.getCompleteNode(t);
    }),
    (mh.prototype.calcCompleteEventCache = function (e, t, n, r) {
      if (n || r) {
        var i = this.visibleWrites_.childCompoundWrite(e);
        if (!r && i.isEmpty()) return t;
        if (r || null != t || i.hasCompleteWrite(Ra.Empty)) {
          var o = mh.layerTree_(
              this.allWrites_,
              function (t) {
                return (
                  (t.visible || r) &&
                  (!n || !~n.indexOf(t.writeId)) &&
                  (t.path.contains(e) || e.contains(t.path))
                );
              },
              e
            ),
            s = t || Qu.EMPTY_NODE;
          return o.apply(s);
        }
        return null;
      }
      o = this.visibleWrites_.getCompleteNode(e);
      if (null != o) return o;
      o = this.visibleWrites_.childCompoundWrite(e);
      if (o.isEmpty()) return t;
      if (null != t || o.hasCompleteWrite(Ra.Empty)) {
        var s = t || Qu.EMPTY_NODE;
        return o.apply(s);
      }
      return null;
    }),
    (mh.prototype.calcCompleteEventChildren = function (t, e) {
      var n = Qu.EMPTY_NODE,
        r = this.visibleWrites_.getCompleteNode(t);
      if (r)
        return (
          r.isLeafNode() ||
            r.forEachChild(Au, function (t, e) {
              n = n.updateImmediateChild(t, e);
            }),
          n
        );
      if (e) {
        var i = this.visibleWrites_.childCompoundWrite(t);
        return (
          e.forEachChild(Au, function (t, e) {
            e = i.childCompoundWrite(new Ra(t)).apply(e);
            n = n.updateImmediateChild(t, e);
          }),
          i.getCompleteChildren().forEach(function (t) {
            n = n.updateImmediateChild(t.name, t.node);
          }),
          n
        );
      }
      return (
        this.visibleWrites_
          .childCompoundWrite(t)
          .getCompleteChildren()
          .forEach(function (t) {
            n = n.updateImmediateChild(t.name, t.node);
          }),
        n
      );
    }),
    (mh.prototype.calcEventCacheAfterServerOverwrite = function (t, e, n, r) {
      ko(n || r, 'Either existingEventSnap or existingServerSnap must exist');
      t = t.child(e);
      if (this.visibleWrites_.hasCompleteWrite(t)) return null;
      t = this.visibleWrites_.childCompoundWrite(t);
      return t.isEmpty() ? r.getChild(e) : t.apply(r.getChild(e));
    }),
    (mh.prototype.calcCompleteChild = function (t, e, n) {
      var r = t.child(e),
        t = this.visibleWrites_.getCompleteNode(r);
      return null != t
        ? t
        : n.isCompleteForChild(e)
        ? this.visibleWrites_
            .childCompoundWrite(r)
            .apply(n.getNode().getImmediateChild(e))
        : null;
    }),
    (mh.prototype.shadowingWrite = function (t) {
      return this.visibleWrites_.getCompleteNode(t);
    }),
    (mh.prototype.calcIndexedSlice = function (t, e, n, r, i, o) {
      var s,
        a = this.visibleWrites_.childCompoundWrite(t),
        t = a.getCompleteNode(Ra.Empty);
      if (null != t) s = t;
      else {
        if (null == e) return [];
        s = a.apply(e);
      }
      if ((s = s.withIndex(o)).isEmpty() || s.isLeafNode()) return [];
      for (
        var u = [],
          c = o.getCompare(),
          h = i ? s.getReverseIteratorFrom(n, o) : s.getIteratorFrom(n, o),
          l = h.getNext();
        l && u.length < r;

      )
        0 !== c(l, n) && u.push(l), (l = h.getNext());
      return u;
    }),
    (mh.prototype.recordContainsPath_ = function (t, e) {
      if (t.snap) return t.path.contains(e);
      for (var n in t.children)
        if (t.children.hasOwnProperty(n) && t.path.child(n).contains(e))
          return !0;
      return !1;
    }),
    (mh.prototype.resetTree_ = function () {
      (this.visibleWrites_ = mh.layerTree_(
        this.allWrites_,
        mh.DefaultFilter_,
        Ra.Empty
      )),
        0 < this.allWrites_.length
          ? (this.lastWriteId_ = this.allWrites_[
              this.allWrites_.length - 1
            ].writeId)
          : (this.lastWriteId_ = -1);
    }),
    (mh.DefaultFilter_ = function (t) {
      return t.visible;
    }),
    (mh.layerTree_ = function (t, e, n) {
      for (var r = vh.Empty, i = 0; i < t.length; ++i) {
        var o = t[i];
        if (e(o)) {
          var s = o.path,
            a = void 0;
          if (o.snap)
            n.contains(s)
              ? ((a = Ra.relativePath(n, s)), (r = r.addWrite(a, o.snap)))
              : s.contains(n) &&
                ((a = Ra.relativePath(s, n)),
                (r = r.addWrite(Ra.Empty, o.snap.getChild(a))));
          else {
            if (!o.children)
              throw Ro('WriteRecord should have .snap or .children');
            n.contains(s)
              ? ((a = Ra.relativePath(n, s)), (r = r.addWrites(a, o.children)))
              : s.contains(n) &&
                ((a = Ra.relativePath(s, n)).isEmpty()
                  ? (r = r.addWrites(Ra.Empty, o.children))
                  : (o = es(o.children, a.getFront())) &&
                    ((a = o.getChild(a.popFront())),
                    (r = r.addWrite(Ra.Empty, a))));
          }
        }
      }
      return r;
    }),
    mh);
  function mh() {
    (this.visibleWrites_ = vh.Empty),
      (this.allWrites_ = []),
      (this.lastWriteId_ = -1);
  }
  var bh =
    ((_h.prototype.calcCompleteEventCache = function (t, e, n) {
      return this.writeTree_.calcCompleteEventCache(this.treePath_, t, e, n);
    }),
    (_h.prototype.calcCompleteEventChildren = function (t) {
      return this.writeTree_.calcCompleteEventChildren(this.treePath_, t);
    }),
    (_h.prototype.calcEventCacheAfterServerOverwrite = function (t, e, n) {
      return this.writeTree_.calcEventCacheAfterServerOverwrite(
        this.treePath_,
        t,
        e,
        n
      );
    }),
    (_h.prototype.shadowingWrite = function (t) {
      return this.writeTree_.shadowingWrite(this.treePath_.child(t));
    }),
    (_h.prototype.calcIndexedSlice = function (t, e, n, r, i) {
      return this.writeTree_.calcIndexedSlice(this.treePath_, t, e, n, r, i);
    }),
    (_h.prototype.calcCompleteChild = function (t, e) {
      return this.writeTree_.calcCompleteChild(this.treePath_, t, e);
    }),
    (_h.prototype.child = function (t) {
      return new _h(this.treePath_.child(t), this.writeTree_);
    }),
    _h);
  function _h(t, e) {
    (this.treePath_ = t), (this.writeTree_ = e);
  }
  var wh =
    ((Eh.prototype.applyUserOverwrite = function (t, e, n, r) {
      return (
        this.pendingWriteTree_.addOverwrite(t, e, n, r),
        r ? this.applyOperationToSyncPoints_(new qc(Pc.User, t, e)) : []
      );
    }),
    (Eh.prototype.applyUserMerge = function (t, e, n) {
      this.pendingWriteTree_.addMerge(t, e, n);
      e = Fc.fromObject(e);
      return this.applyOperationToSyncPoints_(new Wc(Pc.User, t, e));
    }),
    (Eh.prototype.ackUserWrite = function (t, e) {
      void 0 === e && (e = !1);
      var n = this.pendingWriteTree_.getWrite(t);
      if (this.pendingWriteTree_.removeWrite(t)) {
        var r = Fc.Empty;
        return (
          null != n.snap
            ? (r = r.set(Ra.Empty, !0))
            : Ta(n.children, function (t, e) {
                r = r.set(new Ra(t), e);
              }),
          this.applyOperationToSyncPoints_(new Lc(n.path, r, e))
        );
      }
      return [];
    }),
    (Eh.prototype.applyServerOverwrite = function (t, e) {
      return this.applyOperationToSyncPoints_(new qc(Pc.Server, t, e));
    }),
    (Eh.prototype.applyServerMerge = function (t, e) {
      e = Fc.fromObject(e);
      return this.applyOperationToSyncPoints_(new Wc(Pc.Server, t, e));
    }),
    (Eh.prototype.applyListenComplete = function (t) {
      return this.applyOperationToSyncPoints_(new jc(Pc.Server, t));
    }),
    (Eh.prototype.applyTaggedQueryOverwrite = function (t, e, n) {
      var r = this.queryKeyForTag_(n);
      if (null == r) return [];
      (n = Eh.parseQueryKey_(r)),
        (r = n.path),
        (n = n.queryId),
        (t = Ra.relativePath(r, t)),
        (e = new qc(Pc.forServerTaggedQuery(n), t, e));
      return this.applyTaggedOperation_(r, e);
    }),
    (Eh.prototype.applyTaggedQueryMerge = function (t, e, n) {
      var r = this.queryKeyForTag_(n);
      if (r) {
        (n = Eh.parseQueryKey_(r)),
          (r = n.path),
          (n = n.queryId),
          (t = Ra.relativePath(r, t)),
          (e = Fc.fromObject(e)),
          (e = new Wc(Pc.forServerTaggedQuery(n), t, e));
        return this.applyTaggedOperation_(r, e);
      }
      return [];
    }),
    (Eh.prototype.applyTaggedListenComplete = function (t, e) {
      var n = this.queryKeyForTag_(e);
      if (n) {
        (e = Eh.parseQueryKey_(n)),
          (n = e.path),
          (e = e.queryId),
          (t = Ra.relativePath(n, t)),
          (t = new jc(Pc.forServerTaggedQuery(e), t));
        return this.applyTaggedOperation_(n, t);
      }
      return [];
    }),
    (Eh.prototype.addEventRegistration = function (t, e) {
      var n = t.path,
        r = null,
        i = !1;
      this.syncPointTree_.foreachOnPath(n, function (t, e) {
        t = Ra.relativePath(t, n);
        (r = r || e.getCompleteServerCache(t)), (i = i || e.hasCompleteView());
      });
      var o = this.syncPointTree_.get(n);
      o
        ? ((i = i || o.hasCompleteView()),
          (r = r || o.getCompleteServerCache(Ra.Empty)))
        : ((o = new ph()),
          (this.syncPointTree_ = this.syncPointTree_.set(n, o))),
        null != r
          ? (c = !0)
          : ((c = !1),
            (r = Qu.EMPTY_NODE),
            this.syncPointTree_.subtree(n).foreachChild(function (t, e) {
              e = e.getCompleteServerCache(Ra.Empty);
              e && (r = r.updateImmediateChild(t, e));
            }));
      var s,
        a = o.viewExistsForQuery(t);
      a ||
        t.getQueryParams().loadsAllData() ||
        ((u = Eh.makeQueryKey_(t)),
        ko(
          !this.queryToTagMap.has(u),
          'View does not exist, but we have a tag'
        ),
        (s = Eh.getNextQueryTag_()),
        this.queryToTagMap.set(u, s),
        this.tagToQueryMap.set(s, u));
      var u = this.pendingWriteTree_.childWrites(n),
        c = o.addEventRegistration(t, e, u, r, c);
      return (
        a ||
          i ||
          ((o = o.viewForQuery(t)), (c = c.concat(this.setupListener_(t, o)))),
        c
      );
    }),
    (Eh.prototype.removeEventRegistration = function (t, e, n) {
      var r = this,
        i = t.path,
        o = this.syncPointTree_.get(i),
        s = [];
      if (o && ('default' === t.queryIdentifier() || o.viewExistsForQuery(t))) {
        var a = o.removeEventRegistration(t, e, n);
        o.isEmpty() && (this.syncPointTree_ = this.syncPointTree_.remove(i));
        (e = a.removed),
          (s = a.events),
          (o =
            -1 !==
            e.findIndex(function (t) {
              return t.getQueryParams().loadsAllData();
            })),
          (a = this.syncPointTree_.findOnPath(i, function (t, e) {
            return e.hasCompleteView();
          }));
        if (o && !a) {
          i = this.syncPointTree_.subtree(i);
          if (!i.isEmpty())
            for (
              var u = this.collectDistinctViewsForSubTree_(i), c = 0;
              c < u.length;
              ++c
            ) {
              var h = u[c],
                l = h.getQuery(),
                h = this.createListenerForView_(h);
              this.listenProvider_.startListening(
                Eh.queryForListening_(l),
                this.tagForQuery_(l),
                h.hashFn,
                h.onComplete
              );
            }
        }
        !a &&
          0 < e.length &&
          !n &&
          (o
            ? this.listenProvider_.stopListening(Eh.queryForListening_(t), null)
            : e.forEach(function (t) {
                var e = r.queryToTagMap.get(Eh.makeQueryKey_(t));
                r.listenProvider_.stopListening(Eh.queryForListening_(t), e);
              })),
          this.removeTags_(e);
      }
      return s;
    }),
    (Eh.prototype.calcCompleteEventCache = function (n, t) {
      var e = this.pendingWriteTree_,
        r = this.syncPointTree_.findOnPath(n, function (t, e) {
          (t = Ra.relativePath(t, n)), (t = e.getCompleteServerCache(t));
          if (t) return t;
        });
      return e.calcCompleteEventCache(n, r, t, !0);
    }),
    (Eh.prototype.collectDistinctViewsForSubTree_ = function (t) {
      return t.fold(function (t, e, n) {
        if (e && e.hasCompleteView()) return [e.getCompleteView()];
        var r = [];
        return (
          e && (r = e.getQueryViews()),
          Ta(n, function (t, e) {
            r = r.concat(e);
          }),
          r
        );
      });
    }),
    (Eh.prototype.removeTags_ = function (t) {
      for (var e = 0; e < t.length; ++e) {
        var n,
          r = t[e];
        r.getQueryParams().loadsAllData() ||
          ((n = Eh.makeQueryKey_(r)),
          (r = this.queryToTagMap.get(n)),
          this.queryToTagMap.delete(n),
          this.tagToQueryMap.delete(r));
      }
    }),
    (Eh.queryForListening_ = function (t) {
      return t.getQueryParams().loadsAllData() &&
        !t.getQueryParams().isDefault()
        ? t.getRef()
        : t;
    }),
    (Eh.prototype.setupListener_ = function (t, e) {
      var n = t.path,
        r = this.tagForQuery_(t),
        e = this.createListenerForView_(e),
        e = this.listenProvider_.startListening(
          Eh.queryForListening_(t),
          r,
          e.hashFn,
          e.onComplete
        ),
        n = this.syncPointTree_.subtree(n);
      if (r)
        ko(
          !n.value.hasCompleteView(),
          "If we're adding a query, it shouldn't be shadowed"
        );
      else
        for (
          var i = n.fold(function (t, e, n) {
              if (!t.isEmpty() && e && e.hasCompleteView())
                return [e.getCompleteView().getQuery()];
              var r = [];
              return (
                e &&
                  (r = r.concat(
                    e.getQueryViews().map(function (t) {
                      return t.getQuery();
                    })
                  )),
                Ta(n, function (t, e) {
                  r = r.concat(e);
                }),
                r
              );
            }),
            o = 0;
          o < i.length;
          ++o
        ) {
          var s = i[o];
          this.listenProvider_.stopListening(
            Eh.queryForListening_(s),
            this.tagForQuery_(s)
          );
        }
      return e;
    }),
    (Eh.prototype.createListenerForView_ = function (t) {
      var e = this,
        n = t.getQuery(),
        r = this.tagForQuery_(n);
      return {
        hashFn: function () {
          return (t.getServerCache() || Qu.EMPTY_NODE).hash();
        },
        onComplete: function (t) {
          if ('ok' === t)
            return r
              ? e.applyTaggedListenComplete(n.path, r)
              : e.applyListenComplete(n.path);
          t = (function (t, e) {
            var n = 'Unknown Error';
            'too_big' === t
              ? (n =
                  'The data requested exceeds the maximum size that can be accessed with a single request.')
              : 'permission_denied' === t
              ? (n =
                  "Client doesn't have permission to access the desired data.")
              : 'unavailable' === t && (n = 'The service is unavailable');
            n = new Error(t + ' at ' + e.path.toString() + ': ' + n);
            return (n.code = t.toUpperCase()), n;
          })(t, n);
          return e.removeEventRegistration(n, null, t);
        }
      };
    }),
    (Eh.makeQueryKey_ = function (t) {
      return t.path.toString() + '$' + t.queryIdentifier();
    }),
    (Eh.parseQueryKey_ = function (t) {
      var e = t.indexOf('$');
      return (
        ko(-1 !== e && e < t.length - 1, 'Bad queryKey.'),
        { queryId: t.substr(e + 1), path: new Ra(t.substr(0, e)) }
      );
    }),
    (Eh.prototype.queryKeyForTag_ = function (t) {
      return this.tagToQueryMap.get(t);
    }),
    (Eh.prototype.tagForQuery_ = function (t) {
      t = Eh.makeQueryKey_(t);
      return this.queryToTagMap.get(t);
    }),
    (Eh.getNextQueryTag_ = function () {
      return Eh.nextQueryTag_++;
    }),
    (Eh.prototype.applyTaggedOperation_ = function (t, e) {
      var n = this.syncPointTree_.get(t);
      ko(n, "Missing sync point for query tag that we're tracking");
      t = this.pendingWriteTree_.childWrites(t);
      return n.applyOperation(e, t, null);
    }),
    (Eh.prototype.applyOperationToSyncPoints_ = function (t) {
      return this.applyOperationHelper_(
        t,
        this.syncPointTree_,
        null,
        this.pendingWriteTree_.childWrites(Ra.Empty)
      );
    }),
    (Eh.prototype.applyOperationHelper_ = function (t, e, n, r) {
      if (t.path.isEmpty())
        return this.applyOperationDescendantsHelper_(t, e, n, r);
      var i = e.get(Ra.Empty);
      null == n && null != i && (n = i.getCompleteServerCache(Ra.Empty));
      var o = [],
        s = t.path.getFront(),
        a = t.operationForChild(s),
        u = e.children.get(s);
      return (
        u &&
          a &&
          ((e = n ? n.getImmediateChild(s) : null),
          (s = r.child(s)),
          (o = o.concat(this.applyOperationHelper_(a, u, e, s)))),
        i && (o = o.concat(i.applyOperation(t, r, n))),
        o
      );
    }),
    (Eh.prototype.applyOperationDescendantsHelper_ = function (i, t, o, s) {
      var a = this,
        e = t.get(Ra.Empty);
      null == o && null != e && (o = e.getCompleteServerCache(Ra.Empty));
      var u = [];
      return (
        t.children.inorderTraversal(function (t, e) {
          var n = o ? o.getImmediateChild(t) : null,
            r = s.child(t),
            t = i.operationForChild(t);
          t && (u = u.concat(a.applyOperationDescendantsHelper_(t, e, n, r)));
        }),
        e && (u = u.concat(e.applyOperation(i, s, o))),
        u
      );
    }),
    (Eh.nextQueryTag_ = 1),
    Eh);
  function Eh(t) {
    (this.listenProvider_ = t),
      (this.syncPointTree_ = Fc.Empty),
      (this.pendingWriteTree_ = new gh()),
      (this.tagToQueryMap = new Map()),
      (this.queryToTagMap = new Map());
  }
  var Ih =
    ((Th.prototype.getNode = function (t) {
      return this.rootNode_.getChild(t);
    }),
    (Th.prototype.updateSnapshot = function (t, e) {
      this.rootNode_ = this.rootNode_.updateChild(t, e);
    }),
    Th);
  function Th() {
    this.rootNode_ = Qu.EMPTY_NODE;
  }
  var Sh =
    ((Ch.prototype.incrementCounter = function (t, e) {
      void 0 === e && (e = 1),
        ts(this.counters_, t) || (this.counters_[t] = 0),
        (this.counters_[t] += e);
    }),
    (Ch.prototype.get = function () {
      return Po(this.counters_);
    }),
    Ch);
  function Ch() {
    this.counters_ = {};
  }
  var Nh =
    ((Ah.getCollection = function (t) {
      t = t.toString();
      return (
        this.collections_[t] || (this.collections_[t] = new Sh()),
        this.collections_[t]
      );
    }),
    (Ah.getOrCreateReporter = function (t, e) {
      t = t.toString();
      return (
        this.reporters_[t] || (this.reporters_[t] = e()), this.reporters_[t]
      );
    }),
    (Ah.collections_ = {}),
    (Ah.reporters_ = {}),
    Ah);
  function Ah() {}
  var kh =
    ((Rh.prototype.get = function () {
      var t = this.collection_.get(),
        n = bo({}, t);
      return (
        this.last_ &&
          Ta(this.last_, function (t, e) {
            n[t] = n[t] - e;
          }),
        (this.last_ = t),
        n
      );
    }),
    Rh);
  function Rh(t) {
    (this.collection_ = t), (this.last_ = null);
  }
  var Oh =
    ((Ph.prototype.includeStat = function (t) {
      this.statsToReport_[t] = !0;
    }),
    (Ph.prototype.reportStats_ = function () {
      var n = this,
        t = this.statsListener_.get(),
        r = {},
        i = !1;
      Ta(t, function (t, e) {
        0 < e && ts(n.statsToReport_, t) && ((r[t] = e), (i = !0));
      }),
        i && this.server_.reportStats(r),
        Na(this.reportStats_.bind(this), Math.floor(2 * Math.random() * 3e5));
    }),
    Ph);
  function Ph(t, e) {
    (this.server_ = e),
      (this.statsToReport_ = {}),
      (this.statsListener_ = new kh(t));
    t = 1e4 + 2e4 * Math.random();
    Na(this.reportStats_.bind(this), Math.floor(t));
  }
  var Dh =
    ((xh.prototype.queueEvents = function (t) {
      for (var e = null, n = 0; n < t.length; n++) {
        var r = t[n],
          i = r.getPath();
        null === e ||
          i.equals(e.getPath()) ||
          (this.eventLists_.push(e), (e = null)),
          null === e && (e = new Lh(i)),
          e.add(r);
      }
      e && this.eventLists_.push(e);
    }),
    (xh.prototype.raiseEventsAtPath = function (e, t) {
      this.queueEvents(t),
        this.raiseQueuedEventsMatchingPredicate_(function (t) {
          return t.equals(e);
        });
    }),
    (xh.prototype.raiseEventsForChangedPath = function (e, t) {
      this.queueEvents(t),
        this.raiseQueuedEventsMatchingPredicate_(function (t) {
          return t.contains(e) || e.contains(t);
        });
    }),
    (xh.prototype.raiseQueuedEventsMatchingPredicate_ = function (t) {
      this.recursionDepth_++;
      for (var e = !0, n = 0; n < this.eventLists_.length; n++) {
        var r = this.eventLists_[n];
        r &&
          (t(r.getPath())
            ? (this.eventLists_[n].raise(), (this.eventLists_[n] = null))
            : (e = !1));
      }
      e && (this.eventLists_ = []), this.recursionDepth_--;
    }),
    xh);
  function xh() {
    (this.eventLists_ = []), (this.recursionDepth_ = 0);
  }
  var Lh =
    ((Mh.prototype.add = function (t) {
      this.events_.push(t);
    }),
    (Mh.prototype.raise = function () {
      for (var t = 0; t < this.events_.length; t++) {
        var e,
          n = this.events_[t];
        null !== n &&
          ((this.events_[t] = null),
          (e = n.getEventRunner()),
          ya && ma('event: ' + n.toString()),
          Ca(e));
      }
    }),
    (Mh.prototype.getPath = function () {
      return this.path_;
    }),
    Mh);
  function Mh(t) {
    (this.path_ = t), (this.events_ = []);
  }
  (Fh.prototype.trigger = function (t) {
    for (var e = [], n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];
    if (Array.isArray(this.listeners_[t]))
      for (var r = To(this.listeners_[t]), i = 0; i < r.length; i++)
        r[i].callback.apply(r[i].context, e);
  }),
    (Fh.prototype.on = function (t, e, n) {
      this.validateEventType_(t),
        (this.listeners_[t] = this.listeners_[t] || []),
        this.listeners_[t].push({ callback: e, context: n });
      t = this.getInitialEvent(t);
      t && e.apply(n, t);
    }),
    (Fh.prototype.off = function (t, e, n) {
      this.validateEventType_(t);
      for (var r = this.listeners_[t] || [], i = 0; i < r.length; i++)
        if (r[i].callback === e && (!n || n === r[i].context))
          return void r.splice(i, 1);
    }),
    (Fh.prototype.validateEventType_ = function (e) {
      ko(
        this.allowedEvents_.find(function (t) {
          return t === e;
        }),
        'Unknown event: ' + e
      );
    }),
    (dt = Fh);
  function Fh(t) {
    (this.allowedEvents_ = t),
      (this.listeners_ = {}),
      ko(Array.isArray(t) && 0 < t.length, 'Requires a non-empty array');
  }
  var Uh,
    jh =
      (mo(Vh, (Uh = dt)),
      (Vh.getInstance = function () {
        return new Vh();
      }),
      (Vh.prototype.getInitialEvent = function (t) {
        return ko('visible' === t, 'Unknown event type: ' + t), [this.visible_];
      }),
      Vh);
  function Vh() {
    var e,
      t,
      n = Uh.call(this, ['visible']) || this;
    return (
      'undefined' != typeof document &&
        void 0 !== document.addEventListener &&
        (void 0 !== document.hidden
          ? ((t = 'visibilitychange'), (e = 'hidden'))
          : void 0 !== document.mozHidden
          ? ((t = 'mozvisibilitychange'), (e = 'mozHidden'))
          : void 0 !== document.msHidden
          ? ((t = 'msvisibilitychange'), (e = 'msHidden'))
          : void 0 !== document.webkitHidden &&
            ((t = 'webkitvisibilitychange'), (e = 'webkitHidden'))),
      (n.visible_ = !0),
      t &&
        document.addEventListener(
          t,
          function () {
            var t = !document[e];
            t !== n.visible_ && ((n.visible_ = t), n.trigger('visible', t));
          },
          !1
        ),
      n
    );
  }
  var qh,
    Bh =
      (mo(Wh, (qh = dt)),
      (Wh.getInstance = function () {
        return new Wh();
      }),
      (Wh.prototype.getInitialEvent = function (t) {
        return ko('online' === t, 'Unknown event type: ' + t), [this.online_];
      }),
      (Wh.prototype.currentlyOnline = function () {
        return this.online_;
      }),
      Wh);
  function Wh() {
    var t = qh.call(this, ['online']) || this;
    return (
      (t.online_ = !0),
      'undefined' == typeof window ||
        void 0 === window.addEventListener ||
        Fo() ||
        (window.addEventListener(
          'online',
          function () {
            t.online_ || ((t.online_ = !0), t.trigger('online', !0));
          },
          !1
        ),
        window.addEventListener(
          'offline',
          function () {
            t.online_ && ((t.online_ = !1), t.trigger('online', !1));
          },
          !1
        )),
      t
    );
  }
  var Kh =
    ((Hh.prototype.closeAfter = function (t, e) {
      (this.closeAfterResponse = t),
        (this.onClose = e),
        this.closeAfterResponse < this.currentResponseNum &&
          (this.onClose(), (this.onClose = null));
    }),
    (Hh.prototype.handleResponse = function (t, e) {
      var n = this;
      this.pendingResponses[t] = e;
      for (var r = this; this.pendingResponses[this.currentResponseNum]; ) {
        if (
          'break' ===
          (function () {
            var e = r.pendingResponses[r.currentResponseNum];
            delete r.pendingResponses[r.currentResponseNum];
            for (var t = 0; t < e.length; ++t)
              !(function (t) {
                e[t] &&
                  Ca(function () {
                    n.onMessage_(e[t]);
                  });
              })(t);
            if (r.currentResponseNum === r.closeAfterResponse)
              return r.onClose && (r.onClose(), (r.onClose = null)), 'break';
            r.currentResponseNum++;
          })()
        )
          break;
      }
    }),
    Hh);
  function Hh(t) {
    (this.onMessage_ = t),
      (this.pendingResponses = []),
      (this.currentResponseNum = 0),
      (this.closeAfterResponse = -1),
      (this.onClose = null);
  }
  var zh = 'pLPCommand',
    Gh = 'pRTLPCB',
    Qh =
      ((Yh.prototype.open = function (t, e) {
        var n,
          r,
          i,
          s = this;
        (this.curSegmentNum = 0),
          (this.onDisconnect_ = e),
          (this.myPacketOrderer = new Kh(t)),
          (this.isClosed_ = !1),
          (this.connectTimeoutTimer_ = setTimeout(function () {
            s.log_('Timed out trying to connect.'),
              s.onClosed_(),
              (s.connectTimeoutTimer_ = null);
          }, Math.floor(3e4))),
          (n = function () {
            var t;
            s.isClosed_ ||
              ((s.scriptTagHolder = new Xh(
                function () {
                  for (var t = [], e = 0; e < arguments.length; e++)
                    t[e] = arguments[e];
                  var n = Io(t, 5),
                    r = n[0],
                    i = n[1],
                    o = n[2];
                  n[3], n[4];
                  if ((s.incrementIncomingBytes_(t), s.scriptTagHolder))
                    if (
                      (s.connectTimeoutTimer_ &&
                        (clearTimeout(s.connectTimeoutTimer_),
                        (s.connectTimeoutTimer_ = null)),
                      (s.everConnected_ = !0),
                      'start' === r)
                    )
                      (s.id = i), (s.password = o);
                    else {
                      if ('close' !== r)
                        throw new Error('Unrecognized command received: ' + r);
                      i
                        ? ((s.scriptTagHolder.sendNewPolls = !1),
                          s.myPacketOrderer.closeAfter(i, function () {
                            s.onClosed_();
                          }))
                        : s.onClosed_();
                    }
                },
                function () {
                  for (var t = [], e = 0; e < arguments.length; e++)
                    t[e] = arguments[e];
                  var n = Io(t, 2),
                    r = n[0],
                    n = n[1];
                  s.incrementIncomingBytes_(t),
                    s.myPacketOrderer.handleResponse(r, n);
                },
                function () {
                  s.onClosed_();
                },
                s.urlFn
              )),
              ((t = { start: 't' }).ser = Math.floor(1e8 * Math.random())),
              s.scriptTagHolder.uniqueCallbackIdentifier &&
                (t.cb = s.scriptTagHolder.uniqueCallbackIdentifier),
              (t.v = '5'),
              s.transportSessionId && (t.s = s.transportSessionId),
              s.lastSessionId && (t.ls = s.lastSessionId),
              s.applicationId && (t.p = s.applicationId),
              'undefined' != typeof location &&
                location.href &&
                -1 !== location.href.indexOf(xa) &&
                (t.r = 'f'),
              (t = s.urlFn(t)),
              s.log_('Connecting via long-poll to ' + t),
              s.scriptTagHolder.addTag(t, function () {}));
          }),
          'complete' === document.readyState
            ? n()
            : ((r = !1),
              (i = function () {
                document.body
                  ? r || ((r = !0), n())
                  : setTimeout(i, Math.floor(10));
              }),
              document.addEventListener
                ? (document.addEventListener('DOMContentLoaded', i, !1),
                  window.addEventListener('load', i, !1))
                : document.attachEvent &&
                  (document.attachEvent('onreadystatechange', function () {
                    'complete' === document.readyState && i();
                  }),
                  window.attachEvent('onload', i)));
      }),
      (Yh.prototype.start = function () {
        this.scriptTagHolder.startLongPoll(this.id, this.password),
          this.addDisconnectPingFrame(this.id, this.password);
      }),
      (Yh.forceAllow = function () {
        Yh.forceAllow_ = !0;
      }),
      (Yh.forceDisallow = function () {
        Yh.forceDisallow_ = !0;
      }),
      (Yh.isAvailable = function () {
        return (
          !!Yh.forceAllow_ ||
          !(
            Yh.forceDisallow_ ||
            'undefined' == typeof document ||
            null == document.createElement ||
            ('object' == typeof window &&
              window.chrome &&
              window.chrome.extension &&
              !/^chrome/.test(window.location.href)) ||
            ('object' == typeof Windows && 'object' == typeof Windows.UI)
          )
        );
      }),
      (Yh.prototype.markConnectionHealthy = function () {}),
      (Yh.prototype.shutdown_ = function () {
        (this.isClosed_ = !0),
          this.scriptTagHolder &&
            (this.scriptTagHolder.close(), (this.scriptTagHolder = null)),
          this.myDisconnFrame &&
            (document.body.removeChild(this.myDisconnFrame),
            (this.myDisconnFrame = null)),
          this.connectTimeoutTimer_ &&
            (clearTimeout(this.connectTimeoutTimer_),
            (this.connectTimeoutTimer_ = null));
      }),
      (Yh.prototype.onClosed_ = function () {
        this.isClosed_ ||
          (this.log_('Longpoll is closing itself'),
          this.shutdown_(),
          this.onDisconnect_ &&
            (this.onDisconnect_(this.everConnected_),
            (this.onDisconnect_ = null)));
      }),
      (Yh.prototype.close = function () {
        this.isClosed_ ||
          (this.log_('Longpoll is being closed.'), this.shutdown_());
      }),
      (Yh.prototype.send = function (t) {
        t = $o(t);
        (this.bytesSent += t.length),
          this.stats_.incrementCounter('bytes_sent', t.length);
        for (
          var t = (function (t) {
              t = Co(t);
              return Oo.encodeByteArray(t, !0);
            })(t),
            e = ca(t, 1840),
            n = 0;
          n < e.length;
          n++
        )
          this.scriptTagHolder.enqueueSegment(
            this.curSegmentNum,
            e.length,
            e[n]
          ),
            this.curSegmentNum++;
      }),
      (Yh.prototype.addDisconnectPingFrame = function (t, e) {
        this.myDisconnFrame = document.createElement('iframe');
        var n = { dframe: 't' };
        (n.id = t),
          (n.pw = e),
          (this.myDisconnFrame.src = this.urlFn(n)),
          (this.myDisconnFrame.style.display = 'none'),
          document.body.appendChild(this.myDisconnFrame);
      }),
      (Yh.prototype.incrementIncomingBytes_ = function (t) {
        t = $o(t).length;
        (this.bytesReceived += t),
          this.stats_.incrementCounter('bytes_received', t);
      }),
      Yh);
  function Yh(t, e, n, r, i) {
    (this.connId = t),
      (this.repoInfo = e),
      (this.applicationId = n),
      (this.transportSessionId = r),
      (this.lastSessionId = i),
      (this.bytesSent = 0),
      (this.bytesReceived = 0),
      (this.everConnected_ = !1),
      (this.log_ = ba(t)),
      (this.stats_ = Nh.getCollection(e)),
      (this.urlFn = function (t) {
        return e.connectionURL(Ma, t);
      });
  }
  var Xh =
    ((Jh.createIFrame_ = function () {
      var e = document.createElement('iframe');
      if (((e.style.display = 'none'), !document.body))
        throw 'Document body has not initialized. Wait to initialize Firebase until after the document is ready.';
      document.body.appendChild(e);
      try {
        e.contentWindow.document || ma('No IE domain setting required');
      } catch (t) {
        var n = document.domain;
        e.src =
          "javascript:void((function(){document.open();document.domain='" +
          n +
          "';document.close();})())";
      }
      return (
        e.contentDocument
          ? (e.doc = e.contentDocument)
          : e.contentWindow
          ? (e.doc = e.contentWindow.document)
          : e.document && (e.doc = e.document),
        e
      );
    }),
    (Jh.prototype.close = function () {
      var t = this;
      (this.alive = !1),
        this.myIFrame &&
          ((this.myIFrame.doc.body.innerHTML = ''),
          setTimeout(function () {
            null !== t.myIFrame &&
              (document.body.removeChild(t.myIFrame), (t.myIFrame = null));
          }, Math.floor(0)));
      var e = this.onDisconnect;
      e && ((this.onDisconnect = null), e());
    }),
    (Jh.prototype.startLongPoll = function (t, e) {
      for (this.myID = t, this.myPW = e, this.alive = !0; this.newRequest_(); );
    }),
    (Jh.prototype.newRequest_ = function () {
      if (
        this.alive &&
        this.sendNewPolls &&
        this.outstandingRequests.size < (0 < this.pendingSegs.length ? 2 : 1)
      ) {
        this.currentSerial++;
        var t = {};
        (t.id = this.myID), (t.pw = this.myPW), (t.ser = this.currentSerial);
        for (
          var t = this.urlFn(t), e = '', n = 0;
          0 < this.pendingSegs.length;

        ) {
          if (!(this.pendingSegs[0].d.length + 30 + e.length <= 1870)) break;
          var r = this.pendingSegs.shift(),
            e =
              e +
              '&seg' +
              n +
              '=' +
              r.seg +
              '&ts' +
              n +
              '=' +
              r.ts +
              '&d' +
              n +
              '=' +
              r.d;
          n++;
        }
        return (t += e), this.addLongPollTag_(t, this.currentSerial), !0;
      }
      return !1;
    }),
    (Jh.prototype.enqueueSegment = function (t, e, n) {
      this.pendingSegs.push({ seg: t, ts: e, d: n }),
        this.alive && this.newRequest_();
    }),
    (Jh.prototype.addLongPollTag_ = function (t, e) {
      var n = this;
      this.outstandingRequests.add(e);
      function r() {
        n.outstandingRequests.delete(e), n.newRequest_();
      }
      var i = setTimeout(r, Math.floor(25e3));
      this.addTag(t, function () {
        clearTimeout(i), r();
      });
    }),
    (Jh.prototype.addTag = function (t, n) {
      var r = this;
      setTimeout(function () {
        try {
          if (!r.sendNewPolls) return;
          var e = r.myIFrame.doc.createElement('script');
          (e.type = 'text/javascript'),
            (e.async = !0),
            (e.src = t),
            (e.onload = e.onreadystatechange = function () {
              var t = e.readyState;
              (t && 'loaded' !== t && 'complete' !== t) ||
                ((e.onload = e.onreadystatechange = null),
                e.parentNode && e.parentNode.removeChild(e),
                n());
            }),
            (e.onerror = function () {
              ma('Long-poll script failed to load: ' + t),
                (r.sendNewPolls = !1),
                r.close();
            }),
            r.myIFrame.doc.body.appendChild(e);
        } catch (t) {}
      }, Math.floor(1));
    }),
    Jh);
  function Jh(t, e, n, r) {
    (this.onDisconnect = n),
      (this.urlFn = r),
      (this.outstandingRequests = new Set()),
      (this.pendingSegs = []),
      (this.currentSerial = Math.floor(1e8 * Math.random())),
      (this.sendNewPolls = !0),
      (this.uniqueCallbackIdentifier = da()),
      (window[zh + this.uniqueCallbackIdentifier] = t),
      (window[Gh + this.uniqueCallbackIdentifier] = e),
      (this.myIFrame = Jh.createIFrame_());
    e = '';
    this.myIFrame.src &&
      'javascript:' === this.myIFrame.src.substr(0, 'javascript:'.length) &&
      (e = '<script>document.domain="' + document.domain + '";</script>');
    var i = '<html><body>' + e + '</body></html>';
    try {
      this.myIFrame.doc.open(),
        this.myIFrame.doc.write(i),
        this.myIFrame.doc.close();
    } catch (t) {
      ma('frame writing exception'), t.stack && ma(t.stack), ma(t);
    }
  }
  var $h = '';
  function Zh(t) {
    $h = t;
  }
  var tl = null;
  'undefined' != typeof MozWebSocket
    ? (tl = MozWebSocket)
    : 'undefined' != typeof WebSocket && (tl = WebSocket);
  var el =
    ((nl.connectionURL_ = function (t, e, n) {
      var r = { v: '5' };
      return (
        'undefined' != typeof location &&
          location.href &&
          -1 !== location.href.indexOf(xa) &&
          (r.r = 'f'),
        e && (r.s = e),
        n && (r.ls = n),
        t.connectionURL(La, r)
      );
    }),
    (nl.prototype.open = function (e, t) {
      var n,
        r = this;
      (this.onDisconnect = t),
        (this.onMessage = e),
        this.log_('Websocket connecting to ' + this.connURL),
        (this.everConnected_ = !1),
        la.set('previous_websocket_failure', !0);
      try {
        Vo() ||
          ((n = { headers: { 'X-Firebase-GMPID': this.applicationId || '' } }),
          (this.mySock = new tl(this.connURL, [], n)));
      } catch (t) {
        this.log_('Error instantiating WebSocket.');
        e = t.message || t.data;
        return e && this.log_(e), void this.onClosed_();
      }
      (this.mySock.onopen = function () {
        r.log_('Websocket connected.'), (r.everConnected_ = !0);
      }),
        (this.mySock.onclose = function () {
          r.log_('Websocket connection was disconnected.'),
            (r.mySock = null),
            r.onClosed_();
        }),
        (this.mySock.onmessage = function (t) {
          r.handleIncomingFrame(t);
        }),
        (this.mySock.onerror = function (t) {
          r.log_('WebSocket error.  Closing connection.');
          t = t.message || t.data;
          t && r.log_(t), r.onClosed_();
        });
    }),
    (nl.prototype.start = function () {}),
    (nl.forceDisallow = function () {
      nl.forceDisallow_ = !0;
    }),
    (nl.isAvailable = function () {
      var t,
        e = !1;
      return (
        'undefined' != typeof navigator &&
          navigator.userAgent &&
          (t = navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/)) &&
          1 < t.length &&
          parseFloat(t[1]) < 4.4 &&
          (e = !0),
        !e && null !== tl && !nl.forceDisallow_
      );
    }),
    (nl.previouslyFailed = function () {
      return (
        la.isInMemoryStorage || !0 === la.get('previous_websocket_failure')
      );
    }),
    (nl.prototype.markConnectionHealthy = function () {
      la.remove('previous_websocket_failure');
    }),
    (nl.prototype.appendFrame_ = function (t) {
      this.frames.push(t),
        this.frames.length === this.totalFrames &&
          ((t = this.frames.join('')),
          (this.frames = null),
          (t = Jo(t)),
          this.onMessage(t));
    }),
    (nl.prototype.handleNewFrameCount_ = function (t) {
      (this.totalFrames = t), (this.frames = []);
    }),
    (nl.prototype.extractFrameCount_ = function (t) {
      if (
        (ko(null === this.frames, 'We already have a frame buffer'),
        t.length <= 6)
      ) {
        var e = Number(t);
        if (!isNaN(e)) return this.handleNewFrameCount_(e), null;
      }
      return this.handleNewFrameCount_(1), t;
    }),
    (nl.prototype.handleIncomingFrame = function (t) {
      null !== this.mySock &&
        ((t = t.data),
        (this.bytesReceived += t.length),
        this.stats_.incrementCounter('bytes_received', t.length),
        this.resetKeepAlive(),
        null !== this.frames
          ? this.appendFrame_(t)
          : null !== (t = this.extractFrameCount_(t)) && this.appendFrame_(t));
    }),
    (nl.prototype.send = function (t) {
      this.resetKeepAlive();
      t = $o(t);
      (this.bytesSent += t.length),
        this.stats_.incrementCounter('bytes_sent', t.length);
      var e = ca(t, 16384);
      1 < e.length && this.sendString_(String(e.length));
      for (var n = 0; n < e.length; n++) this.sendString_(e[n]);
    }),
    (nl.prototype.shutdown_ = function () {
      (this.isClosed_ = !0),
        this.keepaliveTimer &&
          (clearInterval(this.keepaliveTimer), (this.keepaliveTimer = null)),
        this.mySock && (this.mySock.close(), (this.mySock = null));
    }),
    (nl.prototype.onClosed_ = function () {
      this.isClosed_ ||
        (this.log_('WebSocket is closing itself'),
        this.shutdown_(),
        this.onDisconnect &&
          (this.onDisconnect(this.everConnected_), (this.onDisconnect = null)));
    }),
    (nl.prototype.close = function () {
      this.isClosed_ ||
        (this.log_('WebSocket is being closed'), this.shutdown_());
    }),
    (nl.prototype.resetKeepAlive = function () {
      var t = this;
      clearInterval(this.keepaliveTimer),
        (this.keepaliveTimer = setInterval(function () {
          t.mySock && t.sendString_('0'), t.resetKeepAlive();
        }, Math.floor(45e3)));
    }),
    (nl.prototype.sendString_ = function (t) {
      try {
        this.mySock.send(t);
      } catch (t) {
        this.log_(
          'Exception thrown from WebSocket.send():',
          t.message || t.data,
          'Closing connection.'
        ),
          setTimeout(this.onClosed_.bind(this), 0);
      }
    }),
    (nl.responsesRequiredToBeHealthy = 2),
    (nl.healthyTimeout = 3e4),
    nl);
  function nl(t, e, n, r, i) {
    (this.connId = t),
      (this.applicationId = n),
      (this.keepaliveTimer = null),
      (this.frames = null),
      (this.totalFrames = 0),
      (this.bytesSent = 0),
      (this.bytesReceived = 0),
      (this.log_ = ba(this.connId)),
      (this.stats_ = Nh.getCollection(e)),
      (this.connURL = nl.connectionURL_(e, r, i)),
      (this.nodeAdmin = e.nodeAdmin);
  }
  var rl =
    (Object.defineProperty(il, 'ALL_TRANSPORTS', {
      get: function () {
        return [Qh, el];
      },
      enumerable: !1,
      configurable: !0
    }),
    (il.prototype.initTransports_ = function (t) {
      var e,
        n,
        r = el && el.isAvailable(),
        i = r && !el.previouslyFailed();
      if (
        (t.webSocketOnly &&
          (r ||
            oa(
              "wss:// URL used, but browser isn't known to support websockets.  Trying anyway."
            ),
          (i = !0)),
        i)
      )
        this.transports_ = [el];
      else {
        var o = (this.transports_ = []);
        try {
          for (
            var s = Eo(il.ALL_TRANSPORTS), a = s.next();
            !a.done;
            a = s.next()
          ) {
            var u = a.value;
            u && u.isAvailable() && o.push(u);
          }
        } catch (t) {
          e = { error: t };
        } finally {
          try {
            a && !a.done && (n = s.return) && n.call(s);
          } finally {
            if (e) throw e.error;
          }
        }
      }
    }),
    (il.prototype.initialTransport = function () {
      if (0 < this.transports_.length) return this.transports_[0];
      throw new Error('No transports available');
    }),
    (il.prototype.upgradeTransport = function () {
      return 1 < this.transports_.length ? this.transports_[1] : null;
    }),
    il);
  function il(t) {
    this.initTransports_(t);
  }
  var ol =
    ((sl.prototype.start_ = function () {
      var t = this,
        e = this.transportManager_.initialTransport();
      (this.conn_ = new e(
        this.nextTransportId_(),
        this.repoInfo_,
        this.applicationId_,
        void 0,
        this.lastSessionId
      )),
        (this.primaryResponsesRequired_ = e.responsesRequiredToBeHealthy || 0);
      var n = this.connReceiver_(this.conn_),
        r = this.disconnReceiver_(this.conn_);
      (this.tx_ = this.conn_),
        (this.rx_ = this.conn_),
        (this.secondaryConn_ = null),
        (this.isHealthy_ = !1),
        setTimeout(function () {
          t.conn_ && t.conn_.open(n, r);
        }, Math.floor(0));
      e = e.healthyTimeout || 0;
      0 < e &&
        (this.healthyTimeout_ = Na(function () {
          (t.healthyTimeout_ = null),
            t.isHealthy_ ||
              (t.conn_ && 102400 < t.conn_.bytesReceived
                ? (t.log_(
                    'Connection exceeded healthy timeout but has received ' +
                      t.conn_.bytesReceived +
                      ' bytes.  Marking connection healthy.'
                  ),
                  (t.isHealthy_ = !0),
                  t.conn_.markConnectionHealthy())
                : t.conn_ && 10240 < t.conn_.bytesSent
                ? t.log_(
                    'Connection exceeded healthy timeout but has sent ' +
                      t.conn_.bytesSent +
                      ' bytes.  Leaving connection alive.'
                  )
                : (t.log_('Closing unhealthy connection after timeout.'),
                  t.close()));
        }, Math.floor(e)));
    }),
    (sl.prototype.nextTransportId_ = function () {
      return 'c:' + this.id + ':' + this.connectionCount++;
    }),
    (sl.prototype.disconnReceiver_ = function (e) {
      var n = this;
      return function (t) {
        e === n.conn_
          ? n.onConnectionLost_(t)
          : e === n.secondaryConn_
          ? (n.log_('Secondary connection lost.'),
            n.onSecondaryConnectionLost_())
          : n.log_('closing an old connection');
      };
    }),
    (sl.prototype.connReceiver_ = function (e) {
      var n = this;
      return function (t) {
        2 !== n.state_ &&
          (e === n.rx_
            ? n.onPrimaryMessageReceived_(t)
            : e === n.secondaryConn_
            ? n.onSecondaryMessageReceived_(t)
            : n.log_('message on old connection'));
      };
    }),
    (sl.prototype.sendRequest = function (t) {
      t = { t: 'd', d: t };
      this.sendData_(t);
    }),
    (sl.prototype.tryCleanupConnection = function () {
      this.tx_ === this.secondaryConn_ &&
        this.rx_ === this.secondaryConn_ &&
        (this.log_(
          'cleaning up and promoting a connection: ' +
            this.secondaryConn_.connId
        ),
        (this.conn_ = this.secondaryConn_),
        (this.secondaryConn_ = null));
    }),
    (sl.prototype.onSecondaryControl_ = function (t) {
      't' in t &&
        ('a' === (t = t.t)
          ? this.upgradeIfSecondaryHealthy_()
          : 'r' === t
          ? (this.log_('Got a reset on secondary, closing it'),
            this.secondaryConn_.close(),
            (this.tx_ !== this.secondaryConn_ &&
              this.rx_ !== this.secondaryConn_) ||
              this.close())
          : 'o' === t &&
            (this.log_('got pong on secondary.'),
            this.secondaryResponsesRequired_--,
            this.upgradeIfSecondaryHealthy_()));
    }),
    (sl.prototype.onSecondaryMessageReceived_ = function (t) {
      var e = ua('t', t),
        t = ua('d', t);
      if ('c' === e) this.onSecondaryControl_(t);
      else {
        if ('d' !== e) throw new Error('Unknown protocol layer: ' + e);
        this.pendingDataMessages.push(t);
      }
    }),
    (sl.prototype.upgradeIfSecondaryHealthy_ = function () {
      this.secondaryResponsesRequired_ <= 0
        ? (this.log_('Secondary connection is healthy.'),
          (this.isHealthy_ = !0),
          this.secondaryConn_.markConnectionHealthy(),
          this.proceedWithUpgrade_())
        : (this.log_('sending ping on secondary.'),
          this.secondaryConn_.send({ t: 'c', d: { t: 'p', d: {} } }));
    }),
    (sl.prototype.proceedWithUpgrade_ = function () {
      this.secondaryConn_.start(),
        this.log_('sending client ack on secondary'),
        this.secondaryConn_.send({ t: 'c', d: { t: 'a', d: {} } }),
        this.log_('Ending transmission on primary'),
        this.conn_.send({ t: 'c', d: { t: 'n', d: {} } }),
        (this.tx_ = this.secondaryConn_),
        this.tryCleanupConnection();
    }),
    (sl.prototype.onPrimaryMessageReceived_ = function (t) {
      var e = ua('t', t),
        t = ua('d', t);
      'c' === e ? this.onControl_(t) : 'd' === e && this.onDataMessage_(t);
    }),
    (sl.prototype.onDataMessage_ = function (t) {
      this.onPrimaryResponse_(), this.onMessage_(t);
    }),
    (sl.prototype.onPrimaryResponse_ = function () {
      this.isHealthy_ ||
        (this.primaryResponsesRequired_--,
        this.primaryResponsesRequired_ <= 0 &&
          (this.log_('Primary connection is healthy.'),
          (this.isHealthy_ = !0),
          this.conn_.markConnectionHealthy()));
    }),
    (sl.prototype.onControl_ = function (t) {
      var e = ua('t', t);
      if ('d' in t) {
        t = t.d;
        if ('h' === e) this.onHandshake_(t);
        else if ('n' === e) {
          this.log_('recvd end transmission on primary'),
            (this.rx_ = this.secondaryConn_);
          for (var n = 0; n < this.pendingDataMessages.length; ++n)
            this.onDataMessage_(this.pendingDataMessages[n]);
          (this.pendingDataMessages = []), this.tryCleanupConnection();
        } else
          's' === e
            ? this.onConnectionShutdown_(t)
            : 'r' === e
            ? this.onReset_(t)
            : 'e' === e
            ? ra('Server Error: ' + t)
            : 'o' === e
            ? (this.log_('got pong on primary.'),
              this.onPrimaryResponse_(),
              this.sendPingOnPrimaryIfNecessary_())
            : ra('Unknown control packet command: ' + e);
      }
    }),
    (sl.prototype.onHandshake_ = function (t) {
      var e = t.ts,
        n = t.v,
        r = t.h;
      (this.sessionId = t.s),
        this.repoInfo_.updateHost(r),
        0 === this.state_ &&
          (this.conn_.start(),
          this.onConnectionEstablished_(this.conn_, e),
          '5' !== n && oa('Protocol version mismatch detected'),
          this.tryStartUpgrade_());
    }),
    (sl.prototype.tryStartUpgrade_ = function () {
      var t = this.transportManager_.upgradeTransport();
      t && this.startUpgrade_(t);
    }),
    (sl.prototype.startUpgrade_ = function (t) {
      var e = this;
      (this.secondaryConn_ = new t(
        this.nextTransportId_(),
        this.repoInfo_,
        this.applicationId_,
        this.sessionId
      )),
        (this.secondaryResponsesRequired_ =
          t.responsesRequiredToBeHealthy || 0);
      var n = this.connReceiver_(this.secondaryConn_),
        t = this.disconnReceiver_(this.secondaryConn_);
      this.secondaryConn_.open(n, t),
        Na(function () {
          e.secondaryConn_ &&
            (e.log_('Timed out trying to upgrade.'), e.secondaryConn_.close());
        }, Math.floor(6e4));
    }),
    (sl.prototype.onReset_ = function (t) {
      this.log_('Reset packet received.  New host: ' + t),
        this.repoInfo_.updateHost(t),
        1 === this.state_
          ? this.close()
          : (this.closeConnections_(), this.start_());
    }),
    (sl.prototype.onConnectionEstablished_ = function (t, e) {
      var n = this;
      this.log_('Realtime connection established.'),
        (this.conn_ = t),
        (this.state_ = 1),
        this.onReady_ &&
          (this.onReady_(e, this.sessionId), (this.onReady_ = null)),
        0 === this.primaryResponsesRequired_
          ? (this.log_('Primary connection is healthy.'),
            (this.isHealthy_ = !0))
          : Na(function () {
              n.sendPingOnPrimaryIfNecessary_();
            }, Math.floor(5e3));
    }),
    (sl.prototype.sendPingOnPrimaryIfNecessary_ = function () {
      this.isHealthy_ ||
        1 !== this.state_ ||
        (this.log_('sending ping on primary.'),
        this.sendData_({ t: 'c', d: { t: 'p', d: {} } }));
    }),
    (sl.prototype.onSecondaryConnectionLost_ = function () {
      var t = this.secondaryConn_;
      (this.secondaryConn_ = null),
        (this.tx_ !== t && this.rx_ !== t) || this.close();
    }),
    (sl.prototype.onConnectionLost_ = function (t) {
      (this.conn_ = null),
        t || 0 !== this.state_
          ? 1 === this.state_ && this.log_('Realtime connection lost.')
          : (this.log_('Realtime connection failed.'),
            this.repoInfo_.isCacheableHost() &&
              (la.remove('host:' + this.repoInfo_.host),
              (this.repoInfo_.internalHost = this.repoInfo_.host))),
        this.close();
    }),
    (sl.prototype.onConnectionShutdown_ = function (t) {
      this.log_('Connection shutdown command received. Shutting down...'),
        this.onKill_ && (this.onKill_(t), (this.onKill_ = null)),
        (this.onDisconnect_ = null),
        this.close();
    }),
    (sl.prototype.sendData_ = function (t) {
      if (1 !== this.state_) throw 'Connection is not connected';
      this.tx_.send(t);
    }),
    (sl.prototype.close = function () {
      2 !== this.state_ &&
        (this.log_('Closing realtime connection.'),
        (this.state_ = 2),
        this.closeConnections_(),
        this.onDisconnect_ &&
          (this.onDisconnect_(), (this.onDisconnect_ = null)));
    }),
    (sl.prototype.closeConnections_ = function () {
      this.log_('Shutting down all connections'),
        this.conn_ && (this.conn_.close(), (this.conn_ = null)),
        this.secondaryConn_ &&
          (this.secondaryConn_.close(), (this.secondaryConn_ = null)),
        this.healthyTimeout_ &&
          (clearTimeout(this.healthyTimeout_), (this.healthyTimeout_ = null));
    }),
    sl);
  function sl(t, e, n, r, i, o, s, a) {
    (this.id = t),
      (this.repoInfo_ = e),
      (this.applicationId_ = n),
      (this.onMessage_ = r),
      (this.onReady_ = i),
      (this.onDisconnect_ = o),
      (this.onKill_ = s),
      (this.lastSessionId = a),
      (this.connectionCount = 0),
      (this.pendingDataMessages = []),
      (this.state_ = 0),
      (this.log_ = ba('c:' + this.id + ':')),
      (this.transportManager_ = new rl(e)),
      this.log_('Connection created'),
      this.start_();
  }
  (al.prototype.put = function (t, e, n, r) {}),
    (al.prototype.merge = function (t, e, n, r) {}),
    (al.prototype.refreshAuthToken = function (t) {}),
    (al.prototype.onDisconnectPut = function (t, e, n) {}),
    (al.prototype.onDisconnectMerge = function (t, e, n) {}),
    (al.prototype.onDisconnectCancel = function (t, e) {}),
    (al.prototype.reportStats = function (t) {}),
    (vu = al);
  function al() {}
  var ul,
    cl = 1e3,
    hl = 3e5,
    ll =
      (mo(fl, (ul = vu)),
      (fl.prototype.sendRequest = function (t, e, n) {
        var r = ++this.requestNumber_,
          e = { r: r, a: t, b: e };
        this.log_($o(e)),
          ko(
            this.connected_,
            "sendRequest call when we're not connected not allowed."
          ),
          this.realtime_.sendRequest(e),
          n && (this.requestCBHash_[r] = n);
      }),
      (fl.prototype.get = function (t) {
        var n = this,
          r = new xo(),
          i = { p: t.path.toString(), q: t.queryObject() },
          e = {
            action: 'g',
            request: i,
            onComplete: function (t) {
              var e = t.d;
              'ok' === t.s
                ? (n.onDataUpdate_(i.p, e, !1, null), r.resolve(e))
                : r.reject(e);
            }
          };
        this.outstandingGets_.push(e), this.outstandingGetCount_++;
        var o = this.outstandingGets_.length - 1;
        return (
          this.connected_ ||
            setTimeout(function () {
              var t = n.outstandingGets_[o];
              void 0 !== t &&
                e === t &&
                (delete n.outstandingGets_[o],
                n.outstandingGetCount_--,
                0 === n.outstandingGetCount_ && (n.outstandingGets_ = []),
                n.log_('get ' + o + ' timed out on connection'),
                r.reject(new Error('Client is offline.')));
            }, 3e3),
          this.connected_ && this.sendGet_(o),
          r.promise
        );
      }),
      (fl.prototype.listen = function (t, e, n, r) {
        var i = t.queryIdentifier(),
          o = t.path.toString();
        this.log_('Listen called for ' + o + ' ' + i),
          this.listens.has(o) || this.listens.set(o, new Map()),
          ko(
            t.getQueryParams().isDefault() ||
              !t.getQueryParams().loadsAllData(),
            'listen() called for non-default but complete query'
          ),
          ko(
            !this.listens.get(o).has(i),
            'listen() called twice for same path/queryId.'
          );
        n = { onComplete: r, hashFn: e, query: t, tag: n };
        this.listens.get(o).set(i, n), this.connected_ && this.sendListen_(n);
      }),
      (fl.prototype.sendGet_ = function (e) {
        var n = this,
          r = this.outstandingGets_[e];
        this.sendRequest('g', r.request, function (t) {
          delete n.outstandingGets_[e],
            n.outstandingGetCount_--,
            0 === n.outstandingGetCount_ && (n.outstandingGets_ = []),
            r.onComplete && r.onComplete(t);
        });
      }),
      (fl.prototype.sendListen_ = function (r) {
        var i = this,
          o = r.query,
          s = o.path.toString(),
          a = o.queryIdentifier();
        this.log_('Listen on ' + s + ' for ' + a);
        var t = { p: s };
        r.tag && ((t.q = o.queryObject()), (t.t = r.tag)),
          (t.h = r.hashFn()),
          this.sendRequest('q', t, function (t) {
            var e = t.d,
              n = t.s;
            fl.warnOnListenWarnings_(e, o),
              (i.listens.get(s) && i.listens.get(s).get(a)) === r &&
                (i.log_('listen response', t),
                'ok' !== n && i.removeListen_(s, a),
                r.onComplete && r.onComplete(n, e));
          });
      }),
      (fl.warnOnListenWarnings_ = function (t, e) {
        t &&
          'object' == typeof t &&
          ts(t, 'w') &&
          ((t = es(t, 'w')),
          Array.isArray(t) &&
            ~t.indexOf('no_index') &&
            ((t =
              '".indexOn": "' + e.getQueryParams().getIndex().toString() + '"'),
            (e = e.path.toString()),
            oa(
              'Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ' +
                t +
                ' at ' +
                e +
                ' to your security rules for better performance.'
            )));
      }),
      (fl.prototype.refreshAuthToken = function (t) {
        (this.authToken_ = t),
          this.log_('Auth token refreshed'),
          this.authToken_
            ? this.tryAuth()
            : this.connected_ && this.sendRequest('unauth', {}, function () {}),
          this.reduceReconnectDelayIfAdminCredential_(t);
      }),
      (fl.prototype.reduceReconnectDelayIfAdminCredential_ = function (t) {
        ((t && 40 === t.length) ||
          (function (t) {
            t = Zo(t).claims;
            return 'object' == typeof t && !0 === t.admin;
          })(t)) &&
          (this.log_(
            'Admin auth credential detected.  Reducing max reconnect time.'
          ),
          (this.maxReconnectDelay_ = 3e4));
      }),
      (fl.prototype.tryAuth = function () {
        var n,
          t,
          e,
          r = this;
        this.connected_ &&
          this.authToken_ &&
          ((t = (function (t) {
            t = Zo(t).claims;
            return !!t && 'object' == typeof t && t.hasOwnProperty('iat');
          })((n = this.authToken_))
            ? 'auth'
            : 'gauth'),
          (e = { cred: n }),
          null === this.authOverride_
            ? (e.noauth = !0)
            : 'object' == typeof this.authOverride_ &&
              (e.authvar = this.authOverride_),
          this.sendRequest(t, e, function (t) {
            var e = t.s,
              t = t.d || 'error';
            r.authToken_ === n &&
              ('ok' === e
                ? (r.invalidAuthTokenCount_ = 0)
                : r.onAuthRevoked_(e, t));
          }));
      }),
      (fl.prototype.unlisten = function (t, e) {
        var n = t.path.toString(),
          r = t.queryIdentifier();
        this.log_('Unlisten called for ' + n + ' ' + r),
          ko(
            t.getQueryParams().isDefault() ||
              !t.getQueryParams().loadsAllData(),
            'unlisten() called for non-default but complete query'
          ),
          this.removeListen_(n, r) &&
            this.connected_ &&
            this.sendUnlisten_(n, r, t.queryObject(), e);
      }),
      (fl.prototype.sendUnlisten_ = function (t, e, n, r) {
        this.log_('Unlisten on ' + t + ' for ' + e);
        t = { p: t };
        r && ((t.q = n), (t.t = r)), this.sendRequest('n', t);
      }),
      (fl.prototype.onDisconnectPut = function (t, e, n) {
        this.connected_
          ? this.sendOnDisconnect_('o', t, e, n)
          : this.onDisconnectRequestQueue_.push({
              pathString: t,
              action: 'o',
              data: e,
              onComplete: n
            });
      }),
      (fl.prototype.onDisconnectMerge = function (t, e, n) {
        this.connected_
          ? this.sendOnDisconnect_('om', t, e, n)
          : this.onDisconnectRequestQueue_.push({
              pathString: t,
              action: 'om',
              data: e,
              onComplete: n
            });
      }),
      (fl.prototype.onDisconnectCancel = function (t, e) {
        this.connected_
          ? this.sendOnDisconnect_('oc', t, null, e)
          : this.onDisconnectRequestQueue_.push({
              pathString: t,
              action: 'oc',
              data: null,
              onComplete: e
            });
      }),
      (fl.prototype.sendOnDisconnect_ = function (t, e, n, r) {
        n = { p: e, d: n };
        this.log_('onDisconnect ' + t, n),
          this.sendRequest(t, n, function (t) {
            r &&
              setTimeout(function () {
                r(t.s, t.d);
              }, Math.floor(0));
          });
      }),
      (fl.prototype.put = function (t, e, n, r) {
        this.putInternal('p', t, e, n, r);
      }),
      (fl.prototype.merge = function (t, e, n, r) {
        this.putInternal('m', t, e, n, r);
      }),
      (fl.prototype.putInternal = function (t, e, n, r, i) {
        n = { p: e, d: n };
        void 0 !== i && (n.h = i),
          this.outstandingPuts_.push({ action: t, request: n, onComplete: r }),
          this.outstandingPutCount_++;
        r = this.outstandingPuts_.length - 1;
        this.connected_ ? this.sendPut_(r) : this.log_('Buffering put: ' + e);
      }),
      (fl.prototype.sendPut_ = function (e) {
        var n = this,
          r = this.outstandingPuts_[e].action,
          t = this.outstandingPuts_[e].request,
          i = this.outstandingPuts_[e].onComplete;
        (this.outstandingPuts_[e].queued = this.connected_),
          this.sendRequest(r, t, function (t) {
            n.log_(r + ' response', t),
              delete n.outstandingPuts_[e],
              n.outstandingPutCount_--,
              0 === n.outstandingPutCount_ && (n.outstandingPuts_ = []),
              i && i(t.s, t.d);
          });
      }),
      (fl.prototype.reportStats = function (t) {
        var e = this;
        this.connected_ &&
          ((t = { c: t }),
          this.log_('reportStats', t),
          this.sendRequest('s', t, function (t) {
            'ok' !== t.s &&
              ((t = t.d), e.log_('reportStats', 'Error sending stats: ' + t));
          }));
      }),
      (fl.prototype.onDataMessage_ = function (t) {
        if ('r' in t) {
          this.log_('from server: ' + $o(t));
          var e = t.r,
            n = this.requestCBHash_[e];
          n && (delete this.requestCBHash_[e], n(t.b));
        } else {
          if ('error' in t)
            throw 'A server-side error has occurred: ' + t.error;
          'a' in t && this.onDataPush_(t.a, t.b);
        }
      }),
      (fl.prototype.onDataPush_ = function (t, e) {
        this.log_('handleServerMessage', t, e),
          'd' === t
            ? this.onDataUpdate_(e.p, e.d, !1, e.t)
            : 'm' === t
            ? this.onDataUpdate_(e.p, e.d, !0, e.t)
            : 'c' === t
            ? this.onListenRevoked_(e.p, e.q)
            : 'ac' === t
            ? this.onAuthRevoked_(e.s, e.d)
            : 'sd' === t
            ? this.onSecurityDebugPacket_(e)
            : ra(
                'Unrecognized action received from server: ' +
                  $o(t) +
                  '\nAre you using the latest client?'
              );
      }),
      (fl.prototype.onReady_ = function (t, e) {
        this.log_('connection ready'),
          (this.connected_ = !0),
          (this.lastConnectionEstablishedTime_ = new Date().getTime()),
          this.handleTimestamp_(t),
          (this.lastSessionId = e),
          this.firstConnection_ && this.sendConnectStats_(),
          this.restoreState_(),
          (this.firstConnection_ = !1),
          this.onConnectStatus_(!0);
      }),
      (fl.prototype.scheduleConnect_ = function (t) {
        var e = this;
        ko(
          !this.realtime_,
          "Scheduling a connect when we're already connected/ing?"
        ),
          this.establishConnectionTimer_ &&
            clearTimeout(this.establishConnectionTimer_),
          (this.establishConnectionTimer_ = setTimeout(function () {
            (e.establishConnectionTimer_ = null), e.establishConnection_();
          }, Math.floor(t)));
      }),
      (fl.prototype.onVisible_ = function (t) {
        t &&
          !this.visible_ &&
          this.reconnectDelay_ === this.maxReconnectDelay_ &&
          (this.log_('Window became visible.  Reducing delay.'),
          (this.reconnectDelay_ = cl),
          this.realtime_ || this.scheduleConnect_(0)),
          (this.visible_ = t);
      }),
      (fl.prototype.onOnline_ = function (t) {
        t
          ? (this.log_('Browser went online.'),
            (this.reconnectDelay_ = cl),
            this.realtime_ || this.scheduleConnect_(0))
          : (this.log_('Browser went offline.  Killing connection.'),
            this.realtime_ && this.realtime_.close());
      }),
      (fl.prototype.onRealtimeDisconnect_ = function () {
        var t;
        this.log_('data client disconnected'),
          (this.connected_ = !1),
          (this.realtime_ = null),
          this.cancelSentTransactions_(),
          (this.requestCBHash_ = {}),
          this.shouldReconnect_() &&
            (this.visible_
              ? this.lastConnectionEstablishedTime_ &&
                (3e4 <
                  new Date().getTime() - this.lastConnectionEstablishedTime_ &&
                  (this.reconnectDelay_ = cl),
                (this.lastConnectionEstablishedTime_ = null))
              : (this.log_("Window isn't visible.  Delaying reconnect."),
                (this.reconnectDelay_ = this.maxReconnectDelay_),
                (this.lastConnectionAttemptTime_ = new Date().getTime())),
            (t = new Date().getTime() - this.lastConnectionAttemptTime_),
            (t = Math.max(0, this.reconnectDelay_ - t)),
            (t = Math.random() * t),
            this.log_('Trying to reconnect in ' + t + 'ms'),
            this.scheduleConnect_(t),
            (this.reconnectDelay_ = Math.min(
              this.maxReconnectDelay_,
              1.3 * this.reconnectDelay_
            ))),
          this.onConnectStatus_(!1);
      }),
      (fl.prototype.establishConnection_ = function () {
        var e,
          n,
          r,
          i,
          o,
          s,
          a,
          u,
          c,
          t,
          h = this;
        this.shouldReconnect_() &&
          (this.log_('Making a connection attempt'),
          (this.lastConnectionAttemptTime_ = new Date().getTime()),
          (this.lastConnectionEstablishedTime_ = null),
          (e = this.onDataMessage_.bind(this)),
          (n = this.onReady_.bind(this)),
          (r = this.onRealtimeDisconnect_.bind(this)),
          (i = this.id + ':' + fl.nextConnectionId_++),
          (s = (o = this).lastSessionId),
          (a = !1),
          (u = null),
          (c = function () {
            u ? u.close() : ((a = !0), r());
          }),
          (this.realtime_ = {
            close: c,
            sendRequest: function (t) {
              ko(u, "sendRequest call when we're not connected not allowed."),
                u.sendRequest(t);
            }
          }),
          (t = this.forceTokenRefresh_),
          (this.forceTokenRefresh_ = !1),
          this.authTokenProvider_
            .getToken(t)
            .then(function (t) {
              a
                ? ma('getToken() completed but was canceled')
                : (ma('getToken() completed. Creating connection.'),
                  (o.authToken_ = t && t.accessToken),
                  (u = new ol(
                    i,
                    o.repoInfo_,
                    o.applicationId_,
                    e,
                    n,
                    r,
                    function (t) {
                      oa(t + ' (' + o.repoInfo_.toString() + ')'),
                        o.interrupt('server_kill');
                    },
                    s
                  )));
            })
            .then(null, function (t) {
              o.log_('Failed to get token: ' + t),
                a || (h.repoInfo_.nodeAdmin && oa(t), c());
            }));
      }),
      (fl.prototype.interrupt = function (t) {
        ma('Interrupting connection for reason: ' + t),
          (this.interruptReasons_[t] = !0),
          this.realtime_
            ? this.realtime_.close()
            : (this.establishConnectionTimer_ &&
                (clearTimeout(this.establishConnectionTimer_),
                (this.establishConnectionTimer_ = null)),
              this.connected_ && this.onRealtimeDisconnect_());
      }),
      (fl.prototype.resume = function (t) {
        ma('Resuming connection for reason: ' + t),
          delete this.interruptReasons_[t],
          ns(this.interruptReasons_) &&
            ((this.reconnectDelay_ = cl),
            this.realtime_ || this.scheduleConnect_(0));
      }),
      (fl.prototype.handleTimestamp_ = function (t) {
        t -= new Date().getTime();
        this.onServerInfoUpdate_({ serverTimeOffset: t });
      }),
      (fl.prototype.cancelSentTransactions_ = function () {
        for (var t = 0; t < this.outstandingPuts_.length; t++) {
          var e = this.outstandingPuts_[t];
          e &&
            'h' in e.request &&
            e.queued &&
            (e.onComplete && e.onComplete('disconnect'),
            delete this.outstandingPuts_[t],
            this.outstandingPutCount_--);
        }
        0 === this.outstandingPutCount_ && (this.outstandingPuts_ = []);
      }),
      (fl.prototype.onListenRevoked_ = function (t, e) {
        (e = e
          ? e
              .map(function (t) {
                return Ia(t);
              })
              .join('$')
          : 'default'),
          (e = this.removeListen_(t, e));
        e && e.onComplete && e.onComplete('permission_denied');
      }),
      (fl.prototype.removeListen_ = function (t, e) {
        var n,
          r = new Ra(t).toString();
        return (
          this.listens.has(r)
            ? ((n = (t = this.listens.get(r)).get(e)),
              t.delete(e),
              0 === t.size && this.listens.delete(r))
            : (n = void 0),
          n
        );
      }),
      (fl.prototype.onAuthRevoked_ = function (t, e) {
        ma('Auth token revoked: ' + t + '/' + e),
          (this.authToken_ = null),
          (this.forceTokenRefresh_ = !0),
          this.realtime_.close(),
          ('invalid_token' !== t && 'permission_denied' !== t) ||
            (this.invalidAuthTokenCount_++,
            3 <= this.invalidAuthTokenCount_ &&
              ((this.reconnectDelay_ = 3e4),
              this.authTokenProvider_.notifyForInvalidToken()));
      }),
      (fl.prototype.onSecurityDebugPacket_ = function (t) {
        this.securityDebugCallback_
          ? this.securityDebugCallback_(t)
          : 'msg' in t &&
            console.log('FIREBASE: ' + t.msg.replace('\n', '\nFIREBASE: '));
      }),
      (fl.prototype.restoreState_ = function () {
        var e, t, n, r;
        this.tryAuth();
        try {
          for (
            var i = Eo(this.listens.values()), o = i.next();
            !o.done;
            o = i.next()
          ) {
            var s = o.value;
            try {
              for (
                var a = ((n = void 0), Eo(s.values())), u = a.next();
                !u.done;
                u = a.next()
              ) {
                var c = u.value;
                this.sendListen_(c);
              }
            } catch (t) {
              n = { error: t };
            } finally {
              try {
                u && !u.done && (r = a.return) && r.call(a);
              } finally {
                if (n) throw n.error;
              }
            }
          }
        } catch (t) {
          e = { error: t };
        } finally {
          try {
            o && !o.done && (t = i.return) && t.call(i);
          } finally {
            if (e) throw e.error;
          }
        }
        for (var h = 0; h < this.outstandingPuts_.length; h++)
          this.outstandingPuts_[h] && this.sendPut_(h);
        for (; this.onDisconnectRequestQueue_.length; ) {
          var l = this.onDisconnectRequestQueue_.shift();
          this.sendOnDisconnect_(l.action, l.pathString, l.data, l.onComplete);
        }
        for (h = 0; h < this.outstandingGets_.length; h++)
          this.outstandingGets_[h] && this.sendGet_(h);
      }),
      (fl.prototype.sendConnectStats_ = function () {
        var t = {};
        (t['sdk.js.' + $h.replace(/\./g, '-')] = 1),
          Fo()
            ? (t['framework.cordova'] = 1)
            : jo() && (t['framework.reactnative'] = 1),
          this.reportStats(t);
      }),
      (fl.prototype.shouldReconnect_ = function () {
        var t = Bh.getInstance().currentlyOnline();
        return ns(this.interruptReasons_) && t;
      }),
      (fl.nextPersistentConnectionId_ = 0),
      (fl.nextConnectionId_ = 0),
      fl);
  function fl(t, e, n, r, i, o, s) {
    var a = ul.call(this) || this;
    if (
      ((a.repoInfo_ = t),
      (a.applicationId_ = e),
      (a.onDataUpdate_ = n),
      (a.onConnectStatus_ = r),
      (a.onServerInfoUpdate_ = i),
      (a.authTokenProvider_ = o),
      (a.authOverride_ = s),
      (a.id = fl.nextPersistentConnectionId_++),
      (a.log_ = ba('p:' + a.id + ':')),
      (a.interruptReasons_ = {}),
      (a.listens = new Map()),
      (a.outstandingPuts_ = []),
      (a.outstandingGets_ = []),
      (a.outstandingPutCount_ = 0),
      (a.outstandingGetCount_ = 0),
      (a.onDisconnectRequestQueue_ = []),
      (a.connected_ = !1),
      (a.reconnectDelay_ = cl),
      (a.maxReconnectDelay_ = hl),
      (a.securityDebugCallback_ = null),
      (a.lastSessionId = null),
      (a.establishConnectionTimer_ = null),
      (a.visible_ = !1),
      (a.requestCBHash_ = {}),
      (a.requestNumber_ = 0),
      (a.realtime_ = null),
      (a.authToken_ = null),
      (a.forceTokenRefresh_ = !1),
      (a.invalidAuthTokenCount_ = 0),
      (a.firstConnection_ = !0),
      (a.lastConnectionAttemptTime_ = null),
      (a.lastConnectionEstablishedTime_ = null),
      s && !Vo())
    )
      throw new Error(
        'Auth override specified in options, but not supported on non Node.js platforms'
      );
    return (
      a.scheduleConnect_(0),
      jh.getInstance().on('visible', a.onVisible_, a),
      -1 === t.host.indexOf('fblocal') &&
        Bh.getInstance().on('online', a.onOnline_, a),
      a
    );
  }
  var pl,
    dl =
      (mo(vl, (pl = vu)),
      (vl.prototype.reportStats = function (t) {
        throw new Error('Method not implemented.');
      }),
      (vl.getListenId_ = function (t, e) {
        return void 0 !== e
          ? 'tag$' + e
          : (ko(
              t.getQueryParams().isDefault(),
              "should have a tag if it's not a default query."
            ),
            t.path.toString());
      }),
      (vl.prototype.listen = function (t, e, n, r) {
        var i = this,
          o = t.path.toString();
        this.log_('Listen called for ' + o + ' ' + t.queryIdentifier());
        var s = vl.getListenId_(t, n),
          a = {};
        this.listens_[s] = a;
        t = t.getQueryParams().toRestQueryStringParameters();
        this.restRequest_(o + '.json', t, function (t, e) {
          404 === t && (t = e = null),
            null === t && i.onDataUpdate_(o, e, !1, n),
            es(i.listens_, s) === a &&
              r(
                t
                  ? 401 === t
                    ? 'permission_denied'
                    : 'rest_error:' + t
                  : 'ok',
                null
              );
        });
      }),
      (vl.prototype.unlisten = function (t, e) {
        e = vl.getListenId_(t, e);
        delete this.listens_[e];
      }),
      (vl.prototype.get = function (t) {
        var n = this,
          e = t.getQueryParams().toRestQueryStringParameters(),
          r = t.path.toString(),
          i = new xo();
        return (
          this.restRequest_(r + '.json', e, function (t, e) {
            404 === t && (t = e = null),
              null === t
                ? (n.onDataUpdate_(r, e, !1, null), i.resolve(e))
                : i.reject(new Error(e));
          }),
          i.promise
        );
      }),
      (vl.prototype.refreshAuthToken = function (t) {}),
      (vl.prototype.restRequest_ = function (r, i, o) {
        var s = this;
        void 0 === i && (i = {}),
          (i.format = 'export'),
          this.authTokenProvider_.getToken(!1).then(function (t) {
            t = t && t.accessToken;
            t && (i.auth = t);
            var e =
              (s.repoInfo_.secure ? 'https://' : 'http://') +
              s.repoInfo_.host +
              r +
              '?ns=' +
              s.repoInfo_.namespace +
              (function (t) {
                for (
                  var n = [], e = 0, r = Object.entries(t);
                  e < r.length;
                  e++
                ) {
                  var i = r[e];
                  !(function (e, t) {
                    Array.isArray(t)
                      ? t.forEach(function (t) {
                          n.push(
                            encodeURIComponent(e) + '=' + encodeURIComponent(t)
                          );
                        })
                      : n.push(
                          encodeURIComponent(e) + '=' + encodeURIComponent(t)
                        );
                  })(i[0], i[1]);
                }
                return n.length ? '&' + n.join('&') : '';
              })(i);
            s.log_('Sending REST request for ' + e);
            var n = new XMLHttpRequest();
            (n.onreadystatechange = function () {
              if (o && 4 === n.readyState) {
                s.log_(
                  'REST Response for ' + e + ' received. status:',
                  n.status,
                  'response:',
                  n.responseText
                );
                var t = null;
                if (200 <= n.status && n.status < 300) {
                  try {
                    t = Jo(n.responseText);
                  } catch (t) {
                    oa(
                      'Failed to parse JSON response for ' +
                        e +
                        ': ' +
                        n.responseText
                    );
                  }
                  o(null, t);
                } else
                  401 !== n.status &&
                    404 !== n.status &&
                    oa(
                      'Got unsuccessful REST response for ' +
                        e +
                        ' Status: ' +
                        n.status
                    ),
                    o(n.status);
                o = null;
              }
            }),
              n.open('GET', e, !0),
              n.send();
          });
      }),
      vl);
  function vl(t, e, n) {
    var r = pl.call(this) || this;
    return (
      (r.repoInfo_ = t),
      (r.onDataUpdate_ = e),
      (r.authTokenProvider_ = n),
      (r.log_ = ba('p:rest:')),
      (r.listens_ = {}),
      r
    );
  }
  var yl = 'repo_interrupt',
    gl =
      ((ml.prototype.start = function () {
        var s = this;
        if (
          ((this.stats_ = Nh.getCollection(this.repoInfo_)),
          this.forceRestClient_ ||
            0 <=
              (
                ('object' == typeof window &&
                  window.navigator &&
                  window.navigator.userAgent) ||
                ''
              ).search(
                /googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i
              ))
        )
          (this.server_ = new dl(
            this.repoInfo_,
            this.onDataUpdate_.bind(this),
            this.authTokenProvider_
          )),
            setTimeout(this.onConnectStatus_.bind(this, !0), 0);
        else {
          var t = this.app.options.databaseAuthVariableOverride;
          if (null != t) {
            if ('object' != typeof t)
              throw new Error(
                'Only objects are supported for option databaseAuthVariableOverride'
              );
            try {
              $o(t);
            } catch (t) {
              throw new Error('Invalid authOverride provided: ' + t);
            }
          }
          (this.persistentConnection_ = new ll(
            this.repoInfo_,
            this.app.options.appId,
            this.onDataUpdate_.bind(this),
            this.onConnectStatus_.bind(this),
            this.onServerInfoUpdate_.bind(this),
            this.authTokenProvider_,
            t
          )),
            (this.server_ = this.persistentConnection_);
        }
        this.authTokenProvider_.addTokenChangeListener(function (t) {
          s.server_.refreshAuthToken(t);
        }),
          (this.statsReporter_ = Nh.getOrCreateReporter(
            this.repoInfo_,
            function () {
              return new Oh(s.stats_, s.server_);
            }
          )),
          this.transactionsInit_(),
          (this.infoData_ = new Ih()),
          (this.infoSyncTree_ = new wh({
            startListening: function (t, e, n, r) {
              var i = [],
                o = s.infoData_.getNode(t.path);
              return (
                o.isEmpty() ||
                  ((i = s.infoSyncTree_.applyServerOverwrite(t.path, o)),
                  setTimeout(function () {
                    r('ok');
                  }, 0)),
                i
              );
            },
            stopListening: function () {}
          })),
          this.updateInfo_('connected', !1),
          (this.serverSyncTree_ = new wh({
            startListening: function (n, t, e, r) {
              return (
                s.server_.listen(n, e, t, function (t, e) {
                  e = r(t, e);
                  s.eventQueue_.raiseEventsForChangedPath(n.path, e);
                }),
                []
              );
            },
            stopListening: function (t, e) {
              s.server_.unlisten(t, e);
            }
          }));
      }),
      (ml.prototype.toString = function () {
        return (
          (this.repoInfo_.secure ? 'https://' : 'http://') + this.repoInfo_.host
        );
      }),
      (ml.prototype.name = function () {
        return this.repoInfo_.namespace;
      }),
      (ml.prototype.serverTime = function () {
        var t =
          this.infoData_.getNode(new Ra('.info/serverTimeOffset')).val() || 0;
        return new Date().getTime() + t;
      }),
      (ml.prototype.generateServerValues = function () {
        return (
          ((t = (t = { timestamp: this.serverTime() }) || {}).timestamp =
            t.timestamp || new Date().getTime()),
          t
        );
        var t;
      }),
      (ml.prototype.onDataUpdate_ = function (t, e, n, r) {
        this.dataUpdateCount++;
        var i = new Ra(t);
        e = this.interceptServerDataCallback_
          ? this.interceptServerDataCallback_(t, e)
          : e;
        var o,
          s = [],
          t = i;
        0 <
          (s = r
            ? n
              ? ((o = rs(e, function (t) {
                  return tc(t);
                })),
                this.serverSyncTree_.applyTaggedQueryMerge(i, o, r))
              : ((o = tc(e)),
                this.serverSyncTree_.applyTaggedQueryOverwrite(i, o, r))
            : n
            ? ((n = rs(e, function (t) {
                return tc(t);
              })),
              this.serverSyncTree_.applyServerMerge(i, n))
            : ((e = tc(e)), this.serverSyncTree_.applyServerOverwrite(i, e)))
            .length && (t = this.rerunTransactions_(i)),
          this.eventQueue_.raiseEventsForChangedPath(t, s);
      }),
      (ml.prototype.interceptServerData_ = function (t) {
        this.interceptServerDataCallback_ = t;
      }),
      (ml.prototype.onConnectStatus_ = function (t) {
        this.updateInfo_('connected', t),
          !1 === t && this.runOnDisconnectEvents_();
      }),
      (ml.prototype.onServerInfoUpdate_ = function (t) {
        var n = this;
        Ta(t, function (t, e) {
          n.updateInfo_(t, e);
        });
      }),
      (ml.prototype.updateInfo_ = function (t, e) {
        (t = new Ra('/.info/' + t)), (e = tc(e));
        this.infoData_.updateSnapshot(t, e);
        e = this.infoSyncTree_.applyServerOverwrite(t, e);
        this.eventQueue_.raiseEventsForChangedPath(t, e);
      }),
      (ml.prototype.getNextWriteId_ = function () {
        return this.nextWriteId_++;
      }),
      (ml.prototype.getValue = function (n) {
        var r = this;
        return this.server_.get(n).then(
          function (t) {
            var e = tc(t),
              t = r.serverSyncTree_.applyServerOverwrite(n.path, e);
            return (
              r.eventQueue_.raiseEventsAtPath(n.path, t),
              Promise.resolve(
                new sc(e, n.getRef(), n.getQueryParams().getIndex())
              )
            );
          },
          function (t) {
            r.log_(
              'get for query ' +
                $o(n) +
                ' falling back to cache after error: ' +
                t
            );
            var e = r.serverSyncTree_.calcCompleteEventCache(n.path);
            return e.isEmpty()
              ? Promise.reject(new Error(t))
              : Promise.resolve(
                  new sc(e, n.getRef(), n.getQueryParams().getIndex())
                );
          }
        );
      }),
      (ml.prototype.setWithPriority = function (r, t, e, i) {
        var o = this;
        this.log_('set', { path: r.toString(), value: t, priority: e });
        var n = this.generateServerValues(),
          t = tc(t, e),
          e = this.serverSyncTree_.calcCompleteEventCache(r),
          n = Tc(t, e, n),
          s = this.getNextWriteId_(),
          n = this.serverSyncTree_.applyUserOverwrite(r, n, s, !0);
        this.eventQueue_.queueEvents(n),
          this.server_.put(r.toString(), t.val(!0), function (t, e) {
            var n = 'ok' === t;
            n || oa('set at ' + r + ' failed: ' + t);
            n = o.serverSyncTree_.ackUserWrite(s, !n);
            o.eventQueue_.raiseEventsForChangedPath(r, n),
              o.callOnCompleteCallback(i, t, e);
          });
        t = this.abortTransactions_(r);
        this.rerunTransactions_(t),
          this.eventQueue_.raiseEventsForChangedPath(t, []);
      }),
      (ml.prototype.update = function (i, t, o) {
        var s = this;
        this.log_('update', { path: i.toString(), value: t });
        var a,
          e,
          n = !0,
          r = this.generateServerValues(),
          u = {};
        Ta(t, function (t, e) {
          (n = !1), (u[t] = Ic(i.child(t), tc(e), s.serverSyncTree_, r));
        }),
          n
            ? (ma("update() called with empty data.  Don't do anything."),
              this.callOnCompleteCallback(o, 'ok'))
            : ((a = this.getNextWriteId_()),
              (e = this.serverSyncTree_.applyUserMerge(i, u, a)),
              this.eventQueue_.queueEvents(e),
              this.server_.merge(i.toString(), t, function (t, e) {
                var n = 'ok' === t;
                n || oa('update at ' + i + ' failed: ' + t);
                var r = s.serverSyncTree_.ackUserWrite(a, !n),
                  n = 0 < r.length ? s.rerunTransactions_(i) : i;
                s.eventQueue_.raiseEventsForChangedPath(n, r),
                  s.callOnCompleteCallback(o, t, e);
              }),
              Ta(t, function (t) {
                t = s.abortTransactions_(i.child(t));
                s.rerunTransactions_(t);
              }),
              this.eventQueue_.raiseEventsForChangedPath(i, []));
      }),
      (ml.prototype.runOnDisconnectEvents_ = function () {
        var n = this;
        this.log_('onDisconnectEvents');
        var r = this.generateServerValues(),
          i = new Rc();
        this.onDisconnect_.forEachTree(Ra.Empty, function (t, e) {
          e = Ic(t, e, n.serverSyncTree_, r);
          i.remember(t, e);
        });
        var o = [];
        i.forEachTree(Ra.Empty, function (t, e) {
          o = o.concat(n.serverSyncTree_.applyServerOverwrite(t, e));
          t = n.abortTransactions_(t);
          n.rerunTransactions_(t);
        }),
          (this.onDisconnect_ = new Rc()),
          this.eventQueue_.raiseEventsForChangedPath(Ra.Empty, o);
      }),
      (ml.prototype.onDisconnectCancel = function (n, r) {
        var i = this;
        this.server_.onDisconnectCancel(n.toString(), function (t, e) {
          'ok' === t && i.onDisconnect_.forget(n),
            i.callOnCompleteCallback(r, t, e);
        });
      }),
      (ml.prototype.onDisconnectSet = function (n, t, r) {
        var i = this,
          o = tc(t);
        this.server_.onDisconnectPut(n.toString(), o.val(!0), function (t, e) {
          'ok' === t && i.onDisconnect_.remember(n, o),
            i.callOnCompleteCallback(r, t, e);
        });
      }),
      (ml.prototype.onDisconnectSetWithPriority = function (n, t, e, r) {
        var i = this,
          o = tc(t, e);
        this.server_.onDisconnectPut(n.toString(), o.val(!0), function (t, e) {
          'ok' === t && i.onDisconnect_.remember(n, o),
            i.callOnCompleteCallback(r, t, e);
        });
      }),
      (ml.prototype.onDisconnectUpdate = function (n, r, i) {
        var o = this;
        if (ns(r))
          return (
            ma(
              "onDisconnect().update() called with empty data.  Don't do anything."
            ),
            void this.callOnCompleteCallback(i, 'ok')
          );
        this.server_.onDisconnectMerge(n.toString(), r, function (t, e) {
          'ok' === t &&
            Ta(r, function (t, e) {
              e = tc(e);
              o.onDisconnect_.remember(n.child(t), e);
            }),
            o.callOnCompleteCallback(i, t, e);
        });
      }),
      (ml.prototype.addEventCallbackForQuery = function (t, e) {
        e = ('.info' === t.path.getFront()
          ? this.infoSyncTree_
          : this.serverSyncTree_
        ).addEventRegistration(t, e);
        this.eventQueue_.raiseEventsAtPath(t.path, e);
      }),
      (ml.prototype.removeEventCallbackForQuery = function (t, e) {
        e = ('.info' === t.path.getFront()
          ? this.infoSyncTree_
          : this.serverSyncTree_
        ).removeEventRegistration(t, e);
        this.eventQueue_.raiseEventsAtPath(t.path, e);
      }),
      (ml.prototype.interrupt = function () {
        this.persistentConnection_ && this.persistentConnection_.interrupt(yl);
      }),
      (ml.prototype.resume = function () {
        this.persistentConnection_ && this.persistentConnection_.resume(yl);
      }),
      (ml.prototype.stats = function (t) {
        var i;
        void 0 === t && (t = !1),
          'undefined' != typeof console &&
            ((t = t
              ? (this.statsListener_ ||
                  (this.statsListener_ = new kh(this.stats_)),
                this.statsListener_.get())
              : this.stats_.get()),
            (i = Object.keys(t).reduce(function (t, e) {
              return Math.max(e.length, t);
            }, 0)),
            Ta(t, function (t, e) {
              for (var n = t, r = t.length; r < i + 2; r++) n += ' ';
              console.log(n + e);
            }));
      }),
      (ml.prototype.statsIncrementCounter = function (t) {
        this.stats_.incrementCounter(t), this.statsReporter_.includeStat(t);
      }),
      (ml.prototype.log_ = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        var n = '';
        this.persistentConnection_ && (n = this.persistentConnection_.id + ':'),
          ma.apply(void 0, To([n], t));
      }),
      (ml.prototype.callOnCompleteCallback = function (n, r, i) {
        n &&
          Ca(function () {
            var t, e;
            'ok' === r
              ? n(null)
              : ((e = t = (r || 'error').toUpperCase()),
                i && (e += ': ' + i),
                ((e = new Error(e)).code = t),
                n(e));
          });
      }),
      Object.defineProperty(ml.prototype, 'database', {
        get: function () {
          return this.__database || (this.__database = new jl(this));
        },
        enumerable: !1,
        configurable: !0
      }),
      ml);
  function ml(t, e, n, r) {
    (this.repoInfo_ = t),
      (this.forceRestClient_ = e),
      (this.app = n),
      (this.authTokenProvider_ = r),
      (this.dataUpdateCount = 0),
      (this.statsListener_ = null),
      (this.eventQueue_ = new Dh()),
      (this.nextWriteId_ = 1),
      (this.interceptServerDataCallback_ = null),
      (this.onDisconnect_ = new Rc()),
      (this.persistentConnection_ = null),
      (this.key = this.repoInfo_.toURLString());
  }
  var bl =
    ((_l.prototype.getStartPost = function () {
      return this.startPost_;
    }),
    (_l.prototype.getEndPost = function () {
      return this.endPost_;
    }),
    (_l.prototype.matches = function (t) {
      return (
        this.index_.compare(this.getStartPost(), t) <= 0 &&
        this.index_.compare(t, this.getEndPost()) <= 0
      );
    }),
    (_l.prototype.updateChild = function (t, e, n, r, i, o) {
      return (
        this.matches(new hu(e, n)) || (n = Qu.EMPTY_NODE),
        this.indexedFilter_.updateChild(t, e, n, r, i, o)
      );
    }),
    (_l.prototype.updateFullNode = function (t, e, n) {
      e.isLeafNode() && (e = Qu.EMPTY_NODE);
      var r = (r = e.withIndex(this.index_)).updatePriority(Qu.EMPTY_NODE),
        i = this;
      return (
        e.forEachChild(Au, function (t, e) {
          i.matches(new hu(t, e)) ||
            (r = r.updateImmediateChild(t, Qu.EMPTY_NODE));
        }),
        this.indexedFilter_.updateFullNode(t, r, n)
      );
    }),
    (_l.prototype.updatePriority = function (t, e) {
      return t;
    }),
    (_l.prototype.filtersNodes = function () {
      return !0;
    }),
    (_l.prototype.getIndexedFilter = function () {
      return this.indexedFilter_;
    }),
    (_l.prototype.getIndex = function () {
      return this.index_;
    }),
    (_l.getStartPost_ = function (t) {
      if (t.hasStart()) {
        var e = t.getIndexStartName();
        return t.getIndex().makePost(t.getIndexStartValue(), e);
      }
      return t.getIndex().minPost();
    }),
    (_l.getEndPost_ = function (t) {
      if (t.hasEnd()) {
        var e = t.getIndexEndName();
        return t.getIndex().makePost(t.getIndexEndValue(), e);
      }
      return t.getIndex().maxPost();
    }),
    _l);
  function _l(t) {
    (this.indexedFilter_ = new Jc(t.getIndex())),
      (this.index_ = t.getIndex()),
      (this.startPost_ = _l.getStartPost_(t)),
      (this.endPost_ = _l.getEndPost_(t));
  }
  var wl =
    ((El.prototype.updateChild = function (t, e, n, r, i, o) {
      return (
        this.rangedFilter_.matches(new hu(e, n)) || (n = Qu.EMPTY_NODE),
        t.getImmediateChild(e).equals(n)
          ? t
          : t.numChildren() < this.limit_
          ? this.rangedFilter_.getIndexedFilter().updateChild(t, e, n, r, i, o)
          : this.fullLimitUpdateChild_(t, e, n, i, o)
      );
    }),
    (El.prototype.updateFullNode = function (t, e, n) {
      var r;
      if (e.isLeafNode() || e.isEmpty())
        r = Qu.EMPTY_NODE.withIndex(this.index_);
      else if (2 * this.limit_ < e.numChildren() && e.isIndexed(this.index_)) {
        r = Qu.EMPTY_NODE.withIndex(this.index_);
        var i = void 0;
        i = this.reverse_
          ? e.getReverseIteratorFrom(
              this.rangedFilter_.getEndPost(),
              this.index_
            )
          : e.getIteratorFrom(this.rangedFilter_.getStartPost(), this.index_);
        for (var o = 0; i.hasNext() && o < this.limit_; ) {
          var s = i.getNext();
          if (
            !(this.reverse_
              ? this.index_.compare(this.rangedFilter_.getStartPost(), s) <= 0
              : this.index_.compare(s, this.rangedFilter_.getEndPost()) <= 0)
          )
            break;
          (r = r.updateImmediateChild(s.name, s.node)), o++;
        }
      } else {
        r = (r = e.withIndex(this.index_)).updatePriority(Qu.EMPTY_NODE);
        var a,
          u = void 0,
          c = void 0,
          h = void 0,
          i = void 0;
        h = this.reverse_
          ? ((i = r.getReverseIterator(this.index_)),
            (u = this.rangedFilter_.getEndPost()),
            (c = this.rangedFilter_.getStartPost()),
            (a = this.index_.getCompare()),
            function (t, e) {
              return a(e, t);
            })
          : ((i = r.getIterator(this.index_)),
            (u = this.rangedFilter_.getStartPost()),
            (c = this.rangedFilter_.getEndPost()),
            this.index_.getCompare());
        for (var o = 0, l = !1; i.hasNext(); ) {
          s = i.getNext();
          !l && h(u, s) <= 0 && (l = !0),
            l && o < this.limit_ && h(s, c) <= 0
              ? o++
              : (r = r.updateImmediateChild(s.name, Qu.EMPTY_NODE));
        }
      }
      return this.rangedFilter_.getIndexedFilter().updateFullNode(t, r, n);
    }),
    (El.prototype.updatePriority = function (t, e) {
      return t;
    }),
    (El.prototype.filtersNodes = function () {
      return !0;
    }),
    (El.prototype.getIndexedFilter = function () {
      return this.rangedFilter_.getIndexedFilter();
    }),
    (El.prototype.getIndex = function () {
      return this.index_;
    }),
    (El.prototype.fullLimitUpdateChild_ = function (t, e, n, r, i) {
      var o, s;
      s = this.reverse_
        ? ((o = this.index_.getCompare()),
          function (t, e) {
            return o(e, t);
          })
        : this.index_.getCompare();
      var a = t;
      ko(a.numChildren() === this.limit_, '');
      var u = new hu(e, n),
        c = this.reverse_
          ? a.getFirstChild(this.index_)
          : a.getLastChild(this.index_),
        h = this.rangedFilter_.matches(u);
      if (a.hasChild(e)) {
        for (
          var l = a.getImmediateChild(e),
            f = r.getChildAfterChild(this.index_, c, this.reverse_);
          null != f && (f.name === e || a.hasChild(f.name));

        )
          f = r.getChildAfterChild(this.index_, f, this.reverse_);
        var p = null == f ? 1 : s(f, u);
        if (h && !n.isEmpty() && 0 <= p)
          return (
            null != i && i.trackChildChange(Yc.childChangedChange(e, n, l)),
            a.updateImmediateChild(e, n)
          );
        null != i && i.trackChildChange(Yc.childRemovedChange(e, l));
        l = a.updateImmediateChild(e, Qu.EMPTY_NODE);
        return null != f && this.rangedFilter_.matches(f)
          ? (null != i &&
              i.trackChildChange(Yc.childAddedChange(f.name, f.node)),
            l.updateImmediateChild(f.name, f.node))
          : l;
      }
      return !n.isEmpty() && h && 0 <= s(c, u)
        ? (null != i &&
            (i.trackChildChange(Yc.childRemovedChange(c.name, c.node)),
            i.trackChildChange(Yc.childAddedChange(e, n))),
          a
            .updateImmediateChild(e, n)
            .updateImmediateChild(c.name, Qu.EMPTY_NODE))
        : t;
    }),
    El);
  function El(t) {
    (this.rangedFilter_ = new bl(t)),
      (this.index_ = t.getIndex()),
      (this.limit_ = t.getLimit()),
      (this.reverse_ = !t.isViewFromLeft());
  }
  var Il =
    ((Tl.prototype.hasStart = function () {
      return this.startSet_;
    }),
    (Tl.prototype.isViewFromLeft = function () {
      return '' === this.viewFrom_
        ? this.startSet_
        : this.viewFrom_ === Tl.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT;
    }),
    (Tl.prototype.getIndexStartValue = function () {
      return (
        ko(this.startSet_, 'Only valid if start has been set'),
        this.indexStartValue_
      );
    }),
    (Tl.prototype.getIndexStartName = function () {
      return (
        ko(this.startSet_, 'Only valid if start has been set'),
        this.startNameSet_ ? this.indexStartName_ : _a
      );
    }),
    (Tl.prototype.hasEnd = function () {
      return this.endSet_;
    }),
    (Tl.prototype.getIndexEndValue = function () {
      return (
        ko(this.endSet_, 'Only valid if end has been set'), this.indexEndValue_
      );
    }),
    (Tl.prototype.getIndexEndName = function () {
      return (
        ko(this.endSet_, 'Only valid if end has been set'),
        this.endNameSet_ ? this.indexEndName_ : wa
      );
    }),
    (Tl.prototype.hasLimit = function () {
      return this.limitSet_;
    }),
    (Tl.prototype.hasAnchoredLimit = function () {
      return this.limitSet_ && '' !== this.viewFrom_;
    }),
    (Tl.prototype.getLimit = function () {
      return (
        ko(this.limitSet_, 'Only valid if limit has been set'), this.limit_
      );
    }),
    (Tl.prototype.getIndex = function () {
      return this.index_;
    }),
    (Tl.prototype.copy_ = function () {
      var t = new Tl();
      return (
        (t.limitSet_ = this.limitSet_),
        (t.limit_ = this.limit_),
        (t.startSet_ = this.startSet_),
        (t.indexStartValue_ = this.indexStartValue_),
        (t.startNameSet_ = this.startNameSet_),
        (t.indexStartName_ = this.indexStartName_),
        (t.endSet_ = this.endSet_),
        (t.indexEndValue_ = this.indexEndValue_),
        (t.endNameSet_ = this.endNameSet_),
        (t.indexEndName_ = this.indexEndName_),
        (t.index_ = this.index_),
        (t.viewFrom_ = this.viewFrom_),
        t
      );
    }),
    (Tl.prototype.limit = function (t) {
      var e = this.copy_();
      return (e.limitSet_ = !0), (e.limit_ = t), (e.viewFrom_ = ''), e;
    }),
    (Tl.prototype.limitToFirst = function (t) {
      var e = this.copy_();
      return (
        (e.limitSet_ = !0),
        (e.limit_ = t),
        (e.viewFrom_ = Tl.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT),
        e
      );
    }),
    (Tl.prototype.limitToLast = function (t) {
      var e = this.copy_();
      return (
        (e.limitSet_ = !0),
        (e.limit_ = t),
        (e.viewFrom_ = Tl.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT),
        e
      );
    }),
    (Tl.prototype.startAt = function (t, e) {
      var n = this.copy_();
      return (
        (n.startSet_ = !0),
        void 0 === t && (t = null),
        (n.indexStartValue_ = t),
        null != e
          ? ((n.startNameSet_ = !0), (n.indexStartName_ = e))
          : ((n.startNameSet_ = !1), (n.indexStartName_ = '')),
        n
      );
    }),
    (Tl.prototype.endAt = function (t, e) {
      var n = this.copy_();
      return (
        (n.endSet_ = !0),
        void 0 === t && (t = null),
        (n.indexEndValue_ = t),
        void 0 !== e
          ? ((n.endNameSet_ = !0), (n.indexEndName_ = e))
          : ((n.endNameSet_ = !1), (n.indexEndName_ = '')),
        n
      );
    }),
    (Tl.prototype.orderBy = function (t) {
      var e = this.copy_();
      return (e.index_ = t), e;
    }),
    (Tl.prototype.getQueryObject = function () {
      var t,
        e = Tl.WIRE_PROTOCOL_CONSTANTS_,
        n = {};
      return (
        this.startSet_ &&
          ((n[e.INDEX_START_VALUE] = this.indexStartValue_),
          this.startNameSet_ && (n[e.INDEX_START_NAME] = this.indexStartName_)),
        this.endSet_ &&
          ((n[e.INDEX_END_VALUE] = this.indexEndValue_),
          this.endNameSet_ && (n[e.INDEX_END_NAME] = this.indexEndName_)),
        this.limitSet_ &&
          ((n[e.LIMIT] = this.limit_),
          '' === (t = this.viewFrom_) &&
            (t = this.isViewFromLeft() ? e.VIEW_FROM_LEFT : e.VIEW_FROM_RIGHT),
          (n[e.VIEW_FROM] = t)),
        this.index_ !== Au && (n[e.INDEX] = this.index_.toString()),
        n
      );
    }),
    (Tl.prototype.loadsAllData = function () {
      return !(this.startSet_ || this.endSet_ || this.limitSet_);
    }),
    (Tl.prototype.isDefault = function () {
      return this.loadsAllData() && this.index_ === Au;
    }),
    (Tl.prototype.getNodeFilter = function () {
      return this.loadsAllData()
        ? new Jc(this.getIndex())
        : new (this.hasLimit() ? wl : bl)(this);
    }),
    (Tl.prototype.toRestQueryStringParameters = function () {
      var t,
        e = Tl.REST_QUERY_CONSTANTS_,
        n = {};
      return (
        this.isDefault() ||
          ((t =
            this.index_ === Au
              ? e.PRIORITY_INDEX
              : this.index_ === rc
              ? e.VALUE_INDEX
              : this.index_ === mu
              ? e.KEY_INDEX
              : (ko(this.index_ instanceof ic, 'Unrecognized index type!'),
                this.index_.toString())),
          (n[e.ORDER_BY] = $o(t)),
          this.startSet_ &&
            ((n[e.START_AT] = $o(this.indexStartValue_)),
            this.startNameSet_ &&
              (n[e.START_AT] += ',' + $o(this.indexStartName_))),
          this.endSet_ &&
            ((n[e.END_AT] = $o(this.indexEndValue_)),
            this.endNameSet_ && (n[e.END_AT] += ',' + $o(this.indexEndName_))),
          this.limitSet_ &&
            (this.isViewFromLeft()
              ? (n[e.LIMIT_TO_FIRST] = this.limit_)
              : (n[e.LIMIT_TO_LAST] = this.limit_))),
        n
      );
    }),
    (Tl.WIRE_PROTOCOL_CONSTANTS_ = {
      INDEX_START_VALUE: 'sp',
      INDEX_START_NAME: 'sn',
      INDEX_END_VALUE: 'ep',
      INDEX_END_NAME: 'en',
      LIMIT: 'l',
      VIEW_FROM: 'vf',
      VIEW_FROM_LEFT: 'l',
      VIEW_FROM_RIGHT: 'r',
      INDEX: 'i'
    }),
    (Tl.REST_QUERY_CONSTANTS_ = {
      ORDER_BY: 'orderBy',
      PRIORITY_INDEX: '$priority',
      VALUE_INDEX: '$value',
      KEY_INDEX: '$key',
      START_AT: 'startAt',
      END_AT: 'endAt',
      LIMIT_TO_FIRST: 'limitToFirst',
      LIMIT_TO_LAST: 'limitToLast'
    }),
    (Tl.DEFAULT = new Tl()),
    Tl);
  function Tl() {
    (this.limitSet_ = !1),
      (this.startSet_ = !1),
      (this.startNameSet_ = !1),
      (this.endSet_ = !1),
      (this.endNameSet_ = !1),
      (this.limit_ = 0),
      (this.viewFrom_ = ''),
      (this.indexStartValue_ = null),
      (this.indexStartName_ = ''),
      (this.indexEndValue_ = null),
      (this.indexEndName_ = ''),
      (this.index_ = Au);
  }
  var Sl,
    Cl =
      (mo(Nl, (Sl = gc)),
      (Nl.prototype.getKey = function () {
        return (
          hs('Reference.key', 0, 0, arguments.length),
          this.path.isEmpty() ? null : this.path.getBack()
        );
      }),
      (Nl.prototype.child = function (t) {
        var e, n, r, i;
        return (
          hs('Reference.child', 1, 1, arguments.length),
          'number' == typeof t
            ? (t = String(t))
            : t instanceof Ra ||
              (null === this.path.getFront()
                ? ((e = 'Reference.child'),
                  (i = !(n = 1)),
                  (r = (r = t) && r.replace(/^\/*\.info(\/|$)/, '/')),
                  Qa(e, n, r, i))
                : Qa('Reference.child', 1, t, !1)),
          new Nl(this.repo, this.path.child(t))
        );
      }),
      (Nl.prototype.getParent = function () {
        hs('Reference.parent', 0, 0, arguments.length);
        var t = this.path.parent();
        return null === t ? null : new Nl(this.repo, t);
      }),
      (Nl.prototype.getRoot = function () {
        hs('Reference.root', 0, 0, arguments.length);
        for (var t = this; null !== t.getParent(); ) t = t.getParent();
        return t;
      }),
      (Nl.prototype.databaseProp = function () {
        return this.repo.database;
      }),
      (Nl.prototype.set = function (t, e) {
        hs('Reference.set', 1, 2, arguments.length),
          Ya('Reference.set', this.path),
          Wa('Reference.set', 1, t, this.path, !1),
          fs('Reference.set', 2, e, !0);
        var n = new xo();
        return (
          this.repo.setWithPriority(this.path, t, null, n.wrapCallback(e)),
          n.promise
        );
      }),
      (Nl.prototype.update = function (t, e) {
        if (
          (hs('Reference.update', 1, 2, arguments.length),
          Ya('Reference.update', this.path),
          Array.isArray(t))
        ) {
          for (var n = {}, r = 0; r < t.length; ++r) n['' + r] = t[r];
          (t = n),
            oa(
              'Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.'
            );
        }
        Ka('Reference.update', 1, t, this.path, !1),
          fs('Reference.update', 2, e, !0);
        var i = new xo();
        return this.repo.update(this.path, t, i.wrapCallback(e)), i.promise;
      }),
      (Nl.prototype.setWithPriority = function (t, e, n) {
        if (
          (hs('Reference.setWithPriority', 2, 3, arguments.length),
          Ya('Reference.setWithPriority', this.path),
          Wa('Reference.setWithPriority', 1, t, this.path, !1),
          Ha('Reference.setWithPriority', 2, e, !1),
          fs('Reference.setWithPriority', 3, n, !0),
          '.length' === this.getKey() || '.keys' === this.getKey())
        )
          throw (
            'Reference.setWithPriority failed: ' +
            this.getKey() +
            ' is a read-only object.'
          );
        var r = new xo();
        return (
          this.repo.setWithPriority(this.path, t, e, r.wrapCallback(n)),
          r.promise
        );
      }),
      (Nl.prototype.remove = function (t) {
        return (
          hs('Reference.remove', 0, 1, arguments.length),
          Ya('Reference.remove', this.path),
          fs('Reference.remove', 1, t, !0),
          this.set(null, t)
        );
      }),
      (Nl.prototype.transaction = function (t, r, e) {
        if (
          (hs('Reference.transaction', 1, 3, arguments.length),
          Ya('Reference.transaction', this.path),
          fs('Reference.transaction', 1, t, !1),
          fs('Reference.transaction', 2, r, !0),
          (function (t, e, n, r) {
            if ((!r || void 0 !== n) && 'boolean' != typeof n)
              throw new Error(ls(t, e, r) + 'must be a boolean.');
          })('Reference.transaction', 3, e, !0),
          '.length' === this.getKey() || '.keys' === this.getKey())
        )
          throw (
            'Reference.transaction failed: ' +
            this.getKey() +
            ' is a read-only object.'
          );
        void 0 === e && (e = !0);
        var i = new xo();
        'function' == typeof r && i.promise.catch(function () {});
        return (
          this.repo.startTransaction(
            this.path,
            t,
            function (t, e, n) {
              t ? i.reject(t) : i.resolve(new iu(e, n)),
                'function' == typeof r && r(t, e, n);
            },
            e
          ),
          i.promise
        );
      }),
      (Nl.prototype.setPriority = function (t, e) {
        hs('Reference.setPriority', 1, 2, arguments.length),
          Ya('Reference.setPriority', this.path),
          Ha('Reference.setPriority', 1, t, !1),
          fs('Reference.setPriority', 2, e, !0);
        var n = new xo();
        return (
          this.repo.setWithPriority(
            this.path.child('.priority'),
            t,
            null,
            n.wrapCallback(e)
          ),
          n.promise
        );
      }),
      (Nl.prototype.push = function (t, e) {
        hs('Reference.push', 0, 2, arguments.length),
          Ya('Reference.push', this.path),
          Wa('Reference.push', 1, t, this.path, !0),
          fs('Reference.push', 2, e, !0);
        var n = this.repo.serverTime(),
          r = cu(n),
          n = this.child(r),
          i = this.child(r),
          t =
            null != t
              ? n.set(t, e).then(function () {
                  return i;
                })
              : Promise.resolve(i);
        return (
          (n.then = t.then.bind(t)),
          (n.catch = t.then.bind(t, void 0)),
          'function' == typeof e && t.catch(function () {}),
          n
        );
      }),
      (Nl.prototype.onDisconnect = function () {
        return (
          Ya('Reference.onDisconnect', this.path), new nu(this.repo, this.path)
        );
      }),
      Object.defineProperty(Nl.prototype, 'database', {
        get: function () {
          return this.databaseProp();
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Nl.prototype, 'key', {
        get: function () {
          return this.getKey();
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Nl.prototype, 'parent', {
        get: function () {
          return this.getParent();
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Nl.prototype, 'root', {
        get: function () {
          return this.getRoot();
        },
        enumerable: !1,
        configurable: !0
      }),
      Nl);
  function Nl(t, e) {
    if (!(t instanceof gl))
      throw new Error(
        'new Reference() no longer supported - use app.database().'
      );
    return Sl.call(this, t, e, Il.DEFAULT, !1) || this;
  }
  (gc.__referenceConstructor = Cl), (ph.__referenceConstructor = Cl);
  var Al,
    kl = function () {
      (this.children = {}), (this.childCount = 0), (this.value = null);
    },
    Rl =
      ((Ol.prototype.subTree = function (t) {
        for (
          var e = t instanceof Ra ? t : new Ra(t), n = this, r = e.getFront();
          null !== r;

        )
          (n = new Ol(r, n, es(n.node_.children, r) || new kl())),
            (r = (e = e.popFront()).getFront());
        return n;
      }),
      (Ol.prototype.getValue = function () {
        return this.node_.value;
      }),
      (Ol.prototype.setValue = function (t) {
        ko(void 0 !== t, 'Cannot set value to undefined'),
          (this.node_.value = t),
          this.updateParents_();
      }),
      (Ol.prototype.clear = function () {
        (this.node_.value = null),
          (this.node_.children = {}),
          (this.node_.childCount = 0),
          this.updateParents_();
      }),
      (Ol.prototype.hasChildren = function () {
        return 0 < this.node_.childCount;
      }),
      (Ol.prototype.isEmpty = function () {
        return null === this.getValue() && !this.hasChildren();
      }),
      (Ol.prototype.forEachChild = function (n) {
        var r = this;
        Ta(this.node_.children, function (t, e) {
          n(new Ol(t, r, e));
        });
      }),
      (Ol.prototype.forEachDescendant = function (e, t, n) {
        t && !n && e(this),
          this.forEachChild(function (t) {
            t.forEachDescendant(e, !0, n);
          }),
          t && n && e(this);
      }),
      (Ol.prototype.forEachAncestor = function (t, e) {
        for (var n = e ? this : this.parent(); null !== n; ) {
          if (t(n)) return !0;
          n = n.parent();
        }
        return !1;
      }),
      (Ol.prototype.forEachImmediateDescendantWithValue = function (e) {
        this.forEachChild(function (t) {
          null !== t.getValue()
            ? e(t)
            : t.forEachImmediateDescendantWithValue(e);
        });
      }),
      (Ol.prototype.path = function () {
        return new Ra(
          null === this.parent_
            ? this.name_
            : this.parent_.path() + '/' + this.name_
        );
      }),
      (Ol.prototype.name = function () {
        return this.name_;
      }),
      (Ol.prototype.parent = function () {
        return this.parent_;
      }),
      (Ol.prototype.updateParents_ = function () {
        null !== this.parent_ && this.parent_.updateChild_(this.name_, this);
      }),
      (Ol.prototype.updateChild_ = function (t, e) {
        var n = e.isEmpty(),
          r = ts(this.node_.children, t);
        n && r
          ? (delete this.node_.children[t],
            this.node_.childCount--,
            this.updateParents_())
          : n ||
            r ||
            ((this.node_.children[t] = e.node_),
            this.node_.childCount++,
            this.updateParents_());
      }),
      Ol);
  function Ol(t, e, n) {
    void 0 === t && (t = ''),
      void 0 === e && (e = null),
      void 0 === n && (n = new kl()),
      (this.name_ = t),
      (this.parent_ = e),
      (this.node_ = n);
  }
  ((vt = Al = Al || {})[(vt.RUN = 0)] = 'RUN'),
    (vt[(vt.SENT = 1)] = 'SENT'),
    (vt[(vt.COMPLETED = 2)] = 'COMPLETED'),
    (vt[(vt.SENT_NEEDS_ABORT = 3)] = 'SENT_NEEDS_ABORT'),
    (vt[(vt.NEEDS_ABORT = 4)] = 'NEEDS_ABORT'),
    (gl.MAX_TRANSACTION_RETRIES_ = 25),
    (gl.prototype.transactionsInit_ = function () {
      this.transactionQueueTree_ = new Rl();
    }),
    (gl.prototype.startTransaction = function (t, e, n, r) {
      this.log_('transaction on ' + t);
      function i() {}
      var o = new Cl(this, t);
      o.on('value', i);
      var s = {
          path: t,
          update: e,
          onComplete: n,
          status: null,
          order: da(),
          applyLocally: r,
          retryCount: 0,
          unwatcher: function () {
            o.off('value', i);
          },
          abortReason: null,
          currentWriteId: null,
          currentInputSnapshot: null,
          currentOutputSnapshotRaw: null,
          currentOutputSnapshotResolved: null
        },
        e = this.getLatestState_(t);
      s.currentInputSnapshot = e;
      var a,
        n = s.update(e.val());
      void 0 === n
        ? (s.unwatcher(),
          (s.currentOutputSnapshotRaw = null),
          (s.currentOutputSnapshotResolved = null),
          s.onComplete &&
            ((a = new sc(s.currentInputSnapshot, new Cl(this, s.path), Au)),
            s.onComplete(null, !1, a)))
        : (eu('transaction failed: Data returned ', n, s.path),
          (s.status = Al.RUN),
          (a =
            (r = this.transactionQueueTree_.subTree(t)).getValue() || []).push(
            s
          ),
          r.setValue(a),
          (r = void 0),
          'object' == typeof n && null !== n && ts(n, '.priority')
            ? ((r = es(n, '.priority')),
              ko(
                Ba(r),
                'Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.'
              ))
            : (r = (
                this.serverSyncTree_.calcCompleteEventCache(t) || Qu.EMPTY_NODE
              )
                .getPriority()
                .val()),
          (a = this.generateServerValues()),
          (r = tc(n, r)),
          (a = Tc(r, e, a)),
          (s.currentOutputSnapshotRaw = r),
          (s.currentOutputSnapshotResolved = a),
          (s.currentWriteId = this.getNextWriteId_()),
          (s = this.serverSyncTree_.applyUserOverwrite(
            t,
            a,
            s.currentWriteId,
            s.applyLocally
          )),
          this.eventQueue_.raiseEventsForChangedPath(t, s),
          this.sendReadyTransactions_());
    }),
    (gl.prototype.getLatestState_ = function (t, e) {
      return this.serverSyncTree_.calcCompleteEventCache(t, e) || Qu.EMPTY_NODE;
    }),
    (gl.prototype.sendReadyTransactions_ = function (t) {
      var e,
        n = this;
      void 0 === t && (t = this.transactionQueueTree_),
        t || this.pruneCompletedTransactionsBelowNode_(t),
        null !== t.getValue()
          ? ((e = this.buildTransactionQueue_(t)),
            ko(0 < e.length, 'Sending zero length transaction queue'),
            e.every(function (t) {
              return t.status === Al.RUN;
            }) && this.sendTransactionQueue_(t.path(), e))
          : t.hasChildren() &&
            t.forEachChild(function (t) {
              n.sendReadyTransactions_(t);
            });
    }),
    (gl.prototype.sendTransactionQueue_ = function (s, a) {
      for (
        var u = this,
          t = a.map(function (t) {
            return t.currentWriteId;
          }),
          e = this.getLatestState_(s, t),
          n = e,
          t = e.hash(),
          r = 0;
        r < a.length;
        r++
      ) {
        var i = a[r];
        ko(
          i.status === Al.RUN,
          'tryToSendTransactionQueue_: items in queue should all be run.'
        ),
          (i.status = Al.SENT),
          i.retryCount++;
        var o = Ra.relativePath(s, i.path),
          n = n.updateChild(o, i.currentOutputSnapshotRaw);
      }
      var e = n.val(!0),
        c = s;
      this.server_.put(
        c.toString(),
        e,
        function (t) {
          u.log_('transaction put response', { path: c.toString(), status: t });
          var e = [];
          if ('ok' === t) {
            for (var n, r, i = [], o = 0; o < a.length; o++) {
              (a[o].status = Al.COMPLETED),
                (e = e.concat(
                  u.serverSyncTree_.ackUserWrite(a[o].currentWriteId)
                )),
                a[o].onComplete &&
                  ((n = a[o].currentOutputSnapshotResolved),
                  (r = new Cl(u, a[o].path)),
                  (r = new sc(n, r, Au)),
                  i.push(a[o].onComplete.bind(null, null, !0, r))),
                a[o].unwatcher();
            }
            u.pruneCompletedTransactionsBelowNode_(
              u.transactionQueueTree_.subTree(s)
            ),
              u.sendReadyTransactions_(),
              u.eventQueue_.raiseEventsForChangedPath(s, e);
            for (o = 0; o < i.length; o++) Ca(i[o]);
          } else {
            if ('datastale' === t)
              for (o = 0; o < a.length; o++)
                a[o].status === Al.SENT_NEEDS_ABORT
                  ? (a[o].status = Al.NEEDS_ABORT)
                  : (a[o].status = Al.RUN);
            else {
              oa('transaction at ' + c.toString() + ' failed: ' + t);
              for (o = 0; o < a.length; o++)
                (a[o].status = Al.NEEDS_ABORT), (a[o].abortReason = t);
            }
            u.rerunTransactions_(s);
          }
        },
        t
      );
    }),
    (gl.prototype.rerunTransactions_ = function (t) {
      var e = this.getAncestorTransactionNode_(t),
        t = e.path(),
        e = this.buildTransactionQueue_(e);
      return this.rerunTransactionQueue_(e, t), t;
    }),
    (gl.prototype.rerunTransactionQueue_ = function (t, e) {
      if (0 !== t.length) {
        for (
          var n = [],
            r = [],
            i = t
              .filter(function (t) {
                return t.status === Al.RUN;
              })
              .map(function (t) {
                return t.currentWriteId;
              }),
            o = 0;
          o < t.length;
          o++
        ) {
          var s,
            a,
            u,
            c = t[o],
            h = Ra.relativePath(e, c.path),
            l = !1,
            f = void 0;
          ko(
            null !== h,
            'rerunTransactionsUnderNode_: relativePath should not be null.'
          ),
            c.status === Al.NEEDS_ABORT
              ? ((l = !0),
                (f = c.abortReason),
                (r = r.concat(
                  this.serverSyncTree_.ackUserWrite(c.currentWriteId, !0)
                )))
              : c.status === Al.RUN &&
                (r =
                  c.retryCount >= gl.MAX_TRANSACTION_RETRIES_
                    ? ((l = !0),
                      (f = 'maxretry'),
                      r.concat(
                        this.serverSyncTree_.ackUserWrite(c.currentWriteId, !0)
                      ))
                    : ((s = this.getLatestState_(c.path, i)),
                      (c.currentInputSnapshot = s),
                      void 0 !== (u = t[o].update(s.val()))
                        ? (eu('transaction failed: Data returned ', u, c.path),
                          (a = tc(u)),
                          ('object' == typeof u &&
                            null != u &&
                            ts(u, '.priority')) ||
                            (a = a.updatePriority(s.getPriority())),
                          (h = c.currentWriteId),
                          (u = this.generateServerValues()),
                          (u = Tc(a, s, u)),
                          (c.currentOutputSnapshotRaw = a),
                          (c.currentOutputSnapshotResolved = u),
                          (c.currentWriteId = this.getNextWriteId_()),
                          i.splice(i.indexOf(h), 1),
                          (r = r.concat(
                            this.serverSyncTree_.applyUserOverwrite(
                              c.path,
                              u,
                              c.currentWriteId,
                              c.applyLocally
                            )
                          )).concat(this.serverSyncTree_.ackUserWrite(h, !0)))
                        : ((l = !0),
                          (f = 'nodata'),
                          r.concat(
                            this.serverSyncTree_.ackUserWrite(
                              c.currentWriteId,
                              !0
                            )
                          )))),
            this.eventQueue_.raiseEventsForChangedPath(e, r),
            (r = []),
            l &&
              ((t[o].status = Al.COMPLETED),
              (c = t[o].unwatcher),
              setTimeout(c, Math.floor(0)),
              t[o].onComplete &&
                ('nodata' === f
                  ? ((l = new Cl(this, t[o].path)),
                    (c = t[o].currentInputSnapshot),
                    (l = new sc(c, l, Au)),
                    n.push(t[o].onComplete.bind(null, null, !1, l)))
                  : n.push(
                      t[o].onComplete.bind(null, new Error(f), !1, null)
                    )));
        }
        this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);
        for (o = 0; o < n.length; o++) Ca(n[o]);
        this.sendReadyTransactions_();
      }
    }),
    (gl.prototype.getAncestorTransactionNode_ = function (t) {
      for (
        var e = this.transactionQueueTree_, n = t.getFront();
        null !== n && null === e.getValue();

      )
        (e = e.subTree(n)), (n = (t = t.popFront()).getFront());
      return e;
    }),
    (gl.prototype.buildTransactionQueue_ = function (t) {
      var e = [];
      return (
        this.aggregateTransactionQueuesForNode_(t, e),
        e.sort(function (t, e) {
          return t.order - e.order;
        }),
        e
      );
    }),
    (gl.prototype.aggregateTransactionQueuesForNode_ = function (t, e) {
      var n = this,
        r = t.getValue();
      if (null !== r) for (var i = 0; i < r.length; i++) e.push(r[i]);
      t.forEachChild(function (t) {
        n.aggregateTransactionQueuesForNode_(t, e);
      });
    }),
    (gl.prototype.pruneCompletedTransactionsBelowNode_ = function (t) {
      var e = this,
        n = t.getValue();
      if (n) {
        for (var r = 0, i = 0; i < n.length; i++)
          n[i].status !== Al.COMPLETED && ((n[r] = n[i]), r++);
        (n.length = r), t.setValue(0 < n.length ? n : null);
      }
      t.forEachChild(function (t) {
        e.pruneCompletedTransactionsBelowNode_(t);
      });
    }),
    (gl.prototype.abortTransactions_ = function (t) {
      var e = this,
        n = this.getAncestorTransactionNode_(t).path(),
        t = this.transactionQueueTree_.subTree(t);
      return (
        t.forEachAncestor(function (t) {
          e.abortTransactionsOnNode_(t);
        }),
        this.abortTransactionsOnNode_(t),
        t.forEachDescendant(function (t) {
          e.abortTransactionsOnNode_(t);
        }),
        n
      );
    }),
    (gl.prototype.abortTransactionsOnNode_ = function (t) {
      var e = t.getValue();
      if (null !== e) {
        for (var n = [], r = [], i = -1, o = 0; o < e.length; o++) {
          e[o].status === Al.SENT_NEEDS_ABORT ||
            (e[o].status === Al.SENT
              ? (ko(
                  i === o - 1,
                  'All SENT items should be at beginning of queue.'
                ),
                (e[(i = o)].status = Al.SENT_NEEDS_ABORT),
                (e[o].abortReason = 'set'))
              : (ko(
                  e[o].status === Al.RUN,
                  'Unexpected transaction status in abort'
                ),
                e[o].unwatcher(),
                (r = r.concat(
                  this.serverSyncTree_.ackUserWrite(e[o].currentWriteId, !0)
                )),
                e[o].onComplete &&
                  n.push(
                    e[o].onComplete.bind(null, new Error('set'), !1, null)
                  )));
        }
        -1 === i ? t.setValue(null) : (e.length = i + 1),
          this.eventQueue_.raiseEventsForChangedPath(t.path(), r);
        for (o = 0; o < n.length; o++) Ca(n[o]);
      }
    });
  var Pl =
    ((Dl.prototype.getToken = function (t) {
      return this.auth_
        ? this.auth_.getToken(t).catch(function (t) {
            return t && 'auth/token-not-initialized' === t.code
              ? (ma(
                  'Got auth/token-not-initialized error.  Treating as null token.'
                ),
                null)
              : Promise.reject(t);
          })
        : Promise.resolve(null);
    }),
    (Dl.prototype.addTokenChangeListener = function (e) {
      this.auth_
        ? this.auth_.addAuthTokenListener(e)
        : (setTimeout(function () {
            return e(null);
          }, 0),
          this.authProvider_.get().then(function (t) {
            return t.addAuthTokenListener(e);
          }));
    }),
    (Dl.prototype.removeTokenChangeListener = function (e) {
      this.authProvider_.get().then(function (t) {
        return t.removeAuthTokenListener(e);
      });
    }),
    (Dl.prototype.notifyForInvalidToken = function () {
      var t =
        'Provided authentication credentials for the app named "' +
        this.app_.name +
        '" are invalid. This usually indicates your app was not initialized correctly. ';
      'credential' in this.app_.options
        ? (t +=
            'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.')
        : 'serviceAccount' in this.app_.options
        ? (t +=
            'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.')
        : (t +=
            'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.'),
        oa(t);
    }),
    Dl);
  function Dl(t, e) {
    var n = this;
    (this.app_ = t),
      (this.authProvider_ = e),
      (this.auth_ = null),
      (this.auth_ = e.getImmediate({ optional: !0 })),
      this.auth_ ||
        e.get().then(function (t) {
          return (n.auth_ = t);
        });
  }
  var xl =
    ((Ll.prototype.getToken = function (t) {
      return Promise.resolve({ accessToken: Ll.EMULATOR_AUTH_TOKEN });
    }),
    (Ll.prototype.addTokenChangeListener = function (t) {
      t(Ll.EMULATOR_AUTH_TOKEN);
    }),
    (Ll.prototype.removeTokenChangeListener = function (t) {}),
    (Ll.prototype.notifyForInvalidToken = function () {}),
    (Ll.EMULATOR_AUTH_TOKEN = 'owner'),
    Ll);
  function Ll() {}
  var Ml,
    Fl =
      ((Ul.getInstance = function () {
        return (Ml = Ml || new Ul());
      }),
      (Ul.prototype.interrupt = function () {
        var e, t, n, r;
        try {
          for (
            var i = Eo(Object.keys(this.repos_)), o = i.next();
            !o.done;
            o = i.next()
          ) {
            var s = o.value;
            try {
              for (
                var a = ((n = void 0), Eo(Object.keys(this.repos_[s]))),
                  u = a.next();
                !u.done;
                u = a.next()
              ) {
                var c = u.value;
                this.repos_[s][c].interrupt();
              }
            } catch (t) {
              n = { error: t };
            } finally {
              try {
                u && !u.done && (r = a.return) && r.call(a);
              } finally {
                if (n) throw n.error;
              }
            }
          }
        } catch (t) {
          e = { error: t };
        } finally {
          try {
            o && !o.done && (t = i.return) && t.call(i);
          } finally {
            if (e) throw e.error;
          }
        }
      }),
      (Ul.prototype.resume = function () {
        var e, t, n, r;
        try {
          for (
            var i = Eo(Object.keys(this.repos_)), o = i.next();
            !o.done;
            o = i.next()
          ) {
            var s = o.value;
            try {
              for (
                var a = ((n = void 0), Eo(Object.keys(this.repos_[s]))),
                  u = a.next();
                !u.done;
                u = a.next()
              ) {
                var c = u.value;
                this.repos_[s][c].resume();
              }
            } catch (t) {
              n = { error: t };
            } finally {
              try {
                u && !u.done && (r = a.return) && r.call(a);
              } finally {
                if (n) throw n.error;
              }
            }
          }
        } catch (t) {
          e = { error: t };
        } finally {
          try {
            o && !o.done && (t = i.return) && t.call(i);
          } finally {
            if (e) throw e.error;
          }
        }
      }),
      (Ul.prototype.applyEmulatorSettings = function (t, e, n) {
        (t.repoInfo_ = new Fa(
          e + ':' + n,
          !1,
          t.repoInfo_.namespace,
          t.repoInfo_.webSocketOnly,
          t.repoInfo_.nodeAdmin,
          t.repoInfo_.persistenceKey,
          t.repoInfo_.includeNamespaceInQueryParams
        )),
          t.repoInfo_.nodeAdmin && (t.authTokenProvider_ = new xl());
      }),
      (Ul.prototype.databaseFromApp = function (t, e, n, r) {
        var i = n || t.options.databaseURL;
        void 0 === i &&
          (t.options.projectId ||
            ia(
              "Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."
            ),
          ma('Using default host for project ', t.options.projectId),
          (i = t.options.projectId + '-default-rtdb.firebaseio.com'));
        var o,
          s = ja(i, r),
          a = s.repoInfo,
          n = void 0;
        'undefined' != typeof process &&
          (n = process.env.FIREBASE_DATABASE_EMULATOR_HOST),
          n
            ? ((o = !0),
              (i = 'http://' + n + '?ns=' + a.namespace),
              (a = (s = ja(i, r)).repoInfo))
            : (o = !s.repoInfo.secure);
        e = r && o ? new xl() : new Pl(t, e);
        return (
          Xa('Invalid Firebase Database URL', 1, s),
          s.path.isEmpty() ||
            ia(
              'Database URL must point to the root of a Firebase Database (not including a child path).'
            ),
          this.createRepo(a, t, e).database
        );
      }),
      (Ul.prototype.deleteRepo = function (t) {
        var e = es(this.repos_, t.app.name);
        (e && es(e, t.key) === t) ||
          ia(
            'Database ' +
              t.app.name +
              '(' +
              t.repoInfo_ +
              ') has already been deleted.'
          ),
          t.interrupt(),
          delete e[t.key];
      }),
      (Ul.prototype.createRepo = function (t, e, n) {
        var r = es(this.repos_, e.name);
        r || ((r = {}), (this.repos_[e.name] = r));
        var i = es(r, t.toURLString());
        return (
          i &&
            ia(
              'Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.'
            ),
          (i = new gl(t, this.useRestClient_, e, n)),
          (r[t.toURLString()] = i)
        );
      }),
      (Ul.prototype.forceRestClient = function (t) {
        this.useRestClient_ = t;
      }),
      Ul);
  function Ul() {
    (this.repos_ = {}), (this.useRestClient_ = !1);
  }
  var jl =
    (Object.defineProperty(Vl.prototype, 'repo_', {
      get: function () {
        return (
          this.instanceStarted_ ||
            (this.repoInternal_.start(), (this.instanceStarted_ = !0)),
          this.repoInternal_
        );
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(Vl.prototype, 'root_', {
      get: function () {
        return (
          this.rootInternal_ ||
            (this.rootInternal_ = new Cl(this.repo_, Ra.Empty)),
          this.rootInternal_
        );
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(Vl.prototype, 'app', {
      get: function () {
        return this.repo_.app;
      },
      enumerable: !1,
      configurable: !0
    }),
    (Vl.prototype.useEmulator = function (t, e) {
      this.checkDeleted_('useEmulator'),
        this.instanceStarted_
          ? ia(
              'Cannot call useEmulator() after instance has already been initialized.'
            )
          : Fl.getInstance().applyEmulatorSettings(this.repoInternal_, t, e);
    }),
    (Vl.prototype.ref = function (t) {
      return (
        this.checkDeleted_('ref'),
        hs('database.ref', 0, 1, arguments.length),
        t instanceof Cl
          ? this.refFromURL(t.toString())
          : void 0 !== t
          ? this.root_.child(t)
          : this.root_
      );
    }),
    (Vl.prototype.refFromURL = function (t) {
      var e = 'database.refFromURL';
      this.checkDeleted_(e), hs(e, 1, 1, arguments.length);
      var n = ja(t, this.repo_.repoInfo_.nodeAdmin);
      Xa(e, 1, n);
      t = n.repoInfo;
      return (
        t.isCustomHost() ||
          t.host === this.repo_.repoInfo_.host ||
          ia(
            e +
              ': Host name does not match the current database: (found ' +
              t.host +
              ' but expected ' +
              this.repo_.repoInfo_.host +
              ')'
          ),
        this.ref(n.path.toString())
      );
    }),
    (Vl.prototype.checkDeleted_ = function (t) {
      null === this.repoInternal_ &&
        ia('Cannot call ' + t + ' on a deleted database.');
    }),
    (Vl.prototype.goOffline = function () {
      hs('database.goOffline', 0, 0, arguments.length),
        this.checkDeleted_('goOffline'),
        this.repo_.interrupt();
    }),
    (Vl.prototype.goOnline = function () {
      hs('database.goOnline', 0, 0, arguments.length),
        this.checkDeleted_('goOnline'),
        this.repo_.resume();
    }),
    (Vl.ServerValue = {
      TIMESTAMP: { '.sv': 'timestamp' },
      increment: function (t) {
        return { '.sv': { increment: t } };
      }
    }),
    Vl);
  function Vl(t) {
    var e = this;
    (this.repoInternal_ = t),
      (this.instanceStarted_ = !1),
      (this.INTERNAL = {
        delete: function () {
          return _o(e, void 0, void 0, function () {
            return wo(this, function (t) {
              return (
                this.checkDeleted_('delete'),
                Fl.getInstance().deleteRepo(this.repo_),
                (this.repoInternal_ = null),
                (this.rootInternal_ = null),
                [2]
              );
            });
          });
        }
      }),
      t instanceof gl ||
        ia(
          "Don't call new Database() directly - please use firebase.database()."
        );
  }
  var ql = Object.freeze({
      __proto__: null,
      forceLongPolling: function () {
        el.forceDisallow(), Qh.forceAllow();
      },
      forceWebSockets: function () {
        Qh.forceDisallow();
      },
      isWebSocketsAvailable: function () {
        return el.isAvailable();
      },
      setSecurityDebugCallback: function (t, e) {
        t.repo.persistentConnection_.securityDebugCallback_ = e;
      },
      stats: function (t, e) {
        t.repo.stats(e);
      },
      statsIncrementCounter: function (t, e) {
        t.repo.statsIncrementCounter(e);
      },
      dataUpdateCount: function (t) {
        return t.repo.dataUpdateCount;
      },
      interceptServerData: function (t, e) {
        return t.repo.interceptServerData_(e);
      },
      initStandalone: function (t) {
        var e = t.app,
          n = t.url,
          r = t.version,
          i = t.customAuthImpl,
          o = t.namespace,
          t = void 0 !== (t = t.nodeAdmin) && t;
        return (
          Zh(r),
          (r = new Is(
            'auth-internal',
            new Ss('database-standalone')
          )).setComponent(
            new _s(
              'auth-internal',
              function () {
                return i;
              },
              'PRIVATE'
            )
          ),
          {
            instance: Fl.getInstance().databaseFromApp(e, r, n, t),
            namespace: o
          }
        );
      }
    }),
    Gn = ll;
  (ll.prototype.simpleListen = function (t, e) {
    this.sendRequest('q', { p: t }, e);
  }),
    (ll.prototype.echo = function (t, e) {
      this.sendRequest('echo', { d: t }, e);
    });
  var Bl,
    Wl = Object.freeze({
      __proto__: null,
      DataConnection: Gn,
      RealTimeConnection: ol,
      hijackHash: function (i) {
        var o = ll.prototype.put;
        return (
          (ll.prototype.put = function (t, e, n, r) {
            void 0 !== r && (r = i()), o.call(this, t, e, n, r);
          }),
          function () {
            ll.prototype.put = o;
          }
        );
      },
      ConnectionTarget: Fa,
      queryIdentifier: function (t) {
        return t.queryIdentifier();
      },
      forceRestClient: function (t) {
        Fl.getInstance().forceRestClient(t);
      }
    }),
    Kl = jl.ServerValue;
  Zh((Bl = Jl).SDK_VERSION),
    Bl.INTERNAL.registerComponent(
      new _s(
        'database',
        function (t, e) {
          var n = t.getProvider('app').getImmediate(),
            t = t.getProvider('auth-internal');
          return Fl.getInstance().databaseFromApp(n, t, e);
        },
        'PUBLIC'
      )
        .setServiceProps({
          Reference: Cl,
          Query: gc,
          Database: jl,
          DataSnapshot: sc,
          enableLogging: na,
          INTERNAL: ql,
          ServerValue: Kl,
          TEST_ACCESS: Wl
        })
        .setMultipleInstances(!0)
    ),
    Bl.registerVersion('@firebase/database', '0.8.1');
  var Hl = function (t, e) {
    return (Hl =
      Object.setPrototypeOf ||
      ({ __proto__: [] } instanceof Array &&
        function (t, e) {
          t.__proto__ = e;
        }) ||
      function (t, e) {
        for (var n in e)
          Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
      })(t, e);
  };
  function zl(t) {
    var e = 'function' == typeof Symbol && Symbol.iterator,
      n = e && t[e],
      r = 0;
    if (n) return n.call(t);
    if (t && 'number' == typeof t.length)
      return {
        next: function () {
          return (
            t && r >= t.length && (t = void 0), { value: t && t[r++], done: !t }
          );
        }
      };
    throw new TypeError(
      e ? 'Object is not iterable.' : 'Symbol.iterator is not defined.'
    );
  }
  var dt =
      'undefined' != typeof globalThis
        ? globalThis
        : 'undefined' != typeof window
        ? window
        : 'undefined' != typeof global
        ? global
        : 'undefined' != typeof self
        ? self
        : {},
    Gl = {},
    Ql = dt || self;
  function Yl() {}
  function Xl(t) {
    var e = typeof t;
    return (
      'array' ==
        (e =
          'object' != e ? e : t ? (Array.isArray(t) ? 'array' : e) : 'null') ||
      ('object' == e && 'number' == typeof t.length)
    );
  }
  function $l(t) {
    var e = typeof t;
    return ('object' == e && null != t) || 'function' == e;
  }
  var Zl = 'closure_uid_' + ((1e9 * Math.random()) >>> 0),
    tf = 0;
  function ef(t, e, n) {
    return t.call.apply(t.bind, arguments);
  }
  function nf(e, n, t) {
    if (!e) throw Error();
    if (2 < arguments.length) {
      var r = Array.prototype.slice.call(arguments, 2);
      return function () {
        var t = Array.prototype.slice.call(arguments);
        return Array.prototype.unshift.apply(t, r), e.apply(n, t);
      };
    }
    return function () {
      return e.apply(n, arguments);
    };
  }
  function rf(t, e, n) {
    return (rf =
      Function.prototype.bind &&
      -1 != Function.prototype.bind.toString().indexOf('native code')
        ? ef
        : nf).apply(null, arguments);
  }
  function of(e) {
    var n = Array.prototype.slice.call(arguments, 1);
    return function () {
      var t = n.slice();
      return t.push.apply(t, arguments), e.apply(this, t);
    };
  }
  function sf() {
    return Date.now();
  }
  function af(t, o) {
    function e() {}
    (e.prototype = o.prototype),
      (t.X = o.prototype),
      (t.prototype = new e()),
      ((t.prototype.constructor = t).Kb = function (t, e, n) {
        for (
          var r = Array(arguments.length - 2), i = 2;
          i < arguments.length;
          i++
        )
          r[i - 2] = arguments[i];
        return o.prototype[e].apply(t, r);
      });
  }
  function uf() {
    (this.j = this.j), (this.i = this.i);
  }
  (uf.prototype.j = !1),
    (uf.prototype.ja = function () {
      var t;
      !this.j &&
        ((this.j = !0), this.G(), 0) &&
        ((t = this),
        (Object.prototype.hasOwnProperty.call(t, Zl) && t[Zl]) ||
          (t[Zl] = ++tf));
    }),
    (uf.prototype.G = function () {
      if (this.i) for (; this.i.length; ) this.i.shift()();
    });
  var cf = Array.prototype.indexOf
      ? function (t, e) {
          return Array.prototype.indexOf.call(t, e, void 0);
        }
      : function (t, e) {
          if ('string' == typeof t)
            return 'string' != typeof e || 1 != e.length ? -1 : t.indexOf(e, 0);
          for (var n = 0; n < t.length; n++) if (n in t && t[n] === e) return n;
          return -1;
        },
    hf = Array.prototype.forEach
      ? function (t, e, n) {
          Array.prototype.forEach.call(t, e, n);
        }
      : function (t, e, n) {
          for (
            var r = t.length, i = 'string' == typeof t ? t.split('') : t, o = 0;
            o < r;
            o++
          )
            o in i && e.call(n, i[o], o, t);
        };
  function lf() {
    return Array.prototype.concat.apply([], arguments);
  }
  function ff(t) {
    var e = t.length;
    if (0 < e) {
      for (var n = Array(e), r = 0; r < e; r++) n[r] = t[r];
      return n;
    }
    return [];
  }
  function pf(t) {
    return /^[\s\xa0]*$/.test(t);
  }
  var df,
    vf = String.prototype.trim
      ? function (t) {
          return t.trim();
        }
      : function (t) {
          return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1];
        };
  function yf(t, e) {
    return -1 != t.indexOf(e);
  }
  function gf(t, e) {
    return t < e ? -1 : e < t ? 1 : 0;
  }
  t: {
    var mf = Ql.navigator;
    if (mf) {
      mf = mf.userAgent;
      if (mf) {
        df = mf;
        break t;
      }
    }
    df = '';
  }
  function bf(t, e, n) {
    for (var r in t) e.call(n, t[r], r, t);
  }
  function _f(t) {
    var e,
      n = {};
    for (e in t) n[e] = t[e];
    return n;
  }
  var wf = 'constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf'.split(
    ' '
  );
  function Ef(t) {
    for (var e, n, r = 1; r < arguments.length; r++) {
      for (e in (n = arguments[r])) t[e] = n[e];
      for (var i = 0; i < wf.length; i++)
        (e = wf[i]),
          Object.prototype.hasOwnProperty.call(n, e) && (t[e] = n[e]);
    }
  }
  function If(t) {
    return If[' '](t), t;
  }
  If[' '] = Yl;
  var Tf,
    Sf = yf(df, 'Opera'),
    Cf = yf(df, 'Trident') || yf(df, 'MSIE'),
    Nf = yf(df, 'Edge'),
    Af = Nf || Cf,
    kf =
      yf(df, 'Gecko') &&
      !(yf(df.toLowerCase(), 'webkit') && !yf(df, 'Edge')) &&
      !(yf(df, 'Trident') || yf(df, 'MSIE')) &&
      !yf(df, 'Edge'),
    Rf = yf(df.toLowerCase(), 'webkit') && !yf(df, 'Edge');
  function Of() {
    var t = Ql.document;
    return t ? t.documentMode : void 0;
  }
  t: {
    var Pf = '',
      Df =
        ((Df = df),
        kf
          ? /rv:([^\);]+)(\)|;)/.exec(Df)
          : Nf
          ? /Edge\/([\d\.]+)/.exec(Df)
          : Cf
          ? /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Df)
          : Rf
          ? /WebKit\/(\S+)/.exec(Df)
          : Sf
          ? /(?:Version)[ \/]?(\S+)/.exec(Df)
          : void 0);
    if ((Df && (Pf = Df ? Df[1] : ''), Cf)) {
      Df = Of();
      if (null != Df && Df > parseFloat(Pf)) {
        Tf = String(Df);
        break t;
      }
    }
    Tf = Pf;
  }
  var xf = {};
  function Lf(a) {
    return (
      (t = a),
      (e = function () {
        for (
          var t = 0,
            e = vf(String(Tf)).split('.'),
            n = vf(String(a)).split('.'),
            r = Math.max(e.length, n.length),
            i = 0;
          0 == t && i < r;
          i++
        ) {
          var o = e[i] || '',
            s = n[i] || '';
          do {
            if (
              ((o = /(\d*)(\D*)(.*)/.exec(o) || ['', '', '', '']),
              (s = /(\d*)(\D*)(.*)/.exec(s) || ['', '', '', '']),
              0 == o[0].length && 0 == s[0].length)
            )
              break;
            (t =
              gf(
                0 == o[1].length ? 0 : parseInt(o[1], 10),
                0 == s[1].length ? 0 : parseInt(s[1], 10)
              ) ||
              gf(0 == o[2].length, 0 == s[2].length) ||
              gf(o[2], s[2])),
              (o = o[3]),
              (s = s[3]);
          } while (0 == t);
        }
        return 0 <= t;
      }),
      (n = xf),
      Object.prototype.hasOwnProperty.call(n, t) ? n[t] : (n[t] = e(t))
    );
    var t, e, n;
  }
  var Mf = Ql.document && Cf ? Of() || parseInt(Tf, 10) || void 0 : void 0,
    Ff = !Cf || 9 <= Number(Mf),
    Uf = Cf && !Lf('9'),
    jf = (function () {
      if (!Ql.addEventListener || !Object.defineProperty) return !1;
      var t = !1,
        e = Object.defineProperty({}, 'passive', {
          get: function () {
            t = !0;
          }
        });
      try {
        Ql.addEventListener('test', Yl, e),
          Ql.removeEventListener('test', Yl, e);
      } catch (t) {}
      return t;
    })();
  function Vf(t, e) {
    (this.type = t), (this.a = this.target = e), (this.defaultPrevented = !1);
  }
  function qf(t, e) {
    if (
      (Vf.call(this, t ? t.type : ''),
      (this.relatedTarget = this.a = this.target = null),
      (this.button = this.screenY = this.screenX = this.clientY = this.clientX = 0),
      (this.key = ''),
      (this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1),
      (this.pointerId = 0),
      (this.pointerType = ''),
      (this.c = null),
      t)
    ) {
      var n = (this.type = t.type),
        r =
          t.changedTouches && t.changedTouches.length
            ? t.changedTouches[0]
            : null;
      if (
        ((this.target = t.target || t.srcElement),
        (this.a = e),
        (e = t.relatedTarget))
      ) {
        if (kf) {
          t: {
            try {
              If(e.nodeName);
              var i = !0;
              break t;
            } catch (t) {}
            i = !1;
          }
          i || (e = null);
        }
      } else
        'mouseover' == n
          ? (e = t.fromElement)
          : 'mouseout' == n && (e = t.toElement);
      (this.relatedTarget = e),
        r
          ? ((this.clientX = void 0 !== r.clientX ? r.clientX : r.pageX),
            (this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY),
            (this.screenX = r.screenX || 0),
            (this.screenY = r.screenY || 0))
          : ((this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX),
            (this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY),
            (this.screenX = t.screenX || 0),
            (this.screenY = t.screenY || 0)),
        (this.button = t.button),
        (this.key = t.key || ''),
        (this.ctrlKey = t.ctrlKey),
        (this.altKey = t.altKey),
        (this.shiftKey = t.shiftKey),
        (this.metaKey = t.metaKey),
        (this.pointerId = t.pointerId || 0),
        (this.pointerType =
          'string' == typeof t.pointerType
            ? t.pointerType
            : Bf[t.pointerType] || ''),
        (this.c = t).defaultPrevented && this.b();
    }
  }
  (Vf.prototype.b = function () {
    this.defaultPrevented = !0;
  }),
    af(qf, Vf);
  var Bf = { 2: 'touch', 3: 'pen', 4: 'mouse' };
  qf.prototype.b = function () {
    qf.X.b.call(this);
    var t = this.c;
    if (t.preventDefault) t.preventDefault();
    else if (((t.returnValue = !1), Uf))
      try {
        (t.ctrlKey || (112 <= t.keyCode && t.keyCode <= 123)) &&
          (t.keyCode = -1);
      } catch (t) {}
  };
  var Wf = 'closure_listenable_' + ((1e6 * Math.random()) | 0),
    Kf = 0;
  function Hf(t, e, n, r, i) {
    (this.listener = t),
      (this.proxy = null),
      (this.src = e),
      (this.type = n),
      (this.capture = !!r),
      (this.ca = i),
      (this.key = ++Kf),
      (this.Y = this.Z = !1);
  }
  function zf(t) {
    (t.Y = !0),
      (t.listener = null),
      (t.proxy = null),
      (t.src = null),
      (t.ca = null);
  }
  function Gf(t) {
    (this.src = t), (this.a = {}), (this.b = 0);
  }
  function Qf(t, e) {
    var n,
      r,
      i,
      o = e.type;
    o in t.a &&
      ((n = t.a[o]),
      (i = 0 <= (r = cf(n, e))) && Array.prototype.splice.call(n, r, 1),
      i && (zf(e), 0 == t.a[o].length && (delete t.a[o], t.b--)));
  }
  function Yf(t, e, n, r) {
    for (var i = 0; i < t.length; ++i) {
      var o = t[i];
      if (!o.Y && o.listener == e && o.capture == !!n && o.ca == r) return i;
    }
    return -1;
  }
  Gf.prototype.add = function (t, e, n, r, i) {
    var o = t.toString();
    (t = this.a[o]) || ((t = this.a[o] = []), this.b++);
    var s = Yf(t, e, r, i);
    return (
      -1 < s
        ? ((e = t[s]), n || (e.Z = !1))
        : (((e = new Hf(e, this.src, o, !!r, i)).Z = n), t.push(e)),
      e
    );
  };
  var Xf = 'closure_lm_' + ((1e6 * Math.random()) | 0),
    Jf = {};
  function $f(t, e, n, r, i) {
    if (r && r.once)
      return (function t(e, n, r, i, o) {
        if (Array.isArray(n)) {
          for (var s = 0; s < n.length; s++) t(e, n[s], r, i, o);
          return null;
        }
        r = sp(r);
        return e && e[Wf]
          ? e.wa(n, r, $l(i) ? !!i.capture : !!i, o)
          : Zf(e, n, r, !0, i, o);
      })(t, e, n, r, i);
    if (Array.isArray(e)) {
      for (var o = 0; o < e.length; o++) $f(t, e[o], n, r, i);
      return null;
    }
    return (
      (n = sp(n)),
      t && t[Wf]
        ? t.va(e, n, $l(r) ? !!r.capture : !!r, i)
        : Zf(t, e, n, !1, r, i)
    );
  }
  function Zf(t, e, n, r, i, o) {
    if (!e) throw Error('Invalid event type');
    var s = $l(i) ? !!i.capture : !!i;
    if (s && !Ff) return null;
    var a,
      u,
      c = ip(t);
    if ((c || (t[Xf] = c = new Gf(t)), (n = c.add(e, n, r, s, o)).proxy))
      return n;
    if (
      ((a = rp),
      (r = u = Ff
        ? function (t) {
            return a.call(u.src, u.listener, t);
          }
        : function (t) {
            if (!(t = a.call(u.src, u.listener, t))) return t;
          }),
      ((n.proxy = r).src = t),
      (r.listener = n),
      t.addEventListener)
    )
      jf || (i = s),
        void 0 === i && (i = !1),
        t.addEventListener(e.toString(), r, i);
    else if (t.attachEvent) t.attachEvent(ep(e.toString()), r);
    else {
      if (!t.addListener || !t.removeListener)
        throw Error('addEventListener and attachEvent are unavailable.');
      t.addListener(r);
    }
    return n;
  }
  function tp(t) {
    var e, n, r;
    'number' != typeof t &&
      t &&
      !t.Y &&
      ((e = t.src) && e[Wf]
        ? Qf(e.c, t)
        : ((n = t.type),
          (r = t.proxy),
          e.removeEventListener
            ? e.removeEventListener(n, r, t.capture)
            : e.detachEvent
            ? e.detachEvent(ep(n), r)
            : e.addListener && e.removeListener && e.removeListener(r),
          (n = ip(e))
            ? (Qf(n, t), 0 == n.b && ((n.src = null), (e[Xf] = null)))
            : zf(t)));
  }
  function ep(t) {
    return t in Jf ? Jf[t] : (Jf[t] = 'on' + t);
  }
  function np(t, e) {
    var n = t.listener,
      r = t.ca || t.src;
    return t.Z && tp(t), n.call(r, e);
  }
  function rp(t, e) {
    if (t.Y) return !0;
    if (Ff) return np(t, new qf(e, this));
    if (!e)
      t: {
        e = ['window', 'event'];
        for (var n = Ql, r = 0; r < e.length; r++)
          if (null == (n = n[e[r]])) {
            e = null;
            break t;
          }
        e = n;
      }
    return np(t, (e = new qf(e, this)));
  }
  function ip(t) {
    return (t = t[Xf]) instanceof Gf ? t : null;
  }
  var op = '__closure_events_fn_' + ((1e9 * Math.random()) >>> 0);
  function sp(e) {
    return 'function' == typeof e
      ? e
      : (e[op] ||
          (e[op] = function (t) {
            return e.handleEvent(t);
          }),
        e[op]);
  }
  function ap() {
    uf.call(this), (this.c = new Gf(this)), ((this.J = this).C = null);
  }
  function up(t, e) {
    var n,
      r = t.C;
    if (r) for (n = []; r; r = r.C) n.push(r);
    if (
      ((t = t.J),
      (r = e.type || e),
      'string' == typeof e
        ? (e = new Vf(e, t))
        : e instanceof Vf
        ? (e.target = e.target || t)
        : ((s = e), Ef((e = new Vf(r, t)), s)),
      (s = !0),
      n)
    )
      for (var i = n.length - 1; 0 <= i; i--)
        var o = (e.a = n[i]), s = cp(o, r, !0, e) && s;
    if (((s = cp((o = e.a = t), r, !0, e) && s), (s = cp(o, r, !1, e) && s), n))
      for (i = 0; i < n.length; i++) s = cp((o = e.a = n[i]), r, !1, e) && s;
  }
  function cp(t, e, n, r) {
    if (!(e = t.c.a[String(e)])) return !0;
    e = e.concat();
    for (var i = !0, o = 0; o < e.length; ++o) {
      var s,
        a,
        u = e[o];
      u &&
        !u.Y &&
        u.capture == n &&
        ((s = u.listener),
        (a = u.ca || u.src),
        u.Z && Qf(t.c, u),
        (i = !1 !== s.call(a, r) && i));
    }
    return i && !r.defaultPrevented;
  }
  af(ap, uf),
    (ap.prototype[Wf] = !0),
    ((vu = ap.prototype).addEventListener = function (t, e, n, r) {
      $f(this, t, e, n, r);
    }),
    (vu.removeEventListener = function (t, e, n, r) {
      !(function t(e, n, r, i, o) {
        if (Array.isArray(n))
          for (var s = 0; s < n.length; s++) t(e, n[s], r, i, o);
        else
          (i = $l(i) ? !!i.capture : !!i),
            (r = sp(r)),
            e && e[Wf]
              ? ((e = e.c),
                (n = String(n).toString()) in e.a &&
                  -1 < (r = Yf((s = e.a[n]), r, i, o)) &&
                  (zf(s[r]),
                  Array.prototype.splice.call(s, r, 1),
                  0 == s.length && (delete e.a[n], e.b--)))
              : (e = e && ip(e)) &&
                ((n = e.a[n.toString()]),
                (e = -1),
                n && (e = Yf(n, r, i, o)),
                (r = -1 < e ? n[e] : null) && tp(r));
      })(this, t, e, n, r);
    }),
    (vu.G = function () {
      if ((ap.X.G.call(this), this.c)) {
        var t,
          e = this.c;
        for (t in e.a) {
          for (var n = e.a[t], r = 0; r < n.length; r++) zf(n[r]);
          delete e.a[t], e.b--;
        }
      }
      this.C = null;
    }),
    (vu.va = function (t, e, n, r) {
      return this.c.add(String(t), e, !1, n, r);
    }),
    (vu.wa = function (t, e, n, r) {
      return this.c.add(String(t), e, !0, n, r);
    });
  var hp = Ql.JSON.stringify;
  function lp() {
    this.b = this.a = null;
  }
  var fp,
    pp =
      ((dp.prototype.get = function () {
        var t;
        return (
          0 < this.b
            ? (this.b--, (t = this.a), (this.a = t.next), (t.next = null))
            : (t = this.c()),
          t
        );
      }),
      new dp(
        function () {
          return new vp();
        },
        function (t) {
          t.reset();
        }
      ));
  function dp(t, e) {
    (this.c = t), (this.f = e), (this.b = 0), (this.a = null);
  }
  function vp() {
    this.next = this.b = this.a = null;
  }
  function yp(t, e) {
    var n;
    fp ||
      ((n = Ql.Promise.resolve(void 0)),
      (fp = function () {
        n.then(bp);
      })),
      gp || (fp(), (gp = !0)),
      mp.add(t, e);
  }
  (lp.prototype.add = function (t, e) {
    var n = pp.get();
    n.set(t, e), this.b ? (this.b.next = n) : (this.a = n), (this.b = n);
  }),
    (vp.prototype.set = function (t, e) {
      (this.a = t), (this.b = e), (this.next = null);
    });
  var gp = !(vp.prototype.reset = function () {
      this.next = this.b = this.a = null;
    }),
    mp = new lp();
  function bp() {
    for (
      var t, e;
      (n = e = void 0),
        (n = null),
        (e = mp).a &&
          ((n = e.a), (e.a = e.a.next), e.a || (e.b = null), (n.next = null)),
        (t = n);

    ) {
      try {
        t.a.call(t.b);
      } catch (t) {
        !(function (t) {
          Ql.setTimeout(function () {
            throw t;
          }, 0);
        })(t);
      }
      var n = pp;
      n.f(t), n.b < 100 && (n.b++, (t.next = n.a), (n.a = t));
    }
    gp = !1;
  }
  function _p(t, e) {
    ap.call(this),
      (this.b = t || 1),
      (this.a = e || Ql),
      (this.f = rf(this.Za, this)),
      (this.g = sf());
  }
  function wp(t) {
    (t.aa = !1), t.M && (t.a.clearTimeout(t.M), (t.M = null));
  }
  function Ep(t, e, n) {
    if ('function' == typeof t) n && (t = rf(t, n));
    else {
      if (!t || 'function' != typeof t.handleEvent)
        throw Error('Invalid listener argument');
      t = rf(t.handleEvent, t);
    }
    return 2147483647 < Number(e) ? -1 : Ql.setTimeout(t, e || 0);
  }
  af(_p, ap),
    ((vu = _p.prototype).aa = !1),
    (vu.M = null),
    (vu.Za = function () {
      var t;
      this.aa &&
        (0 < (t = sf() - this.g) && t < 0.8 * this.b
          ? (this.M = this.a.setTimeout(this.f, this.b - t))
          : (this.M && (this.a.clearTimeout(this.M), (this.M = null)),
            up(this, 'tick'),
            this.aa && (wp(this), this.start())));
    }),
    (vu.start = function () {
      (this.aa = !0),
        this.M ||
          ((this.M = this.a.setTimeout(this.f, this.b)), (this.g = sf()));
    }),
    (vu.G = function () {
      _p.X.G.call(this), wp(this), delete this.a;
    });
  var Ip,
    Tp,
    Sp,
    Cp =
      (Hl((Tp = Ap), (Sp = Ip = uf)),
      (Tp.prototype =
        null === Sp
          ? Object.create(Sp)
          : ((Np.prototype = Sp.prototype), new Np())),
      (Ap.prototype.f = function (t) {
        (this.b = arguments),
          this.a
            ? (this.c = !0)
            : (function t(e) {
                e.a = Ep(function () {
                  (e.a = null), e.c && ((e.c = !1), t(e));
                }, e.h);
                var n = e.b;
                (e.b = null), e.g.apply(null, n);
              })(this);
      }),
      (Ap.prototype.G = function () {
        Ip.prototype.G.call(this),
          this.a &&
            (Ql.clearTimeout(this.a),
            (this.a = null),
            (this.c = !1),
            (this.b = null));
      }),
      Ap);
  function Np() {
    this.constructor = Tp;
  }
  function Ap(t, e) {
    var n = Ip.call(this) || this;
    return (n.g = t), (n.h = e), (n.b = null), (n.c = !1), (n.a = null), n;
  }
  function kp(t) {
    uf.call(this), (this.b = t), (this.a = {});
  }
  af(kp, uf);
  var Rp = [];
  function Op(t, e, n, r) {
    Array.isArray(n) || (n && (Rp[0] = n.toString()), (n = Rp));
    for (var i = 0; i < n.length; i++) {
      var o = $f(e, n[i], r || t.handleEvent, !1, t.b || t);
      if (!o) break;
      t.a[o.key] = o;
    }
  }
  function Pp(t) {
    bf(
      t.a,
      function (t, e) {
        this.a.hasOwnProperty(e) && tp(t);
      },
      t
    ),
      (t.a = {});
  }
  function Dp() {
    this.a = !0;
  }
  function xp(t, e, n, r) {
    t.info(function () {
      return (
        'XMLHTTP TEXT (' +
        e +
        '): ' +
        (function (t, e) {
          if (!t.a) return e;
          if (!e) return null;
          try {
            var n = JSON.parse(e);
            if (n)
              for (t = 0; t < n.length; t++)
                if (Array.isArray(n[t])) {
                  var r = n[t];
                  if (!(r.length < 2)) {
                    var i = r[1];
                    if (Array.isArray(i) && !(i.length < 1)) {
                      r = i[0];
                      if ('noop' != r && 'stop' != r && 'close' != r)
                        for (var o = 1; o < i.length; o++) i[o] = '';
                    }
                  }
                }
            return hp(n);
          } catch (t) {
            return e;
          }
        })(t, n) +
        (r ? ' ' + r : '')
      );
    });
  }
  (kp.prototype.G = function () {
    kp.X.G.call(this), Pp(this);
  }),
    (kp.prototype.handleEvent = function () {
      throw Error('EventHandler.handleEvent not implemented');
    }),
    (Dp.prototype.info = function () {});
  var Lp = {},
    Mp = null;
  function Fp() {
    return (Mp = Mp || new ap());
  }
  function Up(t) {
    Vf.call(this, Lp.Fa, t);
  }
  function jp(t) {
    var e = Fp();
    up(e, new Up(e));
  }
  function Vp(t, e) {
    Vf.call(this, Lp.STAT_EVENT, t), (this.stat = e);
  }
  function qp(t) {
    var e = Fp();
    up(e, new Vp(e, t));
  }
  function Bp(t) {
    Vf.call(this, Lp.Ga, t);
  }
  function Wp(t, e) {
    if ('function' != typeof t)
      throw Error('Fn must not be null and must be a function');
    return Ql.setTimeout(function () {
      t();
    }, e);
  }
  (Lp.Fa = 'serverreachability'),
    af(Up, Vf),
    (Lp.STAT_EVENT = 'statevent'),
    af(Vp, Vf),
    (Lp.Ga = 'timingevent'),
    af(Bp, Vf);
  (vt = {
    NO_ERROR: 0,
    $a: 1,
    nb: 2,
    mb: 3,
    hb: 4,
    lb: 5,
    ob: 6,
    Da: 7,
    TIMEOUT: 8,
    rb: 9
  }),
    (Gn = {
      fb: 'complete',
      Bb: 'success',
      Ea: 'error',
      Da: 'abort',
      tb: 'ready',
      ub: 'readystatechange',
      TIMEOUT: 'timeout',
      pb: 'incrementaldata',
      sb: 'progress',
      ib: 'downloadprogress',
      Jb: 'uploadprogress'
    });
  function Kp() {}
  function Hp(t) {
    var e;
    return (e = t.a) || (e = t.a = {}), e;
  }
  function zp() {}
  Kp.prototype.a = null;
  var Gp,
    dt = { OPEN: 'a', eb: 'b', Ea: 'c', qb: 'd' };
  function Qp() {
    Vf.call(this, 'd');
  }
  function Yp() {
    Vf.call(this, 'c');
  }
  function Xp() {}
  function Jp(t, e, n, r) {
    (this.g = t),
      (this.c = e),
      (this.f = n),
      (this.S = r || 1),
      (this.J = new kp(this)),
      (this.P = $p),
      (t = Af ? 125 : void 0),
      (this.R = new _p(t)),
      (this.B = null),
      (this.b = !1),
      (this.j = this.l = this.i = this.H = this.u = this.T = this.o = null),
      (this.s = []),
      (this.a = null),
      (this.D = 0),
      (this.h = this.m = null),
      (this.N = -1),
      (this.A = !1),
      (this.O = 0),
      (this.F = null),
      (this.V = this.C = this.U = this.I = !1);
  }
  af(Qp, Vf), af(Yp, Vf), af(Xp, Kp), (Gp = new Xp());
  var $p = 45e3,
    Zp = {},
    td = {};
  function ed(t, e, n) {
    (t.H = 1), (t.i = Ed(yd(e))), (t.j = n), (t.I = !0), nd(t, null);
  }
  function nd(t, e) {
    (t.u = sf()), id(t), (t.l = yd(t.i));
    var s,
      a,
      u,
      c,
      h,
      l,
      n = t.l,
      r = t.S;
    Array.isArray(r) || (r = [String(r)]),
      Ld(n.b, 't', r),
      (t.D = 0),
      (t.a = Av(t.g, t.g.C ? e : null)),
      0 < t.O && (t.F = new Cp(rf(t.Ca, t, t.a), t.O)),
      Op(t.J, t.a, 'readystatechange', t.Xa),
      (e = t.B ? _f(t.B) : {}),
      t.j
        ? (t.m || (t.m = 'POST'),
          (e['Content-Type'] = 'application/x-www-form-urlencoded'),
          t.a.ba(t.l, t.m, t.j, e))
        : ((t.m = 'GET'), t.a.ba(t.l, t.m, null, e)),
      jp(1),
      (s = t.c),
      (a = t.m),
      (u = t.l),
      (c = t.f),
      (h = t.S),
      (l = t.j),
      s.info(function () {
        if (s.a)
          if (l)
            for (var t = '', e = l.split('&'), n = 0; n < e.length; n++) {
              var r,
                i,
                o = e[n].split('=');
              1 < o.length &&
                ((r = o[0]),
                (o = o[1]),
                (t =
                  2 <= (i = r.split('_')).length && 'type' == i[1]
                    ? t + (r + '=') + o + '&'
                    : t + (r + '=redacted&')));
            }
          else t = null;
        else t = l;
        return (
          'XMLHTTP REQ (' +
          c +
          ') [attempt ' +
          h +
          ']: ' +
          a +
          '\n' +
          u +
          '\n' +
          t
        );
      });
  }
  function rd(t, e, n) {
    for (var r, i, o, s = !0; !t.A && t.D < n.length; ) {
      var a =
        ((a = n),
        (o = i = void 0),
        (i = (r = t).D),
        -1 == (o = a.indexOf('\n', i))
          ? td
          : ((i = Number(a.substring(i, o))),
            isNaN(i)
              ? Zp
              : (o += 1) + i > a.length
              ? td
              : ((a = a.substr(o, i)), (r.D = o + i), a)));
      if (a == td) {
        4 == e && ((t.h = 4), qp(14), (s = !1)),
          xp(t.c, t.f, null, '[Incomplete Response]');
        break;
      }
      if (a == Zp) {
        (t.h = 4), qp(15), xp(t.c, t.f, n, '[Invalid Chunk]'), (s = !1);
        break;
      }
      xp(t.c, t.f, a, null), cd(t, a);
    }
    4 == e && 0 == n.length && ((t.h = 1), qp(16), (s = !1)),
      (t.b = t.b && s),
      s
        ? 0 < n.length &&
          !t.V &&
          ((t.V = !0),
          (e = t.g).a == t &&
            e.U &&
            !e.F &&
            (e.c.info(
              'Great, no buffering proxy detected. Bytes received: ' + n.length
            ),
            _v(e),
            (e.F = !0),
            qp(11)))
        : (xp(t.c, t.f, n, '[Invalid Chunked Response]'), ud(t), ad(t));
  }
  function id(t) {
    (t.T = sf() + t.P), od(t, t.P);
  }
  function od(t, e) {
    if (null != t.o) throw Error('WatchDog timer not null');
    t.o = Wp(rf(t.Va, t), e);
  }
  function sd(t) {
    t.o && (Ql.clearTimeout(t.o), (t.o = null));
  }
  function ad(t) {
    0 == t.g.v || t.A || Iv(t.g, t);
  }
  function ud(t) {
    sd(t);
    var e = t.F;
    e && 'function' == typeof e.ja && e.ja(),
      (t.F = null),
      wp(t.R),
      Pp(t.J),
      t.a && ((e = t.a), (t.a = null), e.abort(), e.ja());
  }
  function cd(t, e) {
    try {
      var n,
        r,
        i,
        o,
        s,
        a = t.g;
      if (0 != a.v && (a.a == t || Bd(a.b, t)))
        if (((a.I = t.N), !t.C && Bd(a.b, t) && 3 == a.v)) {
          try {
            var u = a.ka.a.parse(e);
          } catch (t) {
            u = null;
          }
          if (Array.isArray(u) && 3 == u.length) {
            var c = u;
            if (0 == c[0]) {
              t: if (!a.j) {
                if (a.a) {
                  if (!(a.a.u + 3e3 < t.u)) break t;
                  Ev(a), lv(a);
                }
                bv(a), qp(18);
              }
            } else
              (a.oa = c[1]),
                0 < a.oa - a.P &&
                  c[2] < 37500 &&
                  a.H &&
                  0 == a.o &&
                  !a.m &&
                  (a.m = Wp(rf(a.Sa, a), 6e3));
            if (qd(a.b) <= 1 && a.ea) {
              try {
                a.ea();
              } catch (t) {}
              a.ea = void 0;
            }
          } else Sv(a, 11);
        } else if (((!t.C && a.a != t) || Ev(a), !pf(e)))
          for (e = u = a.ka.a.parse(e), u = 0; u < e.length; u++) {
            (c = e[u]),
              (a.P = c[0]),
              (c = c[1]),
              2 == a.v
                ? 'c' == c[0]
                  ? ((a.J = c[1]),
                    (a.ga = c[2]),
                    null != (r = c[3]) && ((a.ha = r), a.c.info('VER=' + a.ha)),
                    null != (o = c[4]) &&
                      ((a.pa = o), a.c.info('SVER=' + a.pa)),
                    null != (r = c[5]) &&
                      'number' == typeof r &&
                      0 < r &&
                      ((n = 1.5 * r),
                      (a.D = n),
                      a.c.info('backChannelRequestTimeoutMs_=' + n)),
                    (n = a),
                    (o = t.a) &&
                      (!(r = o.a
                        ? o.a.getResponseHeader('X-Client-Wire-Protocol')
                        : null) ||
                        (!(i = n.b).a &&
                          (yf(r, 'spdy') || yf(r, 'quic') || yf(r, 'h2')) &&
                          ((i.f = i.g),
                          (i.a = new Set()),
                          i.b && (Wd(i, i.b), (i.b = null)))),
                      !n.A ||
                        ((s = o.a
                          ? o.a.getResponseHeader('X-HTTP-Session-Id')
                          : null) &&
                          ((n.na = s), wd(n.B, n.A, s)))),
                    (a.v = 3),
                    a.f && a.f.ta(),
                    a.U &&
                      ((a.N = sf() - t.u),
                      a.c.info('Handshake RTT: ' + a.N + 'ms')),
                    (i = t),
                    ((n = a).la = Nv(n, n.C ? n.ga : null, n.fa)),
                    i.C
                      ? (Kd(n.b, i),
                        (o = i),
                        (s = n.D) && o.setTimeout(s),
                        o.o && (sd(o), id(o)),
                        (n.a = i))
                      : mv(n),
                    0 < a.g.length && dv(a))
                  : ('stop' != c[0] && 'close' != c[0]) || Sv(a, 7)
                : 3 == a.v &&
                  ('stop' == c[0] || 'close' == c[0]
                    ? 'stop' == c[0]
                      ? Sv(a, 7)
                      : hv(a)
                    : 'noop' != c[0] && a.f && a.f.sa(c),
                  (a.o = 0));
          }
      jp(4);
    } catch (t) {}
  }
  function hd(t, e) {
    if (t.forEach && 'function' == typeof t.forEach) t.forEach(e, void 0);
    else if (Xl(t) || 'string' == typeof t) hf(t, e, void 0);
    else {
      if (t.L && 'function' == typeof t.L) var n = t.L();
      else if (t.K && 'function' == typeof t.K) n = void 0;
      else if (Xl(t) || 'string' == typeof t) {
        n = [];
        for (var r = t.length, i = 0; i < r; i++) n.push(i);
      } else for (i in ((n = []), (r = 0), t)) n[r++] = i;
      i = (r = (function (t) {
        if (t.K && 'function' == typeof t.K) return t.K();
        if ('string' == typeof t) return t.split('');
        if (Xl(t)) {
          for (var e = [], n = t.length, r = 0; r < n; r++) e.push(t[r]);
          return e;
        }
        for (r in ((e = []), (n = 0), t)) e[n++] = t[r];
        return e;
      })(t)).length;
      for (var o = 0; o < i; o++) e.call(void 0, r[o], n && n[o], t);
    }
  }
  function ld(t, e) {
    (this.b = {}), (this.a = []), (this.c = 0);
    var n = arguments.length;
    if (1 < n) {
      if (n % 2) throw Error('Uneven number of arguments');
      for (var r = 0; r < n; r += 2) this.set(arguments[r], arguments[r + 1]);
    } else if (t)
      if (t instanceof ld)
        for (n = t.L(), r = 0; r < n.length; r++) this.set(n[r], t.get(n[r]));
      else for (r in t) this.set(r, t[r]);
  }
  function fd(t) {
    if (t.c != t.a.length) {
      for (var e = 0, n = 0; e < t.a.length; ) {
        var r = t.a[e];
        pd(t.b, r) && (t.a[n++] = r), e++;
      }
      t.a.length = n;
    }
    if (t.c != t.a.length) {
      for (var i = {}, n = (e = 0); e < t.a.length; )
        pd(i, (r = t.a[e])) || (i[(t.a[n++] = r)] = 1), e++;
      t.a.length = n;
    }
  }
  function pd(t, e) {
    return Object.prototype.hasOwnProperty.call(t, e);
  }
  ((vu = Jp.prototype).setTimeout = function (t) {
    this.P = t;
  }),
    (vu.Xa = function (t) {
      t = t.target;
      var e = this.F;
      e && 3 == sv(t) ? e.f() : this.Ca(t);
    }),
    (vu.Ca = function (t) {
      try {
        if (t == this.a)
          t: {
            var e = sv(this.a),
              n = this.a.ua(),
              r = this.a.W();
            if (!(e < 3 || (3 == e && !Af && !this.a.$()))) {
              this.A || 4 != e || 7 == n || jp(8 == n || r <= 0 ? 3 : 2),
                sd(this);
              var i = this.a.W();
              this.N = i;
              n = this.a.$();
              if (
                ((this.b = 200 == i),
                (r = this.c),
                (a = this.m),
                (u = this.l),
                (c = this.f),
                (h = this.S),
                (l = e),
                (f = i),
                r.info(function () {
                  return (
                    'XMLHTTP RESP (' +
                    c +
                    ') [ attempt ' +
                    h +
                    ']: ' +
                    a +
                    '\n' +
                    u +
                    '\n' +
                    l +
                    ' ' +
                    f
                  );
                }),
                this.b)
              ) {
                if (this.U && !this.C) {
                  e: {
                    if (this.a) {
                      var o = this.a;
                      if (
                        (o = o.a
                          ? o.a.getResponseHeader('X-HTTP-Initial-Response')
                          : null) &&
                        !pf(o)
                      ) {
                        var s = o;
                        break e;
                      }
                    }
                    s = null;
                  }
                  if (!s) {
                    (this.b = !1), (this.h = 3), qp(12), ud(this), ad(this);
                    break t;
                  }
                  xp(
                    this.c,
                    this.f,
                    s,
                    'Initial handshake response via X-HTTP-Initial-Response'
                  ),
                    (this.C = !0),
                    cd(this, s);
                }
                this.I
                  ? (rd(this, e, n),
                    Af &&
                      this.b &&
                      3 == e &&
                      (Op(this.J, this.R, 'tick', this.Wa), this.R.start()))
                  : (xp(this.c, this.f, n, null), cd(this, n)),
                  4 == e && ud(this),
                  this.b &&
                    !this.A &&
                    (4 == e ? Iv(this.g, this) : ((this.b = !1), id(this)));
              } else
                400 == i && 0 < n.indexOf('Unknown SID')
                  ? ((this.h = 3), qp(12))
                  : ((this.h = 0), qp(13)),
                  ud(this),
                  ad(this);
            }
          }
      } catch (t) {}
      var a, u, c, h, l, f;
    }),
    (vu.Wa = function () {
      var t, e;
      this.a &&
        ((t = sv(this.a)),
        (e = this.a.$()),
        this.D < e.length &&
          (sd(this), rd(this, t, e), this.b && 4 != t && id(this)));
    }),
    (vu.cancel = function () {
      (this.A = !0), ud(this);
    }),
    (vu.Va = function () {
      this.o = null;
      var t,
        e,
        n = sf();
      0 <= n - this.T
        ? ((t = this.c),
          (e = this.l),
          t.info(function () {
            return 'TIMEOUT: ' + e;
          }),
          2 != this.H && (jp(3), qp(17)),
          ud(this),
          (this.h = 2),
          ad(this))
        : od(this, this.T - n);
    }),
    ((vu = ld.prototype).K = function () {
      fd(this);
      for (var t = [], e = 0; e < this.a.length; e++) t.push(this.b[this.a[e]]);
      return t;
    }),
    (vu.L = function () {
      return fd(this), this.a.concat();
    }),
    (vu.get = function (t, e) {
      return pd(this.b, t) ? this.b[t] : e;
    }),
    (vu.set = function (t, e) {
      pd(this.b, t) || (this.c++, this.a.push(t)), (this.b[t] = e);
    }),
    (vu.forEach = function (t, e) {
      for (var n = this.L(), r = 0; r < n.length; r++) {
        var i = n[r],
          o = this.get(i);
        t.call(e, o, i, this);
      }
    });
  var dd = /^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;
  function vd(t, e) {
    var n;
    (this.c = this.j = this.f = ''),
      (this.h = null),
      (this.i = this.g = ''),
      (this.a = !1),
      t instanceof vd
        ? ((this.a = void 0 !== e ? e : t.a),
          gd(this, t.f),
          (this.j = t.j),
          md(this, t.c),
          bd(this, t.h),
          (this.g = t.g),
          (e = t.b),
          ((n = new Od()).c = e.c),
          e.a && ((n.a = new ld(e.a)), (n.b = e.b)),
          _d(this, n),
          (this.i = t.i))
        : t && (n = String(t).match(dd))
        ? ((this.a = !!e),
          gd(this, n[1] || '', !0),
          (this.j = Id(n[2] || '')),
          md(this, n[3] || '', !0),
          bd(this, n[4]),
          (this.g = Id(n[5] || '', !0)),
          _d(this, n[6] || '', !0),
          (this.i = Id(n[7] || '')))
        : ((this.a = !!e), (this.b = new Od(null, this.a)));
  }
  function yd(t) {
    return new vd(t);
  }
  function gd(t, e, n) {
    (t.f = n ? Id(e, !0) : e), t.f && (t.f = t.f.replace(/:$/, ''));
  }
  function md(t, e, n) {
    t.c = n ? Id(e, !0) : e;
  }
  function bd(t, e) {
    if (e) {
      if (((e = Number(e)), isNaN(e) || e < 0))
        throw Error('Bad port number ' + e);
      t.h = e;
    } else t.h = null;
  }
  function _d(t, e, n) {
    var r, i;
    e instanceof Od
      ? ((t.b = e),
        (r = t.b),
        (i = t.a) &&
          !r.f &&
          (Pd(r),
          (r.c = null),
          r.a.forEach(function (t, e) {
            var n = e.toLowerCase();
            e != n && (Dd(this, e), Ld(this, n, t));
          }, r)),
        (r.f = i))
      : (n || (e = Td(e, kd)), (t.b = new Od(e, t.a)));
  }
  function wd(t, e, n) {
    t.b.set(e, n);
  }
  function Ed(t) {
    return (
      wd(
        t,
        'zx',
        Math.floor(2147483648 * Math.random()).toString(36) +
          Math.abs(Math.floor(2147483648 * Math.random()) ^ sf()).toString(36)
      ),
      t
    );
  }
  function Id(t, e) {
    return t
      ? e
        ? decodeURI(t.replace(/%25/g, '%2525'))
        : decodeURIComponent(t)
      : '';
  }
  function Td(t, e, n) {
    return 'string' == typeof t
      ? ((t = encodeURI(t).replace(e, Sd)),
        n && (t = t.replace(/%25([0-9a-fA-F]{2})/g, '%$1')),
        t)
      : null;
  }
  function Sd(t) {
    return (
      '%' +
      (((t = t.charCodeAt(0)) >> 4) & 15).toString(16) +
      (15 & t).toString(16)
    );
  }
  vd.prototype.toString = function () {
    var t = [],
      e = this.f;
    e && t.push(Td(e, Cd, !0), ':');
    var n = this.c;
    return (
      (!n && 'file' != e) ||
        (t.push('//'),
        (e = this.j) && t.push(Td(e, Cd, !0), '@'),
        t.push(
          encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g, '%$1')
        ),
        null != (n = this.h) && t.push(':', String(n))),
      (n = this.g) &&
        (this.c && '/' != n.charAt(0) && t.push('/'),
        t.push(Td(n, '/' == n.charAt(0) ? Ad : Nd, !0))),
      (n = this.b.toString()) && t.push('?', n),
      (n = this.i) && t.push('#', Td(n, Rd)),
      t.join('')
    );
  };
  var Cd = /[#\/\?@]/g,
    Nd = /[#\?:]/g,
    Ad = /[#\?]/g,
    kd = /[#\?@]/g,
    Rd = /#/g;
  function Od(t, e) {
    (this.b = this.a = null), (this.c = t || null), (this.f = !!e);
  }
  function Pd(n) {
    n.a ||
      ((n.a = new ld()),
      (n.b = 0),
      n.c &&
        (function (t, e) {
          if (t) {
            t = t.split('&');
            for (var n = 0; n < t.length; n++) {
              var r,
                i = t[n].indexOf('='),
                o = null;
              0 <= i
                ? ((r = t[n].substring(0, i)), (o = t[n].substring(i + 1)))
                : (r = t[n]),
                e(r, o ? decodeURIComponent(o.replace(/\+/g, ' ')) : '');
            }
          }
        })(n.c, function (t, e) {
          n.add(decodeURIComponent(t.replace(/\+/g, ' ')), e);
        }));
  }
  function Dd(t, e) {
    Pd(t),
      (e = Md(t, e)),
      pd(t.a.b, e) &&
        ((t.c = null),
        (t.b -= t.a.get(e).length),
        pd((t = t.a).b, e) &&
          (delete t.b[e], t.c--, t.a.length > 2 * t.c && fd(t)));
  }
  function xd(t, e) {
    return Pd(t), (e = Md(t, e)), pd(t.a.b, e);
  }
  function Ld(t, e, n) {
    Dd(t, e),
      0 < n.length &&
        ((t.c = null), t.a.set(Md(t, e), ff(n)), (t.b += n.length));
  }
  function Md(t, e) {
    return (e = String(e)), t.f && (e = e.toLowerCase()), e;
  }
  ((vu = Od.prototype).add = function (t, e) {
    Pd(this), (this.c = null), (t = Md(this, t));
    var n = this.a.get(t);
    return n || this.a.set(t, (n = [])), n.push(e), (this.b += 1), this;
  }),
    (vu.forEach = function (n, r) {
      Pd(this),
        this.a.forEach(function (t, e) {
          hf(
            t,
            function (t) {
              n.call(r, t, e, this);
            },
            this
          );
        }, this);
    }),
    (vu.L = function () {
      Pd(this);
      for (var t = this.a.K(), e = this.a.L(), n = [], r = 0; r < e.length; r++)
        for (var i = t[r], o = 0; o < i.length; o++) n.push(e[r]);
      return n;
    }),
    (vu.K = function (t) {
      Pd(this);
      var e = [];
      if ('string' == typeof t)
        xd(this, t) && (e = lf(e, this.a.get(Md(this, t))));
      else {
        t = this.a.K();
        for (var n = 0; n < t.length; n++) e = lf(e, t[n]);
      }
      return e;
    }),
    (vu.set = function (t, e) {
      return (
        Pd(this),
        (this.c = null),
        xd(this, (t = Md(this, t))) && (this.b -= this.a.get(t).length),
        this.a.set(t, [e]),
        (this.b += 1),
        this
      );
    }),
    (vu.get = function (t, e) {
      return t && 0 < (t = this.K(t)).length ? String(t[0]) : e;
    }),
    (vu.toString = function () {
      if (this.c) return this.c;
      if (!this.a) return '';
      for (var t = [], e = this.a.L(), n = 0; n < e.length; n++)
        for (
          var r = e[n], i = encodeURIComponent(String(r)), r = this.K(r), o = 0;
          o < r.length;
          o++
        ) {
          var s = i;
          '' !== r[o] && (s += '=' + encodeURIComponent(String(r[o]))),
            t.push(s);
        }
      return (this.c = t.join('&'));
    });
  var Fd = function (t, e) {
    (this.b = t), (this.a = e);
  };
  function Ud(t) {
    (this.g = t || jd),
      (t = Ql.PerformanceNavigationTiming
        ? 0 < (t = Ql.performance.getEntriesByType('navigation')).length &&
          ('hq' == t[0].nextHopProtocol || 'h2' == t[0].nextHopProtocol)
        : !!(Ql.ia && Ql.ia.ya && Ql.ia.ya() && Ql.ia.ya().Lb)),
      (this.f = t ? this.g : 1),
      (this.a = null),
      1 < this.f && (this.a = new Set()),
      (this.b = null),
      (this.c = []);
  }
  var jd = 10;
  function Vd(t) {
    return t.b || (t.a && t.a.size >= t.f);
  }
  function qd(t) {
    return t.b ? 1 : t.a ? t.a.size : 0;
  }
  function Bd(t, e) {
    return t.b ? t.b == e : t.a && t.a.has(e);
  }
  function Wd(t, e) {
    t.a ? t.a.add(e) : (t.b = e);
  }
  function Kd(t, e) {
    t.b && t.b == e ? (t.b = null) : t.a && t.a.has(e) && t.a.delete(e);
  }
  function Hd(t) {
    var e, n;
    if (null != t.b) return t.c.concat(t.b.s);
    if (null == t.a || 0 === t.a.size) return ff(t.c);
    var r = t.c;
    try {
      for (var i = zl(t.a.values()), o = i.next(); !o.done; o = i.next())
        var s = o.value, r = r.concat(s.s);
    } catch (t) {
      e = { error: t };
    } finally {
      try {
        o && !o.done && (n = i.return) && n.call(i);
      } finally {
        if (e) throw e.error;
      }
    }
    return r;
  }
  function zd() {}
  function Gd() {
    this.a = new zd();
  }
  function Qd(t, e, n, r, i) {
    try {
      (e.onload = null),
        (e.onerror = null),
        (e.onabort = null),
        (e.ontimeout = null),
        i(r);
    } catch (t) {}
  }
  (Ud.prototype.cancel = function () {
    var e, t;
    if (((this.c = Hd(this)), this.b)) this.b.cancel(), (this.b = null);
    else if (this.a && 0 !== this.a.size) {
      try {
        for (var n = zl(this.a.values()), r = n.next(); !r.done; r = n.next()) {
          r.value.cancel();
        }
      } catch (t) {
        e = { error: t };
      } finally {
        try {
          r && !r.done && (t = n.return) && t.call(n);
        } finally {
          if (e) throw e.error;
        }
      }
      this.a.clear();
    }
  }),
    (zd.prototype.stringify = function (t) {
      return Ql.JSON.stringify(t, void 0);
    }),
    (zd.prototype.parse = function (t) {
      return Ql.JSON.parse(t, void 0);
    });
  var Yd = Ql.JSON.parse;
  function Xd(t) {
    ap.call(this),
      (this.headers = new ld()),
      (this.H = t || null),
      (this.b = !1),
      (this.s = this.a = null),
      (this.B = ''),
      (this.h = 0),
      (this.f = ''),
      (this.g = this.A = this.l = this.u = !1),
      (this.o = 0),
      (this.m = null),
      (this.I = Jd),
      (this.D = this.F = !1);
  }
  af(Xd, ap);
  var Jd = '',
    $d = /^https?$/i,
    Zd = ['POST', 'PUT'];
  function tv(t) {
    return 'content-type' == t.toLowerCase();
  }
  function ev(t, e) {
    (t.b = !1),
      t.a && ((t.g = !0), t.a.abort(), (t.g = !1)),
      (t.f = e),
      (t.h = 5),
      nv(t),
      iv(t);
  }
  function nv(t) {
    t.u || ((t.u = !0), up(t, 'complete'), up(t, 'error'));
  }
  function rv(t) {
    if (t.b && void 0 !== Gl && (!t.s[1] || 4 != sv(t) || 2 != t.W()))
      if (t.l && 4 == sv(t)) Ep(t.za, 0, t);
      else if ((up(t, 'readystatechange'), 4 == sv(t))) {
        t.b = !1;
        try {
          var e,
            n,
            r,
            i,
            o = t.W();
          t: switch (o) {
            case 200:
            case 201:
            case 202:
            case 204:
            case 206:
            case 304:
            case 1223:
              var s = !0;
              break t;
            default:
              s = !1;
          }
          (e = s) ||
            ((n = 0 === o) &&
              (!(i = String(t.B).match(dd)[1] || null) &&
                Ql.self &&
                Ql.self.location &&
                (i = (r = Ql.self.location.protocol).substr(0, r.length - 1)),
              (n = !$d.test(i ? i.toLowerCase() : ''))),
            (e = n));
          if (e) up(t, 'complete'), up(t, 'success');
          else {
            t.h = 6;
            try {
              var a = 2 < sv(t) ? t.a.statusText : '';
            } catch (o) {
              a = '';
            }
            (t.f = a + ' [' + t.W() + ']'), nv(t);
          }
        } finally {
          iv(t);
        }
      }
  }
  function iv(t, e) {
    if (t.a) {
      ov(t);
      var n = t.a,
        r = t.s[0] ? Yl : null;
      (t.a = null), (t.s = null), e || up(t, 'ready');
      try {
        n.onreadystatechange = r;
      } catch (t) {}
    }
  }
  function ov(t) {
    t.a && t.D && (t.a.ontimeout = null),
      t.m && (Ql.clearTimeout(t.m), (t.m = null));
  }
  function sv(t) {
    return t.a ? t.a.readyState : 0;
  }
  function av(t, e, n) {
    t: {
      for (r in n) {
        var r = !1;
        break t;
      }
      r = !0;
    }
    var i;
    r ||
      ((i = ''),
      bf(n, function (t, e) {
        (i += e), (i += ':'), (i += t), (i += '\r\n');
      }),
      (n = i),
      'string' == typeof t
        ? null != n && encodeURIComponent(String(n))
        : wd(t, e, n));
  }
  function uv(t, e, n) {
    return (n && n.internalChannelParams && n.internalChannelParams[t]) || e;
  }
  function cv(t) {
    (this.pa = 0),
      (this.g = []),
      (this.c = new Dp()),
      (this.ga = this.la = this.B = this.fa = this.a = this.na = this.A = this.V = this.i = this.O = this.l = null),
      (this.Oa = this.R = 0),
      (this.La = uv('failFast', !1, t)),
      (this.H = this.m = this.j = this.h = this.f = null),
      (this.S = !0),
      (this.I = this.oa = this.P = -1),
      (this.T = this.o = this.u = 0),
      (this.Ha = uv('baseRetryDelayMs', 5e3, t)),
      (this.Ra = uv('retryDelaySeedMs', 1e4, t)),
      (this.Ma = uv('forwardChannelMaxRetries', 2, t)),
      (this.ma = uv('forwardChannelRequestTimeoutMs', 2e4, t)),
      (this.Na = (t && t.g) || void 0),
      (this.D = void 0),
      (this.C = (t && t.supportsCrossDomainXhr) || !1),
      (this.J = ''),
      (this.b = new Ud(t && t.concurrentRequestLimit)),
      (this.ka = new Gd()),
      (this.da = (t && t.fastHandshake) || !1),
      (this.Ia = (t && t.b) || !1),
      t && t.f && (this.c.a = !1),
      t && t.forceLongPolling && (this.S = !1),
      (this.U = (!this.da && this.S && t && t.detectBufferingProxy) || !1),
      (this.ea = void 0),
      (this.N = 0),
      (this.F = !1),
      (this.s = null),
      (this.Ka = (t && t.c) || !1) &&
        this.c.info('Opt-in to enable Chrome Origin Trials.');
  }
  function hv(t) {
    var e, n;
    fv(t),
      3 == t.v &&
        ((e = t.R++),
        wd((n = yd(t.B)), 'SID', t.J),
        wd(n, 'RID', e),
        wd(n, 'TYPE', 'terminate'),
        yv(t, n),
        ((e = new Jp(t, t.c, e, void 0)).H = 2),
        (e.i = Ed(yd(n))),
        (n = !1),
        Ql.navigator &&
          Ql.navigator.sendBeacon &&
          (n = Ql.navigator.sendBeacon(e.i.toString(), '')),
        !n && Ql.Image && ((new Image().src = e.i), (n = !0)),
        n || ((e.a = Av(e.g, null)), e.a.ba(e.i)),
        (e.u = sf()),
        id(e)),
      Cv(t);
  }
  function lv(t) {
    t.a && (_v(t), t.a.cancel(), (t.a = null));
  }
  function fv(t) {
    lv(t),
      t.j && (Ql.clearTimeout(t.j), (t.j = null)),
      Ev(t),
      t.b.cancel(),
      t.h && ('number' == typeof t.h && Ql.clearTimeout(t.h), (t.h = null));
  }
  function pv(t, e) {
    t.g.push(new Fd(t.Oa++, e)), 3 == t.v && dv(t);
  }
  function dv(t) {
    Vd(t.b) || t.h || ((t.h = !0), yp(t.Ba, t), (t.u = 0));
  }
  function vv(t, e) {
    var n = e ? e.f : t.R++,
      r = yd(t.B);
    wd(r, 'SID', t.J),
      wd(r, 'RID', n),
      wd(r, 'AID', t.P),
      yv(t, r),
      t.i && t.l && av(r, t.i, t.l),
      (n = new Jp(t, t.c, n, t.u + 1)),
      null === t.i && (n.B = t.l),
      e && (t.g = e.s.concat(t.g)),
      (e = gv(t, n, 1e3)),
      n.setTimeout(
        Math.round(0.5 * t.ma) + Math.round(0.5 * t.ma * Math.random())
      ),
      Wd(t.b, n),
      ed(n, r, e);
  }
  function yv(t, n) {
    t.f &&
      hd({}, function (t, e) {
        wd(n, e, t);
      });
  }
  function gv(t, e, n) {
    n = Math.min(t.g.length, n);
    var r = t.f ? rf(t.f.Ja, t.f, t) : null;
    t: for (var i = t.g, o = -1; ; ) {
      var s = ['count=' + n];
      -1 == o
        ? 0 < n
          ? ((o = i[0].b), s.push('ofs=' + o))
          : (o = 0)
        : s.push('ofs=' + o);
      for (var a = !0, u = 0; u < n; u++) {
        var c = i[u].b,
          h = i[u].a;
        if ((c -= o) < 0) (o = Math.max(0, i[u].b - 100)), (a = !1);
        else
          try {
            !(function (t, r, e) {
              var i = e || '';
              try {
                hd(t, function (t, e) {
                  var n = t;
                  $l(t) && (n = hp(t)),
                    r.push(i + e + '=' + encodeURIComponent(n));
                });
              } catch (t) {
                throw (r.push(i + 'type=' + encodeURIComponent('_badmap')), t);
              }
            })(h, s, 'req' + c + '_');
          } catch (t) {
            r && r(h);
          }
      }
      if (a) {
        r = s.join('&');
        break t;
      }
    }
    return (t = t.g.splice(0, n)), (e.s = t), r;
  }
  function mv(t) {
    t.a || t.j || ((t.T = 1), yp(t.Aa, t), (t.o = 0));
  }
  function bv(t) {
    return (
      !(t.a || t.j || 3 <= t.o) &&
      (t.T++, (t.j = Wp(rf(t.Aa, t), Tv(t, t.o))), t.o++, 1)
    );
  }
  function _v(t) {
    null != t.s && (Ql.clearTimeout(t.s), (t.s = null));
  }
  function wv(t) {
    (t.a = new Jp(t, t.c, 'rpc', t.T)),
      null === t.i && (t.a.B = t.l),
      (t.a.O = 0);
    var e = yd(t.la);
    wd(e, 'RID', 'rpc'),
      wd(e, 'SID', t.J),
      wd(e, 'CI', t.H ? '0' : '1'),
      wd(e, 'AID', t.P),
      yv(t, e),
      wd(e, 'TYPE', 'xmlhttp'),
      t.i && t.l && av(e, t.i, t.l),
      t.D && t.a.setTimeout(t.D);
    var n = t.a;
    (t = t.ga),
      (n.H = 1),
      (n.i = Ed(yd(e))),
      (n.j = null),
      (n.I = !0),
      nd(n, t);
  }
  function Ev(t) {
    null != t.m && (Ql.clearTimeout(t.m), (t.m = null));
  }
  function Iv(t, e) {
    var n,
      r = null;
    if (t.a == e) {
      Ev(t), _v(t), (t.a = null);
      var i = 2;
    } else {
      if (!Bd(t.b, e)) return;
      (r = e.s), Kd(t.b, e), (i = 1);
    }
    if (((t.I = e.N), 0 != t.v))
      if (e.b) {
        1 == i
          ? ((r = e.j ? e.j.length : 0),
            (e = sf() - e.u),
            (n = t.u),
            up((i = Fp()), new Bp(i)),
            dv(t))
          : mv(t);
      } else if (
        3 == (n = e.h) ||
        (0 == n && 0 < t.I) ||
        !(
          (1 == i &&
            (function (t, e) {
              if (!(qd(t.b) >= t.b.f - (t.h ? 1 : 0))) {
                if (t.h) return (t.g = e.s.concat(t.g)), 1;
                if (!(1 == t.v || 2 == t.v || t.u >= (t.La ? 0 : t.Ma)))
                  return (t.h = Wp(rf(t.Ba, t, e), Tv(t, t.u))), t.u++, 1;
              }
            })(t, e)) ||
          (2 == i && bv(t))
        )
      )
        switch ((r && 0 < r.length && ((e = t.b), (e.c = e.c.concat(r))), n)) {
          case 1:
            Sv(t, 5);
            break;
          case 4:
            Sv(t, 10);
            break;
          case 3:
            Sv(t, 6);
            break;
          default:
            Sv(t, 2);
        }
  }
  function Tv(t, e) {
    var n = t.Ha + Math.floor(Math.random() * t.Ra);
    return t.f || (n *= 2), n * e;
  }
  function Sv(t, e) {
    var n, r, i, o;
    t.c.info('Error code ' + e),
      2 == e
        ? ((r = null),
          t.f && (r = null),
          (o = rf(t.Ya, t)),
          r ||
            ((r = new vd('//www.google.com/images/cleardot.gif')),
            (Ql.location && 'http' == Ql.location.protocol) || gd(r, 'https'),
            Ed(r)),
          (n = r.toString()),
          (r = o),
          (o = new Dp()),
          Ql.Image
            ? (((i = new Image()).onload = of(
                Qd,
                o,
                i,
                'TestLoadImage: loaded',
                !0,
                r
              )),
              (i.onerror = of(Qd, o, i, 'TestLoadImage: error', !1, r)),
              (i.onabort = of(Qd, o, i, 'TestLoadImage: abort', !1, r)),
              (i.ontimeout = of(Qd, o, i, 'TestLoadImage: timeout', !1, r)),
              Ql.setTimeout(function () {
                i.ontimeout && i.ontimeout();
              }, 1e4),
              (i.src = n))
            : r(!1))
        : qp(2),
      (t.v = 0),
      t.f && t.f.ra(e),
      Cv(t),
      fv(t);
  }
  function Cv(t) {
    (t.v = 0),
      (t.I = -1),
      t.f &&
        ((0 == Hd(t.b).length && 0 == t.g.length) ||
          ((t.b.c.length = 0), ff(t.g), (t.g.length = 0)),
        t.f.qa());
  }
  function Nv(t, e, n) {
    var r,
      i,
      o,
      s,
      a,
      u = (s = n) instanceof vd ? yd(s) : new vd(s, void 0);
    return (
      '' != u.c
        ? (e && md(u, e + '.' + u.c), bd(u, u.h))
        : ((a = Ql.location),
          (r = a.protocol),
          (i = e ? e + '.' + a.hostname : a.hostname),
          (o = +a.port),
          (s = n),
          (a = new vd(null, void 0)),
          r && gd(a, r),
          i && md(a, i),
          o && bd(a, o),
          s && (a.g = s),
          (u = a)),
      t.V &&
        bf(t.V, function (t, e) {
          wd(u, e, t);
        }),
      (e = t.A),
      (n = t.na),
      e && n && wd(u, e, n),
      wd(u, 'VER', t.ha),
      yv(t, u),
      u
    );
  }
  function Av(t, e) {
    if (e && !t.C)
      throw Error("Can't create secondary domain capable XhrIo object.");
    return ((e = new Xd(t.Na)).F = t.C), e;
  }
  function kv() {}
  function Rv() {
    if (Cf && !(10 <= Number(Mf)))
      throw Error('Environmental error: no available transport.');
  }
  function Ov(t, e) {
    ap.call(this),
      (this.a = new cv(e)),
      (this.o = t),
      (this.b = (e && e.messageUrlParams) || null),
      (t = (e && e.messageHeaders) || null),
      e &&
        e.clientProtocolHeaderRequired &&
        (t
          ? (t['X-Client-Protocol'] = 'webchannel')
          : (t = { 'X-Client-Protocol': 'webchannel' })),
      (this.a.l = t),
      (t = (e && e.initMessageHeaders) || null),
      e &&
        e.messageContentType &&
        (t
          ? (t['X-WebChannel-Content-Type'] = e.messageContentType)
          : (t = { 'X-WebChannel-Content-Type': e.messageContentType })),
      e &&
        e.a &&
        (t
          ? (t['X-WebChannel-Client-Profile'] = e.a)
          : (t = { 'X-WebChannel-Client-Profile': e.a })),
      (this.a.O = t),
      (t = e && e.httpHeadersOverwriteParam) && !pf(t) && (this.a.i = t),
      (this.m = (e && e.supportsCrossDomainXhr) || !1),
      (this.l = (e && e.sendRawJson) || !1),
      (e = e && e.httpSessionIdParam) &&
        !pf(e) &&
        ((this.a.A = e),
        null !== (t = this.b) && e in t && e in (t = this.b) && delete t[e]),
      (this.f = new xv(this));
  }
  function Pv(t) {
    Qp.call(this);
    var e = t.__sm__;
    if (e) {
      t: {
        for (var n in e) {
          t = n;
          break t;
        }
        t = void 0;
      }
      (this.c = t)
        ? ((t = this.c), (this.data = null !== e && t in e ? e[t] : void 0))
        : (this.data = e);
    } else this.data = t;
  }
  function Dv() {
    Yp.call(this), (this.status = 1);
  }
  function xv(t) {
    this.a = t;
  }
  ((vu = Xd.prototype).ba = function (t, e, n, r) {
    if (this.a)
      throw Error(
        '[goog.net.XhrIo] Object is active with another request=' +
          this.B +
          '; newUri=' +
          t
      );
    (e = e ? e.toUpperCase() : 'GET'),
      (this.B = t),
      (this.f = ''),
      (this.h = 0),
      (this.u = !1),
      (this.b = !0),
      (this.a = new XMLHttpRequest()),
      (this.s = this.H ? Hp(this.H) : Hp(Gp)),
      (this.a.onreadystatechange = rf(this.za, this));
    try {
      (this.A = !0), this.a.open(e, String(t), !0), (this.A = !1);
    } catch (t) {
      return void ev(this, t);
    }
    t = n || '';
    var i,
      o = new ld(this.headers);
    r &&
      hd(r, function (t, e) {
        o.set(e, t);
      }),
      (r = (function (t) {
        t: {
          for (
            var e = tv,
              n = t.length,
              r = 'string' == typeof t ? t.split('') : t,
              i = 0;
            i < n;
            i++
          )
            if (i in r && e.call(void 0, r[i], i, t)) {
              e = i;
              break t;
            }
          e = -1;
        }
        return e < 0 ? null : 'string' == typeof t ? t.charAt(e) : t[e];
      })(o.L())),
      (n = Ql.FormData && t instanceof Ql.FormData),
      0 <= cf(Zd, e) &&
        !r &&
        !n &&
        o.set(
          'Content-Type',
          'application/x-www-form-urlencoded;charset=utf-8'
        ),
      o.forEach(function (t, e) {
        this.a.setRequestHeader(e, t);
      }, this),
      this.I && (this.a.responseType = this.I),
      'withCredentials' in this.a &&
        this.a.withCredentials !== this.F &&
        (this.a.withCredentials = this.F);
    try {
      ov(this),
        0 < this.o &&
          ((this.D =
            ((i = this.a),
            Cf &&
              Lf(9) &&
              'number' == typeof i.timeout &&
              void 0 !== i.ontimeout))
            ? ((this.a.timeout = this.o),
              (this.a.ontimeout = rf(this.xa, this)))
            : (this.m = Ep(this.xa, this.o, this))),
        (this.l = !0),
        this.a.send(t),
        (this.l = !1);
    } catch (t) {
      ev(this, t);
    }
  }),
    (vu.xa = function () {
      void 0 !== Gl &&
        this.a &&
        ((this.f = 'Timed out after ' + this.o + 'ms, aborting'),
        (this.h = 8),
        up(this, 'timeout'),
        this.abort(8));
    }),
    (vu.abort = function (t) {
      this.a &&
        this.b &&
        ((this.b = !1),
        (this.g = !0),
        this.a.abort(),
        (this.g = !1),
        (this.h = t || 7),
        up(this, 'complete'),
        up(this, 'abort'),
        iv(this));
    }),
    (vu.G = function () {
      this.a &&
        (this.b &&
          ((this.b = !1), (this.g = !0), this.a.abort(), (this.g = !1)),
        iv(this, !0)),
        Xd.X.G.call(this);
    }),
    (vu.za = function () {
      this.j || (this.A || this.l || this.g ? rv(this) : this.Ua());
    }),
    (vu.Ua = function () {
      rv(this);
    }),
    (vu.W = function () {
      try {
        return 2 < sv(this) ? this.a.status : -1;
      } catch (t) {
        return -1;
      }
    }),
    (vu.$ = function () {
      try {
        return this.a ? this.a.responseText : '';
      } catch (t) {
        return '';
      }
    }),
    (vu.Pa = function (t) {
      if (this.a) {
        var e = this.a.responseText;
        return t && 0 == e.indexOf(t) && (e = e.substring(t.length)), Yd(e);
      }
    }),
    (vu.ua = function () {
      return this.h;
    }),
    (vu.Qa = function () {
      return 'string' == typeof this.f ? this.f : String(this.f);
    }),
    ((vu = cv.prototype).ha = 8),
    (vu.v = 1),
    (vu.Ba = function (t) {
      if (this.h)
        if (((this.h = null), 1 == this.v)) {
          if (!t) {
            (this.R = Math.floor(1e5 * Math.random())), (t = this.R++);
            var e,
              n = new Jp(this, this.c, t, void 0),
              r = this.l;
            if (
              (this.O && (r ? Ef((r = _f(r)), this.O) : (r = this.O)),
              null === this.i && (n.B = r),
              this.da)
            )
              t: {
                for (var i = (e = 0); i < this.g.length; i++) {
                  var o = this.g[i];
                  if (
                    ('__data__' in o.a && 'string' == typeof (o = o.a.__data__)
                      ? (o = o.length)
                      : (o = void 0),
                    void 0 === o)
                  )
                    break;
                  if (4096 < (e += o)) {
                    e = i;
                    break t;
                  }
                  if (4096 === e || i === this.g.length - 1) {
                    e = i + 1;
                    break t;
                  }
                }
                e = 1e3;
              }
            else e = 1e3;
            (e = gv(this, n, e)),
              wd((i = yd(this.B)), 'RID', t),
              wd(i, 'CVER', 22),
              this.A && wd(i, 'X-HTTP-Session-Id', this.A),
              yv(this, i),
              this.i && r && av(i, this.i, r),
              Wd(this.b, n),
              this.Ia && wd(i, 'TYPE', 'init'),
              this.da
                ? (wd(i, '$req', e),
                  wd(i, 'SID', 'null'),
                  (n.U = !0),
                  ed(n, i, null))
                : ed(n, i, e),
              (this.v = 2);
          }
        } else
          3 == this.v &&
            (t ? vv(this, t) : 0 == this.g.length || Vd(this.b) || vv(this));
    }),
    (vu.Aa = function () {
      var t;
      (this.j = null),
        wv(this),
        this.U &&
          !(this.F || null == this.a || this.N <= 0) &&
          ((t = 2 * this.N),
          this.c.info('BP detection timer enabled: ' + t),
          (this.s = Wp(rf(this.Ta, this), t)));
    }),
    (vu.Ta = function () {
      this.s &&
        ((this.s = null),
        this.c.info('BP detection timeout reached.'),
        this.c.info('Buffering proxy detected and switch to long-polling!'),
        (this.H = !1),
        (this.F = !0),
        qp(10),
        lv(this),
        wv(this));
    }),
    (vu.Sa = function () {
      null != this.m && ((this.m = null), lv(this), bv(this), qp(19));
    }),
    (vu.Ya = function (t) {
      t
        ? (this.c.info('Successfully pinged google.com'), qp(2))
        : (this.c.info('Failed to ping google.com'), qp(1));
    }),
    ((vu = kv.prototype).ta = function () {}),
    (vu.sa = function () {}),
    (vu.ra = function () {}),
    (vu.qa = function () {}),
    (vu.Ja = function () {}),
    (Rv.prototype.a = function (t, e) {
      return new Ov(t, e);
    }),
    af(Ov, ap),
    (Ov.prototype.g = function () {
      (this.a.f = this.f), this.m && (this.a.C = !0);
      var t = this.a,
        e = this.o,
        n = this.b || void 0;
      qp(0),
        (t.fa = e),
        (t.V = n || {}),
        (t.H = t.S),
        (t.B = Nv(t, null, t.fa)),
        dv(t);
    }),
    (Ov.prototype.close = function () {
      hv(this.a);
    }),
    (Ov.prototype.h = function (t) {
      var e;
      'string' == typeof t
        ? (((e = {}).__data__ = t), pv(this.a, e))
        : this.l
        ? (((e = {}).__data__ = hp(t)), pv(this.a, e))
        : pv(this.a, t);
    }),
    (Ov.prototype.G = function () {
      (this.a.f = null),
        delete this.f,
        hv(this.a),
        delete this.a,
        Ov.X.G.call(this);
    }),
    af(Pv, Qp),
    af(Dv, Yp),
    af(xv, kv),
    (xv.prototype.ta = function () {
      up(this.a, 'a');
    }),
    (xv.prototype.sa = function (t) {
      up(this.a, new Pv(t));
    }),
    (xv.prototype.ra = function (t) {
      up(this.a, new Dv());
    }),
    (xv.prototype.qa = function () {
      up(this.a, 'b');
    }),
    (Rv.prototype.createWebChannel = Rv.prototype.a),
    (Ov.prototype.send = Ov.prototype.h),
    (Ov.prototype.open = Ov.prototype.g),
    (vt.NO_ERROR = 0),
    (vt.TIMEOUT = 8),
    (vt.HTTP_ERROR = 6),
    (Gn.COMPLETE = 'complete'),
    ((zp.EventType = dt).OPEN = 'a'),
    (dt.CLOSE = 'b'),
    (dt.ERROR = 'c'),
    (dt.MESSAGE = 'd'),
    (ap.prototype.listen = ap.prototype.va),
    (Xd.prototype.listenOnce = Xd.prototype.wa),
    (Xd.prototype.getLastError = Xd.prototype.Qa),
    (Xd.prototype.getLastErrorCode = Xd.prototype.ua),
    (Xd.prototype.getStatus = Xd.prototype.W),
    (Xd.prototype.getResponseJson = Xd.prototype.Pa),
    (Xd.prototype.getResponseText = Xd.prototype.$),
    (Xd.prototype.send = Xd.prototype.ba);
  var Lv,
    Mv = Fp,
    Fv = vt,
    Uv = Gn,
    jv = Lp,
    Vv = 10,
    qv = 11,
    Bv = zp,
    Wv = Xd,
    Kv = {
      OK: 'ok',
      CANCELLED: 'cancelled',
      UNKNOWN: 'unknown',
      INVALID_ARGUMENT: 'invalid-argument',
      DEADLINE_EXCEEDED: 'deadline-exceeded',
      NOT_FOUND: 'not-found',
      ALREADY_EXISTS: 'already-exists',
      PERMISSION_DENIED: 'permission-denied',
      UNAUTHENTICATED: 'unauthenticated',
      RESOURCE_EXHAUSTED: 'resource-exhausted',
      FAILED_PRECONDITION: 'failed-precondition',
      ABORTED: 'aborted',
      OUT_OF_RANGE: 'out-of-range',
      UNIMPLEMENTED: 'unimplemented',
      INTERNAL: 'internal',
      UNAVAILABLE: 'unavailable',
      DATA_LOSS: 'data-loss'
    },
    Hv = (mo(Gv, (Lv = Error)), Gv),
    zv = new xs('@firebase/firestore');
  function Gv(t, e) {
    var n = this;
    return (
      ((n = Lv.call(this, e) || this).code = t),
      (n.message = e),
      (n.name = 'FirebaseError'),
      (n.toString = function () {
        return n.name + ': [code=' + n.code + ']: ' + n.message;
      }),
      n
    );
  }
  function Qv() {
    return zv.logLevel;
  }
  function Yv(t) {
    for (var e, n = [], r = 1; r < arguments.length; r++)
      n[r - 1] = arguments[r];
    zv.logLevel <= As.DEBUG &&
      ((e = n.map($v)), zv.debug.apply(zv, So(['Firestore (8.1.1): ' + t], e)));
  }
  function Xv(t) {
    for (var e, n = [], r = 1; r < arguments.length; r++)
      n[r - 1] = arguments[r];
    zv.logLevel <= As.ERROR &&
      ((e = n.map($v)), zv.error.apply(zv, So(['Firestore (8.1.1): ' + t], e)));
  }
  function Jv(t) {
    for (var e, n = [], r = 1; r < arguments.length; r++)
      n[r - 1] = arguments[r];
    zv.logLevel <= As.WARN &&
      ((e = n.map($v)), zv.warn.apply(zv, So(['Firestore (8.1.1): ' + t], e)));
  }
  function $v(e) {
    if ('string' == typeof e) return e;
    try {
      return JSON.stringify(e);
    } catch (t) {
      return e;
    }
  }
  function Zv(t) {
    void 0 === t && (t = 'Unexpected state');
    t = 'FIRESTORE (8.1.1) INTERNAL ASSERTION FAILED: ' + t;
    throw (Xv(t), new Error(t));
  }
  function ty(t) {
    t || Zv();
  }
  var ey =
    ((ny.t = function () {
      for (
        var t =
            'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',
          e = Math.floor(256 / t.length) * t.length,
          n = '';
        n.length < 20;

      )
        for (
          var r = (function (t) {
              var e =
                  'undefined' != typeof self && (self.crypto || self.msCrypto),
                n = new Uint8Array(t);
              if (e && 'function' == typeof e.getRandomValues)
                e.getRandomValues(n);
              else
                for (var r = 0; r < t; r++)
                  n[r] = Math.floor(256 * Math.random());
              return n;
            })(40),
            i = 0;
          i < r.length;
          ++i
        )
          n.length < 20 && r[i] < e && (n += t.charAt(r[i] % t.length));
      return n;
    }),
    ny);
  function ny() {}
  function ry(t, e) {
    return t < e ? -1 : e < t ? 1 : 0;
  }
  function iy(t, n, r) {
    return (
      t.length === n.length &&
      t.every(function (t, e) {
        return r(t, n[e]);
      })
    );
  }
  function oy(t) {
    return t + '\0';
  }
  var sy =
    ((ay.fromBase64String = function (t) {
      return new ay(atob(t));
    }),
    (ay.fromUint8Array = function (t) {
      return new ay(
        (function (t) {
          for (var e = '', n = 0; n < t.length; ++n)
            e += String.fromCharCode(t[n]);
          return e;
        })(t)
      );
    }),
    (ay.prototype.toBase64 = function () {
      return (t = this.i), btoa(t);
      var t;
    }),
    (ay.prototype.toUint8Array = function () {
      return (function (t) {
        for (var e = new Uint8Array(t.length), n = 0; n < t.length; n++)
          e[n] = t.charCodeAt(n);
        return e;
      })(this.i);
    }),
    (ay.prototype.o = function () {
      return 2 * this.i.length;
    }),
    (ay.prototype.u = function (t) {
      return ry(this.i, t.i);
    }),
    (ay.prototype.isEqual = function (t) {
      return this.i === t.i;
    }),
    ay);
  function ay(t) {
    this.i = t;
  }
  sy.h = new sy('');
  var uy =
      ((hy.fromBase64String = function (t) {
        try {
          return new hy(sy.fromBase64String(t));
        } catch (t) {
          throw new Hv(
            Kv.INVALID_ARGUMENT,
            'Failed to construct data from Base64 string: ' + t
          );
        }
      }),
      (hy.fromUint8Array = function (t) {
        return new hy(sy.fromUint8Array(t));
      }),
      (hy.prototype.toBase64 = function () {
        return this.l.toBase64();
      }),
      (hy.prototype.toUint8Array = function () {
        return this.l.toUint8Array();
      }),
      (hy.prototype.toString = function () {
        return 'Bytes(base64: ' + this.toBase64() + ')';
      }),
      (hy.prototype.isEqual = function (t) {
        return this.l.isEqual(t.l);
      }),
      hy),
    cy = function (t) {
      this._ = t;
    };
  function hy(t) {
    this.l = t;
  }
  function ly() {
    if ('undefined' == typeof Uint8Array)
      throw new Hv(
        Kv.UNIMPLEMENTED,
        'Uint8Arrays are not available in this environment.'
      );
  }
  function fy() {
    if ('undefined' == typeof atob)
      throw new Hv(
        Kv.UNIMPLEMENTED,
        'Blobs are unavailable in Firestore in this environment.'
      );
  }
  var py,
    dy =
      (mo(_y, (py = cy)),
      (_y.fromBase64String = function (t) {
        return fy(), new _y(uy.fromBase64String(t));
      }),
      (_y.fromUint8Array = function (t) {
        return ly(), new _y(uy.fromUint8Array(t));
      }),
      (_y.prototype.toBase64 = function () {
        return fy(), this._.toBase64();
      }),
      (_y.prototype.toUint8Array = function () {
        return ly(), this._.toUint8Array();
      }),
      (_y.prototype.isEqual = function (t) {
        return this._.isEqual(t._);
      }),
      (_y.prototype.toString = function () {
        return 'Blob(base64: ' + this.toBase64() + ')';
      }),
      _y),
    vy = function (t, e, n, r, i, o) {
      (this.T = t),
        (this.persistenceKey = e),
        (this.host = n),
        (this.ssl = r),
        (this.forceLongPolling = i),
        (this.m = o);
    },
    yy =
      (Object.defineProperty(by.prototype, 'I', {
        get: function () {
          return '(default)' === this.database;
        },
        enumerable: !1,
        configurable: !0
      }),
      (by.prototype.isEqual = function (t) {
        return (
          t instanceof by &&
          t.projectId === this.projectId &&
          t.database === this.database
        );
      }),
      by),
    gy =
      ((my.prototype.A = function () {
        return null != this.uid;
      }),
      (my.prototype.R = function () {
        return this.A() ? 'uid:' + this.uid : 'anonymous-user';
      }),
      (my.prototype.isEqual = function (t) {
        return t.uid === this.uid;
      }),
      my);
  function my(t) {
    this.uid = t;
  }
  function by(t, e) {
    (this.projectId = t), (this.database = e || '(default)');
  }
  function _y() {
    return (null !== py && py.apply(this, arguments)) || this;
  }
  (gy.UNAUTHENTICATED = new gy(null)),
    (gy.P = new gy('google-credentials-uid')),
    (gy.g = new gy('first-party-uid'));
  function wy(t, e) {
    (this.user = e),
      (this.type = 'OAuth'),
      (this.V = {}),
      (this.V.Authorization = 'Bearer ' + t);
  }
  var Ey,
    Iy,
    Ty =
      ((Wy.prototype.getToken = function () {
        return Promise.resolve(null);
      }),
      (Wy.prototype.v = function () {}),
      (Wy.prototype.S = function (t) {
        (this.p = t)(gy.UNAUTHENTICATED);
      }),
      (Wy.prototype.D = function () {
        this.p = null;
      }),
      Wy),
    Sy =
      ((By.prototype.getToken = function () {
        var e = this,
          n = this.F,
          t = this.forceRefresh;
        return (
          (this.forceRefresh = !1),
          this.auth
            ? this.auth.getToken(t).then(function (t) {
                return e.F !== n
                  ? (Yv(
                      'FirebaseCredentialsProvider',
                      'getToken aborted due to token change.'
                    ),
                    e.getToken())
                  : t
                  ? (ty('string' == typeof t.accessToken),
                    new wy(t.accessToken, e.currentUser))
                  : null;
              })
            : Promise.resolve(null)
        );
      }),
      (By.prototype.v = function () {
        this.forceRefresh = !0;
      }),
      (By.prototype.S = function (t) {
        (this.p = t), this.N && t(this.currentUser);
      }),
      (By.prototype.D = function () {
        this.auth && this.auth.removeAuthTokenListener(this.C),
          (this.C = null),
          (this.p = null);
      }),
      (By.prototype.O = function () {
        var t = this.auth && this.auth.getUid();
        return ty(null === t || 'string' == typeof t), new gy(t);
      }),
      By),
    Cy =
      (Object.defineProperty(qy.prototype, 'V', {
        get: function () {
          var t = { 'X-Goog-AuthUser': this.M },
            e = this.k.auth.getAuthHeaderValueForFirstParty([]);
          return e && (t.Authorization = e), t;
        },
        enumerable: !1,
        configurable: !0
      }),
      qy),
    Ny =
      ((Vy.prototype.getToken = function () {
        return Promise.resolve(new Cy(this.k, this.M));
      }),
      (Vy.prototype.S = function (t) {
        t(gy.g);
      }),
      (Vy.prototype.D = function () {}),
      (Vy.prototype.v = function () {}),
      Vy),
    Ay =
      ((jy.now = function () {
        return jy.fromMillis(Date.now());
      }),
      (jy.fromDate = function (t) {
        return jy.fromMillis(t.getTime());
      }),
      (jy.fromMillis = function (t) {
        var e = Math.floor(t / 1e3);
        return new jy(e, 1e6 * (t - 1e3 * e));
      }),
      (jy.prototype.toDate = function () {
        return new Date(this.toMillis());
      }),
      (jy.prototype.toMillis = function () {
        return 1e3 * this.seconds + this.nanoseconds / 1e6;
      }),
      (jy.prototype.L = function (t) {
        return this.seconds === t.seconds
          ? ry(this.nanoseconds, t.nanoseconds)
          : ry(this.seconds, t.seconds);
      }),
      (jy.prototype.isEqual = function (t) {
        return t.seconds === this.seconds && t.nanoseconds === this.nanoseconds;
      }),
      (jy.prototype.toString = function () {
        return (
          'Timestamp(seconds=' +
          this.seconds +
          ', nanoseconds=' +
          this.nanoseconds +
          ')'
        );
      }),
      (jy.prototype.toJSON = function () {
        return { seconds: this.seconds, nanoseconds: this.nanoseconds };
      }),
      (jy.prototype.valueOf = function () {
        var t = this.seconds - -62135596800;
        return (
          String(t).padStart(12, '0') +
          '.' +
          String(this.nanoseconds).padStart(9, '0')
        );
      }),
      jy),
    ky =
      ((Uy.$ = function (t) {
        return new Uy(t);
      }),
      (Uy.min = function () {
        return new Uy(new Ay(0, 0));
      }),
      (Uy.prototype.u = function (t) {
        return this.timestamp.L(t.timestamp);
      }),
      (Uy.prototype.isEqual = function (t) {
        return this.timestamp.isEqual(t.timestamp);
      }),
      (Uy.prototype.B = function () {
        return 1e6 * this.timestamp.seconds + this.timestamp.nanoseconds / 1e3;
      }),
      (Uy.prototype.toString = function () {
        return 'SnapshotVersion(' + this.timestamp.toString() + ')';
      }),
      (Uy.prototype.q = function () {
        return this.timestamp;
      }),
      Uy),
    dt =
      (Object.defineProperty(Fy.prototype, 'length', {
        get: function () {
          return this.U;
        },
        enumerable: !1,
        configurable: !0
      }),
      (Fy.prototype.isEqual = function (t) {
        return 0 === Fy.K(this, t);
      }),
      (Fy.prototype.child = function (t) {
        var e = this.segments.slice(this.offset, this.limit());
        return (
          t instanceof Fy
            ? t.forEach(function (t) {
                e.push(t);
              })
            : e.push(t),
          this.W(e)
        );
      }),
      (Fy.prototype.limit = function () {
        return this.offset + this.length;
      }),
      (Fy.prototype.j = function (t) {
        return (
          (t = void 0 === t ? 1 : t),
          this.W(this.segments, this.offset + t, this.length - t)
        );
      }),
      (Fy.prototype.G = function () {
        return this.W(this.segments, this.offset, this.length - 1);
      }),
      (Fy.prototype.H = function () {
        return this.segments[this.offset];
      }),
      (Fy.prototype.J = function () {
        return this.get(this.length - 1);
      }),
      (Fy.prototype.get = function (t) {
        return this.segments[this.offset + t];
      }),
      (Fy.prototype.Y = function () {
        return 0 === this.length;
      }),
      (Fy.prototype.X = function (t) {
        if (t.length < this.length) return !1;
        for (var e = 0; e < this.length; e++)
          if (this.get(e) !== t.get(e)) return !1;
        return !0;
      }),
      (Fy.prototype.Z = function (t) {
        if (this.length + 1 !== t.length) return !1;
        for (var e = 0; e < this.length; e++)
          if (this.get(e) !== t.get(e)) return !1;
        return !0;
      }),
      (Fy.prototype.forEach = function (t) {
        for (var e = this.offset, n = this.limit(); e < n; e++)
          t(this.segments[e]);
      }),
      (Fy.prototype.tt = function () {
        return this.segments.slice(this.offset, this.limit());
      }),
      (Fy.K = function (t, e) {
        for (var n = Math.min(t.length, e.length), r = 0; r < n; r++) {
          var i = t.get(r),
            o = e.get(r);
          if (i < o) return -1;
          if (o < i) return 1;
        }
        return t.length < e.length ? -1 : t.length > e.length ? 1 : 0;
      }),
      Fy),
    Ry =
      (mo(My, (Iy = dt)),
      (My.prototype.W = function (t, e, n) {
        return new My(t, e, n);
      }),
      (My.prototype.et = function () {
        return this.tt().join('/');
      }),
      (My.prototype.toString = function () {
        return this.et();
      }),
      (My.nt = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        for (var n = [], r = 0, i = t; r < i.length; r++) {
          var o = i[r];
          if (0 <= o.indexOf('//'))
            throw new Hv(
              Kv.INVALID_ARGUMENT,
              'Invalid segment (' + o + '). Paths must not contain // in them.'
            );
          n.push.apply(
            n,
            o.split('/').filter(function (t) {
              return 0 < t.length;
            })
          );
        }
        return new My(n);
      }),
      (My.st = function () {
        return new My([]);
      }),
      My),
    Oy = /^[_a-zA-Z][_a-zA-Z0-9]*$/,
    Py =
      (mo(Ly, (Ey = dt)),
      (Ly.prototype.W = function (t, e, n) {
        return new Ly(t, e, n);
      }),
      (Ly.it = function (t) {
        return Oy.test(t);
      }),
      (Ly.prototype.et = function () {
        return this.tt()
          .map(function (t) {
            return (
              (t = t.replace(/\\/g, '\\\\').replace(/`/g, '\\`')),
              Ly.it(t) || (t = '`' + t + '`'),
              t
            );
          })
          .join('.');
      }),
      (Ly.prototype.toString = function () {
        return this.et();
      }),
      (Ly.prototype.rt = function () {
        return 1 === this.length && '__name__' === this.get(0);
      }),
      (Ly.ot = function () {
        return new Ly(['__name__']);
      }),
      (Ly.ct = function (t) {
        for (
          var e = [],
            n = '',
            r = 0,
            i = function () {
              if (0 === n.length)
                throw new Hv(
                  Kv.INVALID_ARGUMENT,
                  'Invalid field path (' +
                    t +
                    "). Paths must not be empty, begin with '.', end with '.', or contain '..'"
                );
              e.push(n), (n = '');
            },
            o = !1;
          r < t.length;

        ) {
          var s = t[r];
          if ('\\' === s) {
            if (r + 1 === t.length)
              throw new Hv(
                Kv.INVALID_ARGUMENT,
                'Path has trailing escape character: ' + t
              );
            var a = t[r + 1];
            if ('\\' !== a && '.' !== a && '`' !== a)
              throw new Hv(
                Kv.INVALID_ARGUMENT,
                'Path has invalid escape sequence: ' + t
              );
            (n += a), (r += 2);
          } else '`' === s ? (o = !o) : '.' !== s || o ? (n += s) : i(), r++;
        }
        if ((i(), o))
          throw new Hv(Kv.INVALID_ARGUMENT, 'Unterminated ` in path: ' + t);
        return new Ly(e);
      }),
      (Ly.st = function () {
        return new Ly([]);
      }),
      Ly),
    Dy =
      ((xy.at = function (t) {
        return new xy(Ry.nt(t));
      }),
      (xy.ut = function (t) {
        return new xy(Ry.nt(t).j(5));
      }),
      (xy.prototype.ht = function (t) {
        return (
          2 <= this.path.length && this.path.get(this.path.length - 2) === t
        );
      }),
      (xy.prototype.isEqual = function (t) {
        return null !== t && 0 === Ry.K(this.path, t.path);
      }),
      (xy.prototype.toString = function () {
        return this.path.toString();
      }),
      (xy.K = function (t, e) {
        return Ry.K(t.path, e.path);
      }),
      (xy.lt = function (t) {
        return t.length % 2 == 0;
      }),
      (xy._t = function (t) {
        return new xy(new Ry(t.slice()));
      }),
      xy);
  function xy(t) {
    this.path = t;
  }
  function Ly() {
    return (null !== Ey && Ey.apply(this, arguments)) || this;
  }
  function My() {
    return (null !== Iy && Iy.apply(this, arguments)) || this;
  }
  function Fy(t, e, n) {
    void 0 === e ? (e = 0) : e > t.length && Zv(),
      void 0 === n ? (n = t.length - e) : n > t.length - e && Zv(),
      (this.segments = t),
      (this.offset = e),
      (this.U = n);
  }
  function Uy(t) {
    this.timestamp = t;
  }
  function jy(t, e) {
    if (((this.seconds = t), (this.nanoseconds = e) < 0))
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Timestamp nanoseconds out of range: ' + e
      );
    if (1e9 <= e)
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Timestamp nanoseconds out of range: ' + e
      );
    if (t < -62135596800)
      throw new Hv(Kv.INVALID_ARGUMENT, 'Timestamp seconds out of range: ' + t);
    if (253402300800 <= t)
      throw new Hv(Kv.INVALID_ARGUMENT, 'Timestamp seconds out of range: ' + t);
  }
  function Vy(t, e) {
    (this.k = t), (this.M = e);
  }
  function qy(t, e) {
    (this.k = t), (this.M = e), (this.type = 'FirstParty'), (this.user = gy.g);
  }
  function By(t) {
    var e = this;
    (this.C = null),
      (this.currentUser = gy.UNAUTHENTICATED),
      (this.N = !1),
      (this.F = 0),
      (this.p = null),
      (this.forceRefresh = !1),
      (this.C = function () {
        e.F++, (e.currentUser = e.O()), (e.N = !0), e.p && e.p(e.currentUser);
      }),
      (this.F = 0),
      (this.auth = t.getImmediate({ optional: !0 })),
      this.auth
        ? this.auth.addAuthTokenListener(this.C)
        : (this.C(null),
          t.get().then(
            function (t) {
              (e.auth = t), e.C && e.auth.addAuthTokenListener(e.C);
            },
            function () {}
          ));
  }
  function Wy() {
    this.p = null;
  }
  function Ky(t) {
    return null == t;
  }
  function Hy(t) {
    return 0 === t && 1 / t == -1 / 0;
  }
  function zy(t) {
    return (
      'number' == typeof t &&
      Number.isInteger(t) &&
      !Hy(t) &&
      t <= Number.MAX_SAFE_INTEGER &&
      t >= Number.MIN_SAFE_INTEGER
    );
  }
  var Gy = function (t, e, n, r, i, o, s) {
    void 0 === e && (e = null),
      void 0 === n && (n = []),
      void 0 === r && (r = []),
      void 0 === i && (i = null),
      void 0 === o && (o = null),
      void 0 === s && (s = null),
      (this.path = t),
      (this.collectionGroup = e),
      (this.orderBy = n),
      (this.filters = r),
      (this.limit = i),
      (this.startAt = o),
      (this.endAt = s),
      (this.ft = null);
  };
  function Qy(t, e, n, r, i, o, s) {
    return (
      void 0 === e && (e = null),
      void 0 === n && (n = []),
      void 0 === r && (r = []),
      void 0 === i && (i = null),
      void 0 === o && (o = null),
      void 0 === s && (s = null),
      new Gy(t, e, n, r, i, o, s)
    );
  }
  function Yy(t) {
    var e = t;
    return (
      null === e.ft &&
        ((t = e.path.et()),
        null !== e.collectionGroup && (t += '|cg:' + e.collectionGroup),
        (t += '|f:'),
        (t += e.filters
          .map(function (t) {
            return (t = t).field.et() + t.op.toString() + Jg(t.value);
          })
          .join(',')),
        (t += '|ob:'),
        (t += e.orderBy
          .map(function (t) {
            return (t = t).field.et() + t.dir;
          })
          .join(',')),
        Ky(e.limit) || ((t += '|l:'), (t += e.limit)),
        e.startAt && ((t += '|lb:'), (t += k_(e.startAt))),
        e.endAt && ((t += '|ub:'), (t += k_(e.endAt))),
        (e.ft = t)),
      e.ft
    );
  }
  function Xy(t, e) {
    if (t.limit !== e.limit) return !1;
    if (t.orderBy.length !== e.orderBy.length) return !1;
    for (var n, r, i = 0; i < t.orderBy.length; i++)
      if (
        ((n = t.orderBy[i]),
        (r = e.orderBy[i]),
        n.dir !== r.dir || !n.field.isEqual(r.field))
      )
        return !1;
    if (t.filters.length !== e.filters.length) return !1;
    for (var o, s, a = 0; a < t.filters.length; a++)
      if (
        ((o = t.filters[a]),
        (s = e.filters[a]),
        o.op !== s.op || !o.field.isEqual(s.field) || !Gg(o.value, s.value))
      )
        return !1;
    return (
      t.collectionGroup === e.collectionGroup &&
      !!t.path.isEqual(e.path) &&
      !!O_(t.startAt, e.startAt) &&
      O_(t.endAt, e.endAt)
    );
  }
  function Jy(t) {
    return (
      Dy.lt(t.path) && null === t.collectionGroup && 0 === t.filters.length
    );
  }
  function $y(t) {
    this.count = t;
  }
  var Zy,
    tg =
      ((eg.prototype.Et = function (t) {
        return new eg(
          this.target,
          this.targetId,
          this.dt,
          t,
          this.wt,
          this.lastLimboFreeSnapshotVersion,
          this.resumeToken
        );
      }),
      (eg.prototype.Tt = function (t, e) {
        return new eg(
          this.target,
          this.targetId,
          this.dt,
          this.sequenceNumber,
          e,
          this.lastLimboFreeSnapshotVersion,
          t
        );
      }),
      (eg.prototype.It = function (t) {
        return new eg(
          this.target,
          this.targetId,
          this.dt,
          this.sequenceNumber,
          this.wt,
          t,
          this.resumeToken
        );
      }),
      eg);
  function eg(t, e, n, r, i, o, s) {
    void 0 === i && (i = ky.min()),
      void 0 === o && (o = ky.min()),
      void 0 === s && (s = sy.h),
      (this.target = t),
      (this.targetId = e),
      (this.dt = n),
      (this.sequenceNumber = r),
      (this.wt = i),
      (this.lastLimboFreeSnapshotVersion = o),
      (this.resumeToken = s);
  }
  function ng(t) {
    switch (t) {
      case Kv.OK:
        return Zv(), 0;
      case Kv.CANCELLED:
      case Kv.UNKNOWN:
      case Kv.DEADLINE_EXCEEDED:
      case Kv.RESOURCE_EXHAUSTED:
      case Kv.INTERNAL:
      case Kv.UNAVAILABLE:
      case Kv.UNAUTHENTICATED:
        return;
      case Kv.INVALID_ARGUMENT:
      case Kv.NOT_FOUND:
      case Kv.ALREADY_EXISTS:
      case Kv.PERMISSION_DENIED:
      case Kv.FAILED_PRECONDITION:
      case Kv.ABORTED:
      case Kv.OUT_OF_RANGE:
      case Kv.UNIMPLEMENTED:
      case Kv.DATA_LOSS:
        return 1;
      default:
        return Zv(), 0;
    }
  }
  function rg(t) {
    if (void 0 === t) return Xv('GRPC error has no .code'), Kv.UNKNOWN;
    switch (t) {
      case Zy.OK:
        return Kv.OK;
      case Zy.CANCELLED:
        return Kv.CANCELLED;
      case Zy.UNKNOWN:
        return Kv.UNKNOWN;
      case Zy.DEADLINE_EXCEEDED:
        return Kv.DEADLINE_EXCEEDED;
      case Zy.RESOURCE_EXHAUSTED:
        return Kv.RESOURCE_EXHAUSTED;
      case Zy.INTERNAL:
        return Kv.INTERNAL;
      case Zy.UNAVAILABLE:
        return Kv.UNAVAILABLE;
      case Zy.UNAUTHENTICATED:
        return Kv.UNAUTHENTICATED;
      case Zy.INVALID_ARGUMENT:
        return Kv.INVALID_ARGUMENT;
      case Zy.NOT_FOUND:
        return Kv.NOT_FOUND;
      case Zy.ALREADY_EXISTS:
        return Kv.ALREADY_EXISTS;
      case Zy.PERMISSION_DENIED:
        return Kv.PERMISSION_DENIED;
      case Zy.FAILED_PRECONDITION:
        return Kv.FAILED_PRECONDITION;
      case Zy.ABORTED:
        return Kv.ABORTED;
      case Zy.OUT_OF_RANGE:
        return Kv.OUT_OF_RANGE;
      case Zy.UNIMPLEMENTED:
        return Kv.UNIMPLEMENTED;
      case Zy.DATA_LOSS:
        return Kv.DATA_LOSS;
      default:
        return Zv();
    }
  }
  ((vt = Zy = Zy || {})[(vt.OK = 0)] = 'OK'),
    (vt[(vt.CANCELLED = 1)] = 'CANCELLED'),
    (vt[(vt.UNKNOWN = 2)] = 'UNKNOWN'),
    (vt[(vt.INVALID_ARGUMENT = 3)] = 'INVALID_ARGUMENT'),
    (vt[(vt.DEADLINE_EXCEEDED = 4)] = 'DEADLINE_EXCEEDED'),
    (vt[(vt.NOT_FOUND = 5)] = 'NOT_FOUND'),
    (vt[(vt.ALREADY_EXISTS = 6)] = 'ALREADY_EXISTS'),
    (vt[(vt.PERMISSION_DENIED = 7)] = 'PERMISSION_DENIED'),
    (vt[(vt.UNAUTHENTICATED = 16)] = 'UNAUTHENTICATED'),
    (vt[(vt.RESOURCE_EXHAUSTED = 8)] = 'RESOURCE_EXHAUSTED'),
    (vt[(vt.FAILED_PRECONDITION = 9)] = 'FAILED_PRECONDITION'),
    (vt[(vt.ABORTED = 10)] = 'ABORTED'),
    (vt[(vt.OUT_OF_RANGE = 11)] = 'OUT_OF_RANGE'),
    (vt[(vt.UNIMPLEMENTED = 12)] = 'UNIMPLEMENTED'),
    (vt[(vt.INTERNAL = 13)] = 'INTERNAL'),
    (vt[(vt.UNAVAILABLE = 14)] = 'UNAVAILABLE'),
    (vt[(vt.DATA_LOSS = 15)] = 'DATA_LOSS');
  var ig =
      ((cg.prototype.At = function (t, e) {
        return new cg(
          this.K,
          this.root.At(t, e, this.K).copy(null, null, sg.Rt, null, null)
        );
      }),
      (cg.prototype.remove = function (t) {
        return new cg(
          this.K,
          this.root.remove(t, this.K).copy(null, null, sg.Rt, null, null)
        );
      }),
      (cg.prototype.get = function (t) {
        for (var e = this.root; !e.Y(); ) {
          var n = this.K(t, e.key);
          if (0 === n) return e.value;
          n < 0 ? (e = e.left) : 0 < n && (e = e.right);
        }
        return null;
      }),
      (cg.prototype.indexOf = function (t) {
        for (var e = 0, n = this.root; !n.Y(); ) {
          var r = this.K(t, n.key);
          if (0 === r) return e + n.left.size;
          n = r < 0 ? n.left : ((e += n.left.size + 1), n.right);
        }
        return -1;
      }),
      (cg.prototype.Y = function () {
        return this.root.Y();
      }),
      Object.defineProperty(cg.prototype, 'size', {
        get: function () {
          return this.root.size;
        },
        enumerable: !1,
        configurable: !0
      }),
      (cg.prototype.Pt = function () {
        return this.root.Pt();
      }),
      (cg.prototype.yt = function () {
        return this.root.yt();
      }),
      (cg.prototype.gt = function (t) {
        return this.root.gt(t);
      }),
      (cg.prototype.forEach = function (n) {
        this.gt(function (t, e) {
          return n(t, e), !1;
        });
      }),
      (cg.prototype.toString = function () {
        var n = [];
        return (
          this.gt(function (t, e) {
            return n.push(t + ':' + e), !1;
          }),
          '{' + n.join(', ') + '}'
        );
      }),
      (cg.prototype.Vt = function (t) {
        return this.root.Vt(t);
      }),
      (cg.prototype.bt = function () {
        return new og(this.root, null, this.K, !1);
      }),
      (cg.prototype.vt = function (t) {
        return new og(this.root, t, this.K, !1);
      }),
      (cg.prototype.St = function () {
        return new og(this.root, null, this.K, !0);
      }),
      (cg.prototype.Dt = function (t) {
        return new og(this.root, t, this.K, !0);
      }),
      cg),
    og =
      ((ug.prototype.Nt = function () {
        var t = this.xt.pop(),
          e = { key: t.key, value: t.value };
        if (this.Ct) for (t = t.left; !t.Y(); ) this.xt.push(t), (t = t.right);
        else for (t = t.right; !t.Y(); ) this.xt.push(t), (t = t.left);
        return e;
      }),
      (ug.prototype.Ft = function () {
        return 0 < this.xt.length;
      }),
      (ug.prototype.Ot = function () {
        if (0 === this.xt.length) return null;
        var t = this.xt[this.xt.length - 1];
        return { key: t.key, value: t.value };
      }),
      ug),
    sg =
      ((ag.prototype.copy = function (t, e, n, r, i) {
        return new ag(
          null != t ? t : this.key,
          null != e ? e : this.value,
          null != n ? n : this.color,
          null != r ? r : this.left,
          null != i ? i : this.right
        );
      }),
      (ag.prototype.Y = function () {
        return !1;
      }),
      (ag.prototype.gt = function (t) {
        return this.left.gt(t) || t(this.key, this.value) || this.right.gt(t);
      }),
      (ag.prototype.Vt = function (t) {
        return this.right.Vt(t) || t(this.key, this.value) || this.left.Vt(t);
      }),
      (ag.prototype.min = function () {
        return this.left.Y() ? this : this.left.min();
      }),
      (ag.prototype.Pt = function () {
        return this.min().key;
      }),
      (ag.prototype.yt = function () {
        return this.right.Y() ? this.key : this.right.yt();
      }),
      (ag.prototype.At = function (t, e, n) {
        var r = this,
          i = n(t, r.key);
        return (r =
          i < 0
            ? r.copy(null, null, null, r.left.At(t, e, n), null)
            : 0 === i
            ? r.copy(null, e, null, null, null)
            : r.copy(null, null, null, null, r.right.At(t, e, n))).kt();
      }),
      (ag.prototype.Mt = function () {
        if (this.left.Y()) return ag.EMPTY;
        var t = this;
        return (
          t.left.Lt() || t.left.left.Lt() || (t = t.$t()),
          (t = t.copy(null, null, null, t.left.Mt(), null)).kt()
        );
      }),
      (ag.prototype.remove = function (t, e) {
        var n,
          r = this;
        if (e(t, r.key) < 0)
          r.left.Y() || r.left.Lt() || r.left.left.Lt() || (r = r.$t()),
            (r = r.copy(null, null, null, r.left.remove(t, e), null));
        else {
          if (
            (r.left.Lt() && (r = r.Bt()),
            r.right.Y() || r.right.Lt() || r.right.left.Lt() || (r = r.qt()),
            0 === e(t, r.key))
          ) {
            if (r.right.Y()) return ag.EMPTY;
            (n = r.right.min()),
              (r = r.copy(n.key, n.value, null, null, r.right.Mt()));
          }
          r = r.copy(null, null, null, null, r.right.remove(t, e));
        }
        return r.kt();
      }),
      (ag.prototype.Lt = function () {
        return this.color;
      }),
      (ag.prototype.kt = function () {
        var t = this;
        return (
          t.right.Lt() && !t.left.Lt() && (t = t.Ut()),
          t.left.Lt() && t.left.left.Lt() && (t = t.Bt()),
          t.left.Lt() && t.right.Lt() && (t = t.Qt()),
          t
        );
      }),
      (ag.prototype.$t = function () {
        var t = this.Qt();
        return (
          t.right.left.Lt() &&
            (t = (t = (t = t.copy(
              null,
              null,
              null,
              null,
              t.right.Bt()
            )).Ut()).Qt()),
          t
        );
      }),
      (ag.prototype.qt = function () {
        var t = this.Qt();
        return t.left.left.Lt() && (t = (t = t.Bt()).Qt()), t;
      }),
      (ag.prototype.Ut = function () {
        var t = this.copy(null, null, ag.RED, null, this.right.left);
        return this.right.copy(null, null, this.color, t, null);
      }),
      (ag.prototype.Bt = function () {
        var t = this.copy(null, null, ag.RED, this.left.right, null);
        return this.left.copy(null, null, this.color, null, t);
      }),
      (ag.prototype.Qt = function () {
        var t = this.left.copy(null, null, !this.left.color, null, null),
          e = this.right.copy(null, null, !this.right.color, null, null);
        return this.copy(null, null, !this.color, t, e);
      }),
      (ag.prototype.Kt = function () {
        var t = this.Wt();
        return Math.pow(2, t) <= this.size + 1;
      }),
      (ag.prototype.Wt = function () {
        if (this.Lt() && this.left.Lt()) throw Zv();
        if (this.right.Lt()) throw Zv();
        var t = this.left.Wt();
        if (t !== this.right.Wt()) throw Zv();
        return t + (this.Lt() ? 0 : 1);
      }),
      ag);
  function ag(t, e, n, r, i) {
    (this.key = t),
      (this.value = e),
      (this.color = null != n ? n : ag.RED),
      (this.left = null != r ? r : ag.EMPTY),
      (this.right = null != i ? i : ag.EMPTY),
      (this.size = this.left.size + 1 + this.right.size);
  }
  function ug(t, e, n, r) {
    (this.Ct = r), (this.xt = []);
    for (var i = 1; !t.Y(); )
      if (((i = e ? n(t.key, e) : 1), r && (i *= -1), i < 0))
        t = this.Ct ? t.left : t.right;
      else {
        if (0 === i) {
          this.xt.push(t);
          break;
        }
        this.xt.push(t), (t = this.Ct ? t.right : t.left);
      }
  }
  function cg(t, e) {
    (this.K = t), (this.root = e || sg.EMPTY);
  }
  function hg() {
    this.size = 0;
  }
  (sg.EMPTY = null),
    (sg.RED = !0),
    (sg.Rt = !1),
    (sg.EMPTY =
      (Object.defineProperty(hg.prototype, 'key', {
        get: function () {
          throw Zv();
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(hg.prototype, 'value', {
        get: function () {
          throw Zv();
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(hg.prototype, 'color', {
        get: function () {
          throw Zv();
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(hg.prototype, 'left', {
        get: function () {
          throw Zv();
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(hg.prototype, 'right', {
        get: function () {
          throw Zv();
        },
        enumerable: !1,
        configurable: !0
      }),
      (hg.prototype.copy = function (t, e, n, r, i) {
        return this;
      }),
      (hg.prototype.At = function (t, e, n) {
        return new sg(t, e);
      }),
      (hg.prototype.remove = function (t, e) {
        return this;
      }),
      (hg.prototype.Y = function () {
        return !0;
      }),
      (hg.prototype.gt = function (t) {
        return !1;
      }),
      (hg.prototype.Vt = function (t) {
        return !1;
      }),
      (hg.prototype.Pt = function () {
        return null;
      }),
      (hg.prototype.yt = function () {
        return null;
      }),
      (hg.prototype.Lt = function () {
        return !1;
      }),
      (hg.prototype.Kt = function () {
        return !0;
      }),
      (hg.prototype.Wt = function () {
        return 0;
      }),
      new hg()));
  var lg =
      ((vg.prototype.has = function (t) {
        return null !== this.data.get(t);
      }),
      (vg.prototype.first = function () {
        return this.data.Pt();
      }),
      (vg.prototype.last = function () {
        return this.data.yt();
      }),
      Object.defineProperty(vg.prototype, 'size', {
        get: function () {
          return this.data.size;
        },
        enumerable: !1,
        configurable: !0
      }),
      (vg.prototype.indexOf = function (t) {
        return this.data.indexOf(t);
      }),
      (vg.prototype.forEach = function (n) {
        this.data.gt(function (t, e) {
          return n(t), !1;
        });
      }),
      (vg.prototype.jt = function (t, e) {
        for (var n = this.data.vt(t[0]); n.Ft(); ) {
          var r = n.Nt();
          if (0 <= this.K(r.key, t[1])) return;
          e(r.key);
        }
      }),
      (vg.prototype.Gt = function (t, e) {
        for (var n = void 0 !== e ? this.data.vt(e) : this.data.bt(); n.Ft(); )
          if (!t(n.Nt().key)) return;
      }),
      (vg.prototype.zt = function (t) {
        t = this.data.vt(t);
        return t.Ft() ? t.Nt().key : null;
      }),
      (vg.prototype.bt = function () {
        return new fg(this.data.bt());
      }),
      (vg.prototype.vt = function (t) {
        return new fg(this.data.vt(t));
      }),
      (vg.prototype.add = function (t) {
        return this.copy(this.data.remove(t).At(t, !0));
      }),
      (vg.prototype.delete = function (t) {
        return this.has(t) ? this.copy(this.data.remove(t)) : this;
      }),
      (vg.prototype.Y = function () {
        return this.data.Y();
      }),
      (vg.prototype.Ht = function (t) {
        var e = this;
        return (
          e.size < t.size && ((e = t), (t = this)),
          t.forEach(function (t) {
            e = e.add(t);
          }),
          e
        );
      }),
      (vg.prototype.isEqual = function (t) {
        if (!(t instanceof vg)) return !1;
        if (this.size !== t.size) return !1;
        for (var e = this.data.bt(), n = t.data.bt(); e.Ft(); ) {
          var r = e.Nt().key,
            i = n.Nt().key;
          if (0 !== this.K(r, i)) return !1;
        }
        return !0;
      }),
      (vg.prototype.tt = function () {
        var e = [];
        return (
          this.forEach(function (t) {
            e.push(t);
          }),
          e
        );
      }),
      (vg.prototype.toString = function () {
        var e = [];
        return (
          this.forEach(function (t) {
            return e.push(t);
          }),
          'SortedSet(' + e.toString() + ')'
        );
      }),
      (vg.prototype.copy = function (t) {
        var e = new vg(this.K);
        return (e.data = t), e;
      }),
      vg),
    fg =
      ((dg.prototype.Nt = function () {
        return this.Jt.Nt().key;
      }),
      (dg.prototype.Ft = function () {
        return this.Jt.Ft();
      }),
      dg),
    pg = new ig(Dy.K);
  function dg(t) {
    this.Jt = t;
  }
  function vg(t) {
    (this.K = t), (this.data = new ig(this.K));
  }
  var yg = new ig(Dy.K);
  var gg = new ig(Dy.K);
  var mg = new lg(Dy.K);
  function bg() {
    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
    for (var n = mg, r = 0, i = t; r < i.length; r++)
      var o = i[r], n = n.add(o);
    return n;
  }
  var _g = new lg(ry);
  var wg =
      ((Fg.Zt = function (t) {
        return new Fg(t.K);
      }),
      (Fg.prototype.has = function (t) {
        return null != this.Yt.get(t);
      }),
      (Fg.prototype.get = function (t) {
        return this.Yt.get(t);
      }),
      (Fg.prototype.first = function () {
        return this.Xt.Pt();
      }),
      (Fg.prototype.last = function () {
        return this.Xt.yt();
      }),
      (Fg.prototype.Y = function () {
        return this.Xt.Y();
      }),
      (Fg.prototype.indexOf = function (t) {
        t = this.Yt.get(t);
        return t ? this.Xt.indexOf(t) : -1;
      }),
      Object.defineProperty(Fg.prototype, 'size', {
        get: function () {
          return this.Xt.size;
        },
        enumerable: !1,
        configurable: !0
      }),
      (Fg.prototype.forEach = function (n) {
        this.Xt.gt(function (t, e) {
          return n(t), !1;
        });
      }),
      (Fg.prototype.add = function (t) {
        var e = this.delete(t.key);
        return e.copy(e.Yt.At(t.key, t), e.Xt.At(t, null));
      }),
      (Fg.prototype.delete = function (t) {
        var e = this.get(t);
        return e ? this.copy(this.Yt.remove(t), this.Xt.remove(e)) : this;
      }),
      (Fg.prototype.isEqual = function (t) {
        if (!(t instanceof Fg)) return !1;
        if (this.size !== t.size) return !1;
        for (var e = this.Xt.bt(), n = t.Xt.bt(); e.Ft(); ) {
          var r = e.Nt().key,
            i = n.Nt().key;
          if (!r.isEqual(i)) return !1;
        }
        return !0;
      }),
      (Fg.prototype.toString = function () {
        var e = [];
        return (
          this.forEach(function (t) {
            e.push(t.toString());
          }),
          0 === e.length
            ? 'DocumentSet ()'
            : 'DocumentSet (\n  ' + e.join('  \n') + '\n)'
        );
      }),
      (Fg.prototype.copy = function (t, e) {
        var n = new Fg();
        return (n.K = this.K), (n.Yt = t), (n.Xt = e), n;
      }),
      Fg),
    Eg =
      ((Mg.prototype.track = function (t) {
        var e = t.doc.key,
          n = this.te.get(e);
        !n || (0 !== t.type && 3 === n.type)
          ? (this.te = this.te.At(e, t))
          : 3 === t.type && 1 !== n.type
          ? (this.te = this.te.At(e, { type: n.type, doc: t.doc }))
          : 2 === t.type && 2 === n.type
          ? (this.te = this.te.At(e, { type: 2, doc: t.doc }))
          : 2 === t.type && 0 === n.type
          ? (this.te = this.te.At(e, { type: 0, doc: t.doc }))
          : 1 === t.type && 0 === n.type
          ? (this.te = this.te.remove(e))
          : 1 === t.type && 2 === n.type
          ? (this.te = this.te.At(e, { type: 1, doc: n.doc }))
          : 0 === t.type && 1 === n.type
          ? (this.te = this.te.At(e, { type: 2, doc: t.doc }))
          : Zv();
      }),
      (Mg.prototype.ee = function () {
        var n = [];
        return (
          this.te.gt(function (t, e) {
            n.push(e);
          }),
          n
        );
      }),
      Mg),
    Ig =
      ((Lg.oe = function (t, e, n, r) {
        var i = [];
        return (
          e.forEach(function (t) {
            i.push({ type: 0, doc: t });
          }),
          new Lg(t, e, wg.Zt(e), i, n, r, !0, !1)
        );
      }),
      Object.defineProperty(Lg.prototype, 'hasPendingWrites', {
        get: function () {
          return !this.se.Y();
        },
        enumerable: !1,
        configurable: !0
      }),
      (Lg.prototype.isEqual = function (t) {
        if (
          !(
            this.fromCache === t.fromCache &&
            this.ie === t.ie &&
            this.se.isEqual(t.se) &&
            $b(this.query, t.query) &&
            this.docs.isEqual(t.docs) &&
            this.ne.isEqual(t.ne)
          )
        )
          return !1;
        var e = this.docChanges,
          n = t.docChanges;
        if (e.length !== n.length) return !1;
        for (var r = 0; r < e.length; r++)
          if (e[r].type !== n[r].type || !e[r].doc.isEqual(n[r].doc)) return !1;
        return !0;
      }),
      Lg),
    Tg =
      ((xg.le = function (t, e) {
        var n = new Map();
        return n.set(t, Sg._e(t, e)), new xg(ky.min(), n, _g, pg, bg());
      }),
      xg),
    Sg =
      ((Dg._e = function (t, e) {
        return new Dg(sy.h, e, bg(), bg(), bg());
      }),
      Dg),
    Cg = function (t, e, n, r) {
      (this.Te = t), (this.removedTargetIds = e), (this.key = n), (this.me = r);
    },
    Ng = function (t, e) {
      (this.targetId = t), (this.Ie = e);
    },
    Ag = function (t, e, n, r) {
      void 0 === n && (n = sy.h),
        void 0 === r && (r = null),
        (this.state = t),
        (this.targetIds = e),
        (this.resumeToken = n),
        (this.cause = r);
    },
    kg =
      (Object.defineProperty(Pg.prototype, 'fe', {
        get: function () {
          return this.ye;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Pg.prototype, 'resumeToken', {
        get: function () {
          return this.Pe;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Pg.prototype, 'Ve', {
        get: function () {
          return 0 !== this.Ae;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Pg.prototype, 'pe', {
        get: function () {
          return this.ge;
        },
        enumerable: !1,
        configurable: !0
      }),
      (Pg.prototype.be = function (t) {
        0 < t.o() && ((this.ge = !0), (this.Pe = t));
      }),
      (Pg.prototype.ve = function () {
        var n = bg(),
          r = bg(),
          i = bg();
        return (
          this.Re.forEach(function (t, e) {
            switch (e) {
              case 0:
                n = n.add(t);
                break;
              case 2:
                r = r.add(t);
                break;
              case 1:
                i = i.add(t);
                break;
              default:
                Zv();
            }
          }),
          new Sg(this.Pe, this.ye, n, r, i)
        );
      }),
      (Pg.prototype.Se = function () {
        (this.ge = !1), (this.Re = jg());
      }),
      (Pg.prototype.De = function (t, e) {
        (this.ge = !0), (this.Re = this.Re.At(t, e));
      }),
      (Pg.prototype.Ce = function (t) {
        (this.ge = !0), (this.Re = this.Re.remove(t));
      }),
      (Pg.prototype.xe = function () {
        this.Ae += 1;
      }),
      (Pg.prototype.Ne = function () {
        --this.Ae;
      }),
      (Pg.prototype.Fe = function () {
        (this.ge = !0), (this.ye = !0);
      }),
      Pg),
    Rg =
      ((Og.prototype.Be = function (t) {
        for (var e = 0, n = t.Te; e < n.length; e++) {
          var r = n[e];
          t.me instanceof Lb
            ? this.qe(r, t.me)
            : t.me instanceof Mb && this.Ue(r, t.key, t.me);
        }
        for (var i = 0, o = t.removedTargetIds; i < o.length; i++)
          (r = o[i]), this.Ue(r, t.key, t.me);
      }),
      (Og.prototype.Qe = function (n) {
        var r = this;
        this.Ke(n, function (t) {
          var e = r.We(t);
          switch (n.state) {
            case 0:
              r.je(t) && e.be(n.resumeToken);
              break;
            case 1:
              e.Ne(), e.Ve || e.Se(), e.be(n.resumeToken);
              break;
            case 2:
              e.Ne(), e.Ve || r.removeTarget(t);
              break;
            case 3:
              r.je(t) && (e.Fe(), e.be(n.resumeToken));
              break;
            case 4:
              r.je(t) && (r.Ge(t), e.be(n.resumeToken));
              break;
            default:
              Zv();
          }
        });
      }),
      (Og.prototype.Ke = function (t, n) {
        var r = this;
        0 < t.targetIds.length
          ? t.targetIds.forEach(n)
          : this.ke.forEach(function (t, e) {
              r.je(e) && n(e);
            });
      }),
      (Og.prototype.ze = function (t) {
        var e = t.targetId,
          n = t.Ie.count,
          t = this.He(e);
        t &&
          (Jy((t = t.target))
            ? 0 === n
              ? ((t = new Dy(t.path)), this.Ue(e, t, new Mb(t, ky.min())))
              : ty(1 === n)
            : this.Je(e) !== n && (this.Ge(e), (this.$e = this.$e.add(e))));
      }),
      (Og.prototype.Ye = function (r) {
        var i = this,
          o = new Map();
        this.ke.forEach(function (t, e) {
          var n = i.He(e);
          n &&
            (t.fe &&
              Jy(n.target) &&
              ((n = new Dy(n.target.path)),
              null !== i.Me.get(n) || i.Xe(e, n) || i.Ue(e, n, new Mb(n, r))),
            t.pe && (o.set(e, t.ve()), t.Se()));
        });
        var s = bg();
        this.Le.forEach(function (t, e) {
          var n = !0;
          e.Gt(function (t) {
            t = i.He(t);
            return !t || 2 === t.dt || (n = !1);
          }),
            n && (s = s.add(t));
        });
        var t = new Tg(r, o, this.$e, this.Me, s);
        return (this.Me = pg), (this.Le = Ug()), (this.$e = new lg(ry)), t;
      }),
      (Og.prototype.qe = function (t, e) {
        var n;
        this.je(t) &&
          ((n = this.Xe(t, e.key) ? 2 : 0),
          this.We(t).De(e.key, n),
          (this.Me = this.Me.At(e.key, e)),
          (this.Le = this.Le.At(e.key, this.Ze(e.key).add(t))));
      }),
      (Og.prototype.Ue = function (t, e, n) {
        var r;
        this.je(t) &&
          ((r = this.We(t)),
          this.Xe(t, e) ? r.De(e, 1) : r.Ce(e),
          (this.Le = this.Le.At(e, this.Ze(e).delete(t))),
          n && (this.Me = this.Me.At(e, n)));
      }),
      (Og.prototype.removeTarget = function (t) {
        this.ke.delete(t);
      }),
      (Og.prototype.Je = function (t) {
        var e = this.We(t).ve();
        return this.Oe.tn(t).size + e.de.size - e.Ee.size;
      }),
      (Og.prototype.xe = function (t) {
        this.We(t).xe();
      }),
      (Og.prototype.We = function (t) {
        var e = this.ke.get(t);
        return e || ((e = new kg()), this.ke.set(t, e)), e;
      }),
      (Og.prototype.Ze = function (t) {
        var e = this.Le.get(t);
        return e || ((e = new lg(ry)), (this.Le = this.Le.At(t, e))), e;
      }),
      (Og.prototype.je = function (t) {
        var e = null !== this.He(t);
        return (
          e || Yv('WatchChangeAggregator', 'Detected inactive target', t), e
        );
      }),
      (Og.prototype.He = function (t) {
        var e = this.ke.get(t);
        return e && e.Ve ? null : this.Oe.en(t);
      }),
      (Og.prototype.Ge = function (e) {
        var n = this;
        this.ke.set(e, new kg()),
          this.Oe.tn(e).forEach(function (t) {
            n.Ue(e, t, null);
          });
      }),
      (Og.prototype.Xe = function (t, e) {
        return this.Oe.tn(t).has(e);
      }),
      Og);
  function Og(t) {
    (this.Oe = t),
      (this.ke = new Map()),
      (this.Me = pg),
      (this.Le = Ug()),
      (this.$e = new lg(ry));
  }
  function Pg() {
    (this.Ae = 0),
      (this.Re = jg()),
      (this.Pe = sy.h),
      (this.ye = !1),
      (this.ge = !0);
  }
  function Dg(t, e, n, r, i) {
    (this.resumeToken = t),
      (this.fe = e),
      (this.de = n),
      (this.we = r),
      (this.Ee = i);
  }
  function xg(t, e, n, r, i) {
    (this.wt = t), (this.ce = e), (this.ae = n), (this.ue = r), (this.he = i);
  }
  function Lg(t, e, n, r, i, o, s, a) {
    (this.query = t),
      (this.docs = e),
      (this.ne = n),
      (this.docChanges = r),
      (this.se = i),
      (this.fromCache = o),
      (this.ie = s),
      (this.re = a);
  }
  function Mg() {
    this.te = new ig(Dy.K);
  }
  function Fg(n) {
    (this.K = n
      ? function (t, e) {
          return n(t, e) || Dy.K(t.key, e.key);
        }
      : function (t, e) {
          return Dy.K(t.key, e.key);
        }),
      (this.Yt = yg),
      (this.Xt = new ig(this.K));
  }
  function Ug() {
    return new ig(Dy.K);
  }
  function jg() {
    return new ig(Dy.K);
  }
  function Vg(t) {
    var e,
      n = 0;
    for (e in t) Object.prototype.hasOwnProperty.call(t, e) && n++;
    return n;
  }
  function qg(t, e) {
    for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e(n, t[n]);
  }
  function Bg(t) {
    for (var e in t) if (Object.prototype.hasOwnProperty.call(t, e)) return !1;
    return !0;
  }
  function Wg(t) {
    return (
      'server_timestamp' ===
      (null ===
        (t = (
          (null === (t = null == t ? void 0 : t.mapValue) || void 0 === t
            ? void 0
            : t.fields) || {}
        ).__type__) || void 0 === t
        ? void 0
        : t.stringValue)
    );
  }
  function Kg(t) {
    t = $g(t.mapValue.fields.__local_write_time__.timestampValue);
    return new Ay(t.seconds, t.nanos);
  }
  var Hg = new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
  function zg(t) {
    return 'nullValue' in t
      ? 0
      : 'booleanValue' in t
      ? 1
      : 'integerValue' in t || 'doubleValue' in t
      ? 2
      : 'timestampValue' in t
      ? 3
      : 'stringValue' in t
      ? 5
      : 'bytesValue' in t
      ? 6
      : 'referenceValue' in t
      ? 7
      : 'geoPointValue' in t
      ? 8
      : 'arrayValue' in t
      ? 9
      : 'mapValue' in t
      ? Wg(t)
        ? 4
        : 10
      : Zv();
  }
  function Gg(r, i) {
    var t,
      e = zg(r);
    if (e !== zg(i)) return !1;
    switch (e) {
      case 0:
        return !0;
      case 1:
        return r.booleanValue === i.booleanValue;
      case 4:
        return Kg(r).isEqual(Kg(i));
      case 3:
        return (function (t) {
          if (
            'string' == typeof r.timestampValue &&
            'string' == typeof t.timestampValue &&
            r.timestampValue.length === t.timestampValue.length
          )
            return r.timestampValue === t.timestampValue;
          var e = $g(r.timestampValue),
            t = $g(t.timestampValue);
          return e.seconds === t.seconds && e.nanos === t.nanos;
        })(i);
      case 5:
        return r.stringValue === i.stringValue;
      case 6:
        return (t = i), tm(r.bytesValue).isEqual(tm(t.bytesValue));
      case 7:
        return r.referenceValue === i.referenceValue;
      case 8:
        return (
          (e = i),
          Zg((t = r).geoPointValue.latitude) === Zg(e.geoPointValue.latitude) &&
            Zg(t.geoPointValue.longitude) === Zg(e.geoPointValue.longitude)
        );
      case 2:
        return (function (t, e) {
          if ('integerValue' in t && 'integerValue' in e)
            return Zg(t.integerValue) === Zg(e.integerValue);
          if ('doubleValue' in t && 'doubleValue' in e) {
            (t = Zg(t.doubleValue)), (e = Zg(e.doubleValue));
            return t === e ? Hy(t) === Hy(e) : isNaN(t) && isNaN(e);
          }
          return !1;
        })(r, i);
      case 9:
        return iy(r.arrayValue.values || [], i.arrayValue.values || [], Gg);
      case 10:
        return (function () {
          var t,
            e = r.mapValue.fields || {},
            n = i.mapValue.fields || {};
          if (Vg(e) !== Vg(n)) return !1;
          for (t in e)
            if (e.hasOwnProperty(t) && (void 0 === n[t] || !Gg(e[t], n[t])))
              return !1;
          return !0;
        })();
      default:
        return Zv();
    }
  }
  function Qg(t, e) {
    return (
      void 0 !==
      (t.values || []).find(function (t) {
        return Gg(t, e);
      })
    );
  }
  function Yg(t, e) {
    var n,
      r,
      i = zg(t),
      o = zg(e);
    if (i !== o) return ry(i, o);
    switch (i) {
      case 0:
        return 0;
      case 1:
        return ry(t.booleanValue, e.booleanValue);
      case 2:
        return (
          (n = e),
          (r = Zg(t.integerValue || t.doubleValue)),
          (n = Zg(n.integerValue || n.doubleValue)),
          r < n
            ? -1
            : n < r
            ? 1
            : r === n
            ? 0
            : isNaN(r)
            ? isNaN(n)
              ? 0
              : -1
            : 1
        );
      case 3:
        return Xg(t.timestampValue, e.timestampValue);
      case 4:
        return Xg(Kg(t), Kg(e));
      case 5:
        return ry(t.stringValue, e.stringValue);
      case 6:
        return (function (t, e) {
          (t = tm(t)), (e = tm(e));
          return t.u(e);
        })(t.bytesValue, e.bytesValue);
      case 7:
        return (function (t, e) {
          for (
            var n = t.split('/'), r = e.split('/'), i = 0;
            i < n.length && i < r.length;
            i++
          ) {
            var o = ry(n[i], r[i]);
            if (0 !== o) return o;
          }
          return ry(n.length, r.length);
        })(t.referenceValue, e.referenceValue);
      case 8:
        return (
          (i = t.geoPointValue),
          (r = e.geoPointValue),
          0 !== (n = ry(Zg(i.latitude), Zg(r.latitude)))
            ? n
            : ry(Zg(i.longitude), Zg(r.longitude))
        );
      case 9:
        return (function (t, e) {
          for (
            var n = t.values || [], r = e.values || [], i = 0;
            i < n.length && i < r.length;
            ++i
          ) {
            var o = Yg(n[i], r[i]);
            if (o) return o;
          }
          return ry(n.length, r.length);
        })(t.arrayValue, e.arrayValue);
      case 10:
        return (function (t, e) {
          var n = t.fields || {},
            r = Object.keys(n),
            i = e.fields || {},
            o = Object.keys(i);
          r.sort(), o.sort();
          for (var s = 0; s < r.length && s < o.length; ++s) {
            var a = ry(r[s], o[s]);
            if (0 !== a) return a;
            a = Yg(n[r[s]], i[o[s]]);
            if (0 !== a) return a;
          }
          return ry(r.length, o.length);
        })(t.mapValue, e.mapValue);
      default:
        throw Zv();
    }
  }
  function Xg(t, e) {
    if ('string' == typeof t && 'string' == typeof e && t.length === e.length)
      return ry(t, e);
    var n = $g(t),
      t = $g(e),
      e = ry(n.seconds, t.seconds);
    return 0 !== e ? e : ry(n.nanos, t.nanos);
  }
  function Jg(t) {
    return (function s(t) {
      return 'nullValue' in t
        ? 'null'
        : 'booleanValue' in t
        ? '' + t.booleanValue
        : 'integerValue' in t
        ? '' + t.integerValue
        : 'doubleValue' in t
        ? '' + t.doubleValue
        : 'timestampValue' in t
        ? (function (t) {
            var t = $g(t);
            return 'time(' + t.seconds + ',' + t.nanos + ')';
          })(t.timestampValue)
        : 'stringValue' in t
        ? t.stringValue
        : 'bytesValue' in t
        ? tm(t.bytesValue).toBase64()
        : 'referenceValue' in t
        ? ((e = t.referenceValue), Dy.ut(e).toString())
        : 'geoPointValue' in t
        ? 'geo(' + (e = t.geoPointValue).latitude + ',' + e.longitude + ')'
        : 'arrayValue' in t
        ? (function (t) {
            for (
              var e = '[', n = !0, r = 0, i = t.values || [];
              r < i.length;
              r++
            )
              n ? (n = !1) : (e += ','), (e += s(i[r]));
            return e + ']';
          })(t.arrayValue)
        : 'mapValue' in t
        ? (function (t) {
            for (
              var e = '{',
                n = !0,
                r = 0,
                i = Object.keys(t.fields || {}).sort();
              r < i.length;
              r++
            ) {
              var o = i[r];
              n ? (n = !1) : (e += ','), (e += o + ':' + s(t.fields[o]));
            }
            return e + '}';
          })(t.mapValue)
        : Zv();
      var e;
    })(t);
  }
  function $g(t) {
    if ((ty(!!t), 'string' != typeof t))
      return { seconds: Zg(t.seconds), nanos: Zg(t.nanos) };
    var e = 0,
      n = Hg.exec(t);
    ty(!!n),
      n[1] && ((n = ((n = n[1]) + '000000000').substr(0, 9)), (e = Number(n)));
    t = new Date(t);
    return { seconds: Math.floor(t.getTime() / 1e3), nanos: e };
  }
  function Zg(t) {
    return 'number' == typeof t ? t : 'string' == typeof t ? Number(t) : 0;
  }
  function tm(t) {
    return 'string' == typeof t ? sy.fromBase64String(t) : sy.fromUint8Array(t);
  }
  function em(t, e) {
    return {
      referenceValue:
        'projects/' +
        t.projectId +
        '/databases/' +
        t.database +
        '/documents/' +
        e.path.et()
    };
  }
  function nm(t) {
    return t && 'integerValue' in t;
  }
  function rm(t) {
    return !!t && 'arrayValue' in t;
  }
  function im(t) {
    return t && 'nullValue' in t;
  }
  function om(t) {
    return t && 'doubleValue' in t && isNaN(Number(t.doubleValue));
  }
  function sm(t) {
    return t && 'mapValue' in t;
  }
  var am = { asc: 'ASCENDING', desc: 'DESCENDING' },
    um = {
      '<': 'LESS_THAN',
      '<=': 'LESS_THAN_OR_EQUAL',
      '>': 'GREATER_THAN',
      '>=': 'GREATER_THAN_OR_EQUAL',
      '==': 'EQUAL',
      '!=': 'NOT_EQUAL',
      'array-contains': 'ARRAY_CONTAINS',
      in: 'IN',
      'not-in': 'NOT_IN',
      'array-contains-any': 'ARRAY_CONTAINS_ANY'
    },
    cm = function (t, e) {
      (this.T = t), (this.nn = e);
    };
  function hm(t) {
    return { integerValue: '' + t };
  }
  function lm(t, e) {
    if (t.nn) {
      if (isNaN(e)) return { doubleValue: 'NaN' };
      if (e === 1 / 0) return { doubleValue: 'Infinity' };
      if (e === -1 / 0) return { doubleValue: '-Infinity' };
    }
    return { doubleValue: Hy(e) ? '-0' : e };
  }
  function fm(t, e) {
    return zy(e) ? hm(e) : lm(t, e);
  }
  function pm(t, e) {
    return t.nn
      ? new Date(1e3 * e.seconds)
          .toISOString()
          .replace(/\.\d*/, '')
          .replace('Z', '') +
          '.' +
          ('000000000' + e.nanoseconds).slice(-9) +
          'Z'
      : { seconds: '' + e.seconds, nanos: e.nanoseconds };
  }
  function dm(t, e) {
    return t.nn ? e.toBase64() : e.toUint8Array();
  }
  function vm(t) {
    return ty(!!t), ky.$(((t = $g(t)), new Ay(t.seconds, t.nanos)));
  }
  function ym(t, e) {
    return new Ry(['projects', t.projectId, 'databases', t.database])
      .child('documents')
      .child(e)
      .et();
  }
  function gm(t) {
    t = Ry.nt(t);
    return ty(Mm(t)), t;
  }
  function mm(t, e) {
    return ym(t.T, e.path);
  }
  function bm(t, e) {
    e = gm(e);
    if (e.get(1) !== t.T.projectId)
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Tried to deserialize key from different project: ' +
          e.get(1) +
          ' vs ' +
          t.T.projectId
      );
    if (e.get(3) !== t.T.database)
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Tried to deserialize key from different database: ' +
          e.get(3) +
          ' vs ' +
          t.T.database
      );
    return new Dy(Im(e));
  }
  function _m(t, e) {
    return ym(t.T, e);
  }
  function wm(t) {
    t = gm(t);
    return 4 === t.length ? Ry.st() : Im(t);
  }
  function Em(t) {
    return new Ry(['projects', t.T.projectId, 'databases', t.T.database]).et();
  }
  function Im(t) {
    return ty(4 < t.length && 'documents' === t.get(4)), t.j(5);
  }
  function Tm(t, e, n) {
    return { name: mm(t, e), fields: n.proto.mapValue.fields };
  }
  function Sm(t, e, n) {
    var r = bm(t, e.name),
      t = vm(e.updateTime),
      e = new Cb({ mapValue: { fields: e.fields } });
    return new Lb(r, t, e, { hasCommittedMutations: !!n });
  }
  function Cm(t, e) {
    var n, r, i;
    if (e instanceof pb) n = { update: Tm(t, e.key, e.value) };
    else if (e instanceof Tb) n = { delete: mm(t, e.key) };
    else if (e instanceof db)
      n = {
        update: Tm(t, e.key, e.data),
        updateMask:
          ((i = e.sn),
          (r = []),
          i.fields.forEach(function (t) {
            return r.push(t.et());
          }),
          { fieldPaths: r })
      };
    else if (e instanceof bb)
      n = {
        transform: {
          document: mm(t, e.key),
          fieldTransforms: e.fieldTransforms.map(function (t) {
            var e = t.transform;
            if (e instanceof Vm)
              return {
                fieldPath: t.field.et(),
                setToServerValue: 'REQUEST_TIME'
              };
            if (e instanceof qm)
              return {
                fieldPath: t.field.et(),
                appendMissingElements: { values: e.elements }
              };
            if (e instanceof zm)
              return {
                fieldPath: t.field.et(),
                removeAllFromArray: { values: e.elements }
              };
            if (e instanceof Xm)
              return { fieldPath: t.field.et(), increment: e.rn };
            throw Zv();
          })
        }
      };
    else {
      if (!(e instanceof Sb)) return Zv();
      n = { verify: mm(t, e.key) };
    }
    return (
      e.cn.on ||
        (n.currentDocument =
          void 0 !== (i = e.cn).updateTime
            ? { updateTime: ((e = t), (t = i.updateTime), pm(e, t.q())) }
            : void 0 !== i.exists
            ? { exists: i.exists }
            : Zv()),
      n
    );
  }
  function Nm(e, t) {
    var n = t.currentDocument
      ? void 0 !== (o = t.currentDocument).updateTime
        ? ib.updateTime(vm(o.updateTime))
        : void 0 !== o.exists
        ? ib.exists(o.exists)
        : ib.an()
      : ib.an();
    if (t.update) {
      t.update.name;
      var r = bm(e, t.update.name),
        i = new Cb({ mapValue: { fields: t.update.fields } });
      if (t.updateMask) {
        var o =
          ((o = t.updateMask.fieldPaths || []),
          new tb(
            o.map(function (t) {
              return Py.ct(t);
            })
          ));
        return new db(r, i, o, n);
      }
      return new pb(r, i, n);
    }
    return t.delete
      ? ((r = bm(e, t.delete)), new Tb(r, n))
      : t.transform
      ? ((r = bm(e, t.transform.document)),
        (i = t.transform.fieldTransforms.map(function (t) {
          return (function (t, e) {
            var n,
              r = null;
            'setToServerValue' in e
              ? (ty('REQUEST_TIME' === e.setToServerValue), (r = new Vm()))
              : 'appendMissingElements' in e
              ? ((n = e.appendMissingElements.values || []), (r = new qm(n)))
              : 'removeAllFromArray' in e
              ? ((n = e.removeAllFromArray.values || []), (r = new zm(n)))
              : 'increment' in e
              ? (r = new Xm(t, e.increment))
              : Zv();
            e = Py.ct(e.fieldPath);
            return new eb(e, r);
          })(e, t);
        })),
        ty(!0 === n.exists),
        new bb(r, i))
      : t.verify
      ? ((r = bm(e, t.verify)), new Sb(r, n))
      : Zv();
  }
  function Am(t, e) {
    return { documents: [_m(t, e.path)] };
  }
  function km(t, e) {
    var n = { structuredQuery: {} },
      r = e.path;
    null !== e.collectionGroup
      ? ((n.parent = _m(t, r)),
        (n.structuredQuery.from = [
          { collectionId: e.collectionGroup, allDescendants: !0 }
        ]))
      : ((n.parent = _m(t, r.G())),
        (n.structuredQuery.from = [{ collectionId: r.J() }]));
    r = (function (t) {
      if (0 !== t.length) {
        t = t.map(function (t) {
          if ('==' === t.op) {
            if (om(t.value))
              return { unaryFilter: { field: Dm(t.field), op: 'IS_NAN' } };
            if (im(t.value))
              return { unaryFilter: { field: Dm(t.field), op: 'IS_NULL' } };
          } else if ('!=' === t.op) {
            if (om(t.value))
              return { unaryFilter: { field: Dm(t.field), op: 'IS_NOT_NAN' } };
            if (im(t.value))
              return { unaryFilter: { field: Dm(t.field), op: 'IS_NOT_NULL' } };
          }
          return {
            fieldFilter: {
              field: Dm(t.field),
              op: ((e = t.op), um[e]),
              value: t.value
            }
          };
          var e;
        });
        return 1 === t.length
          ? t[0]
          : { compositeFilter: { op: 'AND', filters: t } };
      }
    })(e.filters);
    r && (n.structuredQuery.where = r);
    r = (function (t) {
      if (0 !== t.length)
        return t.map(function (t) {
          return { field: Dm((t = t).field), direction: ((t = t.dir), am[t]) };
        });
    })(e.orderBy);
    r && (n.structuredQuery.orderBy = r);
    (r = e.limit), (r = t.nn || Ky(r) ? r : { value: r });
    return (
      null !== r && (n.structuredQuery.limit = r),
      e.startAt && (n.structuredQuery.startAt = Om(e.startAt)),
      e.endAt && (n.structuredQuery.endAt = Om(e.endAt)),
      n
    );
  }
  function Rm(t) {
    var e = wm(t.parent),
      n = t.structuredQuery,
      r = n.from ? n.from.length : 0,
      i = null;
    0 < r &&
      (ty(1 === r),
      (s = n.from[0]).allDescendants
        ? (i = s.collectionId)
        : (e = e.child(s.collectionId)));
    var o = [];
    n.where &&
      (o = (function e(t) {
        return t
          ? void 0 !== t.unaryFilter
            ? [Lm(t)]
            : void 0 !== t.fieldFilter
            ? [
                ((n = t),
                i_.create(
                  xm(n.fieldFilter.field),
                  (function () {
                    switch (n.fieldFilter.op) {
                      case 'EQUAL':
                        return '==';
                      case 'NOT_EQUAL':
                        return '!=';
                      case 'GREATER_THAN':
                        return '>';
                      case 'GREATER_THAN_OR_EQUAL':
                        return '>=';
                      case 'LESS_THAN':
                        return '<';
                      case 'LESS_THAN_OR_EQUAL':
                        return '<=';
                      case 'ARRAY_CONTAINS':
                        return 'array-contains';
                      case 'IN':
                        return 'in';
                      case 'NOT_IN':
                        return 'not-in';
                      case 'ARRAY_CONTAINS_ANY':
                        return 'array-contains-any';
                      case 'OPERATOR_UNSPECIFIED':
                      default:
                        return Zv();
                    }
                  })(),
                  n.fieldFilter.value
                ))
              ]
            : void 0 !== t.compositeFilter
            ? t.compositeFilter.filters
                .map(function (t) {
                  return e(t);
                })
                .reduce(function (t, e) {
                  return t.concat(e);
                })
            : Zv()
          : [];
        var n;
      })(n.where));
    t = [];
    n.orderBy &&
      (t = n.orderBy.map(function (t) {
        return new P_(
          xm((e = t).field),
          (function () {
            switch (e.direction) {
              case 'ASCENDING':
                return 'asc';
              case 'DESCENDING':
                return 'desc';
              default:
                return;
            }
          })()
        );
        var e;
      }));
    r = null;
    n.limit &&
      (r = Ky((a = 'object' == typeof (a = n.limit) ? a.value : a)) ? null : a);
    var s = null;
    n.startAt && (s = Pm(n.startAt));
    var a = null;
    return n.endAt && (a = Pm(n.endAt)), Bb(e, i, t, o, r, 'F', s, a);
  }
  function Om(t) {
    return { before: t.before, values: t.position };
  }
  function Pm(t) {
    var e = !!t.before,
      t = t.values || [];
    return new T_(t, e);
  }
  function Dm(t) {
    return { fieldPath: t.et() };
  }
  function xm(t) {
    return Py.ct(t.fieldPath);
  }
  function Lm(t) {
    switch (t.unaryFilter.op) {
      case 'IS_NAN':
        var e = xm(t.unaryFilter.field);
        return i_.create(e, '==', { doubleValue: NaN });
      case 'IS_NULL':
        var n = xm(t.unaryFilter.field);
        return i_.create(n, '==', { nullValue: 'NULL_VALUE' });
      case 'IS_NOT_NAN':
        n = xm(t.unaryFilter.field);
        return i_.create(n, '!=', { doubleValue: NaN });
      case 'IS_NOT_NULL':
        t = xm(t.unaryFilter.field);
        return i_.create(t, '!=', { nullValue: 'NULL_VALUE' });
      case 'OPERATOR_UNSPECIFIED':
      default:
        return Zv();
    }
  }
  function Mm(t) {
    return 4 <= t.length && 'projects' === t.get(0) && 'databases' === t.get(2);
  }
  Gn = function () {
    this.un = void 0;
  };
  function Fm(t, e) {
    return t instanceof Xm
      ? nm((t = e)) || (t && 'doubleValue' in t)
        ? e
        : { integerValue: 0 }
      : null;
  }
  var Um,
    jm,
    Vm = (mo(Wm, (jm = Gn)), Wm),
    qm = (mo(Bm, (Um = Gn)), Bm);
  function Bm(t) {
    var e = this;
    return ((e = Um.call(this) || this).elements = t), e;
  }
  function Wm() {
    return (null !== jm && jm.apply(this, arguments)) || this;
  }
  function Km(t, e) {
    for (var n = Zm(e), r = 0, i = t.elements; r < i.length; r++)
      !(function (e) {
        n.some(function (t) {
          return Gg(t, e);
        }) || n.push(e);
      })(i[r]);
    return { arrayValue: { values: n } };
  }
  var Hm,
    zm = (mo(Gm, (Hm = Gn)), Gm);
  function Gm(t) {
    var e = this;
    return ((e = Hm.call(this) || this).elements = t), e;
  }
  function Qm(t, e) {
    for (var n = Zm(e), r = 0, i = t.elements; r < i.length; r++)
      !(function (e) {
        n = n.filter(function (t) {
          return !Gg(t, e);
        });
      })(i[r]);
    return { arrayValue: { values: n } };
  }
  var Ym,
    Xm = (mo(Jm, (Ym = Gn)), Jm);
  function Jm(t, e) {
    var n = this;
    return ((n = Ym.call(this) || this).serializer = t), (n.rn = e), n;
  }
  function $m(t) {
    return Zg(t.integerValue || t.doubleValue);
  }
  function Zm(t) {
    return rm(t) && t.arrayValue.values ? t.arrayValue.values.slice() : [];
  }
  var tb =
      ((nb.prototype.hn = function (t) {
        for (var e = 0, n = this.fields; e < n.length; e++)
          if (n[e].X(t)) return !0;
        return !1;
      }),
      (nb.prototype.isEqual = function (t) {
        return iy(this.fields, t.fields, function (t, e) {
          return t.isEqual(e);
        });
      }),
      nb),
    eb = function (t, e) {
      (this.field = t), (this.transform = e);
    };
  function nb(t) {
    (this.fields = t).sort(Py.K);
  }
  function rb(t, e) {
    (this.version = t), (this.transformResults = e);
  }
  var ib =
    ((ob.an = function () {
      return new ob();
    }),
    (ob.exists = function (t) {
      return new ob(void 0, t);
    }),
    (ob.updateTime = function (t) {
      return new ob(t);
    }),
    Object.defineProperty(ob.prototype, 'on', {
      get: function () {
        return void 0 === this.updateTime && void 0 === this.exists;
      },
      enumerable: !1,
      configurable: !0
    }),
    (ob.prototype.isEqual = function (t) {
      return (
        this.exists === t.exists &&
        (this.updateTime
          ? !!t.updateTime && this.updateTime.isEqual(t.updateTime)
          : !t.updateTime)
      );
    }),
    ob);
  function ob(t, e) {
    (this.updateTime = t), (this.exists = e);
  }
  function sb(t, e) {
    return void 0 !== t.updateTime
      ? e instanceof Lb && e.version.isEqual(t.updateTime)
      : void 0 === t.exists || t.exists === e instanceof Lb;
  }
  dt = function () {};
  function ab(t, e, n) {
    return t instanceof pb
      ? new Lb(t.key, n.version, t.value, { hasCommittedMutations: !0 })
      : t instanceof db
      ? (function (t, e, n) {
          if (!sb(t.cn, e)) return new Fb(t.key, n.version);
          e = gb(t, e);
          return new Lb(t.key, n.version, e, { hasCommittedMutations: !0 });
        })(t, e, n)
      : t instanceof bb
      ? (function (t, e, n) {
          if ((ty(null != n.transformResults), !sb(t.cn, e)))
            return new Fb(t.key, n.version);
          var r = e,
            e = (function (t, e, n) {
              var r = [];
              ty(t.length === n.length);
              for (var i = 0; i < n.length; i++) {
                var o = t[i],
                  s = o.transform,
                  a = null;
                e instanceof Lb && (a = e.field(o.field)),
                  r.push(
                    ((o = s),
                    (s = a),
                    (a = n[i]),
                    o instanceof qm ? Km(o, s) : o instanceof zm ? Qm(o, s) : a)
                  );
              }
              return r;
            })(t.fieldTransforms, e, n.transformResults),
            n = n.version,
            e = wb(t, r.data(), e);
          return new Lb(t.key, n, e, { hasCommittedMutations: !0 });
        })(t, e, n)
      : new Mb(t.key, n.version, { hasCommittedMutations: !0 });
  }
  function ub(t, e, n, r) {
    return t instanceof pb
      ? (function (t, e) {
          if (!sb(t.cn, e)) return e;
          e = hb(e);
          return new Lb(t.key, e, t.value, { ln: !0 });
        })(t, e)
      : t instanceof db
      ? (function (t, e) {
          if (!sb(t.cn, e)) return e;
          var n = hb(e),
            e = gb(t, e);
          return new Lb(t.key, n, e, { ln: !0 });
        })(t, e)
      : t instanceof bb
      ? (function (t, e, n, r) {
          if (!sb(t.cn, e)) return e;
          var i = e,
            r = (function (t, e, n, r) {
              for (var i, o = [], s = 0, a = t; s < a.length; s++) {
                var u = a[s],
                  c = u.transform,
                  h = null;
                n instanceof Lb && (h = n.field(u.field)),
                  null === h && r instanceof Lb && (h = r.field(u.field)),
                  o.push(
                    ((i = h),
                    (u = e),
                    (h = void 0),
                    (c = c) instanceof Vm
                      ? ((h = {
                          fields: {
                            __type__: { stringValue: 'server_timestamp' },
                            __local_write_time__: {
                              timestampValue: {
                                seconds: u.seconds,
                                nanos: u.nanoseconds
                              }
                            }
                          }
                        }),
                        i && (h.fields.__previous_value__ = i),
                        { mapValue: h })
                      : c instanceof qm
                      ? Km(c, i)
                      : c instanceof zm
                      ? Qm(c, i)
                      : ((c = Fm((h = c), i)),
                        (i = $m(c) + $m(h.rn)),
                        nm(c) && nm(h.rn) ? hm(i) : lm(h.serializer, i)))
                  );
              }
              return o;
            })(t.fieldTransforms, n, e, r),
            r = wb(t, i.data(), r);
          return new Lb(t.key, i.version, r, { ln: !0 });
        })(t, e, r, n)
      : ((e = e), sb((t = t).cn, e) ? new Mb(t.key, ky.min()) : e);
  }
  function cb(t, e) {
    return (
      t.type === e.type &&
      !!t.key.isEqual(e.key) &&
      !!t.cn.isEqual(e.cn) &&
      (0 === t.type
        ? t.value.isEqual(e.value)
        : 1 === t.type
        ? t.data.isEqual(e.data) && t.sn.isEqual(e.sn)
        : 2 !== t.type ||
          iy(t.fieldTransforms, t.fieldTransforms, function (t, e) {
            return (
              (e = e),
              (t = t).field.isEqual(e.field) &&
                ((t = t.transform),
                (e = e.transform),
                (t instanceof qm && e instanceof qm) ||
                (t instanceof zm && e instanceof zm)
                  ? iy(t.elements, e.elements, Gg)
                  : t instanceof Xm && e instanceof Xm
                  ? Gg(t.rn, e.rn)
                  : t instanceof Vm && e instanceof Vm)
            );
          }))
    );
  }
  function hb(t) {
    return t instanceof Lb ? t.version : ky.min();
  }
  var lb,
    fb,
    pb = (mo(yb, (fb = dt)), yb),
    db = (mo(vb, (lb = dt)), vb);
  function vb(t, e, n, r) {
    var i = this;
    return (
      ((i = lb.call(this) || this).key = t),
      (i.data = e),
      (i.sn = n),
      (i.cn = r),
      (i.type = 1),
      i
    );
  }
  function yb(t, e, n) {
    var r = this;
    return (
      ((r = fb.call(this) || this).key = t),
      (r.value = e),
      (r.cn = n),
      (r.type = 0),
      r
    );
  }
  function gb(t, e) {
    return (
      (n = t),
      (e = e instanceof Lb ? e.data() : Cb.empty()),
      (r = new Nb(e)),
      n.sn.fields.forEach(function (t) {
        var e;
        t.Y() || (null !== (e = n.data.field(t)) ? r.set(t, e) : r.delete(t));
      }),
      r._n()
    );
    var n, r;
  }
  var mb,
    bb = (mo(_b, (mb = dt)), _b);
  function _b(t, e) {
    var n = this;
    return (
      ((n = mb.call(this) || this).key = t),
      (n.fieldTransforms = e),
      (n.type = 2),
      (n.cn = ib.exists(!0)),
      n
    );
  }
  function wb(t, e, n) {
    for (var r = new Nb(e), i = 0; i < t.fieldTransforms.length; i++) {
      var o = t.fieldTransforms[i];
      r.set(o.field, n[i]);
    }
    return r._n();
  }
  var Eb,
    Ib,
    Tb = (mo(Ob, (Ib = dt)), Ob),
    Sb = (mo(Rb, (Eb = dt)), Rb),
    Cb =
      ((kb.empty = function () {
        return new kb({ mapValue: {} });
      }),
      (kb.prototype.field = function (t) {
        if (t.Y()) return this.proto;
        for (var e = this.proto, n = 0; n < t.length - 1; ++n) {
          if (!e.mapValue.fields) return null;
          if (!sm((e = e.mapValue.fields[t.get(n)]))) return null;
        }
        return (e = (e.mapValue.fields || {})[t.J()]) || null;
      }),
      (kb.prototype.isEqual = function (t) {
        return Gg(this.proto, t.proto);
      }),
      kb),
    Nb =
      ((Ab.prototype.set = function (t, e) {
        return this.wn(t, e), this;
      }),
      (Ab.prototype.delete = function (t) {
        return this.wn(t, null), this;
      }),
      (Ab.prototype.wn = function (t, e) {
        for (var n = this.dn, r = 0; r < t.length - 1; ++r)
          var i = t.get(r),
            o = n.get(i),
            n =
              (o instanceof Map ||
                ((o =
                  o && 10 === zg(o)
                    ? new Map(Object.entries(o.mapValue.fields || {}))
                    : new Map()),
                n.set(i, o)),
              o);
        n.set(t.J(), e);
      }),
      (Ab.prototype._n = function () {
        var t = this.En(Py.st(), this.dn);
        return null != t ? new Cb(t) : this.fn;
      }),
      (Ab.prototype.En = function (r, t) {
        var i = this,
          o = !1,
          e = this.fn.field(r),
          s = sm(e) ? Object.assign({}, e.mapValue.fields) : {};
        return (
          t.forEach(function (t, e) {
            var n;
            t instanceof Map
              ? null != (n = i.En(r.child(e), t)) && ((s[e] = n), (o = !0))
              : null !== t
              ? ((s[e] = t), (o = !0))
              : s.hasOwnProperty(e) && (delete s[e], (o = !0));
          }),
          o ? { mapValue: { fields: s } } : null
        );
      }),
      Ab);
  function Ab(t) {
    void 0 === t && (t = Cb.empty()), (this.fn = t), (this.dn = new Map());
  }
  function kb(t) {
    this.proto = t;
  }
  function Rb(t, e) {
    var n = this;
    return ((n = Eb.call(this) || this).key = t), (n.cn = e), (n.type = 4), n;
  }
  function Ob(t, e) {
    var n = this;
    return ((n = Ib.call(this) || this).key = t), (n.cn = e), (n.type = 3), n;
  }
  var Pb,
    Db,
    xb,
    vt = function (t, e) {
      (this.key = t), (this.version = e);
    },
    Lb =
      (mo(qb, (xb = vt)),
      (qb.prototype.field = function (t) {
        return this.Tn.field(t);
      }),
      (qb.prototype.data = function () {
        return this.Tn;
      }),
      (qb.prototype.mn = function () {
        return this.Tn.proto;
      }),
      (qb.prototype.isEqual = function (t) {
        return (
          t instanceof qb &&
          this.key.isEqual(t.key) &&
          this.version.isEqual(t.version) &&
          this.ln === t.ln &&
          this.hasCommittedMutations === t.hasCommittedMutations &&
          this.Tn.isEqual(t.Tn)
        );
      }),
      (qb.prototype.toString = function () {
        return (
          'Document(' +
          this.key +
          ', ' +
          this.version +
          ', ' +
          this.Tn.toString() +
          ', {hasLocalMutations: ' +
          this.ln +
          '}), {hasCommittedMutations: ' +
          this.hasCommittedMutations +
          '})'
        );
      }),
      Object.defineProperty(qb.prototype, 'hasPendingWrites', {
        get: function () {
          return this.ln || this.hasCommittedMutations;
        },
        enumerable: !1,
        configurable: !0
      }),
      qb),
    Mb =
      (mo(Vb, (Db = vt)),
      (Vb.prototype.toString = function () {
        return 'NoDocument(' + this.key + ', ' + this.version + ')';
      }),
      Object.defineProperty(Vb.prototype, 'hasPendingWrites', {
        get: function () {
          return this.hasCommittedMutations;
        },
        enumerable: !1,
        configurable: !0
      }),
      (Vb.prototype.isEqual = function (t) {
        return (
          t instanceof Vb &&
          t.hasCommittedMutations === this.hasCommittedMutations &&
          t.version.isEqual(this.version) &&
          t.key.isEqual(this.key)
        );
      }),
      Vb),
    Fb =
      (mo(jb, (Pb = vt)),
      (jb.prototype.toString = function () {
        return 'UnknownDocument(' + this.key + ', ' + this.version + ')';
      }),
      Object.defineProperty(jb.prototype, 'hasPendingWrites', {
        get: function () {
          return !0;
        },
        enumerable: !1,
        configurable: !0
      }),
      (jb.prototype.isEqual = function (t) {
        return (
          t instanceof jb &&
          t.version.isEqual(this.version) &&
          t.key.isEqual(this.key)
        );
      }),
      jb),
    Ub = function (t, e, n, r, i, o, s, a) {
      void 0 === e && (e = null),
        void 0 === n && (n = []),
        void 0 === r && (r = []),
        void 0 === i && (i = null),
        void 0 === o && (o = 'F'),
        void 0 === s && (s = null),
        void 0 === a && (a = null),
        (this.path = t),
        (this.collectionGroup = e),
        (this.In = n),
        (this.filters = r),
        (this.limit = i),
        (this.limitType = o),
        (this.startAt = s),
        (this.endAt = a),
        (this.An = null),
        (this.Rn = null),
        this.startAt,
        this.endAt;
    };
  function jb() {
    return (null !== Pb && Pb.apply(this, arguments)) || this;
  }
  function Vb(t, e, n) {
    var r = this;
    return (
      ((r = Db.call(this, t, e) || this).hasCommittedMutations = !(
        !n || !n.hasCommittedMutations
      )),
      r
    );
  }
  function qb(t, e, n, r) {
    var i = this;
    return (
      ((i = xb.call(this, t, e) || this).Tn = n),
      (i.ln = !!r.ln),
      (i.hasCommittedMutations = !!r.hasCommittedMutations),
      i
    );
  }
  function Bb(t, e, n, r, i, o, s, a) {
    return new Ub(t, e, n, r, i, o, s, a);
  }
  function Wb(t) {
    return new Ub(t);
  }
  function Kb(t) {
    return !Ky(t.limit) && 'F' === t.limitType;
  }
  function Hb(t) {
    return !Ky(t.limit) && 'L' === t.limitType;
  }
  function zb(t) {
    return 0 < t.In.length ? t.In[0].field : null;
  }
  function Gb(t) {
    for (var e = 0, n = t.filters; e < n.length; e++) {
      var r = n[e];
      if (r.Pn()) return r.field;
    }
    return null;
  }
  function Qb(t) {
    return null !== t.collectionGroup;
  }
  function Yb(t) {
    var e = t;
    if (null === e.An) {
      e.An = [];
      var n = Gb(e),
        t = zb(e);
      if (null !== n && null === t)
        n.rt() || e.An.push(new P_(n)), e.An.push(new P_(Py.ot(), 'asc'));
      else {
        for (var r = !1, i = 0, o = e.In; i < o.length; i++) {
          var s = o[i];
          e.An.push(s), s.field.rt() && (r = !0);
        }
        r ||
          ((n = 0 < e.In.length ? e.In[e.In.length - 1].dir : 'asc'),
          e.An.push(new P_(Py.ot(), n)));
      }
    }
    return e.An;
  }
  function Xb(t) {
    var e = t;
    if (!e.Rn)
      if ('F' === e.limitType)
        e.Rn = Qy(
          e.path,
          e.collectionGroup,
          Yb(e),
          e.filters,
          e.limit,
          e.startAt,
          e.endAt
        );
      else {
        for (var n = [], r = 0, i = Yb(e); r < i.length; r++) {
          var o = i[r],
            s = 'desc' === o.dir ? 'asc' : 'desc';
          n.push(new P_(o.field, s));
        }
        var a = e.endAt ? new T_(e.endAt.position, !e.endAt.before) : null,
          t = e.startAt ? new T_(e.startAt.position, !e.startAt.before) : null;
        e.Rn = Qy(e.path, e.collectionGroup, n, e.filters, e.limit, a, t);
      }
    return e.Rn;
  }
  function Jb(t, e, n) {
    return new Ub(
      t.path,
      t.collectionGroup,
      t.In.slice(),
      t.filters.slice(),
      e,
      n,
      t.startAt,
      t.endAt
    );
  }
  function $b(t, e) {
    return Xy(Xb(t), Xb(e)) && t.limitType === e.limitType;
  }
  function Zb(t) {
    return Yy(Xb(t)) + '|lt:' + t.limitType;
  }
  function t_(t) {
    return (
      'Query(target=' +
      ((e = Xb(t)),
      (n = e.path.et()),
      null !== e.collectionGroup &&
        (n += ' collectionGroup=' + e.collectionGroup),
      0 < e.filters.length &&
        (n +=
          ', filters: [' +
          e.filters
            .map(function (t) {
              return (t = t).field.et() + ' ' + t.op + ' ' + Jg(t.value);
            })
            .join(', ') +
          ']'),
      Ky(e.limit) || (n += ', limit: ' + e.limit),
      0 < e.orderBy.length &&
        (n +=
          ', orderBy: [' +
          e.orderBy
            .map(function (t) {
              return (t = t).field.et() + ' (' + t.dir + ')';
            })
            .join(', ') +
          ']'),
      e.startAt && (n += ', startAt: ' + k_(e.startAt)),
      e.endAt && (n += ', endAt: ' + k_(e.endAt)),
      'Target(' + n + ')') +
      '; limitType=' +
      t.limitType +
      ')'
    );
    var e, n;
  }
  function e_(i, t) {
    return (
      (e = i),
      (n = t.key.path),
      (null !== e.collectionGroup
        ? t.key.ht(e.collectionGroup) && e.path.X(n)
        : Dy.lt(e.path)
        ? e.path.isEqual(n)
        : e.path.Z(n)) &&
        (function (t) {
          for (var e = 0, n = i.In; e < n.length; e++) {
            var r = n[e];
            if (!r.field.rt() && null === t.field(r.field)) return;
          }
          return 1;
        })(t) &&
        (function (t) {
          for (var e = 0, n = i.filters; e < n.length; e++)
            if (!n[e].matches(t)) return;
          return 1;
        })(t) &&
        ((n = t),
        (!(t = i).startAt || R_(t.startAt, Yb(t), n)) &&
          (!t.endAt || !R_(t.endAt, Yb(t), n)))
    );
    var e, n;
  }
  function n_(a) {
    return function (t, e) {
      for (var n = !1, r = 0, i = Yb(a); r < i.length; r++) {
        var o = i[r],
          s = (function (t, r, e) {
            e = t.field.rt()
              ? Dy.K(r.key, e.key)
              : (function (t, e) {
                  var n = r.field(t),
                    t = e.field(t);
                  return null !== n && null !== t ? Yg(n, t) : Zv();
                })(t.field, e);
            switch (t.dir) {
              case 'asc':
                return e;
              case 'desc':
                return -1 * e;
              default:
                return Zv();
            }
          })(o, t, e);
        if (0 !== s) return s;
        n = n || o.field.rt();
      }
      return 0;
    };
  }
  var r_,
    i_ =
      (mo(o_, (r_ = function () {})),
      (o_.create = function (t, e, n) {
        return t.rt()
          ? 'in' === e || 'not-in' === e
            ? this.yn(t, e, n)
            : new c_(t, e, n)
          : 'array-contains' === e
          ? new __(t, n)
          : 'in' === e
          ? new w_(t, n)
          : 'not-in' === e
          ? new E_(t, n)
          : 'array-contains-any' === e
          ? new I_(t, n)
          : new o_(t, e, n);
      }),
      (o_.yn = function (t, e, n) {
        return new ('in' === e ? h_ : l_)(t, n);
      }),
      (o_.prototype.matches = function (t) {
        t = t.field(this.field);
        return '!=' === this.op
          ? null !== t && this.gn(Yg(t, this.value))
          : null !== t &&
              zg(this.value) === zg(t) &&
              this.gn(Yg(t, this.value));
      }),
      (o_.prototype.gn = function (t) {
        switch (this.op) {
          case '<':
            return t < 0;
          case '<=':
            return t <= 0;
          case '==':
            return 0 === t;
          case '!=':
            return 0 !== t;
          case '>':
            return 0 < t;
          case '>=':
            return 0 <= t;
          default:
            return Zv();
        }
      }),
      (o_.prototype.Pn = function () {
        return 0 <= ['<', '<=', '>', '>=', '!=', 'not-in'].indexOf(this.op);
      }),
      o_);
  function o_(t, e, n) {
    var r = this;
    return (
      ((r = r_.call(this) || this).field = t), (r.op = e), (r.value = n), r
    );
  }
  var s_,
    a_,
    u_,
    c_ =
      (mo(d_, (u_ = i_)),
      (d_.prototype.matches = function (t) {
        t = Dy.K(t.key, this.key);
        return this.gn(t);
      }),
      d_),
    h_ =
      (mo(p_, (a_ = i_)),
      (p_.prototype.matches = function (e) {
        return this.keys.some(function (t) {
          return t.isEqual(e.key);
        });
      }),
      p_),
    l_ =
      (mo(f_, (s_ = i_)),
      (f_.prototype.matches = function (e) {
        return !this.keys.some(function (t) {
          return t.isEqual(e.key);
        });
      }),
      f_);
  function f_(t, e) {
    var n = this;
    return ((n = s_.call(this, t, 'not-in', e) || this).keys = v_(0, e)), n;
  }
  function p_(t, e) {
    var n = this;
    return ((n = a_.call(this, t, 'in', e) || this).keys = v_(0, e)), n;
  }
  function d_(t, e, n) {
    var r = this;
    return (
      ((r = u_.call(this, t, e, n) || this).key = Dy.ut(n.referenceValue)), r
    );
  }
  function v_(t, e) {
    return (
      (null === (e = e.arrayValue) || void 0 === e ? void 0 : e.values) || []
    ).map(function (t) {
      return Dy.ut(t.referenceValue);
    });
  }
  var y_,
    g_,
    m_,
    b_,
    __ =
      (mo(A_, (b_ = i_)),
      (A_.prototype.matches = function (t) {
        t = t.field(this.field);
        return rm(t) && Qg(t.arrayValue, this.value);
      }),
      A_),
    w_ =
      (mo(N_, (m_ = i_)),
      (N_.prototype.matches = function (t) {
        t = t.field(this.field);
        return null !== t && Qg(this.value.arrayValue, t);
      }),
      N_),
    E_ =
      (mo(C_, (g_ = i_)),
      (C_.prototype.matches = function (t) {
        if (Qg(this.value.arrayValue, { nullValue: 'NULL_VALUE' })) return !1;
        t = t.field(this.field);
        return null !== t && !Qg(this.value.arrayValue, t);
      }),
      C_),
    I_ =
      (mo(S_, (y_ = i_)),
      (S_.prototype.matches = function (t) {
        var e = this,
          t = t.field(this.field);
        return (
          !(!rm(t) || !t.arrayValue.values) &&
          t.arrayValue.values.some(function (t) {
            return Qg(e.value.arrayValue, t);
          })
        );
      }),
      S_),
    T_ = function (t, e) {
      (this.position = t), (this.before = e);
    };
  function S_(t, e) {
    return y_.call(this, t, 'array-contains-any', e) || this;
  }
  function C_(t, e) {
    return g_.call(this, t, 'not-in', e) || this;
  }
  function N_(t, e) {
    return m_.call(this, t, 'in', e) || this;
  }
  function A_(t, e) {
    return b_.call(this, t, 'array-contains', e) || this;
  }
  function k_(t) {
    return (t.before ? 'b' : 'a') + ':' + t.position.map(Jg).join(',');
  }
  function R_(t, e, n) {
    for (var r = 0, i = 0; i < t.position.length; i++) {
      var o = e[i],
        s = t.position[i],
        r = o.field.rt()
          ? Dy.K(Dy.ut(s.referenceValue), n.key)
          : Yg(s, n.field(o.field));
      if (('desc' === o.dir && (r *= -1), 0 !== r)) break;
    }
    return t.before ? r <= 0 : r < 0;
  }
  function O_(t, e) {
    if (null === t) return null === e;
    if (null === e) return !1;
    if (t.before !== e.before || t.position.length !== e.position.length)
      return !1;
    for (var n = 0; n < t.position.length; n++)
      if (!Gg(t.position[n], e.position[n])) return !1;
    return !0;
  }
  var P_ = function (t, e) {
    void 0 === e && (e = 'asc'), (this.field = t), (this.dir = e);
  };
  var D_ =
      ((Y_.prototype.pn = function (t, e, n) {
        for (var r = n.bn, i = 0; i < this.mutations.length; i++) {
          var o = this.mutations[i];
          o.key.isEqual(t) && (e = ab(o, e, r[i]));
        }
        return e;
      }),
      (Y_.prototype.vn = function (t, e) {
        for (var n = 0, r = this.baseMutations; n < r.length; n++) {
          var i = r[n];
          i.key.isEqual(t) && (e = ub(i, e, e, this.Vn));
        }
        for (var o = e, s = 0, a = this.mutations; s < a.length; s++) {
          var u = a[s];
          u.key.isEqual(t) && (e = ub(u, e, o, this.Vn));
        }
        return e;
      }),
      (Y_.prototype.Sn = function (n) {
        var r = this,
          i = n;
        return (
          this.mutations.forEach(function (t) {
            var e = r.vn(t.key, n.get(t.key));
            e && (i = i.At(t.key, e));
          }),
          i
        );
      }),
      (Y_.prototype.keys = function () {
        return this.mutations.reduce(function (t, e) {
          return t.add(e.key);
        }, bg());
      }),
      (Y_.prototype.isEqual = function (t) {
        return (
          this.batchId === t.batchId &&
          iy(this.mutations, t.mutations, cb) &&
          iy(this.baseMutations, t.baseMutations, cb)
        );
      }),
      Y_),
    x_ =
      ((Q_.from = function (t, e, n) {
        ty(t.mutations.length === n.length);
        for (var r = gg, i = t.mutations, o = 0; o < i.length; o++)
          r = r.At(i[o].key, n[o].version);
        return new Q_(t, e, n, r);
      }),
      Q_),
    L_ =
      ((G_.prototype.get = function (t) {
        var e = this.xn(t),
          e = this.Fn[e];
        if (void 0 !== e)
          for (var n = 0, r = e; n < r.length; n++) {
            var i = r[n],
              o = i[0],
              i = i[1];
            if (this.Nn(o, t)) return i;
          }
      }),
      (G_.prototype.has = function (t) {
        return void 0 !== this.get(t);
      }),
      (G_.prototype.set = function (t, e) {
        var n = this.xn(t),
          r = this.Fn[n];
        if (void 0 !== r) {
          for (var i = 0; i < r.length; i++)
            if (this.Nn(r[i][0], t)) return void (r[i] = [t, e]);
          r.push([t, e]);
        } else this.Fn[n] = [[t, e]];
      }),
      (G_.prototype.delete = function (t) {
        var e = this.xn(t),
          n = this.Fn[e];
        if (void 0 === n) return !1;
        for (var r = 0; r < n.length; r++)
          if (this.Nn(n[r][0], t))
            return 1 === n.length ? delete this.Fn[e] : n.splice(r, 1), !0;
        return !1;
      }),
      (G_.prototype.forEach = function (s) {
        qg(this.Fn, function (t, e) {
          for (var n = 0, r = e; n < r.length; n++) {
            var i = r[n],
              o = i[0],
              i = i[1];
            s(o, i);
          }
        });
      }),
      (G_.prototype.Y = function () {
        return Bg(this.Fn);
      }),
      G_),
    M_ =
      ((z_.prototype.catch = function (t) {
        return this.next(void 0, t);
      }),
      (z_.prototype.next = function (r, i) {
        var o = this;
        return (
          this.Ln && Zv(),
          (this.Ln = !0),
          this.Mn
            ? this.error
              ? this.$n(i, this.error)
              : this.Bn(r, this.result)
            : new z_(function (e, n) {
                (o.On = function (t) {
                  o.Bn(r, t).next(e, n);
                }),
                  (o.kn = function (t) {
                    o.$n(i, t).next(e, n);
                  });
              })
        );
      }),
      (z_.prototype.qn = function () {
        var n = this;
        return new Promise(function (t, e) {
          n.next(t, e);
        });
      }),
      (z_.prototype.Un = function (t) {
        try {
          var e = t();
          return e instanceof z_ ? e : z_.resolve(e);
        } catch (t) {
          return z_.reject(t);
        }
      }),
      (z_.prototype.Bn = function (t, e) {
        return t
          ? this.Un(function () {
              return t(e);
            })
          : z_.resolve(e);
      }),
      (z_.prototype.$n = function (t, e) {
        return t
          ? this.Un(function () {
              return t(e);
            })
          : z_.reject(e);
      }),
      (z_.resolve = function (n) {
        return new z_(function (t, e) {
          t(n);
        });
      }),
      (z_.reject = function (n) {
        return new z_(function (t, e) {
          e(n);
        });
      }),
      (z_.Qn = function (t) {
        return new z_(function (e, n) {
          var r = 0,
            i = 0,
            o = !1;
          t.forEach(function (t) {
            ++r,
              t.next(
                function () {
                  ++i, o && i === r && e();
                },
                function (t) {
                  return n(t);
                }
              );
          }),
            (o = !0),
            i === r && e();
        });
      }),
      (z_.Kn = function (t) {
        for (var n = z_.resolve(!1), e = 0, r = t; e < r.length; e++)
          !(function (e) {
            n = n.next(function (t) {
              return t ? z_.resolve(t) : e();
            });
          })(r[e]);
        return n;
      }),
      (z_.forEach = function (t, n) {
        var r = this,
          i = [];
        return (
          t.forEach(function (t, e) {
            i.push(n.call(r, t, e));
          }),
          this.Qn(i)
        );
      }),
      z_),
    Gn =
      ((H_.prototype.Gn = function (t) {
        t = this.Wn.get(t);
        return t ? t.readTime : ky.min();
      }),
      (H_.prototype.zn = function (t, e) {
        this.Hn(), this.Wn.set(t.key, { Jn: t, readTime: e });
      }),
      (H_.prototype.Yn = function (t, e) {
        void 0 === e && (e = null),
          this.Hn(),
          this.Wn.set(t, { Jn: null, readTime: e });
      }),
      (H_.prototype.Xn = function (t, e) {
        this.Hn();
        var n = this.Wn.get(e);
        return void 0 !== n ? M_.resolve(n.Jn) : this.Zn(t, e);
      }),
      (H_.prototype.getEntries = function (t, e) {
        return this.ts(t, e);
      }),
      (H_.prototype.apply = function (t) {
        return this.Hn(), (this.jn = !0), this.es(t);
      }),
      (H_.prototype.Hn = function () {}),
      H_),
    F_ =
      'The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.',
    dt =
      ((K_.prototype.ss = function (t) {
        this.ns.push(t);
      }),
      (K_.prototype.rs = function () {
        this.ns.forEach(function (t) {
          return t();
        });
      }),
      K_),
    U_ =
      ((W_.prototype.hs = function (e, n) {
        var r = this;
        return this.cs.ls(e, n).next(function (t) {
          return r._s(e, n, t);
        });
      }),
      (W_.prototype._s = function (t, r, i) {
        return this.os.Xn(t, r).next(function (t) {
          for (var e = 0, n = i; e < n.length; e++) t = n[e].vn(r, t);
          return t;
        });
      }),
      (W_.prototype.fs = function (t, e, i) {
        var o = pg;
        return (
          e.forEach(function (t, e) {
            for (var n = 0, r = i; n < r.length; n++) e = r[n].vn(t, e);
            o = o.At(t, e);
          }),
          o
        );
      }),
      (W_.prototype.ds = function (e, t) {
        var n = this;
        return this.os.getEntries(e, t).next(function (t) {
          return n.ws(e, t);
        });
      }),
      (W_.prototype.ws = function (e, r) {
        var i = this;
        return this.cs.Es(e, r).next(function (t) {
          var t = i.fs(e, r, t),
            n = pg;
          return (
            t.forEach(function (t, e) {
              (e = e || new Mb(t, ky.min())), (n = n.At(t, e));
            }),
            n
          );
        });
      }),
      (W_.prototype.Ts = function (t, e, n) {
        return (
          (r = e),
          Dy.lt(r.path) && null === r.collectionGroup && 0 === r.filters.length
            ? this.Is(t, e.path)
            : Qb(e)
            ? this.As(t, e, n)
            : this.Rs(t, e, n)
        );
        var r;
      }),
      (W_.prototype.Is = function (t, e) {
        return this.hs(t, new Dy(e)).next(function (t) {
          var e = yg;
          return t instanceof Lb && (e = e.At(t.key, t)), e;
        });
      }),
      (W_.prototype.As = function (n, r, i) {
        var o = this,
          s = r.collectionGroup,
          a = yg;
        return this.us.Ps(n, s).next(function (t) {
          return M_.forEach(t, function (t) {
            var e,
              e =
                ((e = r),
                (t = t.child(s)),
                new Ub(
                  t,
                  null,
                  e.In.slice(),
                  e.filters.slice(),
                  e.limit,
                  e.limitType,
                  e.startAt,
                  e.endAt
                ));
            return o.Rs(n, e, i).next(function (t) {
              t.forEach(function (t, e) {
                a = a.At(t, e);
              });
            });
          }).next(function () {
            return a;
          });
        });
      }),
      (W_.prototype.Rs = function (e, n, t) {
        var c,
          h,
          r = this;
        return this.os
          .Ts(e, n, t)
          .next(function (t) {
            return (c = t), r.cs.ys(e, n);
          })
          .next(function (t) {
            return (
              (h = t),
              r.gs(e, h, c).next(function (t) {
                c = t;
                for (var e = 0, n = h; e < n.length; e++)
                  for (
                    var r = n[e], i = 0, o = r.mutations;
                    i < o.length;
                    i++
                  ) {
                    var s = o[i],
                      a = s.key,
                      u = c.get(a),
                      u = ub(s, u, u, r.Vn);
                    c = u instanceof Lb ? c.At(a, u) : c.remove(a);
                  }
              })
            );
          })
          .next(function () {
            return (
              c.forEach(function (t, e) {
                e_(n, e) || (c = c.remove(t));
              }),
              c
            );
          });
      }),
      (W_.prototype.gs = function (t, e, n) {
        for (var r = bg(), i = 0, o = e; i < o.length; i++)
          for (var s = 0, a = o[i].mutations; s < a.length; s++) {
            var u = a[s];
            u instanceof db && null === n.get(u.key) && (r = r.add(u.key));
          }
        var c = n;
        return this.os.getEntries(t, r).next(function (t) {
          return (
            t.forEach(function (t, e) {
              null !== e && e instanceof Lb && (c = c.At(t, e));
            }),
            c
          );
        });
      }),
      W_),
    j_ =
      ((B_.bs = function (t, e) {
        for (
          var n = bg(), r = bg(), i = 0, o = e.docChanges;
          i < o.length;
          i++
        ) {
          var s = o[i];
          switch (s.type) {
            case 0:
              n = n.add(s.doc.key);
              break;
            case 1:
              r = r.add(s.doc.key);
          }
        }
        return new B_(t, e.fromCache, n, r);
      }),
      B_),
    V_ =
      ((q_.prototype.Ss = function (t) {
        return (
          (this.previousValue = Math.max(t, this.previousValue)),
          this.previousValue
        );
      }),
      (q_.prototype.next = function () {
        var t = ++this.previousValue;
        return this.Ds && this.Ds(t), t;
      }),
      q_);
  function q_(t, e) {
    var n = this;
    (this.previousValue = t),
      e &&
        ((e.vs = function (t) {
          return n.Ss(t);
        }),
        (this.Ds = function (t) {
          return e.Cs(t);
        }));
  }
  function B_(t, e, n, r) {
    (this.targetId = t), (this.fromCache = e), (this.Vs = n), (this.ps = r);
  }
  function W_(t, e, n) {
    (this.os = t), (this.cs = e), (this.us = n);
  }
  function K_() {
    this.ns = [];
  }
  function H_() {
    (this.Wn = new L_(
      function (t) {
        return t.toString();
      },
      function (t, e) {
        return t.isEqual(e);
      }
    )),
      (this.jn = !1);
  }
  function z_(t) {
    var e = this;
    (this.On = null),
      (this.kn = null),
      (this.result = void 0),
      (this.error = void 0),
      (this.Mn = !1),
      (this.Ln = !1),
      t(
        function (t) {
          (e.Mn = !0), (e.result = t), e.On && e.On(t);
        },
        function (t) {
          (e.Mn = !0), (e.error = t), e.kn && e.kn(t);
        }
      );
  }
  function G_(t, e) {
    (this.xn = t), (this.Nn = e), (this.Fn = {});
  }
  function Q_(t, e, n, r) {
    (this.batch = t), (this.Dn = e), (this.bn = n), (this.Cn = r);
  }
  function Y_(t, e, n, r) {
    (this.batchId = t),
      (this.Vn = e),
      (this.baseMutations = n),
      (this.mutations = r);
  }
  V_.xs = -1;
  var X_,
    J_ = function () {
      var n = this;
      this.promise = new Promise(function (t, e) {
        (n.resolve = t), (n.reject = e);
      });
    },
    $_ =
      ((ow.prototype.reset = function () {
        this.Ls = 0;
      }),
      (ow.prototype.qs = function () {
        this.Ls = this.Ms;
      }),
      (ow.prototype.Us = function (t) {
        var e = this;
        this.cancel();
        var n = Math.floor(this.Ls + this.Qs()),
          r = Math.max(0, Date.now() - this.Bs),
          i = Math.max(0, n - r);
        0 < i &&
          Yv(
            'ExponentialBackoff',
            'Backing off for ' +
              i +
              ' ms (base delay: ' +
              this.Ls +
              ' ms, delay with jitter: ' +
              n +
              ' ms, last attempt: ' +
              r +
              ' ms ago)'
          ),
          (this.$s = this.Ns.Ks(this.Fs, i, function () {
            return (e.Bs = Date.now()), t();
          })),
          (this.Ls *= this.ks),
          this.Ls < this.Os && (this.Ls = this.Os),
          this.Ls > this.Ms && (this.Ls = this.Ms);
      }),
      (ow.prototype.Ws = function () {
        null !== this.$s && (this.$s.js(), (this.$s = null));
      }),
      (ow.prototype.cancel = function () {
        null !== this.$s && (this.$s.cancel(), (this.$s = null));
      }),
      (ow.prototype.Qs = function () {
        return (Math.random() - 0.5) * this.Ls;
      }),
      ow),
    Z_ =
      ((iw.delete = function (t) {
        return (
          Yv('SimpleDb', 'Removing database:', t),
          lw(window.indexedDB.deleteDatabase(t)).qn()
        );
      }),
      (iw.Hs = function () {
        if ('undefined' == typeof indexedDB) return !1;
        if (iw.Js()) return !0;
        var t = Mo(),
          e = iw.zs(t),
          n = 0 < e && e < 10,
          e = iw.Ys(t),
          e = 0 < e && e < 4.5;
        return !(
          0 < t.indexOf('MSIE ') ||
          0 < t.indexOf('Trident/') ||
          0 < t.indexOf('Edge/') ||
          n ||
          e
        );
      }),
      (iw.Js = function () {
        var t;
        return (
          'undefined' != typeof process &&
          'YES' === (null === (t = process.env) || void 0 === t ? void 0 : t.Xs)
        );
      }),
      (iw.Zs = function (t, e) {
        return t.store(e);
      }),
      (iw.zs = function (t) {
        (t = t.match(/i(?:phone|pad|pod) os ([\d_]+)/i)),
          (t = t ? t[1].split('_').slice(0, 2).join('.') : '-1');
        return Number(t);
      }),
      (iw.Ys = function (t) {
        (t = t.match(/Android ([\d.]+)/i)),
          (t = t ? t[1].split('.').slice(0, 2).join('.') : '-1');
        return Number(t);
      }),
      (iw.prototype.ti = function (o) {
        return _o(this, void 0, void 0, function () {
          var e,
            i = this;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return this.db
                  ? [3, 2]
                  : (Yv('SimpleDb', 'Opening database:', this.name),
                    (e = this),
                    [
                      4,
                      new Promise(function (e, n) {
                        var r = indexedDB.open(i.name, i.version);
                        (r.onsuccess = function (t) {
                          t = t.target.result;
                          e(t);
                        }),
                          (r.onblocked = function () {
                            n(
                              new ew(
                                o,
                                'Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed.'
                              )
                            );
                          }),
                          (r.onerror = function (t) {
                            t = t.target.error;
                            'VersionError' === t.name
                              ? n(
                                  new Hv(
                                    Kv.FAILED_PRECONDITION,
                                    'A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.'
                                  )
                                )
                              : n(new ew(o, t));
                          }),
                          (r.onupgradeneeded = function (t) {
                            Yv(
                              'SimpleDb',
                              'Database "' +
                                i.name +
                                '" requires upgrade from version:',
                              t.oldVersion
                            );
                            var e = t.target.result;
                            i.Gs.createOrUpgrade(
                              e,
                              r.transaction,
                              t.oldVersion,
                              i.version
                            ).next(function () {
                              Yv(
                                'SimpleDb',
                                'Database upgrade to version ' +
                                  i.version +
                                  ' complete'
                              );
                            });
                          });
                      })
                    ]);
              case 1:
                (e.db = t.sent()), (t.label = 2);
              case 2:
                return [
                  2,
                  (this.ei &&
                    (this.db.onversionchange = function (t) {
                      return i.ei(t);
                    }),
                  this.db)
                ];
            }
          });
        });
      }),
      (iw.prototype.ni = function (e) {
        (this.ei = e),
          this.db &&
            (this.db.onversionchange = function (t) {
              return e(t);
            });
      }),
      (iw.prototype.runTransaction = function (a, n, u, c) {
        return _o(this, void 0, void 0, function () {
          var i, o, s, e;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                (i = 'readonly' === n),
                  (o = 0),
                  (e = function () {
                    var e, n, r;
                    return wo(this, function (t) {
                      switch (t.label) {
                        case 0:
                          ++o, (t.label = 1);
                        case 1:
                          return t.trys.push([1, 4, , 5]), [4, s.ti(a)];
                        case 2:
                          return (
                            (s.db = t.sent()),
                            (e = aw.open(
                              s.db,
                              a,
                              i ? 'readonly' : 'readwrite',
                              u
                            )),
                            (n = c(e)
                              .catch(function (t) {
                                return e.abort(t), M_.reject(t);
                              })
                              .qn()),
                            (r = {}),
                            n.catch(function () {}),
                            [4, e.si]
                          );
                        case 3:
                          return [2, ((r.value = (t.sent(), n)), r)];
                        case 4:
                          return (
                            (n = t.sent()),
                            (r = 'FirebaseError' !== n.name && o < 3),
                            Yv(
                              'SimpleDb',
                              'Transaction failed with error:',
                              n.message,
                              'Retrying:',
                              r
                            ),
                            s.close(),
                            r ? [3, 5] : [2, { value: Promise.reject(n) }]
                          );
                        case 5:
                          return [2];
                      }
                    });
                  }),
                  (s = this),
                  (t.label = 1);
              case 1:
                return [5, e()];
              case 2:
                if ('object' == typeof (e = t.sent())) return [2, e.value];
                t.label = 3;
              case 3:
                return [3, 1];
              case 4:
                return [2];
            }
          });
        });
      }),
      (iw.prototype.close = function () {
        this.db && this.db.close(), (this.db = void 0);
      }),
      iw),
    tw =
      (Object.defineProperty(rw.prototype, 'Mn', {
        get: function () {
          return this.ri;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(rw.prototype, 'ci', {
        get: function () {
          return this.oi;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(rw.prototype, 'cursor', {
        set: function (t) {
          this.ii = t;
        },
        enumerable: !1,
        configurable: !0
      }),
      (rw.prototype.done = function () {
        this.ri = !0;
      }),
      (rw.prototype.ai = function (t) {
        this.oi = t;
      }),
      (rw.prototype.delete = function () {
        return lw(this.ii.delete());
      }),
      rw),
    ew = (mo(nw, (X_ = Hv)), nw);
  function nw(t, e) {
    var n = this;
    return (
      ((n =
        X_.call(
          this,
          Kv.UNAVAILABLE,
          "IndexedDB transaction '" + t + "' failed: " + e
        ) || this).name = 'IndexedDbTransactionError'),
      n
    );
  }
  function rw(t) {
    (this.ii = t), (this.ri = !1), (this.oi = null);
  }
  function iw(t, e, n) {
    (this.name = t),
      (this.version = e),
      (this.Gs = n),
      12.2 === iw.zs(Mo()) &&
        Xv(
          'Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.'
        );
  }
  function ow(t, e, n, r, i) {
    void 0 === n && (n = 1e3),
      void 0 === r && (r = 1.5),
      void 0 === i && (i = 6e4),
      (this.Ns = t),
      (this.Fs = e),
      (this.Os = n),
      (this.ks = r),
      (this.Ms = i),
      (this.Ls = 0),
      (this.$s = null),
      (this.Bs = Date.now()),
      this.reset();
  }
  function sw(t) {
    return 'IndexedDbTransactionError' === t.name;
  }
  var aw =
      ((hw.open = function (t, e, n, r) {
        try {
          return new hw(e, t.transaction(r, n));
        } catch (t) {
          throw new ew(e, t);
        }
      }),
      Object.defineProperty(hw.prototype, 'si', {
        get: function () {
          return this.ui.promise;
        },
        enumerable: !1,
        configurable: !0
      }),
      (hw.prototype.abort = function (t) {
        t && this.ui.reject(t),
          this.aborted ||
            (Yv(
              'SimpleDb',
              'Aborting transaction:',
              t ? t.message : 'Client-initiated abort'
            ),
            (this.aborted = !0),
            this.transaction.abort());
      }),
      (hw.prototype.store = function (t) {
        t = this.transaction.objectStore(t);
        return new uw(t);
      }),
      hw),
    uw =
      ((cw.prototype.put = function (t, e) {
        t =
          void 0 !== e
            ? (Yv('SimpleDb', 'PUT', this.store.name, t, e),
              this.store.put(e, t))
            : (Yv('SimpleDb', 'PUT', this.store.name, '<auto-key>', t),
              this.store.put(t));
        return lw(t);
      }),
      (cw.prototype.add = function (t) {
        return (
          Yv('SimpleDb', 'ADD', this.store.name, t, t), lw(this.store.add(t))
        );
      }),
      (cw.prototype.get = function (e) {
        var n = this;
        return lw(this.store.get(e)).next(function (t) {
          return (
            void 0 === t && (t = null),
            Yv('SimpleDb', 'GET', n.store.name, e, t),
            t
          );
        });
      }),
      (cw.prototype.delete = function (t) {
        return (
          Yv('SimpleDb', 'DELETE', this.store.name, t), lw(this.store.delete(t))
        );
      }),
      (cw.prototype.count = function () {
        return Yv('SimpleDb', 'COUNT', this.store.name), lw(this.store.count());
      }),
      (cw.prototype.hi = function (t, e) {
        var e = this.cursor(this.options(t, e)),
          n = [];
        return this.li(e, function (t, e) {
          n.push(e);
        }).next(function () {
          return n;
        });
      }),
      (cw.prototype._i = function (t, e) {
        Yv('SimpleDb', 'DELETE ALL', this.store.name);
        e = this.options(t, e);
        e.fi = !1;
        e = this.cursor(e);
        return this.li(e, function (t, e, n) {
          return n.delete();
        });
      }),
      (cw.prototype.di = function (t, e) {
        e ? (n = t) : ((n = {}), (e = t));
        var n = this.cursor(n);
        return this.li(n, e);
      }),
      (cw.prototype.wi = function (r) {
        var t = this.cursor({});
        return new M_(function (n, e) {
          (t.onerror = function (t) {
            t = pw(t.target.error);
            e(t);
          }),
            (t.onsuccess = function (t) {
              var e = t.target.result;
              e
                ? r(e.primaryKey, e.value).next(function (t) {
                    t ? e.continue() : n();
                  })
                : n();
            });
        });
      }),
      (cw.prototype.li = function (t, i) {
        var o = [];
        return new M_(function (r, e) {
          (t.onerror = function (t) {
            e(t.target.error);
          }),
            (t.onsuccess = function (t) {
              var e,
                n = t.target.result;
              n
                ? ((e = new tw(n)),
                  (t = i(n.primaryKey, n.value, e)) instanceof M_ &&
                    ((t = t.catch(function (t) {
                      return e.done(), M_.reject(t);
                    })),
                    o.push(t)),
                  e.Mn ? r() : null === e.ci ? n.continue() : n.continue(e.ci))
                : r();
            });
        }).next(function () {
          return M_.Qn(o);
        });
      }),
      (cw.prototype.options = function (t, e) {
        var n = void 0;
        return (
          void 0 !== t && ('string' == typeof t ? (n = t) : (e = t)),
          { index: n, range: e }
        );
      }),
      (cw.prototype.cursor = function (t) {
        var e = 'next';
        if ((t.reverse && (e = 'prev'), t.index)) {
          var n = this.store.index(t.index);
          return t.fi ? n.openKeyCursor(t.range, e) : n.openCursor(t.range, e);
        }
        return this.store.openCursor(t.range, e);
      }),
      cw);
  function cw(t) {
    this.store = t;
  }
  function hw(e, t) {
    var n = this;
    (this.action = e),
      (this.transaction = t),
      (this.aborted = !1),
      (this.ui = new J_()),
      (this.transaction.oncomplete = function () {
        n.ui.resolve();
      }),
      (this.transaction.onabort = function () {
        t.error ? n.ui.reject(new ew(e, t.error)) : n.ui.resolve();
      }),
      (this.transaction.onerror = function (t) {
        t = pw(t.target.error);
        n.ui.reject(new ew(e, t));
      });
  }
  function lw(t) {
    return new M_(function (e, n) {
      (t.onsuccess = function (t) {
        t = t.target.result;
        e(t);
      }),
        (t.onerror = function (t) {
          t = pw(t.target.error);
          n(t);
        });
    });
  }
  var fw = !1;
  function pw(t) {
    var e = Z_.zs(Mo());
    if (12.2 <= e && e < 13) {
      e = 'An internal error was encountered in the Indexed Database server';
      if (0 <= t.message.indexOf(e)) {
        var n = new Hv(
          'internal',
          "IOS_INDEXEDDB_BUG1: IndexedDb has thrown '" +
            e +
            "'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."
        );
        return (
          fw ||
            ((fw = !0),
            setTimeout(function () {
              throw n;
            }, 0)),
          n
        );
      }
    }
    return t;
  }
  function dw() {
    return 'undefined' != typeof window ? window : null;
  }
  function vw() {
    return 'undefined' != typeof document ? document : null;
  }
  var yw =
      ((bw.Ai = function (t, e, n, r, i) {
        i = new bw(t, e, Date.now() + n, r, i);
        return i.start(n), i;
      }),
      (bw.prototype.start = function (t) {
        var e = this;
        this.Ri = setTimeout(function () {
          return e.Pi();
        }, t);
      }),
      (bw.prototype.js = function () {
        return this.Pi();
      }),
      (bw.prototype.cancel = function (t) {
        null !== this.Ri &&
          (this.clearTimeout(),
          this.Ii.reject(
            new Hv(Kv.CANCELLED, 'Operation cancelled' + (t ? ': ' + t : ''))
          ));
      }),
      (bw.prototype.Pi = function () {
        var e = this;
        this.Ei.yi(function () {
          return null !== e.Ri
            ? (e.clearTimeout(),
              e.op().then(function (t) {
                return e.Ii.resolve(t);
              }))
            : Promise.resolve();
        });
      }),
      (bw.prototype.clearTimeout = function () {
        null !== this.Ri &&
          (this.mi(this), clearTimeout(this.Ri), (this.Ri = null));
      }),
      bw),
    gw =
      (Object.defineProperty(mw.prototype, 'Ni', {
        get: function () {
          return this.pi;
        },
        enumerable: !1,
        configurable: !0
      }),
      (mw.prototype.yi = function (t) {
        this.enqueue(t);
      }),
      (mw.prototype.Fi = function (t) {
        this.Oi(), this.ki(t);
      }),
      (mw.prototype.Mi = function () {
        var t;
        this.pi ||
          ((this.pi = !0),
          (t = vw()) &&
            'function' == typeof t.removeEventListener &&
            t.removeEventListener('visibilitychange', this.xi));
      }),
      (mw.prototype.enqueue = function (t) {
        return this.Oi(), this.pi ? new Promise(function (t) {}) : this.ki(t);
      }),
      (mw.prototype.Li = function (t) {
        var e = this;
        this.yi(function () {
          return e.Vi.push(t), e.$i();
        });
      }),
      (mw.prototype.$i = function () {
        return _o(this, void 0, void 0, function () {
          var e,
            n = this;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                if (0 === this.Vi.length) return [3, 5];
                t.label = 1;
              case 1:
                return t.trys.push([1, 3, , 4]), [4, this.Vi[0]()];
              case 2:
                return t.sent(), this.Vi.shift(), this.Ci.reset(), [3, 4];
              case 3:
                if (!sw((e = t.sent()))) throw e;
                return (
                  Yv(
                    'AsyncQueue',
                    'Operation failed with retryable error: ' + e
                  ),
                  [3, 4]
                );
              case 4:
                0 < this.Vi.length &&
                  this.Ci.Us(function () {
                    return n.$i();
                  }),
                  (t.label = 5);
              case 5:
                return [2];
            }
          });
        });
      }),
      (mw.prototype.ki = function (t) {
        var r = this,
          e = this.gi.then(function () {
            return (
              (r.Si = !0),
              t()
                .catch(function (t) {
                  throw (
                    ((r.vi = t),
                    (r.Si = !1),
                    Xv(
                      'INTERNAL UNHANDLED ERROR: ',
                      ((n = (e = t).message || ''),
                      e.stack &&
                        (n = e.stack.includes(e.message)
                          ? e.stack
                          : e.message + '\n' + e.stack),
                      n)
                    ),
                    t)
                  );
                  var e, n;
                })
                .then(function (t) {
                  return (r.Si = !1), t;
                })
            );
          });
        return (this.gi = e);
      }),
      (mw.prototype.Ks = function (t, e, n) {
        var r = this;
        this.Oi(), -1 < this.Di.indexOf(t) && (e = 0);
        n = yw.Ai(this, t, e, n, function (t) {
          return r.Bi(t);
        });
        return this.bi.push(n), n;
      }),
      (mw.prototype.Oi = function () {
        this.vi && Zv();
      }),
      (mw.prototype.qi = function () {}),
      (mw.prototype.Ui = function () {
        return _o(this, void 0, void 0, function () {
          var e;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return [4, (e = this.gi)];
              case 1:
                t.sent(), (t.label = 2);
              case 2:
                if (e !== this.gi) return [3, 0];
                t.label = 3;
              case 3:
                return [2];
            }
          });
        });
      }),
      (mw.prototype.Qi = function (t) {
        for (var e = 0, n = this.bi; e < n.length; e++)
          if (n[e].Fs === t) return !0;
        return !1;
      }),
      (mw.prototype.Ki = function (r) {
        var i = this;
        return this.Ui().then(function () {
          i.bi.sort(function (t, e) {
            return t.Ti - e.Ti;
          });
          for (var t = 0, e = i.bi; t < e.length; t++) {
            var n = e[t];
            if ((n.js(), 'all' !== r && n.Fs === r)) break;
          }
          return i.Ui();
        });
      }),
      (mw.prototype.Wi = function (t) {
        this.Di.push(t);
      }),
      (mw.prototype.Bi = function (t) {
        t = this.bi.indexOf(t);
        this.bi.splice(t, 1);
      }),
      mw);
  function mw() {
    var e = this;
    (this.gi = Promise.resolve()),
      (this.Vi = []),
      (this.pi = !1),
      (this.bi = []),
      (this.vi = null),
      (this.Si = !1),
      (this.Di = []),
      (this.Ci = new $_(this, 'async_queue_retry')),
      (this.xi = function () {
        var t = vw();
        t &&
          Yv('AsyncQueue', 'Visibility state changed to ' + t.visibilityState),
          e.Ci.Ws();
      });
    var t = vw();
    t &&
      'function' == typeof t.addEventListener &&
      t.addEventListener('visibilitychange', this.xi);
  }
  function bw(t, e, n, r, i) {
    (this.Ei = t),
      (this.Fs = e),
      (this.Ti = n),
      (this.op = r),
      (this.mi = i),
      (this.Ii = new J_()),
      (this.then = this.Ii.promise.then.bind(this.Ii.promise)),
      this.Ii.promise.catch(function (t) {});
  }
  function _w(t, e) {
    if ((Xv('AsyncQueue', e + ': ' + t), sw(t)))
      return new Hv(Kv.UNAVAILABLE, e + ': ' + t);
    throw t;
  }
  function ww(t, e) {
    var n = t[0],
      r = t[1],
      t = e[0],
      e = e[1],
      t = ry(n, t);
    return 0 === t ? ry(r, e) : t;
  }
  var Ew =
      ((Cw.prototype.zi = function () {
        return ++this.Gi;
      }),
      (Cw.prototype.Hi = function (t) {
        var e = [t, this.zi()];
        this.buffer.size < this.ji
          ? (this.buffer = this.buffer.add(e))
          : ww(e, (t = this.buffer.last())) < 0 &&
            (this.buffer = this.buffer.delete(t).add(e));
      }),
      Object.defineProperty(Cw.prototype, 'maxValue', {
        get: function () {
          return this.buffer.last()[0];
        },
        enumerable: !1,
        configurable: !0
      }),
      Cw),
    Iw = { Ji: !1, Yi: 0, Xi: 0, Zi: 0 },
    Tw =
      ((Sw.sr = function (t) {
        return new Sw(t, Sw.ir, Sw.rr);
      }),
      Sw);
  function Sw(t, e, n) {
    (this.tr = t), (this.er = e), (this.nr = n);
  }
  function Cw(t) {
    (this.ji = t), (this.buffer = new lg(ww)), (this.Gi = 0);
  }
  (Tw.ir = 10),
    (Tw.rr = 1e3),
    (Tw.cr = new Tw(41943040, Tw.ir, Tw.rr)),
    (Tw.ar = new Tw(-1, 0, 0));
  var Nw =
      ((Pw.prototype.start = function (t) {
        -1 !== this.ur.params.tr && this._r(t);
      }),
      (Pw.prototype.stop = function () {
        this.lr && (this.lr.cancel(), (this.lr = null));
      }),
      Object.defineProperty(Pw.prototype, 'dr', {
        get: function () {
          return null !== this.lr;
        },
        enumerable: !1,
        configurable: !0
      }),
      (Pw.prototype._r = function (n) {
        var t = this,
          e = this.hr ? 3e5 : 6e4;
        Yv(
          'LruGarbageCollector',
          'Garbage collection scheduled in ' + e + 'ms'
        ),
          (this.lr = this.Ei.Ks('lru_garbage_collection', e, function () {
            return _o(t, void 0, void 0, function () {
              var e;
              return wo(this, function (t) {
                switch (t.label) {
                  case 0:
                    (this.lr = null), (this.hr = !0), (t.label = 1);
                  case 1:
                    return t.trys.push([1, 3, , 7]), [4, n.wr(this.ur)];
                  case 2:
                    return t.sent(), [3, 7];
                  case 3:
                    return sw((e = t.sent()))
                      ? (Yv(
                          'LruGarbageCollector',
                          'Ignoring IndexedDB error during garbage collection: ',
                          e
                        ),
                        [3, 6])
                      : [3, 4];
                  case 4:
                    return [4, DI(e)];
                  case 5:
                    t.sent(), (t.label = 6);
                  case 6:
                    return [3, 7];
                  case 7:
                    return [4, this._r(n)];
                  case 8:
                    return t.sent(), [2];
                }
              });
            });
          }));
      }),
      Pw),
    Aw =
      ((Ow.prototype.Tr = function (t, e) {
        return this.Er.mr(t).next(function (t) {
          return Math.floor((e / 100) * t);
        });
      }),
      (Ow.prototype.Ir = function (t, e) {
        var n = this;
        if (0 === e) return M_.resolve(V_.xs);
        var r = new Ew(e);
        return this.Er.Ke(t, function (t) {
          return r.Hi(t.sequenceNumber);
        })
          .next(function () {
            return n.Er.Ar(t, function (t) {
              return r.Hi(t);
            });
          })
          .next(function () {
            return r.maxValue;
          });
      }),
      (Ow.prototype.Rr = function (t, e, n) {
        return this.Er.Rr(t, e, n);
      }),
      (Ow.prototype.Pr = function (t, e) {
        return this.Er.Pr(t, e);
      }),
      (Ow.prototype.yr = function (e, n) {
        var r = this;
        return -1 === this.params.tr
          ? (Yv('LruGarbageCollector', 'Garbage collection skipped; disabled'),
            M_.resolve(Iw))
          : this.gr(e).next(function (t) {
              return t < r.params.tr
                ? (Yv(
                    'LruGarbageCollector',
                    'Garbage collection skipped; Cache size ' +
                      t +
                      ' is lower than threshold ' +
                      r.params.tr
                  ),
                  Iw)
                : r.Vr(e, n);
            });
      }),
      (Ow.prototype.gr = function (t) {
        return this.Er.gr(t);
      }),
      (Ow.prototype.Vr = function (e, n) {
        var r,
          i,
          o,
          s,
          a,
          u,
          c,
          h = this,
          l = Date.now();
        return this.Tr(e, this.params.er)
          .next(function (t) {
            return (
              (i =
                t > h.params.nr
                  ? (Yv(
                      'LruGarbageCollector',
                      'Capping sequence numbers to collect down to the maximum of ' +
                        h.params.nr +
                        ' from ' +
                        t
                    ),
                    h.params.nr)
                  : t),
              (s = Date.now()),
              h.Ir(e, i)
            );
          })
          .next(function (t) {
            return (r = t), (a = Date.now()), h.Rr(e, r, n);
          })
          .next(function (t) {
            return (o = t), (u = Date.now()), h.Pr(e, r);
          })
          .next(function (t) {
            return (
              (c = Date.now()),
              Qv() <= As.DEBUG &&
                Yv(
                  'LruGarbageCollector',
                  'LRU Garbage Collection\n\tCounted targets in ' +
                    (s - l) +
                    'ms\n\tDetermined least recently used ' +
                    i +
                    ' in ' +
                    (a - s) +
                    'ms\n\tRemoved ' +
                    o +
                    ' targets in ' +
                    (u - a) +
                    'ms\n\tRemoved ' +
                    t +
                    ' documents in ' +
                    (c - u) +
                    'ms\nTotal Duration: ' +
                    (c - l) +
                    'ms'
                ),
              M_.resolve({ Ji: !0, Yi: i, Xi: o, Zi: t })
            );
          });
      }),
      Ow),
    kw =
      ((Rw.prototype.pr = function (t) {
        this.br = t;
      }),
      (Rw.prototype.Ts = function (e, r, i, o) {
        var s = this;
        return (0 === r.filters.length &&
          null === r.limit &&
          null == r.startAt &&
          null == r.endAt &&
          (0 === r.In.length || (1 === r.In.length && r.In[0].field.rt()))) ||
          i.isEqual(ky.min())
          ? this.vr(e, r)
          : this.br.ds(e, o).next(function (t) {
              var n = s.Sr(r, t);
              return (Kb(r) || Hb(r)) && s.Dr(r.limitType, n, o, i)
                ? s.vr(e, r)
                : (Qv() <= As.DEBUG &&
                    Yv(
                      'QueryEngine',
                      'Re-using previous result from %s to execute query: %s',
                      i.toString(),
                      t_(r)
                    ),
                  s.br.Ts(e, r, i).next(function (e) {
                    return (
                      n.forEach(function (t) {
                        e = e.At(t.key, t);
                      }),
                      e
                    );
                  }));
            });
      }),
      (Rw.prototype.Sr = function (n, t) {
        var r = new lg(n_(n));
        return (
          t.forEach(function (t, e) {
            e instanceof Lb && e_(n, e) && (r = r.add(e));
          }),
          r
        );
      }),
      (Rw.prototype.Dr = function (t, e, n, r) {
        if (n.size !== e.size) return !0;
        e = 'F' === t ? e.last() : e.first();
        return !!e && (e.hasPendingWrites || 0 < e.version.u(r));
      }),
      (Rw.prototype.vr = function (t, e) {
        return (
          Qv() <= As.DEBUG &&
            Yv(
              'QueryEngine',
              'Using full collection scan to execute query:',
              t_(e)
            ),
          this.br.Ts(t, e, ky.min())
        );
      }),
      Rw);
  function Rw() {}
  function Ow(t, e) {
    (this.Er = t), (this.params = e);
  }
  function Pw(t, e) {
    (this.ur = t), (this.Ei = e), (this.hr = !1), (this.lr = null);
  }
  function Dw(t) {
    for (var e = '', n = 0; n < t.length; n++)
      0 < e.length && (e = xw(e)),
        (e = (function (t, e) {
          for (var n = e, r = t.length, i = 0; i < r; i++) {
            var o = t.charAt(i);
            switch (o) {
              case '\0':
                n += '';
                break;
              case '':
                n += '';
                break;
              default:
                n += o;
            }
          }
          return n;
        })(t.get(n), e));
    return xw(e);
  }
  function xw(t) {
    return t + '';
  }
  function Lw(t) {
    var e = t.length;
    if ((ty(2 <= e), 2 === e))
      return ty('' === t.charAt(0) && '' === t.charAt(1)), Ry.st();
    for (var n = e - 2, r = [], i = '', o = 0; o < e; ) {
      var s = t.indexOf('', o);
      switch (((s < 0 || n < s) && Zv(), t.charAt(s + 1))) {
        case '':
          var a = t.substring(o, s),
            u = void 0;
          0 === i.length ? (u = a) : ((u = i += a), (i = '')), r.push(u);
          break;
        case '':
          (i += t.substring(o, s)), (i += '\0');
          break;
        case '':
          i += t.substring(o, s + 1);
          break;
        default:
          Zv();
      }
      o = s + 2;
    }
    return new Ry(r);
  }
  var Mw = function (t) {
    this.Cr = t;
  };
  function Fw(t, e) {
    if (e.document) return Sm(t.Cr, e.document, !!e.hasCommittedMutations);
    if (e.noDocument) {
      var n = Dy._t(e.noDocument.path),
        r = Bw(e.noDocument.readTime);
      return new Mb(n, r, { hasCommittedMutations: !!e.hasCommittedMutations });
    }
    if (e.unknownDocument) {
      (n = Dy._t(e.unknownDocument.path)), (r = Bw(e.unknownDocument.version));
      return new Fb(n, r);
    }
    return Zv();
  }
  function Uw(t, e, n) {
    var r = jw(n),
      n = e.key.path.G().tt();
    if (e instanceof Lb) {
      var i = {
          name: mm((o = t.Cr), (s = e).key),
          fields: s.mn().mapValue.fields,
          updateTime: pm(o, s.version.q())
        },
        o = e.hasCommittedMutations;
      return new IE(null, null, i, o, r, n);
    }
    if (e instanceof Mb) {
      var s = e.key.path.tt(),
        i = qw(e.version),
        o = e.hasCommittedMutations;
      return new IE(null, new wE(s, i), null, o, r, n);
    }
    if (e instanceof Fb) {
      (o = e.key.path.tt()), (e = qw(e.version));
      return new IE(new EE(o, e), null, null, !0, r, n);
    }
    return Zv();
  }
  function jw(t) {
    t = t.q();
    return [t.seconds, t.nanoseconds];
  }
  function Vw(t) {
    t = new Ay(t[0], t[1]);
    return ky.$(t);
  }
  function qw(t) {
    t = t.q();
    return new fE(t.seconds, t.nanoseconds);
  }
  function Bw(t) {
    t = new Ay(t.seconds, t.nanoseconds);
    return ky.$(t);
  }
  function Ww(e, t) {
    var n = (t.baseMutations || []).map(function (t) {
        return Nm(e.Cr, t);
      }),
      r = t.mutations.map(function (t) {
        return Nm(e.Cr, t);
      }),
      i = Ay.fromMillis(t.localWriteTimeMs);
    return new D_(t.batchId, i, n, r);
  }
  function Kw(t) {
    var e = Bw(t.readTime),
      n =
        void 0 !== t.lastLimboFreeSnapshotVersion
          ? Bw(t.lastLimboFreeSnapshotVersion)
          : ky.min(),
      r =
        void 0 !== t.query.documents
          ? (ty(1 === (r = t.query).documents.length),
            Xb(Wb(wm(r.documents[0]))))
          : Xb(Rm(t.query));
    return new tg(
      r,
      t.targetId,
      0,
      t.lastListenSequenceNumber,
      e,
      n,
      sy.fromBase64String(t.resumeToken)
    );
  }
  function Hw(t, e) {
    var n = qw(e.wt),
      r = qw(e.lastLimboFreeSnapshotVersion),
      i = (Jy(e.target) ? Am : km)(t.Cr, e.target),
      t = e.resumeToken.toBase64();
    return new SE(e.targetId, Yy(e.target), n, t, e.sequenceNumber, r, i);
  }
  function zw(t) {
    var e = Rm({ parent: t.parent, structuredQuery: t.structuredQuery });
    return 'LAST' === t.limitType ? Jb(e, e.limit, 'L') : e;
  }
  var Gw =
    ((Qw.Or = function (t, e, n, r) {
      return ty('' !== t.uid), new Qw(t.A() ? t.uid : '', e, n, r);
    }),
    (Qw.prototype.kr = function (t) {
      var r = !0,
        e = IDBKeyRange.bound(
          [this.userId, Number.NEGATIVE_INFINITY],
          [this.userId, Number.POSITIVE_INFINITY]
        );
      return Jw(t)
        .di({ index: mE.userMutationsIndex, range: e }, function (t, e, n) {
          (r = !1), n.done();
        })
        .next(function () {
          return r;
        });
    }),
    (Qw.prototype.Mr = function (d, v, y, g) {
      var m = this,
        b = $w(d),
        _ = Jw(d);
      return _.add({}).next(function (t) {
        ty('number' == typeof t);
        for (
          var e,
            n,
            r,
            i,
            o,
            s = new D_(t, v, y, g),
            a =
              ((e = m.serializer),
              (n = m.userId),
              (i = (r = s).baseMutations.map(function (t) {
                return Cm(e.Cr, t);
              })),
              (o = r.mutations.map(function (t) {
                return Cm(e.Cr, t);
              })),
              new mE(n, r.batchId, r.Vn.toMillis(), i, o)),
            u = [],
            c = new lg(function (t, e) {
              return ry(t.et(), e.et());
            }),
            h = 0,
            l = g;
          h < l.length;
          h++
        ) {
          var f = l[h],
            p = bE.key(m.userId, f.key.path, t),
            c = c.add(f.key.path.G());
          u.push(_.put(a)), u.push(b.put(p, bE.PLACEHOLDER));
        }
        return (
          c.forEach(function (t) {
            u.push(m.us.Lr(d, t));
          }),
          d.ss(function () {
            m.Fr[t] = s.keys();
          }),
          M_.Qn(u).next(function () {
            return s;
          })
        );
      });
    }),
    (Qw.prototype.$r = function (t, e) {
      var n = this;
      return Jw(t)
        .get(e)
        .next(function (t) {
          return t ? (ty(t.userId === n.userId), Ww(n.serializer, t)) : null;
        });
    }),
    (Qw.prototype.Br = function (t, e) {
      var n = this;
      return this.Fr[e]
        ? M_.resolve(this.Fr[e])
        : this.$r(t, e).next(function (t) {
            if (t) {
              t = t.keys();
              return (n.Fr[e] = t);
            }
            return null;
          });
    }),
    (Qw.prototype.qr = function (t, e) {
      var r = this,
        i = e + 1,
        e = IDBKeyRange.lowerBound([this.userId, i]),
        o = null;
      return Jw(t)
        .di({ index: mE.userMutationsIndex, range: e }, function (t, e, n) {
          e.userId === r.userId &&
            (ty(e.batchId >= i), (o = Ww(r.serializer, e))),
            n.done();
        })
        .next(function () {
          return o;
        });
    }),
    (Qw.prototype.Ur = function (t) {
      var e = IDBKeyRange.upperBound([this.userId, Number.POSITIVE_INFINITY]),
        r = -1;
      return Jw(t)
        .di({ index: mE.userMutationsIndex, range: e, reverse: !0 }, function (
          t,
          e,
          n
        ) {
          (r = e.batchId), n.done();
        })
        .next(function () {
          return r;
        });
    }),
    (Qw.prototype.Qr = function (t) {
      var e = this,
        n = IDBKeyRange.bound(
          [this.userId, -1],
          [this.userId, Number.POSITIVE_INFINITY]
        );
      return Jw(t)
        .hi(mE.userMutationsIndex, n)
        .next(function (t) {
          return t.map(function (t) {
            return Ww(e.serializer, t);
          });
        });
    }),
    (Qw.prototype.ls = function (o, s) {
      var a = this,
        t = bE.prefixForPath(this.userId, s.path),
        t = IDBKeyRange.lowerBound(t),
        u = [];
      return $w(o)
        .di({ range: t }, function (t, e, n) {
          var r = t[0],
            i = t[1],
            t = t[2],
            i = Lw(i);
          if (r === a.userId && s.path.isEqual(i))
            return Jw(o)
              .get(t)
              .next(function (t) {
                if (!t) throw Zv();
                ty(t.userId === a.userId), u.push(Ww(a.serializer, t));
              });
          n.done();
        })
        .next(function () {
          return u;
        });
    }),
    (Qw.prototype.Es = function (e, t) {
      var s = this,
        a = new lg(ry),
        n = [];
      return (
        t.forEach(function (o) {
          var t = bE.prefixForPath(s.userId, o.path),
            t = IDBKeyRange.lowerBound(t),
            t = $w(e).di({ range: t }, function (t, e, n) {
              var r = t[0],
                i = t[1],
                t = t[2],
                i = Lw(i);
              r === s.userId && o.path.isEqual(i) ? (a = a.add(t)) : n.done();
            });
          n.push(t);
        }),
        M_.Qn(n).next(function () {
          return s.Kr(e, a);
        })
      );
    }),
    (Qw.prototype.ys = function (t, e) {
      var o = this,
        s = e.path,
        a = s.length + 1,
        e = bE.prefixForPath(this.userId, s),
        e = IDBKeyRange.lowerBound(e),
        u = new lg(ry);
      return $w(t)
        .di({ range: e }, function (t, e, n) {
          var r = t[0],
            i = t[1],
            t = t[2],
            i = Lw(i);
          r === o.userId && s.X(i)
            ? i.length === a && (u = u.add(t))
            : n.done();
        })
        .next(function () {
          return o.Kr(t, u);
        });
    }),
    (Qw.prototype.Kr = function (e, t) {
      var n = this,
        r = [],
        i = [];
      return (
        t.forEach(function (t) {
          i.push(
            Jw(e)
              .get(t)
              .next(function (t) {
                if (null === t) throw Zv();
                ty(t.userId === n.userId), r.push(Ww(n.serializer, t));
              })
          );
        }),
        M_.Qn(i).next(function () {
          return r;
        })
      );
    }),
    (Qw.prototype.Wr = function (e, n) {
      var r = this;
      return Xw(e.jr, this.userId, n).next(function (t) {
        return (
          e.ss(function () {
            r.Gr(n.batchId);
          }),
          M_.forEach(t, function (t) {
            return r.Nr.zr(e, t);
          })
        );
      });
    }),
    (Qw.prototype.Gr = function (t) {
      delete this.Fr[t];
    }),
    (Qw.prototype.Hr = function (e) {
      var i = this;
      return this.kr(e).next(function (t) {
        if (!t) return M_.resolve();
        var t = IDBKeyRange.lowerBound(bE.prefixForUser(i.userId)),
          r = [];
        return $w(e)
          .di({ range: t }, function (t, e, n) {
            t[0] === i.userId ? ((t = Lw(t[1])), r.push(t)) : n.done();
          })
          .next(function () {
            ty(0 === r.length);
          });
      });
    }),
    (Qw.prototype.Jr = function (t, e) {
      return Yw(t, this.userId, e);
    }),
    (Qw.prototype.Yr = function (t) {
      var e = this;
      return Zw(t)
        .get(this.userId)
        .next(function (t) {
          return t || new gE(e.userId, -1, '');
        });
    }),
    Qw);
  function Qw(t, e, n, r) {
    (this.userId = t),
      (this.serializer = e),
      (this.us = n),
      (this.Nr = r),
      (this.Fr = {});
  }
  function Yw(t, o, e) {
    var e = bE.prefixForPath(o, e.path),
      s = e[1],
      e = IDBKeyRange.lowerBound(e),
      a = !1;
    return $w(t)
      .di({ range: e, fi: !0 }, function (t, e, n) {
        var r = t[0],
          i = t[1];
        t[2], r === o && i === s && (a = !0), n.done();
      })
      .next(function () {
        return a;
      });
  }
  function Xw(t, e, n) {
    var r = t.store(mE.store),
      i = t.store(bE.store),
      o = [],
      t = IDBKeyRange.only(n.batchId),
      s = 0,
      t = r.di({ range: t }, function (t, e, n) {
        return s++, n.delete();
      });
    o.push(
      t.next(function () {
        ty(1 === s);
      })
    );
    for (var a = [], u = 0, c = n.mutations; u < c.length; u++) {
      var h = c[u],
        l = bE.key(e, h.key.path, n.batchId);
      o.push(i.delete(l)), a.push(h.key);
    }
    return M_.Qn(o).next(function () {
      return a;
    });
  }
  function Jw(t) {
    return JE.Zs(t, mE.store);
  }
  function $w(t) {
    return JE.Zs(t, bE.store);
  }
  function Zw(t) {
    return JE.Zs(t, gE.store);
  }
  var tE,
    eE =
      ((iE.prototype.zn = function (t, e, n) {
        return sE(t).put(aE(e), n);
      }),
      (iE.prototype.Yn = function (t, e) {
        (t = sE(t)), (e = aE(e));
        return t.delete(e);
      }),
      (iE.prototype.updateMetadata = function (e, n) {
        var r = this;
        return this.getMetadata(e).next(function (t) {
          return (t.byteSize += n), r.Xr(e, t);
        });
      }),
      (iE.prototype.Xn = function (t, e) {
        var n = this;
        return sE(t)
          .get(aE(e))
          .next(function (t) {
            return n.Zr(t);
          });
      }),
      (iE.prototype.eo = function (t, e) {
        var n = this;
        return sE(t)
          .get(aE(e))
          .next(function (t) {
            var e = n.Zr(t);
            return e ? { Jn: e, size: uE(t) } : null;
          });
      }),
      (iE.prototype.getEntries = function (t, e) {
        var n = this,
          r = pg;
        return this.no(t, e, function (t, e) {
          e = n.Zr(e);
          r = r.At(t, e);
        }).next(function () {
          return r;
        });
      }),
      (iE.prototype.so = function (t, e) {
        var r = this,
          i = pg,
          o = new ig(Dy.K);
        return this.no(t, e, function (t, e) {
          var n = r.Zr(e);
          o = n
            ? ((i = i.At(t, n)), o.At(t, uE(e)))
            : ((i = i.At(t, null)), o.At(t, 0));
        }).next(function () {
          return { io: i, ro: o };
        });
      }),
      (iE.prototype.no = function (t, e, i) {
        if (e.Y()) return M_.resolve();
        var n = IDBKeyRange.bound(e.first().path.tt(), e.last().path.tt()),
          o = e.bt(),
          s = o.Nt();
        return sE(t)
          .di({ range: n }, function (t, e, n) {
            for (var r = Dy._t(t); s && Dy.K(s, r) < 0; )
              i(s, null), (s = o.Nt());
            s && s.isEqual(r) && (i(s, e), (s = o.Ft() ? o.Nt() : null)),
              s ? n.ai(s.path.tt()) : n.done();
          })
          .next(function () {
            for (; s; ) i(s, null), (s = o.Ft() ? o.Nt() : null);
          });
      }),
      (iE.prototype.Ts = function (t, r, e) {
        var n,
          i = this,
          o = yg,
          s = r.path.length + 1,
          a = {};
        return (
          e.isEqual(ky.min())
            ? ((n = r.path.tt()), (a.range = IDBKeyRange.lowerBound(n)))
            : ((n = r.path.tt()),
              (e = jw(e)),
              (a.range = IDBKeyRange.lowerBound([n, e], !0)),
              (a.index = IE.collectionReadTimeIndex)),
          sE(t)
            .di(a, function (t, e, n) {
              t.length === s &&
                ((e = Fw(i.serializer, e)),
                r.path.X(e.key.path)
                  ? e instanceof Lb && e_(r, e) && (o = o.At(e.key, e))
                  : n.done());
            })
            .next(function () {
              return o;
            })
        );
      }),
      (iE.prototype.oo = function (t) {
        return new nE(this, !!t && t.co);
      }),
      (iE.prototype.ao = function (t) {
        return this.getMetadata(t).next(function (t) {
          return t.byteSize;
        });
      }),
      (iE.prototype.getMetadata = function (t) {
        return oE(t)
          .get(TE.key)
          .next(function (t) {
            return ty(!!t), t;
          });
      }),
      (iE.prototype.Xr = function (t, e) {
        return oE(t).put(TE.key, e);
      }),
      (iE.prototype.Zr = function (t) {
        if (t) {
          t = Fw(this.serializer, t);
          return t instanceof Mb && t.version.isEqual(ky.min()) ? null : t;
        }
        return null;
      }),
      iE),
    nE =
      (mo(rE, (tE = Gn)),
      (rE.prototype.es = function (i) {
        var o = this,
          s = [],
          a = 0,
          u = new lg(function (t, e) {
            return ry(t.et(), e.et());
          });
        return (
          this.Wn.forEach(function (t, e) {
            var n,
              r = o.ho.get(t);
            e.Jn
              ? ((n = Uw(o.uo.serializer, e.Jn, o.Gn(t))),
                (u = u.add(t.path.G())),
                (e = uE(n)),
                (a += e - r),
                s.push(o.uo.zn(i, t, n)))
              : ((a -= r),
                o.co
                  ? ((r = Uw(o.uo.serializer, new Mb(t, ky.min()), o.Gn(t))),
                    s.push(o.uo.zn(i, t, r)))
                  : s.push(o.uo.Yn(i, t)));
          }),
          u.forEach(function (t) {
            s.push(o.uo.us.Lr(i, t));
          }),
          s.push(this.uo.updateMetadata(i, a)),
          M_.Qn(s)
        );
      }),
      (rE.prototype.Zn = function (t, e) {
        var n = this;
        return this.uo.eo(t, e).next(function (t) {
          return null === t
            ? (n.ho.set(e, 0), null)
            : (n.ho.set(e, t.size), t.Jn);
        });
      }),
      (rE.prototype.ts = function (t, e) {
        var n = this;
        return this.uo.so(t, e).next(function (t) {
          var e = t.io;
          return (
            t.ro.forEach(function (t, e) {
              n.ho.set(t, e);
            }),
            e
          );
        });
      }),
      rE);
  function rE(t, e) {
    var n = this;
    return (
      ((n = tE.call(this) || this).uo = t),
      (n.co = e),
      (n.ho = new L_(
        function (t) {
          return t.toString();
        },
        function (t, e) {
          return t.isEqual(e);
        }
      )),
      n
    );
  }
  function iE(t, e) {
    (this.serializer = t), (this.us = e);
  }
  function oE(t) {
    return JE.Zs(t, TE.store);
  }
  function sE(t) {
    return JE.Zs(t, IE.store);
  }
  function aE(t) {
    return t.path.tt();
  }
  function uE(t) {
    var e;
    if (t.document) e = t.document;
    else if (t.unknownDocument) e = t.unknownDocument;
    else {
      if (!t.noDocument) throw Zv();
      e = t.noDocument;
    }
    return JSON.stringify(e).length;
  }
  var cE =
      ((yE.prototype.Lr = function (t, e) {
        return this.lo.add(e), M_.resolve();
      }),
      (yE.prototype.Ps = function (t, e) {
        return M_.resolve(this.lo.getEntries(e));
      }),
      yE),
    hE =
      ((vE.prototype.add = function (t) {
        var e = t.J(),
          n = t.G(),
          r = this.index[e] || new lg(Ry.K),
          t = !r.has(n);
        return (this.index[e] = r.add(n)), t;
      }),
      (vE.prototype.has = function (t) {
        var e = t.J(),
          t = t.G(),
          e = this.index[e];
        return e && e.has(t);
      }),
      (vE.prototype.getEntries = function (t) {
        return (this.index[t] || new lg(Ry.K)).tt();
      }),
      vE),
    lE =
      ((dE.prototype.createOrUpgrade = function (e, n, t, r) {
        var i = this;
        ty(t < r && 0 <= t && r <= 11);
        var o = new aw('createOrUpgrade', n);
        t < 1 &&
          1 <= r &&
          (e.createObjectStore(pE.store),
          (s = e).createObjectStore(gE.store, { keyPath: gE.keyPath }),
          s
            .createObjectStore(mE.store, {
              keyPath: mE.keyPath,
              autoIncrement: !0
            })
            .createIndex(mE.userMutationsIndex, mE.userMutationsKeyPath, {
              unique: !0
            }),
          s.createObjectStore(bE.store),
          kE(e),
          e.createObjectStore(IE.store));
        var s,
          a = M_.resolve();
        return (
          t < 3 &&
            3 <= r &&
            (0 !== t &&
              ((s = e).deleteObjectStore(CE.store),
              s.deleteObjectStore(SE.store),
              s.deleteObjectStore(NE.store),
              kE(e)),
            (a = a.next(function () {
              return (
                (t = o.store(NE.store)),
                (e = new NE(0, 0, ky.min().q(), 0)),
                t.put(NE.key, e)
              );
              var t, e;
            }))),
          t < 4 &&
            4 <= r &&
            (0 !== t &&
              (a = a.next(function () {
                return (
                  (n = e),
                  (r = o)
                    .store(mE.store)
                    .hi()
                    .next(function (t) {
                      n.deleteObjectStore(mE.store),
                        n
                          .createObjectStore(mE.store, {
                            keyPath: mE.keyPath,
                            autoIncrement: !0
                          })
                          .createIndex(
                            mE.userMutationsIndex,
                            mE.userMutationsKeyPath,
                            { unique: !0 }
                          );
                      var e = r.store(mE.store),
                        t = t.map(function (t) {
                          return e.put(t);
                        });
                      return M_.Qn(t);
                    })
                );
                var n, r;
              })),
            (a = a.next(function () {
              e.createObjectStore(RE.store, { keyPath: RE.keyPath });
            }))),
          t < 5 &&
            5 <= r &&
            (a = a.next(function () {
              return i.removeAcknowledgedMutations(o);
            })),
          t < 6 &&
            6 <= r &&
            (a = a.next(function () {
              return e.createObjectStore(TE.store), i.addDocumentGlobal(o);
            })),
          t < 7 &&
            7 <= r &&
            (a = a.next(function () {
              return i.ensureSequenceNumbers(o);
            })),
          t < 8 &&
            8 <= r &&
            (a = a.next(function () {
              return i.createCollectionParentIndex(e, o);
            })),
          t < 9 &&
            9 <= r &&
            (a = a.next(function () {
              var t;
              (t = e).objectStoreNames.contains('remoteDocumentChanges') &&
                t.deleteObjectStore('remoteDocumentChanges'),
                (t = n.objectStore(IE.store)).createIndex(
                  IE.readTimeIndex,
                  IE.readTimeIndexPath,
                  { unique: !1 }
                ),
                t.createIndex(
                  IE.collectionReadTimeIndex,
                  IE.collectionReadTimeIndexPath,
                  { unique: !1 }
                );
            })),
          t < 10 &&
            10 <= r &&
            (a = a.next(function () {
              return i.rewriteCanonicalIds(o);
            })),
          t < 11 &&
            11 <= r &&
            (a = a.next(function () {
              e.createObjectStore(OE.store, { keyPath: OE.keyPath }),
                e.createObjectStore(PE.store, { keyPath: PE.keyPath });
            })),
          a
        );
      }),
      (dE.prototype.addDocumentGlobal = function (e) {
        var n = 0;
        return e
          .store(IE.store)
          .di(function (t, e) {
            n += uE(e);
          })
          .next(function () {
            var t = new TE(n);
            return e.store(TE.store).put(TE.key, t);
          });
      }),
      (dE.prototype.removeAcknowledgedMutations = function (n) {
        var r = this,
          t = n.store(gE.store),
          i = n.store(mE.store);
        return t.hi().next(function (t) {
          return M_.forEach(t, function (e) {
            var t = IDBKeyRange.bound(
              [e.userId, -1],
              [e.userId, e.lastAcknowledgedBatchId]
            );
            return i.hi(mE.userMutationsIndex, t).next(function (t) {
              return M_.forEach(t, function (t) {
                ty(t.userId === e.userId);
                t = Ww(r.serializer, t);
                return Xw(n, e.userId, t).next(function () {});
              });
            });
          });
        });
      }),
      (dE.prototype.ensureSequenceNumbers = function (t) {
        var o = t.store(CE.store),
          e = t.store(IE.store);
        return t
          .store(NE.store)
          .get(NE.key)
          .next(function (r) {
            var i = [];
            return e
              .di(function (t, e) {
                var n = new Ry(t),
                  t = [0, Dw(n)];
                i.push(
                  o.get(t).next(function (t) {
                    return t
                      ? M_.resolve()
                      : o.put(new CE(0, Dw(n), r.highestListenSequenceNumber));
                  })
                );
              })
              .next(function () {
                return M_.Qn(i);
              });
          });
      }),
      (dE.prototype.createCollectionParentIndex = function (t, e) {
        t.createObjectStore(AE.store, { keyPath: AE.keyPath });
        function r(t) {
          if (i.add(t)) {
            var e = t.J(),
              t = t.G();
            return n.put({ collectionId: e, parent: Dw(t) });
          }
        }
        var n = e.store(AE.store),
          i = new hE();
        return e
          .store(IE.store)
          .di({ fi: !0 }, function (t, e) {
            t = new Ry(t);
            return r(t.G());
          })
          .next(function () {
            return e.store(bE.store).di({ fi: !0 }, function (t, e) {
              t[0];
              var n = t[1],
                n = (t[2], Lw(n));
              return r(n.G());
            });
          });
      }),
      (dE.prototype.rewriteCanonicalIds = function (t) {
        var n = this,
          r = t.store(SE.store);
        return r.di(function (t, e) {
          (e = Kw(e)), (e = Hw(n.serializer, e));
          return r.put(e);
        });
      }),
      dE),
    fE = function (t, e) {
      (this.seconds = t), (this.nanoseconds = e);
    },
    pE = function (t, e, n) {
      (this.ownerId = t),
        (this.allowTabSynchronization = e),
        (this.leaseTimestampMs = n);
    };
  function dE(t) {
    this.serializer = t;
  }
  function vE() {
    this.index = {};
  }
  function yE() {
    this.lo = new hE();
  }
  (pE.store = 'owner'), (pE.key = 'owner');
  var gE = function (t, e, n) {
    (this.userId = t),
      (this.lastAcknowledgedBatchId = e),
      (this.lastStreamToken = n);
  };
  (gE.store = 'mutationQueues'), (gE.keyPath = 'userId');
  var mE = function (t, e, n, r, i) {
    (this.userId = t),
      (this.batchId = e),
      (this.localWriteTimeMs = n),
      (this.baseMutations = r),
      (this.mutations = i);
  };
  (mE.store = 'mutations'),
    (mE.keyPath = 'batchId'),
    (mE.userMutationsIndex = 'userMutationsIndex'),
    (mE.userMutationsKeyPath = ['userId', 'batchId']);
  var bE =
    ((_E.prefixForUser = function (t) {
      return [t];
    }),
    (_E.prefixForPath = function (t, e) {
      return [t, Dw(e)];
    }),
    (_E.key = function (t, e, n) {
      return [t, Dw(e), n];
    }),
    _E);
  function _E() {}
  (bE.store = 'documentMutations'), (bE.PLACEHOLDER = new bE());
  var wE = function (t, e) {
      (this.path = t), (this.readTime = e);
    },
    EE = function (t, e) {
      (this.path = t), (this.version = e);
    },
    IE = function (t, e, n, r, i, o) {
      (this.unknownDocument = t),
        (this.noDocument = e),
        (this.document = n),
        (this.hasCommittedMutations = r),
        (this.readTime = i),
        (this.parentPath = o);
    };
  (IE.store = 'remoteDocuments'),
    (IE.readTimeIndex = 'readTimeIndex'),
    (IE.readTimeIndexPath = 'readTime'),
    (IE.collectionReadTimeIndex = 'collectionReadTimeIndex'),
    (IE.collectionReadTimeIndexPath = ['parentPath', 'readTime']);
  var TE = function (t) {
    this.byteSize = t;
  };
  (TE.store = 'remoteDocumentGlobal'), (TE.key = 'remoteDocumentGlobalKey');
  var SE = function (t, e, n, r, i, o, s) {
    (this.targetId = t),
      (this.canonicalId = e),
      (this.readTime = n),
      (this.resumeToken = r),
      (this.lastListenSequenceNumber = i),
      (this.lastLimboFreeSnapshotVersion = o),
      (this.query = s);
  };
  (SE.store = 'targets'),
    (SE.keyPath = 'targetId'),
    (SE.queryTargetsIndexName = 'queryTargetsIndex'),
    (SE.queryTargetsKeyPath = ['canonicalId', 'targetId']);
  var CE = function (t, e, n) {
    (this.targetId = t), (this.path = e), (this.sequenceNumber = n);
  };
  (CE.store = 'targetDocuments'),
    (CE.keyPath = ['targetId', 'path']),
    (CE.documentTargetsIndex = 'documentTargetsIndex'),
    (CE.documentTargetsKeyPath = ['path', 'targetId']);
  var NE = function (t, e, n, r) {
    (this.highestTargetId = t),
      (this.highestListenSequenceNumber = e),
      (this.lastRemoteSnapshotVersion = n),
      (this.targetCount = r);
  };
  (NE.key = 'targetGlobalKey'), (NE.store = 'targetGlobal');
  var AE = function (t, e) {
    (this.collectionId = t), (this.parent = e);
  };
  function kE(t) {
    t
      .createObjectStore(CE.store, { keyPath: CE.keyPath })
      .createIndex(CE.documentTargetsIndex, CE.documentTargetsKeyPath, {
        unique: !0
      }),
      t
        .createObjectStore(SE.store, { keyPath: SE.keyPath })
        .createIndex(SE.queryTargetsIndexName, SE.queryTargetsKeyPath, {
          unique: !0
        }),
      t.createObjectStore(NE.store);
  }
  (AE.store = 'collectionParents'), (AE.keyPath = ['collectionId', 'parent']);
  var RE = function (t, e, n, r) {
    (this.clientId = t),
      (this.updateTimeMs = e),
      (this.networkEnabled = n),
      (this.inForeground = r);
  };
  (RE.store = 'clientMetadata'), (RE.keyPath = 'clientId');
  var OE = function (t, e, n) {
    (this.bundleId = t), (this.createTime = e), (this.version = n);
  };
  (OE.store = 'bundles'), (OE.keyPath = 'bundleId');
  var PE = function (t, e, n) {
    (this.name = t), (this.readTime = e), (this.bundledQuery = n);
  };
  (PE.store = 'namedQueries'), (PE.keyPath = 'name');
  var DE = So(
      So(
        So(
          So(
            [
              gE.store,
              mE.store,
              bE.store,
              IE.store,
              SE.store,
              pE.store,
              NE.store,
              CE.store
            ],
            [RE.store]
          ),
          [TE.store]
        ),
        [AE.store]
      ),
      [OE.store, PE.store]
    ),
    xE =
      ((LE.prototype._o = function (t, e) {
        return ME(t)
          .get(e)
          .next(function (t) {
            if (t)
              return {
                id: (t = t).bundleId,
                createTime: Bw(t.createTime),
                version: t.version
              };
          });
      }),
      (LE.prototype.fo = function (t, e) {
        return ME(t).put({
          bundleId: (e = e).id,
          createTime: qw(vm(e.createTime)),
          version: e.version
        });
      }),
      (LE.prototype.wo = function (t, e) {
        return FE(t)
          .get(e)
          .next(function (t) {
            if (t)
              return {
                name: (t = t).name,
                query: zw(t.bundledQuery),
                readTime: Bw(t.readTime)
              };
          });
      }),
      (LE.prototype.Eo = function (t, e) {
        return FE(t).put({
          name: (e = e).name,
          readTime: qw(vm(e.readTime)),
          bundledQuery: e.bundledQuery
        });
      }),
      LE);
  function LE(t) {
    this.serializer = t;
  }
  function ME(t) {
    return JE.Zs(t, OE.store);
  }
  function FE(t) {
    return JE.Zs(t, PE.store);
  }
  var UE =
    ((jE.prototype.Lr = function (t, e) {
      var n = this;
      if (this.To.has(e)) return M_.resolve();
      var r = e.J(),
        i = e.G();
      t.ss(function () {
        n.To.add(e);
      });
      i = { collectionId: r, parent: Dw(i) };
      return VE(t).put(i);
    }),
    (jE.prototype.Ps = function (t, i) {
      var o = [],
        e = IDBKeyRange.bound([i, ''], [oy(i), ''], !1, !0);
      return VE(t)
        .hi(e)
        .next(function (t) {
          for (var e = 0, n = t; e < n.length; e++) {
            var r = n[e];
            if (r.collectionId !== i) break;
            o.push(Lw(r.parent));
          }
          return o;
        });
    }),
    jE);
  function jE() {
    this.To = new hE();
  }
  function VE(t) {
    return JE.Zs(t, AE.store);
  }
  var qE =
      ((KE.prototype.next = function () {
        return (this.mo += 2), this.mo;
      }),
      (KE.Io = function () {
        return new KE(0);
      }),
      (KE.Ao = function () {
        return new KE(-1);
      }),
      KE),
    BE =
      ((WE.prototype.Ro = function (n) {
        var r = this;
        return this.Po(n).next(function (t) {
          var e = new qE(t.highestTargetId);
          return (
            (t.highestTargetId = e.next()),
            r.yo(n, t).next(function () {
              return t.highestTargetId;
            })
          );
        });
      }),
      (WE.prototype.Vo = function (t) {
        return this.Po(t).next(function (t) {
          return ky.$(
            new Ay(
              t.lastRemoteSnapshotVersion.seconds,
              t.lastRemoteSnapshotVersion.nanoseconds
            )
          );
        });
      }),
      (WE.prototype.po = function (t) {
        return this.Po(t).next(function (t) {
          return t.highestListenSequenceNumber;
        });
      }),
      (WE.prototype.bo = function (e, n, r) {
        var i = this;
        return this.Po(e).next(function (t) {
          return (
            (t.highestListenSequenceNumber = n),
            r && (t.lastRemoteSnapshotVersion = r.q()),
            n > t.highestListenSequenceNumber &&
              (t.highestListenSequenceNumber = n),
            i.yo(e, t)
          );
        });
      }),
      (WE.prototype.vo = function (e, n) {
        var r = this;
        return this.So(e, n).next(function () {
          return r.Po(e).next(function (t) {
            return (t.targetCount += 1), r.Do(n, t), r.yo(e, t);
          });
        });
      }),
      (WE.prototype.Co = function (t, e) {
        return this.So(t, e);
      }),
      (WE.prototype.xo = function (e, t) {
        var n = this;
        return this.No(e, t.targetId)
          .next(function () {
            return HE(e).delete(t.targetId);
          })
          .next(function () {
            return n.Po(e);
          })
          .next(function (t) {
            return ty(0 < t.targetCount), --t.targetCount, n.yo(e, t);
          });
      }),
      (WE.prototype.Rr = function (n, r, i) {
        var o = this,
          s = 0,
          a = [];
        return HE(n)
          .di(function (t, e) {
            e = Kw(e);
            e.sequenceNumber <= r &&
              null === i.get(e.targetId) &&
              (s++, a.push(o.xo(n, e)));
          })
          .next(function () {
            return M_.Qn(a);
          })
          .next(function () {
            return s;
          });
      }),
      (WE.prototype.Ke = function (t, n) {
        return HE(t).di(function (t, e) {
          e = Kw(e);
          n(e);
        });
      }),
      (WE.prototype.Po = function (t) {
        return zE(t)
          .get(NE.key)
          .next(function (t) {
            return ty(null !== t), t;
          });
      }),
      (WE.prototype.yo = function (t, e) {
        return zE(t).put(NE.key, e);
      }),
      (WE.prototype.So = function (t, e) {
        return HE(t).put(Hw(this.serializer, e));
      }),
      (WE.prototype.Do = function (t, e) {
        var n = !1;
        return (
          t.targetId > e.highestTargetId &&
            ((e.highestTargetId = t.targetId), (n = !0)),
          t.sequenceNumber > e.highestListenSequenceNumber &&
            ((e.highestListenSequenceNumber = t.sequenceNumber), (n = !0)),
          n
        );
      }),
      (WE.prototype.Fo = function (t) {
        return this.Po(t).next(function (t) {
          return t.targetCount;
        });
      }),
      (WE.prototype.Oo = function (t, r) {
        var e = Yy(r),
          e = IDBKeyRange.bound(
            [e, Number.NEGATIVE_INFINITY],
            [e, Number.POSITIVE_INFINITY]
          ),
          i = null;
        return HE(t)
          .di({ range: e, index: SE.queryTargetsIndexName }, function (
            t,
            e,
            n
          ) {
            e = Kw(e);
            Xy(r, e.target) && ((i = e), n.done());
          })
          .next(function () {
            return i;
          });
      }),
      (WE.prototype.ko = function (n, t, r) {
        var i = this,
          o = [],
          s = GE(n);
        return (
          t.forEach(function (t) {
            var e = Dw(t.path);
            o.push(s.put(new CE(r, e))), o.push(i.Nr.Mo(n, r, t));
          }),
          M_.Qn(o)
        );
      }),
      (WE.prototype.Lo = function (n, t, r) {
        var i = this,
          o = GE(n);
        return M_.forEach(t, function (t) {
          var e = Dw(t.path);
          return M_.Qn([o.delete([r, e]), i.Nr.$o(n, r, t)]);
        });
      }),
      (WE.prototype.No = function (t, e) {
        (t = GE(t)), (e = IDBKeyRange.bound([e], [e + 1], !1, !0));
        return t.delete(e);
      }),
      (WE.prototype.Bo = function (t, e) {
        var e = IDBKeyRange.bound([e], [e + 1], !1, !0),
          t = GE(t),
          r = bg();
        return t
          .di({ range: e, fi: !0 }, function (t, e, n) {
            (t = Lw(t[1])), (t = new Dy(t));
            r = r.add(t);
          })
          .next(function () {
            return r;
          });
      }),
      (WE.prototype.Jr = function (t, e) {
        var e = Dw(e.path),
          e = IDBKeyRange.bound([e], [oy(e)], !1, !0),
          i = 0;
        return GE(t)
          .di({ index: CE.documentTargetsIndex, fi: !0, range: e }, function (
            t,
            e,
            n
          ) {
            var r = t[0];
            t[1], 0 !== r && (i++, n.done());
          })
          .next(function () {
            return 0 < i;
          });
      }),
      (WE.prototype.en = function (t, e) {
        return HE(t)
          .get(e)
          .next(function (t) {
            return t ? Kw(t) : null;
          });
      }),
      WE);
  function WE(t, e) {
    (this.Nr = t), (this.serializer = e);
  }
  function KE(t) {
    this.mo = t;
  }
  function HE(t) {
    return JE.Zs(t, SE.store);
  }
  function zE(t) {
    return JE.Zs(t, NE.store);
  }
  function GE(t) {
    return JE.Zs(t, CE.store);
  }
  var QE,
    YE =
      'Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.',
    XE = (mo(ZE, (QE = dt)), ZE),
    JE =
      (($E.Zs = function (t, e) {
        if (t instanceof XE) return Z_.Zs(t.jr, e);
        throw Zv();
      }),
      ($E.prototype.start = function () {
        var e = this;
        return this.nc()
          .then(function () {
            if (!e.isPrimary && !e.allowTabSynchronization)
              throw new Hv(Kv.FAILED_PRECONDITION, YE);
            return (
              e.sc(),
              e.ic(),
              e.rc(),
              e.runTransaction(
                'getHighestListenSequenceNumber',
                'readonly',
                function (t) {
                  return e.Zo.po(t);
                }
              )
            );
          })
          .then(function (t) {
            e.Ko = new V_(t, e.Uo);
          })
          .then(function () {
            e.Wo = !0;
          })
          .catch(function (t) {
            return e.Xo && e.Xo.close(), Promise.reject(t);
          });
      }),
      ($E.prototype.oc = function (n) {
        var t = this;
        return (
          (this.Jo = function (e) {
            return _o(t, void 0, void 0, function () {
              return wo(this, function (t) {
                return this.dr ? [2, n(e)] : [2];
              });
            });
          }),
          n(this.isPrimary)
        );
      }),
      ($E.prototype.cc = function (n) {
        var t = this;
        this.Xo.ni(function (e) {
          return _o(t, void 0, void 0, function () {
            return wo(this, function (t) {
              switch (t.label) {
                case 0:
                  return null === e.newVersion ? [4, n()] : [3, 2];
                case 1:
                  t.sent(), (t.label = 2);
                case 2:
                  return [2];
              }
            });
          });
        });
      }),
      ($E.prototype.ac = function (t) {
        var e = this;
        this.networkEnabled !== t &&
          ((this.networkEnabled = t),
          this.Ns.yi(function () {
            return _o(e, void 0, void 0, function () {
              return wo(this, function (t) {
                switch (t.label) {
                  case 0:
                    return this.dr ? [4, this.nc()] : [3, 2];
                  case 1:
                    t.sent(), (t.label = 2);
                  case 2:
                    return [2];
                }
              });
            });
          }));
      }),
      ($E.prototype.nc = function () {
        var n = this;
        return this.runTransaction(
          'updateClientMetadataAndTryBecomePrimary',
          'readwrite',
          function (e) {
            return eI(e)
              .put(
                new RE(n.clientId, Date.now(), n.networkEnabled, n.inForeground)
              )
              .next(function () {
                if (n.isPrimary)
                  return n.uc(e).next(function (t) {
                    t ||
                      ((n.isPrimary = !1),
                      n.Ns.Li(function () {
                        return n.Jo(!1);
                      }));
                  });
              })
              .next(function () {
                return n.hc(e);
              })
              .next(function (t) {
                return n.isPrimary && !t
                  ? n.lc(e).next(function () {
                      return !1;
                    })
                  : !!t &&
                      n._c(e).next(function () {
                        return !0;
                      });
              });
          }
        )
          .catch(function (t) {
            if (sw(t))
              return (
                Yv('IndexedDbPersistence', 'Failed to extend owner lease: ', t),
                n.isPrimary
              );
            if (!n.allowTabSynchronization) throw t;
            return (
              Yv(
                'IndexedDbPersistence',
                'Releasing owner lease after error during lease refresh',
                t
              ),
              !1
            );
          })
          .then(function (t) {
            n.isPrimary !== t &&
              n.Ns.Li(function () {
                return n.Jo(t);
              }),
              (n.isPrimary = t);
          });
      }),
      ($E.prototype.uc = function (t) {
        var e = this;
        return tI(t)
          .get(pE.key)
          .next(function (t) {
            return M_.resolve(e.fc(t));
          });
      }),
      ($E.prototype.dc = function (t) {
        return eI(t).delete(this.clientId);
      }),
      ($E.prototype.wc = function () {
        return _o(this, void 0, void 0, function () {
          var e,
            n,
            r,
            i,
            o = this;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return !this.isPrimary || this.Ec(this.Ho, 18e5)
                  ? [3, 2]
                  : ((this.Ho = Date.now()),
                    [
                      4,
                      this.runTransaction(
                        'maybeGarbageCollectMultiClientState',
                        'readwrite-primary',
                        function (t) {
                          var r = $E.Zs(t, RE.store);
                          return r.hi().next(function (t) {
                            var e = o.Tc(t, 18e5),
                              n = t.filter(function (t) {
                                return -1 === e.indexOf(t);
                              });
                            return M_.forEach(n, function (t) {
                              return r.delete(t.clientId);
                            }).next(function () {
                              return n;
                            });
                          });
                        }
                      ).catch(function () {
                        return [];
                      })
                    ]);
              case 1:
                if (((e = t.sent()), this.ec))
                  for (n = 0, r = e; n < r.length; n++)
                    (i = r[n]), this.ec.removeItem(this.mc(i.clientId));
                t.label = 2;
              case 2:
                return [2];
            }
          });
        });
      }),
      ($E.prototype.rc = function () {
        var t = this;
        this.zo = this.Ns.Ks('client_metadata_refresh', 4e3, function () {
          return t
            .nc()
            .then(function () {
              return t.wc();
            })
            .then(function () {
              return t.rc();
            });
        });
      }),
      ($E.prototype.fc = function (t) {
        return !!t && t.ownerId === this.clientId;
      }),
      ($E.prototype.hc = function (e) {
        var r = this;
        return this.Qo
          ? M_.resolve(!0)
          : tI(e)
              .get(pE.key)
              .next(function (t) {
                if (
                  null !== t &&
                  r.Ec(t.leaseTimestampMs, 5e3) &&
                  !r.Ic(t.ownerId)
                ) {
                  if (r.fc(t) && r.networkEnabled) return !0;
                  if (!r.fc(t)) {
                    if (!t.allowTabSynchronization)
                      throw new Hv(Kv.FAILED_PRECONDITION, YE);
                    return !1;
                  }
                }
                return (
                  !(!r.networkEnabled || !r.inForeground) ||
                  eI(e)
                    .hi()
                    .next(function (t) {
                      return (
                        void 0 ===
                        r.Tc(t, 5e3).find(function (t) {
                          if (r.clientId !== t.clientId) {
                            var e = !r.networkEnabled && t.networkEnabled,
                              n = !r.inForeground && t.inForeground,
                              t = r.networkEnabled === t.networkEnabled;
                            if (e || (n && t)) return !0;
                          }
                          return !1;
                        })
                      );
                    })
                );
              })
              .next(function (t) {
                return (
                  r.isPrimary !== t &&
                    Yv(
                      'IndexedDbPersistence',
                      'Client ' +
                        (t ? 'is' : 'is not') +
                        ' eligible for a primary lease.'
                    ),
                  t
                );
              });
      }),
      ($E.prototype.Ac = function () {
        return _o(this, void 0, void 0, function () {
          var n = this;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return (
                  (this.Wo = !1),
                  this.Rc(),
                  this.zo && (this.zo.cancel(), (this.zo = null)),
                  this.Pc(),
                  this.yc(),
                  [
                    4,
                    this.Xo.runTransaction(
                      'shutdown',
                      'readwrite',
                      [pE.store, RE.store],
                      function (t) {
                        var e = new XE(t, V_.xs);
                        return n.lc(e).next(function () {
                          return n.dc(e);
                        });
                      }
                    )
                  ]
                );
              case 1:
                return t.sent(), this.Xo.close(), this.gc(), [2];
            }
          });
        });
      }),
      ($E.prototype.Tc = function (t, e) {
        var n = this;
        return t.filter(function (t) {
          return n.Ec(t.updateTimeMs, e) && !n.Ic(t.clientId);
        });
      }),
      ($E.prototype.Vc = function () {
        var e = this;
        return this.runTransaction('getActiveClients', 'readonly', function (
          t
        ) {
          return eI(t)
            .hi()
            .next(function (t) {
              return e.Tc(t, 18e5).map(function (t) {
                return t.clientId;
              });
            });
        });
      }),
      Object.defineProperty($E.prototype, 'dr', {
        get: function () {
          return this.Wo;
        },
        enumerable: !1,
        configurable: !0
      }),
      ($E.prototype.bc = function (t) {
        return Gw.Or(t, this.serializer, this.us, this.Nr);
      }),
      ($E.prototype.vc = function () {
        return this.Zo;
      }),
      ($E.prototype.Sc = function () {
        return this.os;
      }),
      ($E.prototype.Dc = function () {
        return this.us;
      }),
      ($E.prototype.Cc = function () {
        return this.tc;
      }),
      ($E.prototype.runTransaction = function (e, n, r) {
        var i = this;
        Yv('IndexedDbPersistence', 'Starting transaction:', e);
        var o,
          t = 'readonly' === n ? 'readonly' : 'readwrite';
        return this.Xo.runTransaction(e, t, DE, function (t) {
          return (
            (o = new XE(t, i.Ko ? i.Ko.next() : V_.xs)),
            'readwrite-primary' === n
              ? i
                  .uc(o)
                  .next(function (t) {
                    return !!t || i.hc(o);
                  })
                  .next(function (t) {
                    if (!t)
                      throw (
                        (Xv(
                          "Failed to obtain primary lease for action '" +
                            e +
                            "'."
                        ),
                        (i.isPrimary = !1),
                        i.Ns.Li(function () {
                          return i.Jo(!1);
                        }),
                        new Hv(Kv.FAILED_PRECONDITION, F_))
                      );
                    return r(o);
                  })
                  .next(function (t) {
                    return i._c(o).next(function () {
                      return t;
                    });
                  })
              : i.xc(o).next(function () {
                  return r(o);
                })
          );
        }).then(function (t) {
          return o.rs(), t;
        });
      }),
      ($E.prototype.xc = function (t) {
        var e = this;
        return tI(t)
          .get(pE.key)
          .next(function (t) {
            if (
              null !== t &&
              e.Ec(t.leaseTimestampMs, 5e3) &&
              !e.Ic(t.ownerId) &&
              !e.fc(t) &&
              !(
                e.Qo ||
                (e.allowTabSynchronization && t.allowTabSynchronization)
              )
            )
              throw new Hv(Kv.FAILED_PRECONDITION, YE);
          });
      }),
      ($E.prototype._c = function (t) {
        var e = new pE(this.clientId, this.allowTabSynchronization, Date.now());
        return tI(t).put(pE.key, e);
      }),
      ($E.Hs = function () {
        return Z_.Hs();
      }),
      ($E.prototype.lc = function (t) {
        var e = this,
          n = tI(t);
        return n.get(pE.key).next(function (t) {
          return e.fc(t)
            ? (Yv('IndexedDbPersistence', 'Releasing primary lease.'),
              n.delete(pE.key))
            : M_.resolve();
        });
      }),
      ($E.prototype.Ec = function (t, e) {
        var n = Date.now();
        return !(
          t < n - e ||
          (n < t &&
            (Xv(
              'Detected an update time that is in the future: ' + t + ' > ' + n
            ),
            1))
        );
      }),
      ($E.prototype.sc = function () {
        var t = this;
        null !== this.document &&
          'function' == typeof this.document.addEventListener &&
          ((this.Go = function () {
            t.Ns.yi(function () {
              return (
                (t.inForeground = 'visible' === t.document.visibilityState),
                t.nc()
              );
            });
          }),
          this.document.addEventListener('visibilitychange', this.Go),
          (this.inForeground = 'visible' === this.document.visibilityState));
      }),
      ($E.prototype.Pc = function () {
        this.Go &&
          (this.document.removeEventListener('visibilitychange', this.Go),
          (this.Go = null));
      }),
      ($E.prototype.ic = function () {
        var t,
          e = this;
        'function' ==
          typeof (null === (t = this.window) || void 0 === t
            ? void 0
            : t.addEventListener) &&
          ((this.jo = function () {
            e.Rc(),
              e.Ns.yi(function () {
                return e.Ac();
              });
          }),
          this.window.addEventListener('unload', this.jo));
      }),
      ($E.prototype.yc = function () {
        this.jo &&
          (this.window.removeEventListener('unload', this.jo),
          (this.jo = null));
      }),
      ($E.prototype.Ic = function (t) {
        try {
          var e =
            null !==
            (null === (e = this.ec) || void 0 === e
              ? void 0
              : e.getItem(this.mc(t)));
          return (
            Yv(
              'IndexedDbPersistence',
              "Client '" +
                t +
                "' " +
                (e ? 'is' : 'is not') +
                ' zombied in LocalStorage'
            ),
            e
          );
        } catch (t) {
          return (
            Xv('IndexedDbPersistence', 'Failed to get zombied client id.', t),
            !1
          );
        }
      }),
      ($E.prototype.Rc = function () {
        if (this.ec)
          try {
            this.ec.setItem(this.mc(this.clientId), String(Date.now()));
          } catch (t) {
            Xv('Failed to set zombie client id.', t);
          }
      }),
      ($E.prototype.gc = function () {
        if (this.ec)
          try {
            this.ec.removeItem(this.mc(this.clientId));
          } catch (t) {}
      }),
      ($E.prototype.mc = function (t) {
        return 'firestore_zombie_' + this.persistenceKey + '_' + t;
      }),
      $E);
  function $E(t, e, n, r, i, o, s, a, u, c) {
    if (
      ((this.allowTabSynchronization = t),
      (this.persistenceKey = e),
      (this.clientId = n),
      (this.Ns = i),
      (this.window = o),
      (this.document = s),
      (this.Uo = u),
      (this.Qo = c),
      (this.Ko = null),
      (this.Wo = !1),
      (this.isPrimary = !1),
      (this.networkEnabled = !0),
      (this.jo = null),
      (this.inForeground = !1),
      (this.Go = null),
      (this.zo = null),
      (this.Ho = Number.NEGATIVE_INFINITY),
      (this.Jo = function (t) {
        return Promise.resolve();
      }),
      !$E.Hs())
    )
      throw new Hv(
        Kv.UNIMPLEMENTED,
        'This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.'
      );
    (this.Nr = new nI(this, r)),
      (this.Yo = e + 'main'),
      (this.serializer = new Mw(a)),
      (this.Xo = new Z_(this.Yo, 11, new lE(this.serializer))),
      (this.Zo = new BE(this.Nr, this.serializer)),
      (this.us = new UE()),
      (this.os = ((e = this.serializer), (a = this.us), new eE(e, a))),
      (this.tc = new xE(this.serializer)),
      this.window && this.window.localStorage
        ? (this.ec = this.window.localStorage)
        : ((this.ec = null),
          !1 === c &&
            Xv(
              'IndexedDbPersistence',
              'LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page.'
            ));
  }
  function ZE(t, e) {
    var n = this;
    return ((n = QE.call(this) || this).jr = t), (n.qo = e), n;
  }
  function tI(t) {
    return JE.Zs(t, pE.store);
  }
  function eI(t) {
    return JE.Zs(t, RE.store);
  }
  var nI =
    ((rI.prototype.mr = function (t) {
      var n = this.Nc(t);
      return this.db
        .vc()
        .Fo(t)
        .next(function (e) {
          return n.next(function (t) {
            return e + t;
          });
        });
    }),
    (rI.prototype.Nc = function (t) {
      var e = 0;
      return this.Ar(t, function (t) {
        e++;
      }).next(function () {
        return e;
      });
    }),
    (rI.prototype.Ke = function (t, e) {
      return this.db.vc().Ke(t, e);
    }),
    (rI.prototype.Ar = function (t, n) {
      return this.Fc(t, function (t, e) {
        return n(e);
      });
    }),
    (rI.prototype.Mo = function (t, e, n) {
      return iI(t, n);
    }),
    (rI.prototype.$o = function (t, e, n) {
      return iI(t, n);
    }),
    (rI.prototype.Rr = function (t, e, n) {
      return this.db.vc().Rr(t, e, n);
    }),
    (rI.prototype.zr = iI),
    (rI.prototype.Oc = function (t, e) {
      return (
        (r = e),
        (i = !1),
        Zw((n = t))
          .wi(function (t) {
            return Yw(n, t, r).next(function (t) {
              return t && (i = !0), M_.resolve(!t);
            });
          })
          .next(function () {
            return i;
          })
      );
      var n, r, i;
    }),
    (rI.prototype.Pr = function (n, r) {
      var i = this,
        o = this.db.Sc().oo(),
        s = [],
        a = 0;
      return this.Fc(n, function (e, t) {
        t <= r &&
          ((t = i.Oc(n, e).next(function (t) {
            if (!t)
              return (
                a++,
                o.Xn(n, e).next(function () {
                  return o.Yn(e), GE(n).delete([0, Dw(e.path)]);
                })
              );
          })),
          s.push(t));
      })
        .next(function () {
          return M_.Qn(s);
        })
        .next(function () {
          return o.apply(n);
        })
        .next(function () {
          return a;
        });
    }),
    (rI.prototype.removeTarget = function (t, e) {
      e = e.Et(t.qo);
      return this.db.vc().Co(t, e);
    }),
    (rI.prototype.kc = iI),
    (rI.prototype.Fc = function (t, r) {
      var i,
        t = GE(t),
        o = V_.xs;
      return t
        .di({ index: CE.documentTargetsIndex }, function (t, e) {
          var n = t[0],
            t = (t[1], e.path),
            e = e.sequenceNumber;
          0 === n
            ? (o !== V_.xs && r(new Dy(Lw(i)), o), (o = e), (i = t))
            : (o = V_.xs);
        })
        .next(function () {
          o !== V_.xs && r(new Dy(Lw(i)), o);
        });
    }),
    (rI.prototype.gr = function (t) {
      return this.db.Sc().ao(t);
    }),
    rI);
  function rI(t, e) {
    (this.db = t), (this.ur = new Aw(this, e));
  }
  function iI(t, e) {
    return GE(t).put(((t = t.qo), new CE(0, Dw(e.path), t)));
  }
  function oI(t, e) {
    var n = t.projectId;
    return t.I || (n += '.' + t.database), 'firestore/' + e + '/' + n + '/';
  }
  function sI(n, r) {
    void 0 === r && (r = 10240);
    var i = 0;
    return {
      read: function () {
        return _o(this, void 0, void 0, function () {
          var e;
          return wo(this, function (t) {
            return i < n.byteLength
              ? ((e = { value: n.slice(i, i + r), done: !1 }),
                [2, ((i += r), e)])
              : [2, { done: !0 }];
          });
        });
      },
      cancel: function () {
        return _o(this, void 0, void 0, function () {
          return wo(this, function (t) {
            return [2];
          });
        });
      },
      releaseLock: function () {}
    };
  }
  function aI(t, e) {
    if (t instanceof Uint8Array) return sI(t, e);
    if (t instanceof ArrayBuffer) return sI(new Uint8Array(t), e);
    if (t instanceof ReadableStream) return t.getReader();
    throw new Error(
      'Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream'
    );
  }
  function uI(t) {
    return new cm(t, !0);
  }
  var cI =
      ((dI.prototype.Mc = function () {
        return 'metadata' in this.payload;
      }),
      dI),
    hI =
      ((pI.qc = function (t, e) {
        return new pI(aI(t, 10240), e);
      }),
      (pI.prototype.close = function () {
        return this.Lc.cancel();
      }),
      (pI.prototype.getMetadata = function () {
        return _o(this, void 0, void 0, function () {
          return wo(this, function (t) {
            return [2, this.metadata.promise];
          });
        });
      }),
      (pI.prototype.Uc = function () {
        return _o(this, void 0, void 0, function () {
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return [4, this.getMetadata()];
              case 1:
                return [2, (t.sent(), this.Bc())];
            }
          });
        });
      }),
      (pI.prototype.Bc = function () {
        return _o(this, void 0, void 0, function () {
          var e, n, r;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return [4, this.Qc()];
              case 1:
                return null === (e = t.sent())
                  ? [2, null]
                  : ((r = this.$c.decode(e)),
                    (n = Number(r)),
                    isNaN(n) &&
                      this.Kc('length string (' + r + ') is not valid number'),
                    [4, this.Wc(n)]);
              case 2:
                return (r = t.sent()), [2, new cI(JSON.parse(r), e.length + n)];
            }
          });
        });
      }),
      (pI.prototype.jc = function () {
        return this.buffer.findIndex(function (t) {
          return t === '{'.charCodeAt(0);
        });
      }),
      (pI.prototype.Qc = function () {
        return _o(this, void 0, void 0, function () {
          var e, n;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return this.jc() < 0 ? [4, this.Gc()] : [3, 3];
              case 1:
                if (t.sent()) return [3, 3];
                t.label = 2;
              case 2:
                return [3, 0];
              case 3:
                return 0 === this.buffer.length
                  ? [2, null]
                  : ((e = this.jc()) < 0 &&
                      this.Kc(
                        'Reached the end of bundle when a length string is expected.'
                      ),
                    (n = this.buffer.slice(0, e)),
                    [2, ((this.buffer = this.buffer.slice(e)), n)]);
            }
          });
        });
      }),
      (pI.prototype.Wc = function (n) {
        return _o(this, void 0, void 0, function () {
          var e;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return this.buffer.length < n ? [4, this.Gc()] : [3, 3];
              case 1:
                t.sent() &&
                  this.Kc('Reached the end of bundle when more is expected.'),
                  (t.label = 2);
              case 2:
                return [3, 0];
              case 3:
                return (
                  (e = this.$c.decode(this.buffer.slice(0, n))),
                  [2, ((this.buffer = this.buffer.slice(n)), e)]
                );
            }
          });
        });
      }),
      (pI.prototype.Kc = function (t) {
        throw (this.Lc.cancel(), new Error('Invalid bundle format: ' + t));
      }),
      (pI.prototype.Gc = function () {
        return _o(this, void 0, void 0, function () {
          var e, n;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return [4, this.Lc.read()];
              case 1:
                return (
                  (e = t.sent()).done ||
                    ((n = new Uint8Array(
                      this.buffer.length + e.value.length
                    )).set(this.buffer),
                    n.set(e.value, this.buffer.length),
                    (this.buffer = n)),
                  [2, e.done]
                );
            }
          });
        });
      }),
      pI),
    lI =
      ((fI.prototype.zc = function (t) {
        return bm(this.serializer, t);
      }),
      (fI.prototype.Hc = function (t) {
        return t.metadata.exists
          ? Sm(this.serializer, t.document, !1)
          : new Mb(this.zc(t.metadata.name), this.Jc(t.metadata.readTime));
      }),
      (fI.prototype.Jc = vm),
      fI);
  function fI(t) {
    this.serializer = t;
  }
  function pI(t, e) {
    var n = this;
    (this.Lc = t),
      (this.serializer = e),
      (this.metadata = new J_()),
      (this.buffer = new Uint8Array()),
      (this.$c = new TextDecoder('utf-8')),
      this.Bc().then(
        function (t) {
          t && t.Mc()
            ? n.metadata.resolve(t.payload.metadata)
            : n.metadata.reject(
                new Error(
                  'The first element of the bundle is not a metadata, it is\n             ' +
                    JSON.stringify(null == t ? void 0 : t.payload)
                )
              );
        },
        function (t) {
          return n.metadata.reject(t);
        }
      );
  }
  function dI(t, e) {
    (this.payload = t), (this.byteLength = e);
  }
  function vI(t) {
    return {
      taskState: 'Running',
      documentsLoaded: 0,
      bytesLoaded: 0,
      totalDocuments: t.totalDocuments,
      totalBytes: t.totalBytes
    };
  }
  function yI(t, e) {
    (this.progress = t), (this.Yc = e);
  }
  var gI =
      ((_I.prototype.ta = function (t) {
        this.progress.bytesLoaded += t.byteLength;
        var e = this.progress.documentsLoaded;
        return (
          t.payload.namedQuery
            ? this.queries.push(t.payload.namedQuery)
            : t.payload.documentMetadata
            ? (this.documents.push({ metadata: t.payload.documentMetadata }),
              t.payload.documentMetadata.exists || ++e)
            : t.payload.document &&
              ((this.documents[this.documents.length - 1].document =
                t.payload.document),
              ++e),
          e !== this.progress.documentsLoaded
            ? ((this.progress.documentsLoaded = e),
              Object.assign({}, this.progress))
            : null
        );
      }),
      (_I.prototype.ea = function (t) {
        for (
          var e = new Map(), n = new lI(this.serializer), r = 0, i = t;
          r < i.length;
          r++
        ) {
          var o = i[r];
          if (o.metadata.queries)
            for (
              var s = n.zc(o.metadata.name), a = 0, u = o.metadata.queries;
              a < u.length;
              a++
            ) {
              var c = u[a],
                h = (e.get(c) || bg()).add(s);
              e.set(c, h);
            }
        }
        return e;
      }),
      (_I.prototype.complete = function () {
        return _o(this, void 0, void 0, function () {
          var e, n, r, i;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return [
                  4,
                  (function (f, p, d) {
                    return _o(this, void 0, void 0, function () {
                      var n, e, r, i, o, s, a, u, c, h, l;
                      return wo(this, function (t) {
                        switch (t.label) {
                          case 0:
                            for (
                              e = new lI((n = f).serializer),
                                r = bg(),
                                i = pg,
                                o = gg,
                                s = 0,
                                a = p;
                              s < a.length;
                              s++
                            )
                              (u = a[s]),
                                (c = e.zc(u.metadata.name)),
                                u.document && (r = r.add(c)),
                                (i = i.At(c, e.Hc(u))),
                                (o = o.At(c, e.Jc(u.metadata.readTime)));
                            return (
                              (h = n.na.oo({ co: !0 })),
                              [4, NI(n, Xb(Wb(Ry.nt('__bundle__/docs/' + d))))]
                            );
                          case 1:
                            return (
                              (l = t.sent()),
                              [
                                2,
                                n.persistence.runTransaction(
                                  'Apply bundle documents',
                                  'readwrite',
                                  function (e) {
                                    return CI(e, h, i, ky.min(), o)
                                      .next(function (t) {
                                        return h.apply(e), t;
                                      })
                                      .next(function (t) {
                                        return n.Zo.No(e, l.targetId)
                                          .next(function () {
                                            return n.Zo.ko(e, r, l.targetId);
                                          })
                                          .next(function () {
                                            return n.sa.ws(e, t);
                                          });
                                      });
                                  }
                                )
                              ]
                            );
                        }
                      });
                    });
                  })(this.Zc, this.documents, this.Xc.id)
                ];
              case 1:
                (e = t.sent()),
                  (n = this.ea(this.documents)),
                  (r = 0),
                  (i = this.queries),
                  (t.label = 2);
              case 2:
                return r < i.length
                  ? ((i = i[r]),
                    [
                      4,
                      (function (e, i, o) {
                        return (
                          void 0 === o && (o = bg()),
                          _o(this, void 0, void 0, function () {
                            var n, r;
                            return wo(this, function (t) {
                              switch (t.label) {
                                case 0:
                                  return [4, NI(e, Xb(zw(i.bundledQuery)))];
                                case 1:
                                  return (
                                    (n = t.sent()),
                                    [
                                      2,
                                      (r = e).persistence.runTransaction(
                                        'Save named query',
                                        'readwrite',
                                        function (t) {
                                          var e = vm(i.readTime);
                                          if (0 <= n.wt.u(e))
                                            return r.tc.Eo(t, i);
                                          e = n.Tt(sy.h, e);
                                          return (
                                            (r.ra = r.ra.At(e.targetId, e)),
                                            r.Zo.Co(t, e)
                                              .next(function () {
                                                return r.Zo.No(t, n.targetId);
                                              })
                                              .next(function () {
                                                return r.Zo.ko(
                                                  t,
                                                  o,
                                                  n.targetId
                                                );
                                              })
                                              .next(function () {
                                                return r.tc.Eo(t, i);
                                              })
                                          );
                                        }
                                      )
                                    ]
                                  );
                              }
                            });
                          })
                        );
                      })(this.Zc, i, n.get(i.name))
                    ])
                  : [3, 5];
              case 3:
                t.sent(), (t.label = 4);
              case 4:
                return r++, [3, 2];
              case 5:
                return [
                  2,
                  ((this.progress.taskState = 'Success'),
                  new yI(Object.assign({}, this.progress), e))
                ];
            }
          });
        });
      }),
      _I),
    mI =
      ((bI.prototype.wr = function (e) {
        var n = this;
        return this.persistence.runTransaction(
          'Collect garbage',
          'readwrite-primary',
          function (t) {
            return e.yr(t, n.ra);
          }
        );
      }),
      bI);
  function bI(t, e, n, r) {
    (this.persistence = t),
      (this.ia = e),
      (this.serializer = r),
      (this.ra = new ig(ry)),
      (this.oa = new L_(Yy, Xy)),
      (this.ca = ky.min()),
      (this.cs = t.bc(n)),
      (this.na = t.Sc()),
      (this.Zo = t.vc()),
      (this.sa = new U_(this.na, this.cs, this.persistence.Dc())),
      (this.tc = t.Cc()),
      this.ia.pr(this.sa);
  }
  function _I(t, e, n) {
    (this.Xc = t),
      (this.Zc = e),
      (this.serializer = n),
      (this.queries = []),
      (this.documents = []),
      (this.progress = vI(t));
  }
  function wI(t, e, n, r) {
    return new mI(t, e, n, r);
  }
  function EI(i, o) {
    return _o(this, void 0, void 0, function () {
      var e, n, m, r;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (
              (n = (e = i).cs),
              (m = e.sa),
              [
                4,
                e.persistence.runTransaction(
                  'Handle user change',
                  'readonly',
                  function (y) {
                    var g;
                    return e.cs
                      .Qr(y)
                      .next(function (t) {
                        return (
                          (g = t),
                          (n = e.persistence.bc(o)),
                          (m = new U_(e.na, n, e.persistence.Dc())),
                          n.Qr(y)
                        );
                      })
                      .next(function (t) {
                        for (
                          var e = [], n = [], r = bg(), i = 0, o = g;
                          i < o.length;
                          i++
                        ) {
                          var s = o[i];
                          e.push(s.batchId);
                          for (var a = 0, u = s.mutations; a < u.length; a++)
                            var c = u[a], r = r.add(c.key);
                        }
                        for (var h = 0, l = t; h < l.length; h++) {
                          var f = l[h];
                          n.push(f.batchId);
                          for (var p = 0, d = f.mutations; p < d.length; p++) {
                            var v = d[p];
                            r = r.add(v.key);
                          }
                        }
                        return m.ds(y, r).next(function (t) {
                          return { aa: t, ua: e, ha: n };
                        });
                      });
                  }
                )
              ]
            );
          case 1:
            return (
              (r = t.sent()), [2, ((e.cs = n), (e.sa = m), e.ia.pr(e.sa), r)]
            );
        }
      });
    });
  }
  function II(t, h) {
    var l = t;
    return l.persistence.runTransaction(
      'Acknowledge batch',
      'readwrite-primary',
      function (t) {
        var e,
          r,
          i,
          o,
          s,
          n,
          a,
          u = h.batch.keys(),
          c = l.na.oo({ co: !0 });
        return (
          (e = l),
          (r = t),
          (o = c),
          (s = (i = h).batch),
          (n = s.keys()),
          (a = M_.resolve()),
          n.forEach(function (n) {
            a = a
              .next(function () {
                return o.Xn(r, n);
              })
              .next(function (t) {
                var e = t,
                  t = i.Cn.get(n);
                ty(null !== t),
                  (!e || e.version.u(t) < 0) &&
                    (e = s.pn(n, e, i)) &&
                    o.zn(e, i.Dn);
              });
          }),
          a
            .next(function () {
              return e.cs.Wr(r, s);
            })
            .next(function () {
              return c.apply(t);
            })
            .next(function () {
              return l.cs.Hr(t);
            })
            .next(function () {
              return l.sa.ds(t, u);
            })
        );
      }
    );
  }
  function TI(t) {
    var e = t;
    return e.persistence.runTransaction(
      'Get last remote snapshot version',
      'readonly',
      function (t) {
        return e.Zo.Vo(t);
      }
    );
  }
  function SI(t, r) {
    var u = t,
      c = r.wt,
      h = u.ra;
    return u.persistence
      .runTransaction('Apply remote event', 'readwrite-primary', function (s) {
        var t = u.na.oo({ co: !0 });
        h = u.ra;
        var a = [];
        r.ce.forEach(function (t, e) {
          var n,
            r,
            i,
            o = h.get(e);
          o &&
            (a.push(
              u.Zo.Lo(s, t.Ee, e).next(function () {
                return u.Zo.ko(s, t.de, e);
              })
            ),
            0 < (i = t.resumeToken).o() &&
              ((n = o.Tt(i, c).Et(s.qo)),
              (h = h.At(e, n)),
              (r = o),
              (i = t),
              ty(0 < (o = n).resumeToken.o()),
              (0 === r.resumeToken.o() ||
                3e8 <= o.wt.B() - r.wt.B() ||
                0 < i.de.size + i.we.size + i.Ee.size) &&
                a.push(u.Zo.Co(s, n))));
        });
        var e,
          n = pg;
        return (
          r.ue.forEach(function (t, e) {
            r.he.has(t) && a.push(u.persistence.Nr.kc(s, t));
          }),
          a.push(
            CI(s, t, r.ue, c, void 0).next(function (t) {
              n = t;
            })
          ),
          c.isEqual(ky.min()) ||
            ((e = u.Zo.Vo(s).next(function (t) {
              return u.Zo.bo(s, s.qo, c);
            })),
            a.push(e)),
          M_.Qn(a)
            .next(function () {
              return t.apply(s);
            })
            .next(function () {
              return u.sa.ws(s, n);
            })
        );
      })
      .then(function (t) {
        return (u.ra = h), t;
      });
  }
  function CI(t, s, e, a, u) {
    var n = bg();
    return (
      e.forEach(function (t) {
        return (n = n.add(t));
      }),
      s.getEntries(t, n).next(function (i) {
        var o = pg;
        return (
          e.forEach(function (t, e) {
            var n = i.get(t),
              r = (null == u ? void 0 : u.get(t)) || a;
            e instanceof Mb && e.version.isEqual(ky.min())
              ? (s.Yn(t, r), (o = o.At(t, e)))
              : null == n ||
                0 < e.version.u(n.version) ||
                (0 === e.version.u(n.version) && n.hasPendingWrites)
              ? (s.zn(e, r), (o = o.At(t, e)))
              : Yv(
                  'LocalStore',
                  'Ignoring outdated watch update for ',
                  t,
                  '. Current version:',
                  n.version,
                  ' Watch version:',
                  e.version
                );
          }),
          o
        );
      })
    );
  }
  function NI(t, r) {
    var i = t;
    return i.persistence
      .runTransaction('Allocate target', 'readwrite', function (e) {
        var n;
        return i.Zo.Oo(e, r).next(function (t) {
          return t
            ? ((n = t), M_.resolve(n))
            : i.Zo.Ro(e).next(function (t) {
                return (
                  (n = new tg(r, t, 0, e.qo)),
                  i.Zo.vo(e, n).next(function () {
                    return n;
                  })
                );
              });
        });
      })
      .then(function (t) {
        var e = i.ra.get(t.targetId);
        return (
          (null === e || 0 < t.wt.u(e.wt)) &&
            ((i.ra = i.ra.At(t.targetId, t)), i.oa.set(r, t.targetId)),
          t
        );
      });
  }
  function AI(i, o, s) {
    return _o(this, void 0, void 0, function () {
      var e, n, r;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            (n = (e = i).ra.get(o)),
              (r = s ? 'readwrite' : 'readwrite-primary'),
              (t.label = 1);
          case 1:
            return (
              t.trys.push([1, 4, , 5]),
              s
                ? [3, 3]
                : [
                    4,
                    e.persistence.runTransaction('Release target', r, function (
                      t
                    ) {
                      return e.persistence.Nr.removeTarget(t, n);
                    })
                  ]
            );
          case 2:
            t.sent(), (t.label = 3);
          case 3:
            return [3, 5];
          case 4:
            if (!sw((r = t.sent()))) throw r;
            return (
              Yv(
                'LocalStore',
                'Failed to update sequence numbers for target ' + o + ': ' + r
              ),
              [3, 5]
            );
          case 5:
            return (e.ra = e.ra.remove(o)), e.oa.delete(n.target), [2];
        }
      });
    });
  }
  function kI(t, o, s) {
    var a = t,
      u = ky.min(),
      c = bg();
    return a.persistence.runTransaction('Execute query', 'readonly', function (
      e
    ) {
      return (
        (t = a),
        (n = e),
        (r = Xb(o)),
        (void 0 !== (t = (i = t).oa.get(r))
          ? M_.resolve(i.ra.get(t))
          : i.Zo.Oo(n, r)
        )
          .next(function (t) {
            if (t)
              return (
                (u = t.lastLimboFreeSnapshotVersion),
                a.Zo.Bo(e, t.targetId).next(function (t) {
                  c = t;
                })
              );
          })
          .next(function () {
            return a.ia.Ts(e, o, s ? u : ky.min(), s ? c : bg());
          })
          .next(function (t) {
            return { documents: t, la: c };
          })
      );
      var t, n, r, i;
    });
  }
  function RI(t, e) {
    var n = t,
      r = n.Zo,
      t = n.ra.get(e);
    return t
      ? Promise.resolve(t.target)
      : n.persistence.runTransaction('Get target data', 'readonly', function (
          t
        ) {
          return r.en(t, e).next(function (t) {
            return t ? t.target : null;
          });
        });
  }
  function OI(t) {
    var s = t;
    return s.persistence
      .runTransaction('Get new document changes', 'readonly', function (t) {
        return (
          (e = s.na),
          (n = t),
          (t = s.ca),
          (r = e),
          (i = pg),
          (o = jw(t)),
          (t = sE(n)),
          (n = IDBKeyRange.lowerBound(o, !0)),
          t
            .di({ index: IE.readTimeIndex, range: n }, function (t, e) {
              var n = Fw(r.serializer, e);
              (i = i.At(n.key, n)), (o = e.readTime);
            })
            .next(function () {
              return { Yc: i, readTime: Vw(o) };
            })
        );
        var e, n, r, i, o;
      })
      .then(function (t) {
        var e = t.Yc,
          t = t.readTime;
        return (s.ca = t), e;
      });
  }
  function PI(n) {
    return _o(this, void 0, void 0, function () {
      var e;
      return wo(this, function (t) {
        return [
          2,
          (e = n).persistence
            .runTransaction(
              'Synchronize last document change read time',
              'readonly',
              function (t) {
                return (
                  (t = sE(t)),
                  (r = ky.min()),
                  t
                    .di({ index: IE.readTimeIndex, reverse: !0 }, function (
                      t,
                      e,
                      n
                    ) {
                      e.readTime && (r = Vw(e.readTime)), n.done();
                    })
                    .next(function () {
                      return r;
                    })
                );
                var r;
              }
            )
            .then(function (t) {
              e.ca = t;
            })
        ];
      });
    });
  }
  function DI(e) {
    return _o(this, void 0, void 0, function () {
      return wo(this, function (t) {
        if (e.code !== Kv.FAILED_PRECONDITION || e.message !== F_) throw e;
        return Yv('LocalStore', 'Unexpectedly lost primary lease'), [2];
      });
    });
  }
  function xI(t, e, n, r, i) {
    var o = this;
    (this.Zc = t),
      (this.eu = e),
      (this.Ei = n),
      (this.nu = {}),
      (this.su = []),
      (this.iu = new Map()),
      (this.ru = new Set()),
      (this.ou = []),
      (this.cu = i),
      this.cu.au(function (t) {
        n.yi(function () {
          return _o(o, void 0, void 0, function () {
            return wo(this, function (t) {
              switch (t.label) {
                case 0:
                  return eT(this)
                    ? (Yv(
                        'RemoteStore',
                        'Restarting streams for network reachability change.'
                      ),
                      [
                        4,
                        (function (n) {
                          return _o(this, void 0, void 0, function () {
                            var e;
                            return wo(this, function (t) {
                              switch (t.label) {
                                case 0:
                                  return (e = n).ru.add(4), [4, QI(e)];
                                case 1:
                                  return (
                                    t.sent(),
                                    e.uu.set('Unknown'),
                                    e.ru.delete(4),
                                    [4, GI(e)]
                                  );
                                case 2:
                                  return t.sent(), [2];
                              }
                            });
                          });
                        })(this)
                      ])
                    : [3, 2];
                case 1:
                  t.sent(), (t.label = 2);
                case 2:
                  return [2];
              }
            });
          });
        });
      }),
      (this.uu = new qI(n, r));
  }
  var LI,
    MI,
    FI,
    vt =
      ((zI.prototype.Ta = function () {
        return 1 === this.state || 2 === this.state || 4 === this.state;
      }),
      (zI.prototype.ma = function () {
        return 2 === this.state;
      }),
      (zI.prototype.start = function () {
        3 !== this.state ? this.auth() : this.Ia();
      }),
      (zI.prototype.stop = function () {
        return _o(this, void 0, void 0, function () {
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return this.Ta() ? [4, this.close(0)] : [3, 2];
              case 1:
                t.sent(), (t.label = 2);
              case 2:
                return [2];
            }
          });
        });
      }),
      (zI.prototype.Aa = function () {
        (this.state = 0), this.Ci.reset();
      }),
      (zI.prototype.Ra = function () {
        var t = this;
        this.ma() &&
          null === this.Ea &&
          (this.Ea = this.Ns.Ks(this._a, 6e4, function () {
            return t.Pa();
          }));
      }),
      (zI.prototype.ya = function (t) {
        this.ga(), this.stream.send(t);
      }),
      (zI.prototype.Pa = function () {
        return _o(this, void 0, void 0, function () {
          return wo(this, function (t) {
            return this.ma() ? [2, this.close(0)] : [2];
          });
        });
      }),
      (zI.prototype.ga = function () {
        this.Ea && (this.Ea.cancel(), (this.Ea = null));
      }),
      (zI.prototype.close = function (e, n) {
        return _o(this, void 0, void 0, function () {
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return (
                  this.ga(),
                  this.Ci.cancel(),
                  this.wa++,
                  3 !== e
                    ? this.Ci.reset()
                    : n && n.code === Kv.RESOURCE_EXHAUSTED
                    ? (Xv(n.toString()),
                      Xv(
                        'Using maximum backoff delay to prevent overloading the backend.'
                      ),
                      this.Ci.qs())
                    : n && n.code === Kv.UNAUTHENTICATED && this.da.v(),
                  null !== this.stream &&
                    (this.Va(), this.stream.close(), (this.stream = null)),
                  (this.state = e),
                  [4, this.listener.pa(n)]
                );
              case 1:
                return t.sent(), [2];
            }
          });
        });
      }),
      (zI.prototype.Va = function () {}),
      (zI.prototype.auth = function () {
        var n = this;
        this.state = 1;
        var t = this.ba(this.wa),
          e = this.wa;
        this.da.getToken().then(
          function (t) {
            n.wa === e && n.va(t);
          },
          function (e) {
            t(function () {
              var t = new Hv(
                Kv.UNKNOWN,
                'Fetching auth token failed: ' + e.message
              );
              return n.Sa(t);
            });
          }
        );
      }),
      (zI.prototype.va = function (t) {
        var e = this,
          n = this.ba(this.wa);
        (this.stream = this.Da(t)),
          this.stream.Ca(function () {
            n(function () {
              return (e.state = 2), e.listener.Ca();
            });
          }),
          this.stream.pa(function (t) {
            n(function () {
              return e.Sa(t);
            });
          }),
          this.stream.onMessage(function (t) {
            n(function () {
              return e.onMessage(t);
            });
          });
      }),
      (zI.prototype.Ia = function () {
        var t = this;
        (this.state = 4),
          this.Ci.Us(function () {
            return _o(t, void 0, void 0, function () {
              return wo(this, function (t) {
                return (this.state = 0), this.start(), [2];
              });
            });
          });
      }),
      (zI.prototype.Sa = function (t) {
        return (
          Yv('PersistentStream', 'close with error: ' + t),
          (this.stream = null),
          this.close(3, t)
        );
      }),
      (zI.prototype.ba = function (e) {
        var n = this;
        return function (t) {
          n.Ns.yi(function () {
            return n.wa === e
              ? t()
              : (Yv(
                  'PersistentStream',
                  'stream callback skipped by getCloseGuardedDispatcher.'
                ),
                Promise.resolve());
          });
        };
      }),
      zI),
    UI =
      (mo(HI, (FI = vt)),
      (HI.prototype.Da = function (t) {
        return this.fa.xa('Listen', t);
      }),
      (HI.prototype.onMessage = function (t) {
        this.Ci.reset();
        var e = (function (t, e) {
            if ('targetChange' in e) {
              e.targetChange;
              var n =
                  'NO_CHANGE' ===
                  (o = e.targetChange.targetChangeType || 'NO_CHANGE')
                    ? 0
                    : 'ADD' === o
                    ? 1
                    : 'REMOVE' === o
                    ? 2
                    : 'CURRENT' === o
                    ? 3
                    : 'RESET' === o
                    ? 4
                    : Zv(),
                r = e.targetChange.targetIds || [],
                i =
                  ((s = e.targetChange.resumeToken),
                  t.nn
                    ? (ty(void 0 === s || 'string' == typeof s),
                      sy.fromBase64String(s || ''))
                    : (ty(void 0 === s || s instanceof Uint8Array),
                      sy.fromUint8Array(s || new Uint8Array()))),
                o =
                  (a = e.targetChange.cause) &&
                  ((u = void 0 === (c = a).code ? Kv.UNKNOWN : rg(c.code)),
                  new Hv(u, c.message || '')),
                s = new Ag(n, r, i, o || null);
            } else if ('documentChange' in e) {
              e.documentChange,
                (n = e.documentChange).document,
                n.document.name,
                n.document.updateTime,
                (r = bm(t, n.document.name)),
                (i = vm(n.document.updateTime));
              var a = new Cb({ mapValue: { fields: n.document.fields } }),
                u = ((o = new Lb(r, i, a, {})), n.targetIds || []),
                c = n.removedTargetIds || [];
              s = new Cg(u, c, o.key, o);
            } else if ('documentDelete' in e)
              e.documentDelete,
                (n = e.documentDelete).document,
                (r = bm(t, n.document)),
                (i = n.readTime ? vm(n.readTime) : ky.min()),
                (a = new Mb(r, i)),
                (o = n.removedTargetIds || []),
                (s = new Cg([], o, a.key, a));
            else if ('documentRemove' in e)
              e.documentRemove,
                (n = e.documentRemove).document,
                (r = bm(t, n.document)),
                (i = n.removedTargetIds || []),
                (s = new Cg([], i, r, null));
            else {
              if (!('filter' in e)) return Zv();
              e.filter;
              e = e.filter;
              e.targetId,
                (n = e.count || 0),
                (r = new $y(n)),
                (i = e.targetId),
                (s = new Ng(i, r));
            }
            return s;
          })(this.serializer, t),
          t = (function (t) {
            if (!('targetChange' in t)) return ky.min();
            t = t.targetChange;
            return (!t.targetIds || !t.targetIds.length) && t.readTime
              ? vm(t.readTime)
              : ky.min();
          })(t);
        return this.listener.Na(e, t);
      }),
      (HI.prototype.Fa = function (t) {
        var e,
          n,
          r,
          i = {};
        (i.database = Em(this.serializer)),
          (i.addTarget =
            ((e = this.serializer),
            ((r = Jy((r = (n = t).target))
              ? { documents: Am(e, r) }
              : { query: km(e, r) }).targetId = n.targetId),
            0 < n.resumeToken.o()
              ? (r.resumeToken = dm(e, n.resumeToken))
              : 0 < n.wt.u(ky.min()) && (r.readTime = pm(e, n.wt.q())),
            r));
        var o,
          t =
            (this.serializer,
            (o = t),
            null ==
            (t = (function () {
              switch (o.dt) {
                case 0:
                  return null;
                case 1:
                  return 'existence-filter-mismatch';
                case 2:
                  return 'limbo-document';
                default:
                  return Zv();
              }
            })())
              ? null
              : { 'goog-listen-tags': t });
        t && (i.labels = t), this.ya(i);
      }),
      (HI.prototype.Oa = function (t) {
        var e = {};
        (e.database = Em(this.serializer)), (e.removeTarget = t), this.ya(e);
      }),
      HI),
    jI =
      (mo(KI, (MI = vt)),
      Object.defineProperty(KI.prototype, 'Ma', {
        get: function () {
          return this.ka;
        },
        enumerable: !1,
        configurable: !0
      }),
      (KI.prototype.start = function () {
        (this.ka = !1),
          (this.lastStreamToken = void 0),
          MI.prototype.start.call(this);
      }),
      (KI.prototype.Va = function () {
        this.ka && this.La([]);
      }),
      (KI.prototype.Da = function (t) {
        return this.fa.xa('Write', t);
      }),
      (KI.prototype.onMessage = function (t) {
        if (
          (ty(!!t.streamToken), (this.lastStreamToken = t.streamToken), this.ka)
        ) {
          this.Ci.reset();
          var e =
              ((n = t.writeResults),
              (r = t.commitTime),
              n && 0 < n.length
                ? (ty(void 0 !== r),
                  n.map(function (t) {
                    return (function (t, e) {
                      var n = t.updateTime ? vm(t.updateTime) : vm(e);
                      n.isEqual(ky.min()) && (n = vm(e));
                      e = null;
                      return (
                        t.transformResults &&
                          0 < t.transformResults.length &&
                          (e = t.transformResults),
                        new rb(n, e)
                      );
                    })(t, r);
                  }))
                : []),
            n = vm(t.commitTime);
          return this.listener.$a(n, e);
        }
        var n, r;
        return (
          ty(!t.writeResults || 0 === t.writeResults.length),
          (this.ka = !0),
          this.listener.Ba()
        );
      }),
      (KI.prototype.qa = function () {
        var t = {};
        (t.database = Em(this.serializer)), this.ya(t);
      }),
      (KI.prototype.La = function (t) {
        var e = this,
          t = {
            streamToken: this.lastStreamToken,
            writes: t.map(function (t) {
              return Cm(e.serializer, t);
            })
          };
        this.ya(t);
      }),
      KI),
    VI =
      (mo(WI, (LI = function () {})),
      (WI.prototype.Qa = function () {
        if (this.Ua)
          throw new Hv(
            Kv.FAILED_PRECONDITION,
            'The client has already been terminated.'
          );
      }),
      (WI.prototype.Ka = function (e, n, r) {
        var i = this;
        return (
          this.Qa(),
          this.credentials
            .getToken()
            .then(function (t) {
              return i.fa.Ka(e, n, r, t);
            })
            .catch(function (t) {
              throw (t.code === Kv.UNAUTHENTICATED && i.credentials.v(), t);
            })
        );
      }),
      (WI.prototype.Wa = function (e, n, r) {
        var i = this;
        return (
          this.Qa(),
          this.credentials
            .getToken()
            .then(function (t) {
              return i.fa.Wa(e, n, r, t);
            })
            .catch(function (t) {
              throw (t.code === Kv.UNAUTHENTICATED && i.credentials.v(), t);
            })
        );
      }),
      (WI.prototype.terminate = function () {
        this.Ua = !1;
      }),
      WI),
    qI =
      ((BI.prototype.Ja = function () {
        var t = this;
        0 === this.Ga &&
          (this.Ya('Unknown'),
          (this.za = this.Ei.Ks('online_state_timeout', 1e4, function () {
            return (
              (t.za = null),
              t.Xa("Backend didn't respond within 10 seconds."),
              t.Ya('Offline'),
              Promise.resolve()
            );
          })));
      }),
      (BI.prototype.Za = function (t) {
        'Online' === this.state
          ? this.Ya('Unknown')
          : (this.Ga++,
            1 <= this.Ga &&
              (this.tu(),
              this.Xa(
                'Connection failed 1 times. Most recent error: ' + t.toString()
              ),
              this.Ya('Offline')));
      }),
      (BI.prototype.set = function (t) {
        this.tu(), (this.Ga = 0), 'Online' === t && (this.Ha = !1), this.Ya(t);
      }),
      (BI.prototype.Ya = function (t) {
        t !== this.state && ((this.state = t), this.ja(t));
      }),
      (BI.prototype.Xa = function (t) {
        t =
          'Could not reach Cloud Firestore backend. ' +
          t +
          '\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.';
        this.Ha ? (Xv(t), (this.Ha = !1)) : Yv('OnlineStateTracker', t);
      }),
      (BI.prototype.tu = function () {
        null !== this.za && (this.za.cancel(), (this.za = null));
      }),
      BI);
  function BI(t, e) {
    (this.Ei = t),
      (this.ja = e),
      (this.state = 'Unknown'),
      (this.Ga = 0),
      (this.za = null),
      (this.Ha = !0);
  }
  function WI(t, e, n) {
    var r = this;
    return (
      ((r = LI.call(this) || this).credentials = t),
      (r.fa = e),
      (r.serializer = n),
      (r.Ua = !1),
      r
    );
  }
  function KI(t, e, n, r, i) {
    var o = this;
    return (
      ((o =
        MI.call(
          this,
          t,
          'write_stream_connection_backoff',
          'write_stream_idle',
          e,
          n,
          i
        ) || this).serializer = r),
      (o.ka = !1),
      o
    );
  }
  function HI(t, e, n, r, i) {
    var o = this;
    return (
      ((o =
        FI.call(
          this,
          t,
          'listen_stream_connection_backoff',
          'listen_stream_idle',
          e,
          n,
          i
        ) || this).serializer = r),
      o
    );
  }
  function zI(t, e, n, r, i, o) {
    (this.Ns = t),
      (this._a = n),
      (this.fa = r),
      (this.da = i),
      (this.listener = o),
      (this.state = 0),
      (this.wa = 0),
      (this.Ea = null),
      (this.stream = null),
      (this.Ci = new $_(t, e));
  }
  function GI(r) {
    return _o(this, void 0, void 0, function () {
      var e, n;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            if (!eT(r)) return [3, 4];
            (e = 0), (n = r.ou), (t.label = 1);
          case 1:
            return e < n.length ? [4, (0, n[e])(!0)] : [3, 4];
          case 2:
            t.sent(), (t.label = 3);
          case 3:
            return e++, [3, 1];
          case 4:
            return [2];
        }
      });
    });
  }
  function QI(r) {
    return _o(this, void 0, void 0, function () {
      var e, n;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            (e = 0), (n = r.ou), (t.label = 1);
          case 1:
            return e < n.length ? [4, (0, n[e])(!1)] : [3, 4];
          case 2:
            t.sent(), (t.label = 3);
          case 3:
            return e++, [3, 1];
          case 4:
            return [2];
        }
      });
    });
  }
  function YI(t, e) {
    t.iu.has(e.targetId) ||
      (t.iu.set(e.targetId, e), tT(t) ? ZI(t) : hT(t).ma() && JI(t, e));
  }
  function XI(t, e) {
    var n = t,
      t = hT(n);
    n.iu.delete(e),
      t.ma() && $I(n, e),
      0 === n.iu.size && (t.ma() ? t.Ra() : eT(n) && n.uu.set('Unknown'));
  }
  function JI(t, e) {
    t.hu.xe(e.targetId), hT(t).Fa(e);
  }
  function $I(t, e) {
    t.hu.xe(e), hT(t).Oa(e);
  }
  function ZI(e) {
    (e.hu = new Rg({
      tn: function (t) {
        return e.nu.tn(t);
      },
      en: function (t) {
        return e.iu.get(t) || null;
      }
    })),
      hT(e).start(),
      e.uu.Ja();
  }
  function tT(t) {
    return eT(t) && !hT(t).Ta() && 0 < t.iu.size;
  }
  function eT(t) {
    return 0 === t.ru.size;
  }
  function nT(t) {
    t.hu = void 0;
  }
  function rT(s, a, u) {
    return _o(this, void 0, void 0, function () {
      var n, o;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            if (
              (s.uu.set('Online'),
              !(a instanceof Ag && 2 === a.state && a.cause))
            )
              return [3, 6];
            t.label = 1;
          case 1:
            return (
              t.trys.push([1, 3, , 5]),
              [
                4,
                (function (o, s) {
                  return _o(this, void 0, void 0, function () {
                    var e, n, r, i;
                    return wo(this, function (t) {
                      switch (t.label) {
                        case 0:
                          (e = s.cause),
                            (n = 0),
                            (r = s.targetIds),
                            (t.label = 1);
                        case 1:
                          return n < r.length
                            ? ((i = r[n]),
                              o.iu.has(i) ? [4, o.nu.lu(i, e)] : [3, 3])
                            : [3, 5];
                        case 2:
                          t.sent(),
                            o.iu.delete(i),
                            o.hu.removeTarget(i),
                            (t.label = 3);
                        case 3:
                          t.label = 4;
                        case 4:
                          return n++, [3, 1];
                        case 5:
                          return [2];
                      }
                    });
                  });
                })(s, a)
              ]
            );
          case 2:
            return t.sent(), [3, 5];
          case 3:
            return (
              (n = t.sent()),
              Yv(
                'RemoteStore',
                'Failed to remove targets %s: %s ',
                a.targetIds.join(','),
                n
              ),
              [4, iT(s, n)]
            );
          case 4:
            return t.sent(), [3, 5];
          case 5:
            return [3, 13];
          case 6:
            if (
              (a instanceof Cg
                ? s.hu.Be(a)
                : a instanceof Ng
                ? s.hu.ze(a)
                : s.hu.Qe(a),
              u.isEqual(ky.min()))
            )
              return [3, 13];
            t.label = 7;
          case 7:
            return t.trys.push([7, 11, , 13]), [4, TI(s.Zc)];
          case 8:
            return (
              (o = t.sent()),
              0 <= u.u(o)
                ? [
                    4,
                    ((i = u),
                    (e = (r = s).hu.Ye(i)).ce.forEach(function (t, e) {
                      var n;
                      0 < t.resumeToken.o() &&
                        (n = r.iu.get(e)) &&
                        r.iu.set(e, n.Tt(t.resumeToken, i));
                    }),
                    e.ae.forEach(function (t) {
                      var e = r.iu.get(t);
                      e &&
                        (r.iu.set(t, e.Tt(sy.h, e.wt)),
                        $I(r, t),
                        (e = new tg(e.target, t, 1, e.sequenceNumber)),
                        JI(r, e));
                    }),
                    r.nu._u(e))
                  ]
                : [3, 10]
            );
          case 9:
            t.sent(), (t.label = 10);
          case 10:
            return [3, 13];
          case 11:
            return (
              Yv('RemoteStore', 'Failed to raise snapshot:', (o = t.sent())),
              [4, iT(s, o)]
            );
          case 12:
            return t.sent(), [3, 13];
          case 13:
            return [2];
        }
        var r, i, e;
      });
    });
  }
  function iT(n, r, i) {
    return _o(this, void 0, void 0, function () {
      var e = this;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            if (!sw(r)) throw r;
            return n.ru.add(1), [4, QI(n)];
          case 1:
            return (
              t.sent(),
              n.uu.set('Offline'),
              (i =
                i ||
                function () {
                  return TI(n.Zc);
                }),
              n.Ei.Li(function () {
                return _o(e, void 0, void 0, function () {
                  return wo(this, function (t) {
                    switch (t.label) {
                      case 0:
                        return (
                          Yv('RemoteStore', 'Retrying IndexedDB access'),
                          [4, i()]
                        );
                      case 1:
                        return t.sent(), n.ru.delete(1), [4, GI(n)];
                      case 2:
                        return t.sent(), [2];
                    }
                  });
                });
              }),
              [2]
            );
        }
      });
    });
  }
  function oT(e, n) {
    return n().catch(function (t) {
      return iT(e, t, n);
    });
  }
  function sT(u) {
    return _o(this, void 0, void 0, function () {
      var i, o, s, a;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            (o = lT((i = u))),
              (s = 0 < i.su.length ? i.su[i.su.length - 1].batchId : -1),
              (t.label = 1);
          case 1:
            if (!(eT(i) && i.su.length < 10)) return [3, 7];
            t.label = 2;
          case 2:
            return (
              t.trys.push([2, 4, , 6]),
              [
                4,
                ((e = i.Zc),
                (n = s),
                (r = e).persistence.runTransaction(
                  'Get next mutation batch',
                  'readonly',
                  function (t) {
                    return void 0 === n && (n = -1), r.cs.qr(t, n);
                  }
                ))
              ]
            );
          case 3:
            return null === (a = t.sent())
              ? (0 === i.su.length && o.Ra(), [3, 7])
              : ((s = a.batchId),
                (function (t, e) {
                  t.su.push(e);
                  t = lT(t);
                  t.ma() && t.Ma && t.La(e.mutations);
                })(i, a),
                [3, 6]);
          case 4:
            return (a = t.sent()), [4, iT(i, a)];
          case 5:
            return t.sent(), [3, 6];
          case 6:
            return [3, 1];
          case 7:
            return aT(i) && uT(i), [2];
        }
        var e, n, r;
      });
    });
  }
  function aT(t) {
    return eT(t) && !lT(t).Ta() && 0 < t.su.length;
  }
  function uT(t) {
    lT(t).start();
  }
  function cT(n, r) {
    return _o(this, void 0, void 0, function () {
      var e;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (e = n), r ? (e.ru.delete(2), [4, GI(e)]) : [3, 2];
          case 1:
            return t.sent(), [3, 5];
          case 2:
            return r ? [3, 4] : (e.ru.add(2), [4, QI(e)]);
          case 3:
            t.sent(), e.uu.set('Unknown'), (t.label = 4);
          case 4:
            t.label = 5;
          case 5:
            return [2];
        }
      });
    });
  }
  function hT(n) {
    var t,
      e,
      r,
      i = this;
    return (
      n.wu ||
        ((n.wu =
          ((t = n.eu),
          (e = n.Ei),
          (r = {
            Ca: function (n) {
              return _o(this, void 0, void 0, function () {
                return wo(this, function (t) {
                  return (
                    n.iu.forEach(function (t, e) {
                      JI(n, t);
                    }),
                    [2]
                  );
                });
              });
            }.bind(null, n),
            pa: function (e, n) {
              return _o(this, void 0, void 0, function () {
                return wo(this, function (t) {
                  return (
                    nT(e),
                    tT(e) ? (e.uu.Za(n), ZI(e)) : e.uu.set('Unknown'),
                    [2]
                  );
                });
              });
            }.bind(null, n),
            Na: rT.bind(null, n)
          }),
          t.Qa(),
          new UI(e, t.fa, t.credentials, t.serializer, r))),
        n.ou.push(function (e) {
          return _o(i, void 0, void 0, function () {
            return wo(this, function (t) {
              switch (t.label) {
                case 0:
                  return e
                    ? (n.wu.Aa(), tT(n) ? ZI(n) : n.uu.set('Unknown'), [3, 3])
                    : [3, 1];
                case 1:
                  return [4, n.wu.stop()];
                case 2:
                  t.sent(), nT(n), (t.label = 3);
                case 3:
                  return [2];
              }
            });
          });
        })),
      n.wu
    );
  }
  function lT(n) {
    var t,
      e,
      r,
      i = this;
    return (
      n.Eu ||
        ((n.Eu =
          ((t = n.eu),
          (e = n.Ei),
          (r = {
            Ca: function (e) {
              return _o(this, void 0, void 0, function () {
                return wo(this, function (t) {
                  return lT(e).qa(), [2];
                });
              });
            }.bind(null, n),
            pa: function (e, n) {
              return _o(this, void 0, void 0, function () {
                return wo(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return n && lT(e).Ma
                        ? [
                            4,
                            (function (r, i) {
                              return _o(this, void 0, void 0, function () {
                                var e, n;
                                return wo(this, function (t) {
                                  switch (t.label) {
                                    case 0:
                                      return ng((n = i.code)) &&
                                        n !== Kv.ABORTED
                                        ? ((e = r.su.shift()),
                                          lT(r).Aa(),
                                          [
                                            4,
                                            oT(r, function () {
                                              return r.nu.du(e.batchId, i);
                                            })
                                          ])
                                        : [3, 3];
                                    case 1:
                                      return t.sent(), [4, sT(r)];
                                    case 2:
                                      t.sent(), (t.label = 3);
                                    case 3:
                                      return [2];
                                  }
                                });
                              });
                            })(e, n)
                          ]
                        : [3, 2];
                    case 1:
                      t.sent(), (t.label = 2);
                    case 2:
                      return aT(e) && uT(e), [2];
                  }
                });
              });
            }.bind(null, n),
            Ba: function (o) {
              return _o(this, void 0, void 0, function () {
                var e, n, r, i;
                return wo(this, function (t) {
                  for (e = lT(o), n = 0, r = o.su; n < r.length; n++)
                    (i = r[n]), e.La(i.mutations);
                  return [2];
                });
              });
            }.bind(null, n),
            $a: function (r, i, o) {
              return _o(this, void 0, void 0, function () {
                var e, n;
                return wo(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return (
                        (e = r.su.shift()),
                        (n = x_.from(e, i, o)),
                        [
                          4,
                          oT(r, function () {
                            return r.nu.fu(n);
                          })
                        ]
                      );
                    case 1:
                      return t.sent(), [4, sT(r)];
                    case 2:
                      return t.sent(), [2];
                  }
                });
              });
            }.bind(null, n)
          }),
          t.Qa(),
          new jI(e, t.fa, t.credentials, t.serializer, r))),
        n.ou.push(function (e) {
          return _o(i, void 0, void 0, function () {
            return wo(this, function (t) {
              switch (t.label) {
                case 0:
                  return e ? (n.Eu.Aa(), [4, sT(n)]) : [3, 2];
                case 1:
                  return t.sent(), [3, 4];
                case 2:
                  return [4, n.Eu.stop()];
                case 3:
                  t.sent(),
                    0 < n.su.length &&
                      (Yv(
                        'RemoteStore',
                        'Stopping write stream with ' +
                          n.su.length +
                          ' pending writes'
                      ),
                      (n.su = [])),
                    (t.label = 4);
                case 4:
                  return [2];
              }
            });
          });
        })),
      n.Eu
    );
  }
  function fT() {
    (this.queries = new L_(Zb, $b)),
      (this.onlineState = 'Unknown'),
      (this.mu = new Set());
  }
  var pT = function () {
    (this.Tu = void 0), (this.listeners = []);
  };
  function dT(s, a) {
    return _o(this, void 0, void 0, function () {
      var e, n, r, i, o;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            if (
              ((e = s),
              (n = a.query),
              (r = !1),
              (i = e.queries.get(n)) || ((r = !0), (i = new pT())),
              !r)
            )
              return [3, 4];
            t.label = 1;
          case 1:
            return t.trys.push([1, 3, , 4]), (o = i), [4, e.Iu(n)];
          case 2:
            return (o.Tu = t.sent()), [3, 4];
          case 3:
            return (
              (o = t.sent()),
              (o = _w(
                o,
                "Initialization of query '" + t_(a.query) + "' failed"
              )),
              [2, void a.onError(o)]
            );
          case 4:
            return (
              e.queries.set(n, i),
              i.listeners.push(a),
              a.Au(e.onlineState),
              i.Tu && a.Ru(i.Tu) && yT(e),
              [2]
            );
        }
      });
    });
  }
  function vT(s, a) {
    return _o(this, void 0, void 0, function () {
      var e, n, r, i, o;
      return wo(this, function (t) {
        return (
          (e = s),
          (n = a.query),
          (r = !1),
          (i = e.queries.get(n)) &&
            0 <= (o = i.listeners.indexOf(a)) &&
            (i.listeners.splice(o, 1), (r = 0 === i.listeners.length)),
          r ? [2, (e.queries.delete(n), e.Pu(n))] : [2]
        );
      });
    });
  }
  function yT(t) {
    t.mu.forEach(function (t) {
      t.next();
    });
  }
  var gT =
      ((ET.prototype.Ru = function (t) {
        if (!this.options.includeMetadataChanges) {
          for (var e = [], n = 0, r = t.docChanges; n < r.length; n++) {
            var i = r[n];
            3 !== i.type && e.push(i);
          }
          t = new Ig(t.query, t.docs, t.ne, e, t.se, t.fromCache, t.ie, !0);
        }
        var o = !1;
        return (
          this.gu
            ? this.pu(t) && (this.yu.next(t), (o = !0))
            : this.bu(t, this.onlineState) && (this.vu(t), (o = !0)),
          (this.Vu = t),
          o
        );
      }),
      (ET.prototype.onError = function (t) {
        this.yu.error(t);
      }),
      (ET.prototype.Au = function (t) {
        this.onlineState = t;
        var e = !1;
        return (
          this.Vu &&
            !this.gu &&
            this.bu(this.Vu, t) &&
            (this.vu(this.Vu), (e = !0)),
          e
        );
      }),
      (ET.prototype.bu = function (t, e) {
        if (!t.fromCache) return !0;
        var n = 'Offline' !== e;
        return !((this.options.Su && n) || (t.docs.Y() && 'Offline' !== e));
      }),
      (ET.prototype.pu = function (t) {
        if (0 < t.docChanges.length) return !0;
        var e = this.Vu && this.Vu.hasPendingWrites !== t.hasPendingWrites;
        return !(!t.ie && !e) && !0 === this.options.includeMetadataChanges;
      }),
      (ET.prototype.vu = function (t) {
        (t = Ig.oe(t.query, t.docs, t.se, t.fromCache)),
          (this.gu = !0),
          this.yu.next(t);
      }),
      ET),
    mT =
      ((wT.prototype.Y = function () {
        return this.Du.Y();
      }),
      (wT.prototype.Mo = function (t, e) {
        e = new bT(t, e);
        (this.Du = this.Du.add(e)), (this.xu = this.xu.add(e));
      }),
      (wT.prototype.Fu = function (t, e) {
        var n = this;
        t.forEach(function (t) {
          return n.Mo(t, e);
        });
      }),
      (wT.prototype.$o = function (t, e) {
        this.Ou(new bT(t, e));
      }),
      (wT.prototype.ku = function (t, e) {
        var n = this;
        t.forEach(function (t) {
          return n.$o(t, e);
        });
      }),
      (wT.prototype.Mu = function (t) {
        var e = this,
          n = new Dy(new Ry([])),
          r = new bT(n, t),
          t = new bT(n, t + 1),
          i = [];
        return (
          this.xu.jt([r, t], function (t) {
            e.Ou(t), i.push(t.key);
          }),
          i
        );
      }),
      (wT.prototype.Lu = function () {
        var e = this;
        this.Du.forEach(function (t) {
          return e.Ou(t);
        });
      }),
      (wT.prototype.Ou = function (t) {
        (this.Du = this.Du.delete(t)), (this.xu = this.xu.delete(t));
      }),
      (wT.prototype.$u = function (t) {
        var e = new Dy(new Ry([])),
          n = new bT(e, t),
          t = new bT(e, t + 1),
          r = bg();
        return (
          this.xu.jt([n, t], function (t) {
            r = r.add(t.key);
          }),
          r
        );
      }),
      (wT.prototype.Jr = function (t) {
        var e = new bT(t, 0),
          e = this.Du.zt(e);
        return null !== e && t.isEqual(e.key);
      }),
      wT),
    bT =
      ((_T.Cu = function (t, e) {
        return Dy.K(t.key, e.key) || ry(t.Bu, e.Bu);
      }),
      (_T.Nu = function (t, e) {
        return ry(t.Bu, e.Bu) || Dy.K(t.key, e.key);
      }),
      _T);
  function _T(t, e) {
    (this.key = t), (this.Bu = e);
  }
  function wT() {
    (this.Du = new lg(bT.Cu)), (this.xu = new lg(bT.Nu));
  }
  function ET(t, e, n) {
    (this.query = t),
      (this.yu = e),
      (this.gu = !1),
      (this.Vu = null),
      (this.onlineState = 'Unknown'),
      (this.options = n || {});
  }
  function IT(t, e) {
    return 'firestore_clients_' + t + '_' + e;
  }
  function TT(t, e, n) {
    n = 'firestore_mutations_' + t + '_' + n;
    return e.A() && (n += '_' + e.uid), n;
  }
  function ST(t, e) {
    return 'firestore_targets_' + t + '_' + e;
  }
  var CT =
      ((GT.qu = function (t, e, n) {
        var r = JSON.parse(n),
          i =
            'object' == typeof r &&
            -1 !== ['pending', 'acknowledged', 'rejected'].indexOf(r.state) &&
            (void 0 === r.error || 'object' == typeof r.error),
          o = void 0;
        return (
          i &&
            r.error &&
            (i =
              'string' == typeof r.error.message &&
              'string' == typeof r.error.code) &&
            (o = new Hv(r.error.code, r.error.message)),
          i
            ? new GT(t, e, r.state, o)
            : (Xv(
                'SharedClientState',
                "Failed to parse mutation state for ID '" + e + "': " + n
              ),
              null)
        );
      }),
      (GT.prototype.Uu = function () {
        var t = { state: this.state, updateTimeMs: Date.now() };
        return (
          this.error &&
            (t.error = { code: this.error.code, message: this.error.message }),
          JSON.stringify(t)
        );
      }),
      GT),
    NT =
      ((zT.qu = function (t, e) {
        var n = JSON.parse(e),
          r =
            'object' == typeof n &&
            -1 !== ['not-current', 'current', 'rejected'].indexOf(n.state) &&
            (void 0 === n.error || 'object' == typeof n.error),
          i = void 0;
        return (
          r &&
            n.error &&
            (r =
              'string' == typeof n.error.message &&
              'string' == typeof n.error.code) &&
            (i = new Hv(n.error.code, n.error.message)),
          r
            ? new zT(t, n.state, i)
            : (Xv(
                'SharedClientState',
                "Failed to parse target state for ID '" + t + "': " + e
              ),
              null)
        );
      }),
      (zT.prototype.Uu = function () {
        var t = { state: this.state, updateTimeMs: Date.now() };
        return (
          this.error &&
            (t.error = { code: this.error.code, message: this.error.message }),
          JSON.stringify(t)
        );
      }),
      zT),
    AT =
      ((HT.qu = function (t, e) {
        for (
          var n = JSON.parse(e),
            r = 'object' == typeof n && n.activeTargetIds instanceof Array,
            i = _g,
            o = 0;
          r && o < n.activeTargetIds.length;
          ++o
        )
          (r = zy(n.activeTargetIds[o])), (i = i.add(n.activeTargetIds[o]));
        return r
          ? new HT(t, i)
          : (Xv(
              'SharedClientState',
              "Failed to parse client data for instance '" + t + "': " + e
            ),
            null);
      }),
      HT),
    kT =
      ((KT.qu = function (t) {
        var e = JSON.parse(t);
        return 'object' == typeof e &&
          -1 !== ['Unknown', 'Online', 'Offline'].indexOf(e.onlineState) &&
          'string' == typeof e.clientId
          ? new KT(e.clientId, e.onlineState)
          : (Xv('SharedClientState', 'Failed to parse online state: ' + t),
            null);
      }),
      KT),
    RT =
      ((WT.prototype.Qu = function (t) {
        this.activeTargetIds = this.activeTargetIds.add(t);
      }),
      (WT.prototype.Ku = function (t) {
        this.activeTargetIds = this.activeTargetIds.delete(t);
      }),
      (WT.prototype.Uu = function () {
        var t = {
          activeTargetIds: this.activeTargetIds.tt(),
          updateTimeMs: Date.now()
        };
        return JSON.stringify(t);
      }),
      WT),
    OT =
      ((BT.Hs = function (t) {
        return !(!t || !t.localStorage);
      }),
      (BT.prototype.start = function () {
        return _o(this, void 0, void 0, function () {
          var e,
            n,
            r,
            i,
            o,
            s,
            a,
            u,
            c,
            h,
            l = this;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return [4, this.ju.Vc()];
              case 1:
                for (s = t.sent(), e = 0, n = s; e < n.length; e++)
                  (r = n[e]) !== this.Wu &&
                    (i = this.getItem(IT(this.persistenceKey, r))) &&
                    (o = AT.qu(r, i)) &&
                    (this.Hu = this.Hu.At(o.clientId, o));
                for (
                  this.ih(),
                    (s = this.storage.getItem(this.nh)) &&
                      (a = this.rh(s)) &&
                      this.oh(a),
                    u = 0,
                    c = this.Ju;
                  u < c.length;
                  u++
                )
                  (h = c[u]), this.zu(h);
                return (
                  (this.Ju = []),
                  this.window.addEventListener('unload', function () {
                    return l.Ac();
                  }),
                  (this.dr = !0),
                  [2]
                );
            }
          });
        });
      }),
      (BT.prototype.Cs = function (t) {
        this.setItem(this.Xu, JSON.stringify(t));
      }),
      (BT.prototype.ah = function () {
        return this.uh(this.Hu);
      }),
      (BT.prototype.hh = function (n) {
        var r = !1;
        return (
          this.Hu.forEach(function (t, e) {
            e.activeTargetIds.has(n) && (r = !0);
          }),
          r
        );
      }),
      (BT.prototype.lh = function (t) {
        this._h(t, 'pending');
      }),
      (BT.prototype.fh = function (t, e, n) {
        this._h(t, e, n), this.dh(t);
      }),
      (BT.prototype.wh = function (t) {
        var e,
          n = 'not-current';
        return (
          this.hh(t) &&
            (!(e = this.storage.getItem(ST(this.persistenceKey, t))) ||
              ((e = NT.qu(t, e)) && (n = e.state))),
          this.Eh.Qu(t),
          this.ih(),
          n
        );
      }),
      (BT.prototype.Th = function (t) {
        this.Eh.Ku(t), this.ih();
      }),
      (BT.prototype.mh = function (t) {
        return this.Eh.activeTargetIds.has(t);
      }),
      (BT.prototype.Ih = function (t) {
        this.removeItem(ST(this.persistenceKey, t));
      }),
      (BT.prototype.Ah = function (t, e, n) {
        this.Rh(t, e, n);
      }),
      (BT.prototype.Ph = function (t, e, n) {
        var r = this;
        e.forEach(function (t) {
          r.dh(t);
        }),
          (this.currentUser = t),
          n.forEach(function (t) {
            r.lh(t);
          });
      }),
      (BT.prototype.yh = function (t) {
        this.gh(t);
      }),
      (BT.prototype.Vh = function () {
        this.ph();
      }),
      (BT.prototype.Ac = function () {
        this.dr &&
          (this.window.removeEventListener('storage', this.Gu),
          this.removeItem(this.Yu),
          (this.dr = !1));
      }),
      (BT.prototype.getItem = function (t) {
        var e = this.storage.getItem(t);
        return Yv('SharedClientState', 'READ', t, e), e;
      }),
      (BT.prototype.setItem = function (t, e) {
        Yv('SharedClientState', 'SET', t, e), this.storage.setItem(t, e);
      }),
      (BT.prototype.removeItem = function (t) {
        Yv('SharedClientState', 'REMOVE', t), this.storage.removeItem(t);
      }),
      (BT.prototype.zu = function (t) {
        var e = this,
          o = t;
        if (o.storageArea === this.storage) {
          if (
            (Yv('SharedClientState', 'EVENT', o.key, o.newValue),
            o.key === this.Yu)
          )
            return void Xv(
              'Received WebStorage notification for local change. Another client might have garbage-collected our state'
            );
          this.Ns.Li(function () {
            return _o(e, void 0, void 0, function () {
              var e, n, r, i;
              return wo(this, function (t) {
                if (this.dr) {
                  if (null !== o.key)
                    if (this.Zu.test(o.key)) {
                      if (null == o.newValue)
                        return (e = this.bh(o.key)), [2, this.Sh(e, null)];
                      if ((e = this.Dh(o.key, o.newValue)))
                        return [2, this.Sh(e.clientId, e)];
                    } else if (this.th.test(o.key)) {
                      if (
                        null !== o.newValue &&
                        (n = this.Ch(o.key, o.newValue))
                      )
                        return [2, this.xh(n)];
                    } else if (this.eh.test(o.key)) {
                      if (
                        null !== o.newValue &&
                        (r = this.Nh(o.key, o.newValue))
                      )
                        return [2, this.Fh(r)];
                    } else if (o.key === this.nh) {
                      if (null !== o.newValue && (i = this.rh(o.newValue)))
                        return [2, this.oh(i)];
                    } else if (o.key === this.Xu)
                      (i = (function (t) {
                        var e = V_.xs;
                        if (null != t)
                          try {
                            var n = JSON.parse(t);
                            ty('number' == typeof n), (e = n);
                          } catch (t) {
                            Xv(
                              'SharedClientState',
                              'Failed to read sequence number from WebStorage',
                              t
                            );
                          }
                        return e;
                      })(o.newValue)) !== V_.xs && this.vs(i);
                    else if (o.key === this.sh) return [2, this.ju.Oh()];
                } else this.Ju.push(o);
                return [2];
              });
            });
          });
        }
      }),
      Object.defineProperty(BT.prototype, 'Eh', {
        get: function () {
          return this.Hu.get(this.Wu);
        },
        enumerable: !1,
        configurable: !0
      }),
      (BT.prototype.ih = function () {
        this.setItem(this.Yu, this.Eh.Uu());
      }),
      (BT.prototype._h = function (t, e, n) {
        (n = new CT(this.currentUser, t, e, n)),
          (t = TT(this.persistenceKey, this.currentUser, t));
        this.setItem(t, n.Uu());
      }),
      (BT.prototype.dh = function (t) {
        t = TT(this.persistenceKey, this.currentUser, t);
        this.removeItem(t);
      }),
      (BT.prototype.gh = function (t) {
        t = { clientId: this.Wu, onlineState: t };
        this.storage.setItem(this.nh, JSON.stringify(t));
      }),
      (BT.prototype.Rh = function (t, e, n) {
        var r = ST(this.persistenceKey, t),
          n = new NT(t, e, n);
        this.setItem(r, n.Uu());
      }),
      (BT.prototype.ph = function () {
        this.setItem(this.sh, 'value-not-used');
      }),
      (BT.prototype.bh = function (t) {
        t = this.Zu.exec(t);
        return t ? t[1] : null;
      }),
      (BT.prototype.Dh = function (t, e) {
        t = this.bh(t);
        return AT.qu(t, e);
      }),
      (BT.prototype.Ch = function (t, e) {
        var n = this.th.exec(t),
          t = Number(n[1]),
          n = void 0 !== n[2] ? n[2] : null;
        return CT.qu(new gy(n), t, e);
      }),
      (BT.prototype.Nh = function (t, e) {
        (t = this.eh.exec(t)), (t = Number(t[1]));
        return NT.qu(t, e);
      }),
      (BT.prototype.rh = function (t) {
        return kT.qu(t);
      }),
      (BT.prototype.xh = function (e) {
        return _o(this, void 0, void 0, function () {
          return wo(this, function (t) {
            return e.user.uid === this.currentUser.uid
              ? [2, this.ju.kh(e.batchId, e.state, e.error)]
              : (Yv(
                  'SharedClientState',
                  'Ignoring mutation for non-active user ' + e.user.uid
                ),
                [2]);
          });
        });
      }),
      (BT.prototype.Fh = function (t) {
        return this.ju.Mh(t.targetId, t.state, t.error);
      }),
      (BT.prototype.Sh = function (t, e) {
        var n = this,
          r = e ? this.Hu.At(t, e) : this.Hu.remove(t),
          i = this.uh(this.Hu),
          o = this.uh(r),
          s = [],
          a = [];
        return (
          o.forEach(function (t) {
            i.has(t) || s.push(t);
          }),
          i.forEach(function (t) {
            o.has(t) || a.push(t);
          }),
          this.ju.Lh(s, a).then(function () {
            n.Hu = r;
          })
        );
      }),
      (BT.prototype.oh = function (t) {
        this.Hu.get(t.clientId) && this.ja(t.onlineState);
      }),
      (BT.prototype.uh = function (t) {
        var n = _g;
        return (
          t.forEach(function (t, e) {
            n = n.Ht(e.activeTargetIds);
          }),
          n
        );
      }),
      BT),
    PT =
      ((qT.prototype.lh = function (t) {}),
      (qT.prototype.fh = function (t, e, n) {}),
      (qT.prototype.wh = function (t) {
        return this.$h.Qu(t), this.Bh[t] || 'not-current';
      }),
      (qT.prototype.Ah = function (t, e, n) {
        this.Bh[t] = e;
      }),
      (qT.prototype.Th = function (t) {
        this.$h.Ku(t);
      }),
      (qT.prototype.mh = function (t) {
        return this.$h.activeTargetIds.has(t);
      }),
      (qT.prototype.Ih = function (t) {
        delete this.Bh[t];
      }),
      (qT.prototype.ah = function () {
        return this.$h.activeTargetIds;
      }),
      (qT.prototype.hh = function (t) {
        return this.$h.activeTargetIds.has(t);
      }),
      (qT.prototype.start = function () {
        return (this.$h = new RT()), Promise.resolve();
      }),
      (qT.prototype.Ph = function (t, e, n) {}),
      (qT.prototype.yh = function (t) {}),
      (qT.prototype.Ac = function () {}),
      (qT.prototype.Cs = function (t) {}),
      (qT.prototype.Vh = function () {}),
      qT),
    DT = function (t) {
      this.key = t;
    },
    xT = function (t) {
      this.key = t;
    },
    LT =
      (Object.defineProperty(VT.prototype, 'jh', {
        get: function () {
          return this.qh;
        },
        enumerable: !1,
        configurable: !0
      }),
      (VT.prototype.Gh = function (t, e) {
        var s = this,
          a = e ? e.zh : new Eg(),
          u = (e || this).Wh,
          c = (e || this).se,
          h = u,
          l = !1,
          f = Kb(this.query) && u.size === this.query.limit ? u.last() : null,
          p = Hb(this.query) && u.size === this.query.limit ? u.first() : null;
        if (
          (t.gt(function (t, e) {
            var n = u.get(t),
              r =
                (r = e instanceof Lb ? e : null) && (e_(s.query, r) ? r : null),
              i = !!n && s.se.has(n.key),
              o = !!r && (r.ln || (s.se.has(r.key) && r.hasCommittedMutations)),
              e = !1;
            n && r
              ? n.data().isEqual(r.data())
                ? i !== o && (a.track({ type: 3, doc: r }), (e = !0))
                : s.Hh(n, r) ||
                  (a.track({ type: 2, doc: r }),
                  (e = !0),
                  ((f && 0 < s.Kh(r, f)) || (p && s.Kh(r, p) < 0)) && (l = !0))
              : !n && r
              ? (a.track({ type: 0, doc: r }), (e = !0))
              : n &&
                !r &&
                (a.track({ type: 1, doc: n }), (e = !0), (f || p) && (l = !0)),
              e &&
                (c = r
                  ? ((h = h.add(r)), o ? c.add(t) : c.delete(t))
                  : ((h = h.delete(t)), c.delete(t)));
          }),
          Kb(this.query) || Hb(this.query))
        )
          for (; h.size > this.query.limit; ) {
            var n = Kb(this.query) ? h.last() : h.first(),
              h = h.delete(n.key),
              c = c.delete(n.key);
            a.track({ type: 1, doc: n });
          }
        return { Wh: h, zh: a, Dr: l, se: c };
      }),
      (VT.prototype.Hh = function (t, e) {
        return t.ln && e.hasCommittedMutations && !e.ln;
      }),
      (VT.prototype.es = function (t, e, n) {
        var o = this,
          r = this.Wh;
        (this.Wh = t.Wh), (this.se = t.se);
        var i = t.zh.ee();
        i.sort(function (t, e) {
          return (r = t.type), (i = e.type), n(r) - n(i) || o.Kh(t.doc, e.doc);
          function n(t) {
            switch (t) {
              case 0:
                return 1;
              case 2:
              case 3:
                return 2;
              case 1:
                return 0;
              default:
                return Zv();
            }
          }
          var r, i;
        }),
          this.Jh(n);
        var s = e ? this.Yh() : [],
          n = 0 === this.Qh.size && this.fe ? 1 : 0,
          e = n !== this.Uh;
        return (
          (this.Uh = n),
          0 !== i.length || e
            ? {
                snapshot: new Ig(this.query, t.Wh, r, i, t.se, 0 == n, e, !1),
                Xh: s
              }
            : { Xh: s }
        );
      }),
      (VT.prototype.Au = function (t) {
        return this.fe && 'Offline' === t
          ? ((this.fe = !1),
            this.es({ Wh: this.Wh, zh: new Eg(), se: this.se, Dr: !1 }, !1))
          : { Xh: [] };
      }),
      (VT.prototype.Zh = function (t) {
        return !this.qh.has(t) && !!this.Wh.has(t) && !this.Wh.get(t).ln;
      }),
      (VT.prototype.Jh = function (t) {
        var e = this;
        t &&
          (t.de.forEach(function (t) {
            return (e.qh = e.qh.add(t));
          }),
          t.we.forEach(function (t) {}),
          t.Ee.forEach(function (t) {
            return (e.qh = e.qh.delete(t));
          }),
          (this.fe = t.fe));
      }),
      (VT.prototype.Yh = function () {
        var e = this;
        if (!this.fe) return [];
        var n = this.Qh;
        (this.Qh = bg()),
          this.Wh.forEach(function (t) {
            e.Zh(t.key) && (e.Qh = e.Qh.add(t.key));
          });
        var r = [];
        return (
          n.forEach(function (t) {
            e.Qh.has(t) || r.push(new xT(t));
          }),
          this.Qh.forEach(function (t) {
            n.has(t) || r.push(new DT(t));
          }),
          r
        );
      }),
      (VT.prototype.tl = function (t) {
        (this.qh = t.la), (this.Qh = bg());
        t = this.Gh(t.documents);
        return this.es(t, !0);
      }),
      (VT.prototype.el = function () {
        return Ig.oe(this.query, this.Wh, this.se, 0 === this.Uh);
      }),
      VT),
    MT = function (t, e, n) {
      (this.query = t), (this.targetId = e), (this.view = n);
    },
    FT = function (t) {
      (this.key = t), (this.nl = !1);
    },
    UT =
      (Object.defineProperty(jT.prototype, 'ml', {
        get: function () {
          return !0 === this.Tl;
        },
        enumerable: !1,
        configurable: !0
      }),
      jT);
  function jT(t, e, n, r, i, o) {
    (this.Zc = t),
      (this.sl = e),
      (this.il = n),
      (this.rl = r),
      (this.currentUser = i),
      (this.ol = o),
      (this.cl = {}),
      (this.al = new L_(Zb, $b)),
      (this.ul = new Map()),
      (this.hl = []),
      (this.ll = new ig(Dy.K)),
      (this._l = new Map()),
      (this.fl = new mT()),
      (this.dl = {}),
      (this.wl = new Map()),
      (this.El = qE.Ao()),
      (this.onlineState = 'Unknown'),
      (this.Tl = void 0);
  }
  function VT(t, e) {
    (this.query = t),
      (this.qh = e),
      (this.Uh = null),
      (this.fe = !1),
      (this.Qh = bg()),
      (this.se = bg()),
      (this.Kh = n_(t)),
      (this.Wh = new wg(this.Kh));
  }
  function qT() {
    (this.$h = new RT()), (this.Bh = {}), (this.ja = null), (this.vs = null);
  }
  function BT(t, e, n, r, i) {
    (this.window = t),
      (this.Ns = e),
      (this.persistenceKey = n),
      (this.Wu = r),
      (this.ju = null),
      (this.ja = null),
      (this.vs = null),
      (this.Gu = this.zu.bind(this)),
      (this.Hu = new ig(ry)),
      (this.dr = !1),
      (this.Ju = []);
    n = n.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    (this.storage = this.window.localStorage),
      (this.currentUser = i),
      (this.Yu = IT(this.persistenceKey, this.Wu)),
      (this.Xu = 'firestore_sequence_number_' + this.persistenceKey),
      (this.Hu = this.Hu.At(this.Wu, new RT())),
      (this.Zu = new RegExp('^firestore_clients_' + n + '_([^_]*)$')),
      (this.th = new RegExp(
        '^firestore_mutations_' + n + '_(\\d+)(?:_(.*))?$'
      )),
      (this.eh = new RegExp('^firestore_targets_' + n + '_(\\d+)$')),
      (this.nh = 'firestore_online_state_' + this.persistenceKey),
      (this.sh = 'firestore_bundle_loaded_' + this.persistenceKey),
      this.window.addEventListener('storage', this.Gu);
  }
  function WT() {
    this.activeTargetIds = _g;
  }
  function KT(t, e) {
    (this.clientId = t), (this.onlineState = e);
  }
  function HT(t, e) {
    (this.clientId = t), (this.activeTargetIds = e);
  }
  function zT(t, e, n) {
    (this.targetId = t), (this.state = e), (this.error = n);
  }
  function GT(t, e, n, r) {
    (this.user = t), (this.batchId = e), (this.state = n), (this.error = r);
  }
  function QT(i, o, s, a) {
    return _o(this, void 0, void 0, function () {
      var e, n, r;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (
              (i.Il = function (t, e, n) {
                return (function (r, i, o, s) {
                  return _o(this, void 0, void 0, function () {
                    var e, n;
                    return wo(this, function (t) {
                      switch (t.label) {
                        case 0:
                          return (e = i.view.Gh(o)).Dr
                            ? [
                                4,
                                kI(r.Zc, i.query, !1).then(function (t) {
                                  t = t.documents;
                                  return i.view.Gh(t, e);
                                })
                              ]
                            : [3, 2];
                        case 1:
                          (e = t.sent()), (t.label = 2);
                        case 2:
                          return (
                            (n = s && s.ce.get(i.targetId)),
                            (n = i.view.es(e, r.ml, n)),
                            [2, (iS(r, i.targetId, n.Xh), n.snapshot)]
                          );
                      }
                    });
                  });
                })(i, t, e, n);
              }),
              [4, kI(i.Zc, o, !0)]
            );
          case 1:
            return (
              (n = t.sent()),
              (r = new LT(o, n.la)),
              (e = r.Gh(n.documents)),
              (n = Sg._e(s, a && 'Offline' !== i.onlineState)),
              (n = r.es(e, i.ml, n)),
              iS(i, s, n.Xh),
              (r = new MT(o, s, r)),
              [
                2,
                (i.al.set(o, r),
                i.ul.has(s) ? i.ul.get(s).push(o) : i.ul.set(s, [o]),
                n.snapshot)
              ]
            );
        }
      });
    });
  }
  function YT(f, p, d) {
    return _o(this, void 0, void 0, function () {
      var s, a;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            (a = pS(f)), (t.label = 1);
          case 1:
            return (
              t.trys.push([1, 5, , 6]),
              [
                4,
                ((i = a.Zc),
                (u = p),
                (h = i),
                (l = Ay.now()),
                (o = u.reduce(function (t, e) {
                  return t.add(e.key);
                }, bg())),
                h.persistence
                  .runTransaction(
                    'Locally write mutations',
                    'readwrite',
                    function (a) {
                      return h.sa.ds(a, o).next(function (t) {
                        c = t;
                        for (var s, e = [], n = 0, r = u; n < r.length; n++) {
                          var i = r[n],
                            o =
                              ((s = i),
                              (o = c.get(i.key)),
                              s instanceof bb
                                ? (function (t) {
                                    for (
                                      var e = null,
                                        n = 0,
                                        r = s.fieldTransforms;
                                      n < r.length;
                                      n++
                                    ) {
                                      var i = r[n],
                                        o =
                                          t instanceof Lb
                                            ? t.field(i.field)
                                            : void 0,
                                        o = Fm(i.transform, o || null);
                                      null != o &&
                                        (e = (null == e ? new Nb() : e).set(
                                          i.field,
                                          o
                                        ));
                                    }
                                    return e ? e._n() : null;
                                  })(o)
                                : null);
                          null != o &&
                            e.push(
                              new db(
                                i.key,
                                o,
                                (function s(t) {
                                  var a = [];
                                  return (
                                    qg(t.fields || {}, function (t, e) {
                                      var n = new Py([t]);
                                      if (sm(e))
                                        if (
                                          0 ===
                                          (e = s(e.mapValue).fields).length
                                        )
                                          a.push(n);
                                        else
                                          for (
                                            var r = 0, i = e;
                                            r < i.length;
                                            r++
                                          ) {
                                            var o = i[r];
                                            a.push(n.child(o));
                                          }
                                      else a.push(n);
                                    }),
                                    new tb(a)
                                  );
                                })(o.proto.mapValue),
                                ib.exists(!0)
                              )
                            );
                        }
                        return h.cs.Mr(a, l, e, u);
                      });
                    }
                  )
                  .then(function (t) {
                    var e = t.Sn(c);
                    return { batchId: t.batchId, Wn: e };
                  }))
              ]
            );
          case 2:
            return (
              (s = t.sent()),
              a.rl.lh(s.batchId),
              (e = a),
              (n = s.batchId),
              (r = d),
              (i = (i = (i = e.dl[e.currentUser.R()]) || new ig(ry)).At(n, r)),
              (e.dl[e.currentUser.R()] = i),
              [4, sS(a, s.Wn)]
            );
          case 3:
            return t.sent(), [4, sT(a.sl)];
          case 4:
            return t.sent(), [3, 6];
          case 5:
            return (
              (a = t.sent()),
              (a = _w(a, 'Failed to persist write')),
              d.reject(a),
              [3, 6]
            );
          case 6:
            return [2];
        }
        var e, n, r, i, u, c, h, l, o;
      });
    });
  }
  function XT(r, i) {
    return _o(this, void 0, void 0, function () {
      var n, e;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            (n = r), (t.label = 1);
          case 1:
            return t.trys.push([1, 4, , 6]), [4, SI(n.Zc, i)];
          case 2:
            return (
              (e = t.sent()),
              i.ce.forEach(function (t, e) {
                e = n._l.get(e);
                e &&
                  (ty(t.de.size + t.we.size + t.Ee.size <= 1),
                  0 < t.de.size
                    ? (e.nl = !0)
                    : 0 < t.we.size
                    ? ty(e.nl)
                    : 0 < t.Ee.size && (ty(e.nl), (e.nl = !1)));
              }),
              [4, sS(n, e, i)]
            );
          case 3:
            return t.sent(), [3, 6];
          case 4:
            return [4, DI(t.sent())];
          case 5:
            return t.sent(), [3, 6];
          case 6:
            return [2];
        }
      });
    });
  }
  function JT(t, n, e) {
    var r,
      t = t;
    ((t.ml && 0 === e) || (!t.ml && 1 === e)) &&
      ((r = []),
      t.al.forEach(function (t, e) {
        e = e.view.Au(n);
        e.snapshot && r.push(e.snapshot);
      }),
      (function (t, i) {
        t.onlineState = i;
        var o = !1;
        t.queries.forEach(function (t, e) {
          for (var n = 0, r = e.listeners; n < r.length; n++)
            r[n].Au(i) && (o = !0);
        }),
          o && yT(t);
      })(t.il, n),
      r.length && t.cl.Na(r),
      (t.onlineState = n),
      t.ml && t.rl.yh(n));
  }
  function $T(s, a, u) {
    return _o(this, void 0, void 0, function () {
      var n, o;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            (n = s), (t.label = 1);
          case 1:
            return (
              t.trys.push([1, 4, , 6]),
              [
                4,
                ((e = n.Zc),
                (r = a),
                (i = e).persistence.runTransaction(
                  'Reject batch',
                  'readwrite-primary',
                  function (e) {
                    var n;
                    return i.cs
                      .$r(e, r)
                      .next(function (t) {
                        return ty(null !== t), (n = t.keys()), i.cs.Wr(e, t);
                      })
                      .next(function () {
                        return i.cs.Hr(e);
                      })
                      .next(function () {
                        return i.sa.ds(e, n);
                      });
                  }
                ))
              ]
            );
          case 2:
            return (
              (o = t.sent()),
              eS(n, a, u),
              tS(n, a),
              n.rl.fh(a, 'rejected', u),
              [4, sS(n, o)]
            );
          case 3:
            return t.sent(), [3, 6];
          case 4:
            return [4, DI(t.sent())];
          case 5:
            return t.sent(), [3, 6];
          case 6:
            return [2];
        }
        var e, r, i;
      });
    });
  }
  function ZT(o, s) {
    return _o(this, void 0, void 0, function () {
      var n, r, i;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            eT((n = o).sl) ||
              Yv(
                'SyncEngine',
                "The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."
              ),
              (t.label = 1);
          case 1:
            return (
              t.trys.push([1, 3, , 4]),
              [
                4,
                (e = n.Zc).persistence.runTransaction(
                  'Get highest unacknowledged batch id',
                  'readonly',
                  function (t) {
                    return e.cs.Ur(t);
                  }
                )
              ]
            );
          case 2:
            return -1 === (r = t.sent())
              ? [2, void s.resolve()]
              : ((i = n.wl.get(r) || []).push(s), n.wl.set(r, i), [3, 4]);
          case 3:
            return (
              (i = t.sent()),
              (i = _w(
                i,
                'Initialization of waitForPendingWrites() operation failed'
              )),
              s.reject(i),
              [3, 4]
            );
          case 4:
            return [2];
        }
        var e;
      });
    });
  }
  function tS(t, e) {
    (t.wl.get(e) || []).forEach(function (t) {
      t.resolve();
    }),
      t.wl.delete(e);
  }
  function eS(t, e, n) {
    var r = t,
      i = r.dl[r.currentUser.R()];
    i &&
      ((t = i.get(e)) && (n ? t.reject(n) : t.resolve(), (i = i.remove(e))),
      (r.dl[r.currentUser.R()] = i));
  }
  function nS(e, t, n) {
    void 0 === n && (n = null), e.rl.Th(t);
    for (var r = 0, i = e.ul.get(t); r < i.length; r++) {
      var o = i[r];
      e.al.delete(o), n && e.cl.Al(o, n);
    }
    e.ul.delete(t),
      e.ml &&
        e.fl.Mu(t).forEach(function (t) {
          e.fl.Jr(t) || rS(e, t);
        });
  }
  function rS(t, e) {
    var n = t.ll.get(e);
    null !== n && (XI(t.sl, n), (t.ll = t.ll.remove(e)), t._l.delete(n), oS(t));
  }
  function iS(t, e, n) {
    for (var r = 0, i = n; r < i.length; r++) {
      var o = i[r];
      o instanceof DT
        ? (t.fl.Mo(o.key, e),
          (function (t, e) {
            e = e.key;
            t.ll.get(e) ||
              (Yv('SyncEngine', 'New document in limbo: ' + e),
              t.hl.push(e),
              oS(t));
          })(t, o))
        : o instanceof xT
        ? (Yv('SyncEngine', 'Document no longer in limbo: ' + o.key),
          t.fl.$o(o.key, e),
          t.fl.Jr(o.key) || rS(t, o.key))
        : Zv();
    }
  }
  function oS(t) {
    for (; 0 < t.hl.length && t.ll.size < t.ol; ) {
      var e = t.hl.shift(),
        n = t.El.next();
      t._l.set(n, new FT(e)),
        (t.ll = t.ll.At(e, n)),
        YI(t.sl, new tg(Xb(Wb(e.path)), n, 2, V_.xs));
    }
  }
  function sS(e, s, a) {
    return _o(this, void 0, void 0, function () {
      var n, r, i, o;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (
              (r = []),
              (i = []),
              (o = []),
              (n = e).al.Y()
                ? [3, 3]
                : (n.al.forEach(function (t, e) {
                    o.push(
                      n.Il(e, s, a).then(function (t) {
                        t &&
                          (n.ml &&
                            n.rl.Ah(
                              e.targetId,
                              t.fromCache ? 'not-current' : 'current'
                            ),
                          r.push(t),
                          (t = j_.bs(e.targetId, t)),
                          i.push(t));
                      })
                    );
                  }),
                  [4, Promise.all(o)])
            );
          case 1:
            return (
              t.sent(),
              n.cl.Na(r),
              [
                4,
                (function (u, c) {
                  return _o(this, void 0, void 0, function () {
                    var r, e, n, i, o, s, a;
                    return wo(this, function (t) {
                      switch (t.label) {
                        case 0:
                          (r = u), (t.label = 1);
                        case 1:
                          return (
                            t.trys.push([1, 3, , 4]),
                            [
                              4,
                              r.persistence.runTransaction(
                                'notifyLocalViewChanges',
                                'readwrite',
                                function (n) {
                                  return M_.forEach(c, function (e) {
                                    return M_.forEach(e.Vs, function (t) {
                                      return r.persistence.Nr.Mo(
                                        n,
                                        e.targetId,
                                        t
                                      );
                                    }).next(function () {
                                      return M_.forEach(e.ps, function (t) {
                                        return r.persistence.Nr.$o(
                                          n,
                                          e.targetId,
                                          t
                                        );
                                      });
                                    });
                                  });
                                }
                              )
                            ]
                          );
                        case 2:
                          return t.sent(), [3, 4];
                        case 3:
                          if (!sw((e = t.sent()))) throw e;
                          return (
                            Yv(
                              'LocalStore',
                              'Failed to update sequence numbers: ' + e
                            ),
                            [3, 4]
                          );
                        case 4:
                          for (n = 0, i = c; n < i.length; n++)
                            (a = i[n]),
                              (o = a.targetId),
                              a.fromCache ||
                                ((s = r.ra.get(o)),
                                (a = s.wt),
                                (a = s.It(a)),
                                (r.ra = r.ra.At(o, a)));
                          return [2];
                      }
                    });
                  });
                })(n.Zc, i)
              ]
            );
          case 2:
            t.sent(), (t.label = 3);
          case 3:
            return [2];
        }
      });
    });
  }
  function aS(i, o) {
    return _o(this, void 0, void 0, function () {
      var n, r;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (n = i).currentUser.isEqual(o)
              ? [3, 3]
              : (Yv('SyncEngine', 'User change. New user:', o.R()),
                [4, EI(n.Zc, o)]);
          case 1:
            return (
              (r = t.sent()),
              (n.currentUser = o),
              (e = n).wl.forEach(function (t) {
                t.forEach(function (t) {
                  t.reject(
                    new Hv(
                      Kv.CANCELLED,
                      "'waitForPendingWrites' promise is rejected due to a user change."
                    )
                  );
                });
              }),
              e.wl.clear(),
              n.rl.Ph(o, r.ua, r.ha),
              [4, sS(n, r.aa)]
            );
          case 2:
            t.sent(), (t.label = 3);
          case 3:
            return [2];
        }
        var e;
      });
    });
  }
  function uS(a, u, c, h) {
    return _o(this, void 0, void 0, function () {
      var o, s;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return [
              4,
              ((e = (o = a).Zc),
              (n = u),
              (i = (r = e).cs),
              r.persistence.runTransaction(
                'Lookup mutation documents',
                'readonly',
                function (e) {
                  return i.Br(e, n).next(function (t) {
                    return t ? r.sa.ds(e, t) : M_.resolve(null);
                  });
                }
              ))
            ];
          case 1:
            return null === (s = t.sent())
              ? [3, 6]
              : 'pending' !== c
              ? [3, 3]
              : [4, sT(o.sl)];
          case 2:
            return t.sent(), [3, 4];
          case 3:
            'acknowledged' === c || 'rejected' === c
              ? (eS(o, u, h || null), tS(o, u), o.Zc.cs.Gr(u))
              : Zv(),
              (t.label = 4);
          case 4:
            return [4, sS(o, s)];
          case 5:
            return t.sent(), [3, 7];
          case 6:
            Yv('SyncEngine', 'Cannot apply mutation batch with id: ' + u),
              (t.label = 7);
          case 7:
            return [2];
        }
        var e, n, r, i;
      });
    });
  }
  function cS(h, l) {
    return _o(this, void 0, void 0, function () {
      var r, e, i, o, s, a, u, c;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (
              fS((r = h)),
              pS(r),
              !0 !== l || !0 === r.Tl
                ? [3, 3]
                : ((e = r.rl.ah()), [4, hS(r, e.tt())])
            );
          case 1:
            return (i = t.sent()), (r.Tl = !0), [4, cT(r.sl, !0)];
          case 2:
            for (t.sent(), o = 0, s = i; o < s.length; o++)
              (a = s[o]), YI(r.sl, a);
            return [3, 7];
          case 3:
            return !1 !== l || !1 === r.Tl
              ? [3, 7]
              : ((u = []),
                (c = Promise.resolve()),
                r.ul.forEach(function (t, e) {
                  r.rl.mh(e)
                    ? u.push(e)
                    : (c = c.then(function () {
                        return nS(r, e), AI(r.Zc, e, !0);
                      })),
                    XI(r.sl, e);
                }),
                [4, c]);
          case 4:
            return t.sent(), [4, hS(r, u)];
          case 5:
            return (
              t.sent(),
              (n = r)._l.forEach(function (t, e) {
                XI(n.sl, e);
              }),
              n.fl.Lu(),
              (n._l = new Map()),
              (n.ll = new ig(Dy.K)),
              (r.Tl = !1),
              [4, cT(r.sl, !1)]
            );
          case 6:
            t.sent(), (t.label = 7);
          case 7:
            return [2];
        }
        var n;
      });
    });
  }
  function hS(p, d) {
    return _o(this, void 0, void 0, function () {
      var e, n, r, i, o, s, a, u, c, h, l, f;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            (e = p), (n = []), (r = []), (i = 0), (o = d), (t.label = 1);
          case 1:
            return i < o.length
              ? ((s = o[i]),
                (a = void 0),
                (u = e.ul.get(s)) && 0 !== u.length
                  ? [4, NI(e.Zc, Xb(u[0]))]
                  : [3, 7])
              : [3, 13];
          case 2:
            (a = t.sent()), (c = 0), (h = u), (t.label = 3);
          case 3:
            return c < h.length
              ? ((l = h[c]),
                (l = e.al.get(l)),
                [
                  4,
                  (function (r, i) {
                    return _o(this, void 0, void 0, function () {
                      var e, n;
                      return wo(this, function (t) {
                        switch (t.label) {
                          case 0:
                            return [4, kI((e = r).Zc, i.query, !0)];
                          case 1:
                            return (
                              (n = t.sent()),
                              (n = i.view.tl(n)),
                              [2, (e.ml && iS(e, i.targetId, n.Xh), n)]
                            );
                        }
                      });
                    });
                  })(e, l)
                ])
              : [3, 6];
          case 4:
            (l = t.sent()).snapshot && r.push(l.snapshot), (t.label = 5);
          case 5:
            return c++, [3, 3];
          case 6:
            return [3, 11];
          case 7:
            return [4, RI(e.Zc, s)];
          case 8:
            return (f = t.sent()), [4, NI(e.Zc, f)];
          case 9:
            return (a = t.sent()), [4, QT(e, lS(f), s, !1)];
          case 10:
            t.sent(), (t.label = 11);
          case 11:
            n.push(a), (t.label = 12);
          case 12:
            return i++, [3, 1];
          case 13:
            return [2, (e.cl.Na(r), n)];
        }
      });
    });
  }
  function lS(t) {
    return Bb(
      t.path,
      t.collectionGroup,
      t.orderBy,
      t.filters,
      t.limit,
      'F',
      t.startAt,
      t.endAt
    );
  }
  function fS(t) {
    return (
      (t.sl.nu._u = XT.bind(null, t)),
      (t.sl.nu.tn = function (t, e) {
        var n = t;
        if ((t = n._l.get(e)) && t.nl) return bg().add(t.key);
        var r = bg();
        if (!(e = n.ul.get(e))) return r;
        for (var i = 0, o = e; i < o.length; i++)
          var s = o[i], s = n.al.get(s), r = r.Ht(s.view.jh);
        return r;
      }.bind(null, t)),
      (t.sl.nu.lu = function (o, s, a) {
        return _o(this, void 0, void 0, function () {
          var e, n, r, i;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return (
                  (e = o).rl.Ah(s, 'rejected', a),
                  (i = e._l.get(s)),
                  (n = i && i.key)
                    ? ((r = (r = new ig(Dy.K)).At(n, new Mb(n, ky.min()))),
                      (i = bg().add(n)),
                      (i = new Tg(ky.min(), new Map(), new lg(ry), r, i)),
                      [4, XT(e, i)])
                    : [3, 2]
                );
              case 1:
                return (
                  t.sent(),
                  (e.ll = e.ll.remove(n)),
                  e._l.delete(s),
                  oS(e),
                  [3, 4]
                );
              case 2:
                return [
                  4,
                  AI(e.Zc, s, !1)
                    .then(function () {
                      return nS(e, s, a);
                    })
                    .catch(DI)
                ];
              case 3:
                t.sent(), (t.label = 4);
              case 4:
                return [2];
            }
          });
        });
      }.bind(null, t)),
      (t.cl.Na = function (t, e) {
        for (var n = t, r = !1, i = 0, o = e; i < o.length; i++) {
          var s = o[i],
            a = s.query,
            a = n.queries.get(a);
          if (a) {
            for (var u = 0, c = a.listeners; u < c.length; u++)
              c[u].Ru(s) && (r = !0);
            a.Tu = s;
          }
        }
        r && yT(n);
      }.bind(null, t.il)),
      (t.cl.Al = function (t, e, n) {
        var r = t;
        if ((t = r.queries.get(e)))
          for (var i = 0, o = t.listeners; i < o.length; i++) o[i].onError(n);
        r.queries.delete(e);
      }.bind(null, t.il)),
      t
    );
  }
  function pS(t) {
    return (
      (t.sl.nu.fu = function (i, o) {
        return _o(this, void 0, void 0, function () {
          var e, n, r;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                (e = i), (n = o.batch.batchId), (t.label = 1);
              case 1:
                return t.trys.push([1, 4, , 6]), [4, II(e.Zc, o)];
              case 2:
                return (
                  (r = t.sent()),
                  eS(e, n, null),
                  tS(e, n),
                  e.rl.fh(n, 'acknowledged'),
                  [4, sS(e, r)]
                );
              case 3:
                return t.sent(), [3, 6];
              case 4:
                return [4, DI(t.sent())];
              case 5:
                return t.sent(), [3, 6];
              case 6:
                return [2];
            }
          });
        });
      }.bind(null, t)),
      (t.sl.nu.du = $T.bind(null, t)),
      t
    );
  }
  function dS(t, e, n) {
    var r = t;
    (function (f, p, d) {
      return _o(this, void 0, void 0, function () {
        var a, u, c, h, l;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return t.trys.push([0, 14, , 15]), [4, p.getMetadata()];
            case 1:
              return (
                (a = t.sent()),
                [
                  4,
                  ((r = f.Zc),
                  (i = a),
                  (s = new lI((o = r).serializer).Jc(i.createTime)),
                  o.persistence
                    .runTransaction('hasNewerBundle', 'readonly', function (t) {
                      return o.tc._o(t, i.id);
                    })
                    .then(function (t) {
                      return !!t && 0 <= t.createTime.u(s);
                    }))
                ]
              );
            case 2:
              return t.sent() ? [4, p.close()] : [3, 4];
            case 3:
              return [
                2,
                (t.sent(),
                void d.Rl({
                  taskState: 'Success',
                  documentsLoaded: a.totalDocuments,
                  bytesLoaded: a.totalBytes,
                  totalDocuments: a.totalDocuments,
                  totalBytes: a.totalBytes
                }))
              ];
            case 4:
              return (
                d.Pl(vI(a)), (u = new gI(a, f.Zc, p.serializer)), [4, p.Uc()]
              );
            case 5:
              (c = t.sent()), (t.label = 6);
            case 6:
              return c ? [4, u.ta(c)] : [3, 10];
            case 7:
              return (h = t.sent()) && d.Pl(h), [4, p.Uc()];
            case 8:
              (c = t.sent()), (t.label = 9);
            case 9:
              return [3, 6];
            case 10:
              return [4, u.complete()];
            case 11:
              return (l = t.sent()), [4, sS(f, l.Yc, void 0)];
            case 12:
              return (
                t.sent(),
                [
                  4,
                  ((r = f.Zc),
                  (e = a),
                  (n = r).persistence.runTransaction(
                    'Save bundle',
                    'readwrite',
                    function (t) {
                      return n.tc.fo(t, e);
                    }
                  ))
                ]
              );
            case 13:
              return t.sent(), d.Rl(l.progress), [3, 15];
            case 14:
              return (
                Jv(
                  'SyncEngine',
                  'Loading bundle failed with ' + (l = t.sent())
                ),
                d.yl(l),
                [3, 15]
              );
            case 15:
              return [2];
          }
          var e, n, r, i, o, s;
        });
      });
    })(r, e, n).then(function () {
      r.rl.Vh();
    });
  }
  var vS,
    yS,
    gS,
    mS,
    bS,
    _S =
      ((eC.prototype.kr = function (t) {
        return M_.resolve(0 === this.cs.length);
      }),
      (eC.prototype.Mr = function (t, e, n, r) {
        var i = this.gl;
        this.gl++, 0 < this.cs.length && this.cs[this.cs.length - 1];
        n = new D_(i, e, n, r);
        this.cs.push(n);
        for (var o = 0, s = r; o < s.length; o++) {
          var a = s[o];
          (this.Vl = this.Vl.add(new bT(a.key, i))),
            this.us.Lr(t, a.key.path.G());
        }
        return M_.resolve(n);
      }),
      (eC.prototype.$r = function (t, e) {
        return M_.resolve(this.pl(e));
      }),
      (eC.prototype.qr = function (t, e) {
        (e += 1), (e = this.bl(e)), (e = e < 0 ? 0 : e);
        return M_.resolve(this.cs.length > e ? this.cs[e] : null);
      }),
      (eC.prototype.Ur = function () {
        return M_.resolve(0 === this.cs.length ? -1 : this.gl - 1);
      }),
      (eC.prototype.Qr = function (t) {
        return M_.resolve(this.cs.slice());
      }),
      (eC.prototype.ls = function (t, e) {
        var n = this,
          r = new bT(e, 0),
          e = new bT(e, Number.POSITIVE_INFINITY),
          i = [];
        return (
          this.Vl.jt([r, e], function (t) {
            t = n.pl(t.Bu);
            i.push(t);
          }),
          M_.resolve(i)
        );
      }),
      (eC.prototype.Es = function (t, e) {
        var n = this,
          r = new lg(ry);
        return (
          e.forEach(function (t) {
            var e = new bT(t, 0),
              t = new bT(t, Number.POSITIVE_INFINITY);
            n.Vl.jt([e, t], function (t) {
              r = r.add(t.Bu);
            });
          }),
          M_.resolve(this.vl(r))
        );
      }),
      (eC.prototype.ys = function (t, e) {
        var n = e.path,
          r = n.length + 1,
          e = n;
        Dy.lt(e) || (e = e.child(''));
        var e = new bT(new Dy(e), 0),
          i = new lg(ry);
        return (
          this.Vl.Gt(function (t) {
            var e = t.key.path;
            return !!n.X(e) && (e.length === r && (i = i.add(t.Bu)), !0);
          }, e),
          M_.resolve(this.vl(i))
        );
      }),
      (eC.prototype.vl = function (t) {
        var e = this,
          n = [];
        return (
          t.forEach(function (t) {
            t = e.pl(t);
            null !== t && n.push(t);
          }),
          n
        );
      }),
      (eC.prototype.Wr = function (n, r) {
        var i = this;
        ty(0 === this.Sl(r.batchId, 'removed')), this.cs.shift();
        var o = this.Vl;
        return M_.forEach(r.mutations, function (t) {
          var e = new bT(t.key, r.batchId);
          return (o = o.delete(e)), i.Nr.zr(n, t.key);
        }).next(function () {
          i.Vl = o;
        });
      }),
      (eC.prototype.Gr = function (t) {}),
      (eC.prototype.Jr = function (t, e) {
        var n = new bT(e, 0),
          n = this.Vl.zt(n);
        return M_.resolve(e.isEqual(n && n.key));
      }),
      (eC.prototype.Hr = function (t) {
        return this.cs.length, M_.resolve();
      }),
      (eC.prototype.Sl = function (t, e) {
        return this.bl(t);
      }),
      (eC.prototype.bl = function (t) {
        return 0 === this.cs.length ? 0 : t - this.cs[0].batchId;
      }),
      (eC.prototype.pl = function (t) {
        t = this.bl(t);
        return t < 0 || t >= this.cs.length ? null : this.cs[t];
      }),
      eC),
    wS =
      ((tC.prototype.zn = function (t, e, n) {
        var r = e.key,
          i = this.docs.get(r),
          o = i ? i.size : 0,
          i = this.Dl(e);
        return (
          (this.docs = this.docs.At(r, { Jn: e, size: i, readTime: n })),
          (this.size += i - o),
          this.us.Lr(t, r.path.G())
        );
      }),
      (tC.prototype.Yn = function (t) {
        var e = this.docs.get(t);
        e && ((this.docs = this.docs.remove(t)), (this.size -= e.size));
      }),
      (tC.prototype.Xn = function (t, e) {
        e = this.docs.get(e);
        return M_.resolve(e ? e.Jn : null);
      }),
      (tC.prototype.getEntries = function (t, e) {
        var n = this,
          r = pg;
        return (
          e.forEach(function (t) {
            var e = n.docs.get(t);
            r = r.At(t, e ? e.Jn : null);
          }),
          M_.resolve(r)
        );
      }),
      (tC.prototype.Ts = function (t, e, n) {
        for (
          var r = yg, i = new Dy(e.path.child('')), o = this.docs.vt(i);
          o.Ft();

        ) {
          var s = o.Nt(),
            a = s.key,
            u = s.value,
            s = u.Jn,
            u = u.readTime;
          if (!e.path.X(a.path)) break;
          u.u(n) <= 0 || (s instanceof Lb && e_(e, s) && (r = r.At(s.key, s)));
        }
        return M_.resolve(r);
      }),
      (tC.prototype.Cl = function (t, e) {
        return M_.forEach(this.docs, function (t) {
          return e(t);
        });
      }),
      (tC.prototype.oo = function (t) {
        return new ES(this);
      }),
      (tC.prototype.ao = function (t) {
        return M_.resolve(this.size);
      }),
      tC),
    ES =
      (mo(ZS, (bS = Gn)),
      (ZS.prototype.es = function (n) {
        var r = this,
          i = [];
        return (
          this.Wn.forEach(function (t, e) {
            e && e.Jn ? i.push(r.uo.zn(n, e.Jn, r.Gn(t))) : r.uo.Yn(t);
          }),
          M_.Qn(i)
        );
      }),
      (ZS.prototype.Zn = function (t, e) {
        return this.uo.Xn(t, e);
      }),
      (ZS.prototype.ts = function (t, e) {
        return this.uo.getEntries(t, e);
      }),
      ZS),
    IS =
      (($S.prototype.Ke = function (t, n) {
        return (
          this.xl.forEach(function (t, e) {
            return n(e);
          }),
          M_.resolve()
        );
      }),
      ($S.prototype.Vo = function (t) {
        return M_.resolve(this.lastRemoteSnapshotVersion);
      }),
      ($S.prototype.po = function (t) {
        return M_.resolve(this.Nl);
      }),
      ($S.prototype.Ro = function (t) {
        return (
          (this.highestTargetId = this.Ol.next()),
          M_.resolve(this.highestTargetId)
        );
      }),
      ($S.prototype.bo = function (t, e, n) {
        return (
          n && (this.lastRemoteSnapshotVersion = n),
          e > this.Nl && (this.Nl = e),
          M_.resolve()
        );
      }),
      ($S.prototype.So = function (t) {
        this.xl.set(t.target, t);
        var e = t.targetId;
        e > this.highestTargetId &&
          ((this.Ol = new qE(e)), (this.highestTargetId = e)),
          t.sequenceNumber > this.Nl && (this.Nl = t.sequenceNumber);
      }),
      ($S.prototype.vo = function (t, e) {
        return this.So(e), (this.targetCount += 1), M_.resolve();
      }),
      ($S.prototype.Co = function (t, e) {
        return this.So(e), M_.resolve();
      }),
      ($S.prototype.xo = function (t, e) {
        return (
          this.xl.delete(e.target),
          this.Fl.Mu(e.targetId),
          --this.targetCount,
          M_.resolve()
        );
      }),
      ($S.prototype.Rr = function (n, r, i) {
        var o = this,
          s = 0,
          a = [];
        return (
          this.xl.forEach(function (t, e) {
            e.sequenceNumber <= r &&
              null === i.get(e.targetId) &&
              (o.xl.delete(t), a.push(o.No(n, e.targetId)), s++);
          }),
          M_.Qn(a).next(function () {
            return s;
          })
        );
      }),
      ($S.prototype.Fo = function (t) {
        return M_.resolve(this.targetCount);
      }),
      ($S.prototype.Oo = function (t, e) {
        e = this.xl.get(e) || null;
        return M_.resolve(e);
      }),
      ($S.prototype.ko = function (t, e, n) {
        return this.Fl.Fu(e, n), M_.resolve();
      }),
      ($S.prototype.Lo = function (e, t, n) {
        this.Fl.ku(t, n);
        var r = this.persistence.Nr,
          i = [];
        return (
          r &&
            t.forEach(function (t) {
              i.push(r.zr(e, t));
            }),
          M_.Qn(i)
        );
      }),
      ($S.prototype.No = function (t, e) {
        return this.Fl.Mu(e), M_.resolve();
      }),
      ($S.prototype.Bo = function (t, e) {
        e = this.Fl.$u(e);
        return M_.resolve(e);
      }),
      ($S.prototype.Jr = function (t, e) {
        return M_.resolve(this.Fl.Jr(e));
      }),
      $S),
    TS =
      ((JS.prototype._o = function (t, e) {
        return M_.resolve(this.kl.get(e));
      }),
      (JS.prototype.fo = function (t, e) {
        return (
          this.kl.set(e.id, {
            id: e.id,
            version: e.version,
            createTime: vm(e.createTime)
          }),
          M_.resolve()
        );
      }),
      (JS.prototype.wo = function (t, e) {
        return M_.resolve(this.Ml.get(e));
      }),
      (JS.prototype.Eo = function (t, e) {
        return (
          this.Ml.set(e.name, {
            name: (e = e).name,
            query: zw(e.bundledQuery),
            readTime: vm(e.readTime)
          }),
          M_.resolve()
        );
      }),
      JS),
    SS =
      ((XS.prototype.start = function () {
        return Promise.resolve();
      }),
      (XS.prototype.Ac = function () {
        return (this.Wo = !1), Promise.resolve();
      }),
      Object.defineProperty(XS.prototype, 'dr', {
        get: function () {
          return this.Wo;
        },
        enumerable: !1,
        configurable: !0
      }),
      (XS.prototype.cc = function () {}),
      (XS.prototype.ac = function () {}),
      (XS.prototype.Dc = function () {
        return this.us;
      }),
      (XS.prototype.bc = function (t) {
        var e = this.Ll[t.R()];
        return e || ((e = new _S(this.us, this.Nr)), (this.Ll[t.R()] = e)), e;
      }),
      (XS.prototype.vc = function () {
        return this.Zo;
      }),
      (XS.prototype.Sc = function () {
        return this.os;
      }),
      (XS.prototype.Cc = function () {
        return this.tc;
      }),
      (XS.prototype.runTransaction = function (t, e, n) {
        var r = this;
        Yv('MemoryPersistence', 'Starting transaction:', t);
        var i = new CS(this.Ko.next());
        return (
          this.Nr.Bl(),
          n(i)
            .next(function (t) {
              return r.Nr.ql(i).next(function () {
                return t;
              });
            })
            .qn()
            .then(function (t) {
              return i.rs(), t;
            })
        );
      }),
      (XS.prototype.Ul = function (e, n) {
        return M_.Kn(
          Object.values(this.Ll).map(function (t) {
            return function () {
              return t.Jr(e, n);
            };
          })
        );
      }),
      XS),
    CS = (mo(YS, (mS = dt)), YS),
    NS =
      ((QS.Wl = function (t) {
        return new QS(t);
      }),
      Object.defineProperty(QS.prototype, 'jl', {
        get: function () {
          if (this.Kl) return this.Kl;
          throw Zv();
        },
        enumerable: !1,
        configurable: !0
      }),
      (QS.prototype.Mo = function (t, e, n) {
        return this.Ql.Mo(n, e), this.jl.delete(n.toString()), M_.resolve();
      }),
      (QS.prototype.$o = function (t, e, n) {
        return this.Ql.$o(n, e), this.jl.add(n.toString()), M_.resolve();
      }),
      (QS.prototype.zr = function (t, e) {
        return this.jl.add(e.toString()), M_.resolve();
      }),
      (QS.prototype.removeTarget = function (t, e) {
        var n = this;
        this.Ql.Mu(e.targetId).forEach(function (t) {
          return n.jl.add(t.toString());
        });
        var r = this.persistence.vc();
        return r
          .Bo(t, e.targetId)
          .next(function (t) {
            t.forEach(function (t) {
              return n.jl.add(t.toString());
            });
          })
          .next(function () {
            return r.xo(t, e);
          });
      }),
      (QS.prototype.Bl = function () {
        this.Kl = new Set();
      }),
      (QS.prototype.ql = function (n) {
        var r = this,
          i = this.persistence.Sc().oo();
        return M_.forEach(this.jl, function (t) {
          var e = Dy.at(t);
          return r.Gl(n, e).next(function (t) {
            t || i.Yn(e);
          });
        }).next(function () {
          return (r.Kl = null), i.apply(n);
        });
      }),
      (QS.prototype.kc = function (t, e) {
        var n = this;
        return this.Gl(t, e).next(function (t) {
          t ? n.jl.delete(e.toString()) : n.jl.add(e.toString());
        });
      }),
      (QS.prototype.$l = function (t) {
        return 0;
      }),
      (QS.prototype.Gl = function (t, e) {
        var n = this;
        return M_.Kn([
          function () {
            return M_.resolve(n.Ql.Jr(e));
          },
          function () {
            return n.persistence.vc().Jr(t, e);
          },
          function () {
            return n.persistence.Ul(t, e);
          }
        ]);
      }),
      QS),
    AS =
      ((GS.prototype.Ca = function (t) {
        this.Jl = t;
      }),
      (GS.prototype.pa = function (t) {
        this.Yl = t;
      }),
      (GS.prototype.onMessage = function (t) {
        this.Xl = t;
      }),
      (GS.prototype.close = function () {
        this.Hl();
      }),
      (GS.prototype.send = function (t) {
        this.zl(t);
      }),
      (GS.prototype.Zl = function () {
        this.Jl();
      }),
      (GS.prototype.t_ = function (t) {
        this.Yl(t);
      }),
      (GS.prototype.e_ = function (t) {
        this.Xl(t);
      }),
      GS),
    kS = {
      BatchGetDocuments: 'batchGet',
      Commit: 'commit',
      RunQuery: 'runQuery'
    },
    RS =
      ((zS.prototype.Ka = function (e, t, n, r) {
        var i = this.r_(e, t);
        Yv('RestConnection', 'Sending: ', i, n);
        t = {};
        return (
          this.o_(t, r),
          this.c_(e, i, t, n).then(
            function (t) {
              return Yv('RestConnection', 'Received: ', t), t;
            },
            function (t) {
              throw (
                (Jv(
                  'RestConnection',
                  e + ' failed with error: ',
                  t,
                  'url: ',
                  i,
                  'request:',
                  n
                ),
                t)
              );
            }
          )
        );
      }),
      (zS.prototype.Wa = function (t, e, n, r) {
        return this.Ka(t, e, n, r);
      }),
      (zS.prototype.o_ = function (t, e) {
        if (
          ((t['X-Goog-Api-Client'] = 'gl-js/ fire/8.1.1'),
          (t['Content-Type'] = 'text/plain'),
          e)
        )
          for (var n in e.V) e.V.hasOwnProperty(n) && (t[n] = e.V[n]);
      }),
      (zS.prototype.r_ = function (t, e) {
        t = kS[t];
        return this.s_ + '/v1/' + e + ':' + t;
      }),
      mo(HS, (gS = zS)),
      (HS.prototype.c_ = function (o, e, s, a) {
        return new Promise(function (n, r) {
          var i = new Wv();
          i.listenOnce(Uv.COMPLETE, function () {
            try {
              switch (i.getLastErrorCode()) {
                case Fv.NO_ERROR:
                  var t = i.getResponseJson();
                  Yv('Connection', 'XHR received:', JSON.stringify(t)), n(t);
                  break;
                case Fv.TIMEOUT:
                  Yv('Connection', 'RPC "' + o + '" timed out'),
                    r(new Hv(Kv.DEADLINE_EXCEEDED, 'Request time out'));
                  break;
                case Fv.HTTP_ERROR:
                  var e = i.getStatus();
                  Yv(
                    'Connection',
                    'RPC "' + o + '" failed with status:',
                    e,
                    'response text:',
                    i.getResponseText()
                  ),
                    0 < e
                      ? (t = i.getResponseJson().error) && t.status && t.message
                        ? ((e = t.status.toLowerCase().replace(/_/g, '-')),
                          (e =
                            0 <= Object.values(Kv).indexOf(e) ? e : Kv.UNKNOWN),
                          r(new Hv(e, t.message)))
                        : r(
                            new Hv(
                              Kv.UNKNOWN,
                              'Server responded with status ' + i.getStatus()
                            )
                          )
                      : r(new Hv(Kv.UNAVAILABLE, 'Connection failed.'));
                  break;
                default:
                  Zv();
              }
            } finally {
              Yv('Connection', 'RPC "' + o + '" completed.');
            }
          });
          var t = JSON.stringify(a);
          i.send(e, 'POST', t, s, 15);
        });
      }),
      (HS.prototype.xa = function (t, e) {
        var n = [
            this.s_,
            '/',
            'google.firestore.v1.Firestore',
            '/',
            t,
            '/channel'
          ],
          r = new Rv(),
          i = Mv(),
          t = {
            httpSessionIdParam: 'gsessionid',
            initMessageHeaders: {},
            messageUrlParams: {
              database:
                'projects/' + this.T.projectId + '/databases/' + this.T.database
            },
            sendRawJson: !0,
            supportsCrossDomainXhr: !0,
            internalChannelParams: { forwardChannelRequestTimeoutMs: 6e5 },
            forceLongPolling: this.forceLongPolling,
            detectBufferingProxy: this.m
          };
        this.o_(t.initMessageHeaders, e),
          Fo() ||
            jo() ||
            0 <= Mo().indexOf('Electron/') ||
            0 <= (e = Mo()).indexOf('MSIE ') ||
            0 <= e.indexOf('Trident/') ||
            0 <= Mo().indexOf('MSAppHost/') ||
            Uo() ||
            (t.httpHeadersOverwriteParam = '$httpHeaders');
        n = n.join('');
        Yv('Connection', 'Creating WebChannel: ' + n, t);
        var o = r.createWebChannel(n, t),
          s = !1,
          a = !1,
          u = new AS({
            zl: function (t) {
              a
                ? Yv(
                    'Connection',
                    'Not sending because WebChannel is closed:',
                    t
                  )
                : (s ||
                    (Yv('Connection', 'Opening WebChannel transport.'),
                    o.open(),
                    (s = !0)),
                  Yv('Connection', 'WebChannel sending:', t),
                  o.send(t));
            },
            Hl: function () {
              return o.close();
            }
          }),
          t = function (t, e, n) {
            t.listen(e, function (t) {
              try {
                n(t);
              } catch (t) {
                setTimeout(function () {
                  throw t;
                }, 0);
              }
            });
          };
        return (
          t(o, Bv.EventType.OPEN, function () {
            a || Yv('Connection', 'WebChannel transport opened.');
          }),
          t(o, Bv.EventType.CLOSE, function () {
            a ||
              ((a = !0),
              Yv('Connection', 'WebChannel transport closed'),
              u.t_());
          }),
          t(o, Bv.EventType.ERROR, function (t) {
            a ||
              ((a = !0),
              Jv('Connection', 'WebChannel transport errored:', t),
              u.t_(
                new Hv(Kv.UNAVAILABLE, 'The operation could not be completed')
              ));
          }),
          t(o, Bv.EventType.MESSAGE, function (t) {
            var e, n, r, i;
            a ||
              (ty(!!(e = t.data[0])),
              (n =
                e.error ||
                (null === (i = e[0]) || void 0 === i ? void 0 : i.error))
                ? (Yv('Connection', 'WebChannel received error:', n),
                  (r = n.status),
                  (t = (function () {
                    var t = Zy[r];
                    if (void 0 !== t) return rg(t);
                  })()),
                  (i = n.message),
                  void 0 === t &&
                    ((t = Kv.INTERNAL),
                    (i =
                      'Unknown error status: ' +
                      r +
                      ' with message ' +
                      n.message)),
                  (a = !0),
                  u.t_(new Hv(t, i)),
                  o.close())
                : (Yv('Connection', 'WebChannel received:', e), u.e_(e)));
          }),
          t(i, jv.STAT_EVENT, function (t) {
            t.stat === Vv
              ? Yv('Connection', 'Detected buffering proxy')
              : t.stat === qv &&
                Yv('Connection', 'Detected no buffering proxy');
          }),
          setTimeout(function () {
            u.Zl();
          }, 0),
          u
        );
      }),
      HS),
    OS =
      ((KS.prototype.au = function (t) {
        this.__.push(t);
      }),
      (KS.prototype.Ac = function () {
        window.removeEventListener('online', this.a_),
          window.removeEventListener('offline', this.h_);
      }),
      (KS.prototype.f_ = function () {
        window.addEventListener('online', this.a_),
          window.addEventListener('offline', this.h_);
      }),
      (KS.prototype.u_ = function () {
        Yv('ConnectivityMonitor', 'Network connectivity changed: AVAILABLE');
        for (var t = 0, e = this.__; t < e.length; t++) (0, e[t])(0);
      }),
      (KS.prototype.l_ = function () {
        Yv('ConnectivityMonitor', 'Network connectivity changed: UNAVAILABLE');
        for (var t = 0, e = this.__; t < e.length; t++) (0, e[t])(1);
      }),
      (KS.Hs = function () {
        return (
          'undefined' != typeof window &&
          void 0 !== window.addEventListener &&
          void 0 !== window.removeEventListener
        );
      }),
      KS),
    PS =
      ((WS.prototype.au = function (t) {}),
      (WS.prototype.Ac = function () {}),
      WS),
    DS =
      ((BS.prototype.initialize = function (e) {
        return _o(this, void 0, void 0, function () {
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return (
                  (this.serializer = uI(e.n_.T)),
                  (this.rl = this.d_(e)),
                  (this.persistence = this.w_(e)),
                  [4, this.persistence.start()]
                );
              case 1:
                return (
                  t.sent(), (this.E_ = this.T_(e)), (this.Zc = this.m_(e)), [2]
                );
            }
          });
        });
      }),
      (BS.prototype.T_ = function (t) {
        return null;
      }),
      (BS.prototype.m_ = function (t) {
        return wI(this.persistence, new kw(), t.I_, this.serializer);
      }),
      (BS.prototype.w_ = function (t) {
        return new SS(NS.Wl, this.serializer);
      }),
      (BS.prototype.d_ = function (t) {
        return new PT();
      }),
      (BS.prototype.terminate = function () {
        return _o(this, void 0, void 0, function () {
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return this.E_ && this.E_.stop(), [4, this.rl.Ac()];
              case 1:
                return t.sent(), [4, this.persistence.Ac()];
              case 2:
                return t.sent(), [2];
            }
          });
        });
      }),
      BS),
    xS =
      (mo(qS, (yS = DS)),
      (qS.prototype.initialize = function (e) {
        return _o(this, void 0, void 0, function () {
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return [4, yS.prototype.initialize.call(this, e)];
              case 1:
                return t.sent(), [4, PI(this.Zc)];
              case 2:
                return t.sent(), [4, this.A_.initialize(this, e)];
              case 3:
                return t.sent(), [4, pS(this.A_.ju)];
              case 4:
                return t.sent(), [4, sT(this.A_.sl)];
              case 5:
                return t.sent(), [2];
            }
          });
        });
      }),
      (qS.prototype.m_ = function (t) {
        return wI(this.persistence, new kw(), t.I_, this.serializer);
      }),
      (qS.prototype.T_ = function (t) {
        var e = this.persistence.Nr.ur;
        return new Nw(e, t.Ei);
      }),
      (qS.prototype.w_ = function (t) {
        var e = oI(t.n_.T, t.n_.persistenceKey),
          n =
            void 0 !== this.cacheSizeBytes ? Tw.sr(this.cacheSizeBytes) : Tw.cr;
        return new JE(
          this.synchronizeTabs,
          e,
          t.clientId,
          n,
          t.Ei,
          dw(),
          vw(),
          this.serializer,
          this.rl,
          !!this.forceOwnership
        );
      }),
      (qS.prototype.d_ = function (t) {
        return new PT();
      }),
      qS),
    LS =
      (mo(VS, (vS = xS)),
      (VS.prototype.initialize = function (r) {
        return _o(this, void 0, void 0, function () {
          var e,
            n = this;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return [4, vS.prototype.initialize.call(this, r)];
              case 1:
                return (
                  t.sent(),
                  (e = this.A_.ju),
                  this.rl instanceof OT
                    ? ((this.rl.ju = {
                        kh: uS.bind(null, e),
                        Mh: function (i, o, s, a) {
                          return _o(this, void 0, void 0, function () {
                            var e, n, r;
                            return wo(this, function (t) {
                              switch (t.label) {
                                case 0:
                                  return (e = i).Tl
                                    ? (Yv(
                                        'SyncEngine',
                                        'Ignoring unexpected query state notification.'
                                      ),
                                      [3, 8])
                                    : [3, 1];
                                case 1:
                                  if (!e.ul.has(o)) return [3, 8];
                                  switch (s) {
                                    case 'current':
                                    case 'not-current':
                                      return [3, 2];
                                    case 'rejected':
                                      return [3, 5];
                                  }
                                  return [3, 7];
                                case 2:
                                  return [4, OI(e.Zc)];
                                case 3:
                                  return (
                                    (n = t.sent()),
                                    (r = Tg.le(o, 'current' === s)),
                                    [4, sS(e, n, r)]
                                  );
                                case 4:
                                  return t.sent(), [3, 8];
                                case 5:
                                  return [4, AI(e.Zc, o, !0)];
                                case 6:
                                  return t.sent(), nS(e, o, a), [3, 8];
                                case 7:
                                  Zv(), (t.label = 8);
                                case 8:
                                  return [2];
                              }
                            });
                          });
                        }.bind(null, e),
                        Lh: function (c, h, l) {
                          return _o(this, void 0, void 0, function () {
                            var n, e, r, i, o, s, a, u;
                            return wo(this, function (t) {
                              switch (t.label) {
                                case 0:
                                  if (!(n = fS(c)).Tl) return [3, 10];
                                  (e = 0), (r = h), (t.label = 1);
                                case 1:
                                  return e < r.length
                                    ? ((r = r[e]),
                                      n.ul.has(r)
                                        ? (Yv(
                                            'SyncEngine',
                                            'Adding an already active target ' +
                                              r
                                          ),
                                          [3, 5])
                                        : [4, RI(n.Zc, r)])
                                    : [3, 6];
                                case 2:
                                  return (i = t.sent()), [4, NI(n.Zc, i)];
                                case 3:
                                  return (
                                    (o = t.sent()),
                                    [4, QT(n, lS(i), o.targetId, !1)]
                                  );
                                case 4:
                                  t.sent(), YI(n.sl, o), (t.label = 5);
                                case 5:
                                  return e++, [3, 1];
                                case 6:
                                  (s = function (e) {
                                    return wo(this, function (t) {
                                      switch (t.label) {
                                        case 0:
                                          return n.ul.has(e)
                                            ? [
                                                4,
                                                AI(n.Zc, e, !1)
                                                  .then(function () {
                                                    XI(n.sl, e), nS(n, e);
                                                  })
                                                  .catch(DI)
                                              ]
                                            : [3, 2];
                                        case 1:
                                          t.sent(), (t.label = 2);
                                        case 2:
                                          return [2];
                                      }
                                    });
                                  }),
                                    (a = 0),
                                    (u = l),
                                    (t.label = 7);
                                case 7:
                                  return a < u.length
                                    ? ((u = u[a]), [5, s(u)])
                                    : [3, 10];
                                case 8:
                                  t.sent(), (t.label = 9);
                                case 9:
                                  return a++, [3, 7];
                                case 10:
                                  return [2];
                              }
                            });
                          });
                        }.bind(null, e),
                        Vc: function (t) {
                          return t.Zc.persistence.Vc();
                        }.bind(null, e),
                        Oh: function (n) {
                          return _o(this, void 0, void 0, function () {
                            var e;
                            return wo(this, function (t) {
                              return [
                                2,
                                OI((e = n).Zc).then(function (t) {
                                  return sS(e, t);
                                })
                              ];
                            });
                          });
                        }.bind(null, e)
                      }),
                      [4, this.rl.start()])
                    : [3, 3]
                );
              case 2:
                t.sent(), (t.label = 3);
              case 3:
                return [
                  4,
                  this.persistence.oc(function (e) {
                    return _o(n, void 0, void 0, function () {
                      return wo(this, function (t) {
                        switch (t.label) {
                          case 0:
                            return [4, cS(this.A_.ju, e)];
                          case 1:
                            return (
                              t.sent(),
                              this.E_ &&
                                (e && !this.E_.dr
                                  ? this.E_.start(this.Zc)
                                  : e || this.E_.stop()),
                              [2]
                            );
                        }
                      });
                    });
                  })
                ];
              case 4:
                return t.sent(), [2];
            }
          });
        });
      }),
      (VS.prototype.d_ = function (t) {
        var e = dw();
        if (!OT.Hs(e))
          throw new Hv(
            Kv.UNIMPLEMENTED,
            'IndexedDB persistence is only available on platforms that support LocalStorage.'
          );
        var n = oI(t.n_.T, t.n_.persistenceKey);
        return new OT(e, t.Ei, n, t.clientId, t.I_);
      }),
      VS),
    MS =
      ((jS.prototype.initialize = function (n, r) {
        return _o(this, void 0, void 0, function () {
          var e = this;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return this.Zc
                  ? [3, 2]
                  : ((this.Zc = n.Zc),
                    (this.rl = n.rl),
                    (this.eu = this.R_(r)),
                    (this.sl = this.P_(r)),
                    (this.il = this.y_(r)),
                    (this.ju = this.g_(r, !n.synchronizeTabs)),
                    (this.rl.ja = function (t) {
                      return JT(e.ju, t, 1);
                    }),
                    (this.sl.nu.V_ = aS.bind(null, this.ju)),
                    [4, cT(this.sl, this.ju.ml)]);
              case 1:
                t.sent(), (t.label = 2);
              case 2:
                return [2];
            }
          });
        });
      }),
      (jS.prototype.y_ = function (t) {
        return new fT();
      }),
      (jS.prototype.R_ = function (t) {
        var e = uI(t.n_.T),
          n = ((n = t.n_), new RS(n));
        return (t = t.credentials), new VI(t, n, e);
      }),
      (jS.prototype.P_ = function (t) {
        var e = this,
          n = this.Zc,
          r = this.eu,
          i = t.Ei,
          o = function (t) {
            return JT(e.ju, t, 0);
          },
          t = new (OS.Hs() ? OS : PS)();
        return new xI(n, r, i, o, t);
      }),
      (jS.prototype.g_ = function (t, e) {
        return (function (t, e, n, r, i, o, s) {
          o = new UT(t, e, n, r, i, o);
          return s && (o.Tl = !0), o;
        })(this.Zc, this.sl, this.il, this.rl, t.I_, t.ol, e);
      }),
      (jS.prototype.terminate = function () {
        return (function (n) {
          return _o(this, void 0, void 0, function () {
            var e;
            return wo(this, function (t) {
              switch (t.label) {
                case 0:
                  return (
                    (e = n),
                    Yv('RemoteStore', 'RemoteStore shutting down.'),
                    e.ru.add(5),
                    [4, QI(e)]
                  );
                case 1:
                  return t.sent(), e.cu.Ac(), e.uu.set('Unknown'), [2];
              }
            });
          });
        })(this.sl);
      }),
      jS),
    FS =
      ((US.prototype.next = function (t) {
        this.observer.next && this.p_(this.observer.next, t);
      }),
      (US.prototype.error = function (t) {
        this.observer.error
          ? this.p_(this.observer.error, t)
          : console.error('Uncaught Error in snapshot listener:', t);
      }),
      (US.prototype.b_ = function () {
        this.muted = !0;
      }),
      (US.prototype.p_ = function (t, e) {
        var n = this;
        this.muted ||
          setTimeout(function () {
            n.muted || t(e);
          }, 0);
      }),
      US);
  function US(t) {
    (this.observer = t), (this.muted = !1);
  }
  function jS() {}
  function VS(t, e) {
    var n = this;
    return (
      ((n = vS.call(this, t, e, !1) || this).A_ = t),
      (n.cacheSizeBytes = e),
      (n.synchronizeTabs = !0),
      n
    );
  }
  function qS(t, e, n) {
    var r = this;
    return (
      ((r = yS.call(this) || this).A_ = t),
      (r.cacheSizeBytes = e),
      (r.forceOwnership = n),
      (r.synchronizeTabs = !1),
      r
    );
  }
  function BS() {
    this.synchronizeTabs = !1;
  }
  function WS() {}
  function KS() {
    var t = this;
    (this.a_ = function () {
      return t.u_();
    }),
      (this.h_ = function () {
        return t.l_();
      }),
      (this.__ = []),
      this.f_();
  }
  function HS(t) {
    var e = this;
    return (
      ((e = gS.call(this, t) || this).forceLongPolling = t.forceLongPolling),
      (e.m = t.m),
      e
    );
  }
  function zS(t) {
    (this.n_ = t), (this.T = t.T);
    var e = t.ssl ? 'https' : 'http';
    (this.s_ = e + '://' + t.host),
      (this.i_ =
        'projects/' +
        this.T.projectId +
        '/databases/' +
        this.T.database +
        '/documents');
  }
  function GS(t) {
    (this.zl = t.zl), (this.Hl = t.Hl);
  }
  function QS(t) {
    (this.persistence = t), (this.Ql = new mT()), (this.Kl = null);
  }
  function YS(t) {
    var e = this;
    return ((e = mS.call(this) || this).qo = t), e;
  }
  function XS(t, e) {
    var n = this;
    (this.Ll = {}),
      (this.Ko = new V_(0)),
      (this.Wo = !1),
      (this.Wo = !0),
      (this.Nr = t(this)),
      (this.Zo = new IS(this)),
      (this.us = new cE()),
      (this.os =
        ((t = this.us),
        new wS(t, function (t) {
          return n.Nr.$l(t);
        }))),
      (this.serializer = new Mw(e)),
      (this.tc = new TS(this.serializer));
  }
  function JS(t) {
    (this.serializer = t), (this.kl = new Map()), (this.Ml = new Map());
  }
  function $S(t) {
    (this.persistence = t),
      (this.xl = new L_(Yy, Xy)),
      (this.lastRemoteSnapshotVersion = ky.min()),
      (this.highestTargetId = 0),
      (this.Nl = 0),
      (this.Fl = new mT()),
      (this.targetCount = 0),
      (this.Ol = qE.Io());
  }
  function ZS(t) {
    var e = this;
    return ((e = bS.call(this) || this).uo = t), e;
  }
  function tC(t, e) {
    (this.us = t), (this.Dl = e), (this.docs = new ig(Dy.K)), (this.size = 0);
  }
  function eC(t, e) {
    (this.us = t),
      (this.Nr = e),
      (this.cs = []),
      (this.gl = 1),
      (this.Vl = new lg(bT.Cu));
  }
  function nC(t, e, n) {
    if (!n)
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Function ' + t + '() cannot be called with an empty ' + e + '.'
      );
  }
  function rC(t, e) {
    if (void 0 === e) return { merge: !1 };
    if (void 0 !== e.mergeFields && void 0 !== e.merge)
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Invalid options passed to function ' +
          t +
          '(): You cannot specify both "merge" and "mergeFields".'
      );
    return e;
  }
  function iC(t, e, n, r) {
    if (!0 === e && !0 === r)
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        t + ' and ' + n + ' cannot be used together.'
      );
  }
  function oC(t) {
    if (!Dy.lt(t))
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Invalid document reference. Document references must have an even number of segments, but ' +
          t +
          ' has ' +
          t.length +
          '.'
      );
  }
  function sC(t) {
    if (Dy.lt(t))
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Invalid collection reference. Collection references must have an odd number of segments, but ' +
          t +
          ' has ' +
          t.length +
          '.'
      );
  }
  function aC(e) {
    if (void 0 === e) return 'undefined';
    if (null === e) return 'null';
    if ('string' == typeof e)
      return (
        20 < e.length && (e = e.substring(0, 20) + '...'), JSON.stringify(e)
      );
    if ('number' == typeof e || 'boolean' == typeof e) return '' + e;
    if ('object' != typeof e)
      return 'function' == typeof e ? 'a function' : Zv();
    if (e instanceof Array) return 'an array';
    var t = (function () {
      if (e.constructor) {
        var t = /function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());
        if (t && 1 < t.length) return t[1];
      }
      return null;
    })();
    return t ? 'a custom ' + t + ' object' : 'an object';
  }
  function uC(t, e) {
    if (('_delegate' in t && (t = t._), t instanceof e)) return t;
    if (e.name === t.constructor.name)
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?'
      );
    t = aC(t);
    throw new Hv(
      Kv.INVALID_ARGUMENT,
      "Expected type '" + e.name + "', but it was: " + t
    );
  }
  function cC(t, e) {
    if (e <= 0)
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Function ' +
          t +
          '() requires a positive number, but it was: ' +
          e +
          '.'
      );
  }
  var hC,
    lC = function (t) {
      this._methodName = t;
    },
    fC =
      (mo(pC, (hC = lC)),
      (pC.prototype.v_ = function (t) {
        if (2 !== t.S_)
          throw 1 === t.S_
            ? t.D_(
                this._methodName +
                  '() can only appear at the top level of your update data'
              )
            : t.D_(
                this._methodName +
                  '() cannot be used with set() unless you pass {merge:true}'
              );
        return t.sn.push(t.path), null;
      }),
      (pC.prototype.isEqual = function (t) {
        return t instanceof pC;
      }),
      pC);
  function pC() {
    return (null !== hC && hC.apply(this, arguments)) || this;
  }
  function dC(t, e, n) {
    return new nA(
      { S_: 3, C_: e.settings.C_, methodName: t._methodName, x_: n },
      e.T,
      e.serializer,
      e.ignoreUndefinedProperties
    );
  }
  var vC,
    yC,
    gC,
    mC,
    bC,
    _C,
    wC =
      (mo(BC, (_C = lC)),
      (BC.prototype.v_ = function (t) {
        return new eb(t.path, new Vm());
      }),
      (BC.prototype.isEqual = function (t) {
        return t instanceof BC;
      }),
      BC),
    EC =
      (mo(qC, (bC = lC)),
      (qC.prototype.v_ = function (t) {
        var e = dC(this, t, !0),
          n = this.N_.map(function (t) {
            return hA(t, e);
          }),
          n = new qm(n);
        return new eb(t.path, n);
      }),
      (qC.prototype.isEqual = function (t) {
        return this === t;
      }),
      qC),
    IC =
      (mo(VC, (mC = lC)),
      (VC.prototype.v_ = function (t) {
        var e = dC(this, t, !0),
          n = this.N_.map(function (t) {
            return hA(t, e);
          }),
          n = new zm(n);
        return new eb(t.path, n);
      }),
      (VC.prototype.isEqual = function (t) {
        return this === t;
      }),
      VC),
    TC =
      (mo(jC, (gC = lC)),
      (jC.prototype.v_ = function (t) {
        var e = new Xm(t.serializer, fm(t.serializer, this.F_));
        return new eb(t.path, e);
      }),
      (jC.prototype.isEqual = function (t) {
        return this === t;
      }),
      jC),
    SC =
      (Object.defineProperty(UC.prototype, 'latitude', {
        get: function () {
          return this.O_;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(UC.prototype, 'longitude', {
        get: function () {
          return this.k_;
        },
        enumerable: !1,
        configurable: !0
      }),
      (UC.prototype.isEqual = function (t) {
        return this.O_ === t.O_ && this.k_ === t.k_;
      }),
      (UC.prototype.toJSON = function () {
        return { latitude: this.O_, longitude: this.k_ };
      }),
      (UC.prototype.L = function (t) {
        return ry(this.O_, t.O_) || ry(this.k_, t.k_);
      }),
      UC),
    CC = new Map(),
    NC =
      ((FC.prototype.isEqual = function (t) {
        return (
          this.host === t.host &&
          this.ssl === t.ssl &&
          this.credentials === t.credentials &&
          this.cacheSizeBytes === t.cacheSizeBytes &&
          this.experimentalForceLongPolling ===
            t.experimentalForceLongPolling &&
          this.experimentalAutoDetectLongPolling ===
            t.experimentalAutoDetectLongPolling &&
          this.ignoreUndefinedProperties === t.ignoreUndefinedProperties
        );
      }),
      FC),
    AC =
      (Object.defineProperty(MC.prototype, 'app', {
        get: function () {
          if (!this.Q_)
            throw new Hv(
              Kv.FAILED_PRECONDITION,
              "Firestore was not initialized using the Firebase SDK. 'app' is not available"
            );
          return this.Q_;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(MC.prototype, 'K_', {
        get: function () {
          return this.B_;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(MC.prototype, 'W_', {
        get: function () {
          return void 0 !== this.j_;
        },
        enumerable: !1,
        configurable: !0
      }),
      (MC.prototype.G_ = function (t) {
        if (this.B_)
          throw new Hv(
            Kv.FAILED_PRECONDITION,
            'Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.'
          );
        (this.L_ = new NC(t)),
          void 0 !== t.credentials &&
            (this.U_ = (function (t) {
              if (!t) return new Ty();
              switch (t.type) {
                case 'gapi':
                  var e = t.client;
                  return (
                    ty(
                      !(
                        'object' != typeof e ||
                        null === e ||
                        !e.auth ||
                        !e.auth.getAuthHeaderValueForFirstParty
                      )
                    ),
                    new Ny(e, t.sessionIndex || '0')
                  );
                case 'provider':
                  return t.client;
                default:
                  throw new Hv(
                    Kv.INVALID_ARGUMENT,
                    'makeCredentialsProvider failed due to invalid credential type'
                  );
              }
            })(t.credentials));
      }),
      (MC.prototype.z_ = function () {
        return this.L_;
      }),
      (MC.prototype.H_ = function () {
        return (this.B_ = !0), this.L_;
      }),
      (MC.prototype._delete = function () {
        return this.j_ || (this.j_ = this.J_()), this.j_;
      }),
      (MC.prototype.J_ = function () {
        return (
          (t = CC.get(this)) &&
            (Yv('ComponentProvider', 'Removing Datastore'),
            CC.delete(this),
            t.terminate()),
          Promise.resolve()
        );
        var t;
      }),
      MC),
    Gn =
      ((LC.prototype.Y_ = function (t, e) {
        switch ((void 0 === e && (e = 'none'), zg(t))) {
          case 0:
            return null;
          case 1:
            return t.booleanValue;
          case 2:
            return Zg(t.integerValue || t.doubleValue);
          case 3:
            return this.X_(t.timestampValue);
          case 4:
            return this.Z_(t, e);
          case 5:
            return t.stringValue;
          case 6:
            return this.tf(tm(t.bytesValue));
          case 7:
            return this.ef(t.referenceValue);
          case 8:
            return this.nf(t.geoPointValue);
          case 9:
            return this.sf(t.arrayValue, e);
          case 10:
            return this.rf(t.mapValue, e);
          default:
            throw Zv();
        }
      }),
      (LC.prototype.rf = function (t, n) {
        var r = this,
          i = {};
        return (
          qg(t.fields || {}, function (t, e) {
            i[t] = r.Y_(e, n);
          }),
          i
        );
      }),
      (LC.prototype.nf = function (t) {
        return new SC(Zg(t.latitude), Zg(t.longitude));
      }),
      (LC.prototype.sf = function (t, e) {
        var n = this;
        return (t.values || []).map(function (t) {
          return n.Y_(t, e);
        });
      }),
      (LC.prototype.Z_ = function (t, e) {
        switch (e) {
          case 'previous':
            var n = (function t(e) {
              e = e.mapValue.fields.__previous_value__;
              return Wg(e) ? t(e) : e;
            })(t);
            return null == n ? null : this.Y_(n, e);
          case 'estimate':
            return this.X_(Kg(t));
          default:
            return null;
        }
      }),
      (LC.prototype.X_ = function (t) {
        t = $g(t);
        return new Ay(t.seconds, t.nanos);
      }),
      (LC.prototype.cf = function (t, e) {
        var n = Ry.nt(t);
        ty(Mm(n));
        (t = new yy(n.get(1), n.get(3))), (n = new Dy(n.j(5)));
        return (
          t.isEqual(e) ||
            Xv(
              'Document ' +
                n +
                ' contains a document reference within a different database (' +
                t.projectId +
                '/' +
                t.database +
                ') which is not supported. It will be treated as a reference in the current database (' +
                e.projectId +
                '/' +
                e.database +
                ') instead.'
            ),
          n
        );
      }),
      LC),
    kC =
      (mo(xC, (yC = Gn)),
      (xC.prototype.tf = function (t) {
        return new dy(new uy(t));
      }),
      (xC.prototype.ef = function (t) {
        t = this.cf(t, this.firestore.q_);
        return ek.af(t, this.firestore, null);
      }),
      xC),
    RC =
      (Object.defineProperty(DC.prototype, 'id', {
        get: function () {
          return this.lf.path.J();
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(DC.prototype, 'ref', {
        get: function () {
          return new dN(this.uf, this.ff, this.lf);
        },
        enumerable: !1,
        configurable: !0
      }),
      (DC.prototype.exists = function () {
        return null !== this._f;
      }),
      (DC.prototype.data = function () {
        if (this._f) {
          if (this.ff) {
            var t = new OC(this.uf, this.hf, this.lf, this._f, null);
            return this.ff.fromFirestore(t);
          }
          return this.hf.Y_(this._f.mn());
        }
      }),
      (DC.prototype.get = function (t) {
        if (this._f) {
          t = this._f.data().field(WC('DocumentSnapshot.get', t));
          if (null !== t) return this.hf.Y_(t);
        }
      }),
      DC),
    OC =
      (mo(PC, (vC = RC)),
      (PC.prototype.data = function () {
        return vC.prototype.data.call(this);
      }),
      PC);
  function PC() {
    return (null !== vC && vC.apply(this, arguments)) || this;
  }
  function DC(t, e, n, r, i) {
    (this.uf = t), (this.hf = e), (this.lf = n), (this._f = r), (this.ff = i);
  }
  function xC(t) {
    var e = this;
    return ((e = yC.call(this) || this).firestore = t), e;
  }
  function LC() {}
  function MC(t, e) {
    (this.M_ = '(lite)'),
      (this.L_ = new NC({})),
      (this.B_ = !1),
      t instanceof yy
        ? ((this.q_ = t), (this.U_ = new Ty()))
        : ((this.Q_ = t),
          (this.q_ = (function (t) {
            if (
              !Object.prototype.hasOwnProperty.apply(t.options, ['projectId'])
            )
              throw new Hv(
                Kv.INVALID_ARGUMENT,
                '"projectId" not provided in firebase.initializeApp.'
              );
            return new yy(t.options.projectId);
          })(t)),
          (this.U_ = new Sy(e)));
  }
  function FC(t) {
    var e;
    if (void 0 === t.host) {
      if (void 0 !== t.ssl)
        throw new Hv(
          Kv.INVALID_ARGUMENT,
          "Can't provide ssl option if host option is not set"
        );
      (this.host = 'firestore.googleapis.com'), (this.ssl = !0);
    } else (this.host = t.host), (this.ssl = null === (e = t.ssl) || void 0 === e || e);
    if (
      ((this.credentials = t.credentials),
      (this.ignoreUndefinedProperties = !!t.ignoreUndefinedProperties),
      void 0 === t.cacheSizeBytes)
    )
      this.cacheSizeBytes = 41943040;
    else {
      if (-1 !== t.cacheSizeBytes && t.cacheSizeBytes < 1048576)
        throw new Hv(
          Kv.INVALID_ARGUMENT,
          'cacheSizeBytes must be at least 1048576'
        );
      this.cacheSizeBytes = t.cacheSizeBytes;
    }
    (this.experimentalForceLongPolling = !!t.experimentalForceLongPolling),
      (this.experimentalAutoDetectLongPolling = !!t.experimentalAutoDetectLongPolling),
      iC(
        'experimentalForceLongPolling',
        t.experimentalForceLongPolling,
        'experimentalAutoDetectLongPolling',
        t.experimentalAutoDetectLongPolling
      );
  }
  function UC(t, e) {
    if (!isFinite(t) || t < -90 || 90 < t)
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Latitude must be a number between -90 and 90, but was: ' + t
      );
    if (!isFinite(e) || e < -180 || 180 < e)
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Longitude must be a number between -180 and 180, but was: ' + e
      );
    (this.O_ = t), (this.k_ = e);
  }
  function jC(t, e) {
    var n = this;
    return ((n = gC.call(this, t) || this).F_ = e), n;
  }
  function VC(t, e) {
    var n = this;
    return ((n = mC.call(this, t) || this).N_ = e), n;
  }
  function qC(t, e) {
    var n = this;
    return ((n = bC.call(this, t) || this).N_ = e), n;
  }
  function BC() {
    return (null !== _C && _C.apply(this, arguments)) || this;
  }
  function WC(t, e) {
    return 'string' == typeof e ? yA(t, e) : (e instanceof cy ? e._ : e).df;
  }
  var KC,
    HC =
      ((QC.prototype.isEqual = function (t) {
        return this.df.isEqual(t.df);
      }),
      QC),
    zC =
      (mo(GC, (KC = AC)),
      (GC.prototype.J_ = function () {
        return this.Ef || YA(this), this.Ef.terminate();
      }),
      GC);
  function GC(t, e) {
    var n = this;
    return (
      ((n = KC.call(this, t, e) || this).wf = new gw()),
      (n.M_ = 'name' in t ? t.name : '[DEFAULT]'),
      n
    );
  }
  function QC() {
    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
    for (var n = 0; n < t.length; ++n)
      if (0 === t[n].length)
        throw new Hv(
          Kv.INVALID_ARGUMENT,
          'Invalid field name at argument $(i + 1). Field names must not be empty.'
        );
    this.df = new Py(t);
  }
  function YC(n, r, i) {
    var t = this,
      o = new J_();
    return n.Ei.enqueue(function () {
      return _o(t, void 0, void 0, function () {
        var e;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return t.trys.push([0, 3, , 4]), [4, SA(n, i)];
            case 1:
              return t.sent(), [4, CA(n, r)];
            case 2:
              return t.sent(), o.resolve(), [3, 4];
            case 3:
              if (
                !('FirebaseError' === (t = e = t.sent()).name
                  ? t.code === Kv.FAILED_PRECONDITION ||
                    t.code === Kv.UNIMPLEMENTED
                  : !(
                      'undefined' != typeof DOMException &&
                      t instanceof DOMException
                    ) ||
                    22 === t.code ||
                    20 === t.code ||
                    11 === t.code)
              )
                throw e;
              return (
                console.warn(
                  'Error enabling offline persistence. Falling back to persistence disabled: ' +
                    e
                ),
                o.reject(e),
                [3, 4]
              );
            case 4:
              return [2];
          }
        });
      });
    }).then(function () {
      return o.promise;
    });
  }
  function XC(t) {
    if (t.K_ || t.W_)
      throw new Hv(
        Kv.FAILED_PRECONDITION,
        'Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.'
      );
  }
  var JC,
    $C,
    ZC =
      (mo(iN, ($C = RC)),
      (iN.prototype.exists = function () {
        return $C.prototype.exists.call(this);
      }),
      (iN.prototype.data = function (t) {
        if ((void 0 === t && (t = {}), this._f)) {
          if (this.ff) {
            var e = new tN(
              this.uf,
              this.hf,
              this.lf,
              this._f,
              this.metadata,
              null
            );
            return this.ff.fromFirestore(e, t);
          }
          return this.hf.Y_(this._f.mn(), t.serverTimestamps);
        }
      }),
      (iN.prototype.get = function (t, e) {
        if ((void 0 === e && (e = {}), this._f)) {
          t = this._f.data().field(WC('DocumentSnapshot.get', t));
          if (null !== t) return this.hf.Y_(t, e.serverTimestamps);
        }
      }),
      iN),
    tN =
      (mo(rN, (JC = ZC)),
      (rN.prototype.data = function (t) {
        return void 0 === t && (t = {}), JC.prototype.data.call(this, t);
      }),
      rN),
    eN =
      (Object.defineProperty(nN.prototype, 'docs', {
        get: function () {
          var e = [];
          return (
            this.forEach(function (t) {
              return e.push(t);
            }),
            e
          );
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(nN.prototype, 'size', {
        get: function () {
          return this.mf.docs.size;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(nN.prototype, 'empty', {
        get: function () {
          return 0 === this.size;
        },
        enumerable: !1,
        configurable: !0
      }),
      (nN.prototype.forEach = function (e, n) {
        var r = this;
        this.mf.docs.forEach(function (t) {
          e.call(
            n,
            new tN(
              r.uf,
              r.hf,
              t.key,
              t,
              new dk(r.mf.se.has(t.key), r.mf.fromCache),
              r.query.ff
            )
          );
        });
      }),
      (nN.prototype.docChanges = function (t) {
        void 0 === t && (t = {});
        t = !!t.includeMetadataChanges;
        if (t && this.mf.re)
          throw new Hv(
            Kv.INVALID_ARGUMENT,
            'To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().'
          );
        return (
          (this.If && this.Af === t) ||
            ((this.If = (function (i, e) {
              if (i.mf.ne.Y()) {
                var n = 0;
                return i.mf.docChanges.map(function (t) {
                  var e = new tN(
                    i.uf,
                    i.hf,
                    t.doc.key,
                    t.doc,
                    new dk(i.mf.se.has(t.doc.key), i.mf.fromCache),
                    i.query.ff
                  );
                  return (
                    t.doc,
                    { type: 'added', doc: e, oldIndex: -1, newIndex: n++ }
                  );
                });
              }
              var o = i.mf.ne;
              return i.mf.docChanges
                .filter(function (t) {
                  return e || 3 !== t.type;
                })
                .map(function (t) {
                  var e = new tN(
                      i.uf,
                      i.hf,
                      t.doc.key,
                      t.doc,
                      new dk(i.mf.se.has(t.doc.key), i.mf.fromCache),
                      i.query.ff
                    ),
                    n = -1,
                    r = -1;
                  return (
                    0 !== t.type &&
                      ((n = o.indexOf(t.doc.key)), (o = o.delete(t.doc.key))),
                    1 !== t.type && (r = (o = o.add(t.doc)).indexOf(t.doc.key)),
                    {
                      type: (function (t) {
                        switch (t) {
                          case 0:
                            return 'added';
                          case 2:
                          case 3:
                            return 'modified';
                          case 1:
                            return 'removed';
                          default:
                            return Zv();
                        }
                      })(t.type),
                      doc: e,
                      oldIndex: n,
                      newIndex: r
                    }
                  );
                });
            })(this, t)),
            (this.Af = t)),
          this.If
        );
      }),
      nN);
  function nN(t, e, n, r) {
    (this.uf = t),
      (this.hf = e),
      (this.mf = r),
      (this.metadata = new dk(r.hasPendingWrites, r.fromCache)),
      (this.query = n);
  }
  function rN() {
    return (null !== JC && JC.apply(this, arguments)) || this;
  }
  function iN(t, e, n, r, i, o) {
    var s = this;
    return (
      ((s = $C.call(this, t, e, n, r, o) || this).uf = t),
      (s.Tf = t),
      (s.metadata = i),
      s
    );
  }
  function oN(t, e) {
    return t instanceof ZC && e instanceof ZC
      ? t.uf === e.uf &&
          t.lf.isEqual(e.lf) &&
          (null === t._f ? null === e._f : t._f.isEqual(e._f)) &&
          t.ff === e.ff
      : t instanceof eN &&
          e instanceof eN &&
          t.uf === e.uf &&
          QN(t.query, e.query) &&
          t.metadata.isEqual(e.metadata) &&
          t.mf.isEqual(e.mf);
  }
  function sN(i) {
    return (function () {
      if ('object' == typeof i && null !== i)
        for (
          var t = i, e = 0, n = ['next', 'error', 'complete'];
          e < n.length;
          e++
        ) {
          var r = n[e];
          if (r in t && 'function' == typeof t[r]) return 1;
        }
    })();
  }
  var aN,
    uN =
      (mo(cN, (aN = Gn)),
      (cN.prototype.tf = function (t) {
        return new uy(t);
      }),
      (cN.prototype.ef = function (t) {
        t = this.cf(t, this.firestore.q_);
        return new dN(this.firestore, null, t);
      }),
      cN);
  function cN(t) {
    var e = this;
    return ((e = aN.call(this) || this).firestore = t), e;
  }
  function hN(t, e, n) {
    for (var r = [], i = 3; i < arguments.length; i++) r[i - 3] = arguments[i];
    t = uC(t, dN);
    var o = uC(t.firestore, zC),
      s = YN(o);
    return (
      e instanceof cy && (e = e._),
      fN(
        o,
        ('string' == typeof e || e instanceof HC
          ? uA(s, 'updateDoc', t.lf, e, n, r)
          : aA(s, 'updateDoc', t.lf, e)
        ).Pf(t.lf, ib.exists(!0))
      )
    );
  }
  function lN(e) {
    for (var n = [], t = 1; t < arguments.length; t++) n[t - 1] = arguments[t];
    e instanceof cy && (e = e._);
    var r = { includeMetadataChanges: !1 },
      i = 0;
    'object' != typeof n[i] || sN(n[i]) || ((r = n[i]), i++);
    var o,
      s,
      a,
      u,
      c,
      h,
      l = { includeMetadataChanges: r.includeMetadataChanges };
    return (
      sN(n[i]) &&
        ((o = n[i]),
        (n[i] = null === (r = o.next) || void 0 === r ? void 0 : r.bind(o)),
        (n[i + 1] =
          null === (r = o.error) || void 0 === r ? void 0 : r.bind(o)),
        (n[i + 2] =
          null === (r = o.complete) || void 0 === r ? void 0 : r.bind(o))),
      e instanceof dN
        ? ((a = uC(e.firestore, zC)),
          (u = Wb(e.lf.path)),
          (h = {
            next: function (t) {
              n[i] && n[i](pN(a, e, t));
            },
            error: n[i + 1],
            complete: n[i + 2]
          }))
        : ((s = uC(e, vN)),
          (a = uC(s.firestore, zC)),
          (u = s.Rf),
          (c = new uN(a)),
          (h = {
            next: function (t) {
              n[i] && n[i](new eN(a, c, s, t));
            },
            error: n[i + 1],
            complete: n[i + 2]
          }),
          UN(e.Rf)),
      (function (n, t, e) {
        var r = this,
          i = new FS(h),
          o = new gT(t, i, e);
        return (
          n.Ei.yi(function () {
            return _o(r, void 0, void 0, function () {
              var e;
              return wo(this, function (t) {
                switch (t.label) {
                  case 0:
                    return (e = dT), [4, DA(n)];
                  case 1:
                    return [2, e.apply(void 0, [t.sent(), o])];
                }
              });
            });
          }),
          function () {
            i.b_(),
              n.Ei.yi(function () {
                return _o(r, void 0, void 0, function () {
                  var e;
                  return wo(this, function (t) {
                    switch (t.label) {
                      case 0:
                        return (e = vT), [4, DA(n)];
                      case 1:
                        return [2, e.apply(void 0, [t.sent(), o])];
                    }
                  });
                });
              });
          }
        );
      })(QA(a), u, l)
    );
  }
  function fN(t, e) {
    return (function (n, r) {
      var t = this,
        i = new J_();
      return (
        n.Ei.yi(function () {
          return _o(t, void 0, void 0, function () {
            var e;
            return wo(this, function (t) {
              switch (t.label) {
                case 0:
                  return (e = YT), [4, PA(n)];
                case 1:
                  return [2, e.apply(void 0, [t.sent(), r, i])];
              }
            });
          });
        }),
        i.promise
      );
    })(QA(t), e);
  }
  function pN(t, e, n) {
    var r = n.docs.get(e.lf),
      i = new uN(t);
    return new ZC(t, i, e.lf, r, new dk(n.hasPendingWrites, n.fromCache), e.ff);
  }
  var dN =
      (Object.defineProperty(gN.prototype, 'yf', {
        get: function () {
          return this.lf.path;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(gN.prototype, 'id', {
        get: function () {
          return this.lf.path.J();
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(gN.prototype, 'path', {
        get: function () {
          return this.lf.path.et();
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(gN.prototype, 'parent', {
        get: function () {
          return new VN(this.firestore, this.ff, this.lf.path.G());
        },
        enumerable: !1,
        configurable: !0
      }),
      (gN.prototype.withConverter = function (t) {
        return new gN(this.firestore, t, this.lf);
      }),
      gN),
    vN =
      ((yN.prototype.withConverter = function (t) {
        return new yN(this.firestore, t, this.Rf);
      }),
      yN),
    dt = function () {};
  function yN(t, e, n) {
    (this.ff = e), (this.Rf = n), (this.type = 'query'), (this.firestore = t);
  }
  function gN(t, e, n) {
    (this.ff = e),
      (this.lf = n),
      (this.type = 'document'),
      (this.firestore = t);
  }
  function mN(t) {
    for (var e = [], n = 1; n < arguments.length; n++) e[n - 1] = arguments[n];
    for (var r = 0, i = e; r < i.length; r++) {
      t = i[r].gf(t);
    }
    return t;
  }
  var bN,
    _N,
    wN,
    EN,
    IN,
    TN =
      (mo(DN, (IN = dt)),
      (DN.prototype.gf = function (t) {
        var e = YN(t.firestore),
          e = (function (t, e, n, r, i, o) {
            if (r.rt()) {
              if ('array-contains' === i || 'array-contains-any' === i)
                throw new Hv(
                  Kv.INVALID_ARGUMENT,
                  "Invalid Query. You can't perform '" +
                    i +
                    "' queries on FieldPath.documentId()."
                );
              if ('in' === i || 'not-in' === i) {
                MN(o, i);
                for (var s = [], a = 0, u = o; a < u.length; a++) {
                  var c = u[a];
                  s.push(LN(n, t, c));
                }
                h = { arrayValue: { values: s } };
              } else h = LN(n, t, o);
            } else
              ('in' !== i && 'not-in' !== i && 'array-contains-any' !== i) ||
                MN(o, i),
                (h = cA(e, 'where', o, 'in' === i || 'not-in' === i));
            var h = i_.create(r, i, h);
            return (
              (function (t, e) {
                if (e.Pn()) {
                  var n = Gb(t);
                  if (null !== n && !n.isEqual(e.field))
                    throw new Hv(
                      Kv.INVALID_ARGUMENT,
                      "Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '" +
                        n.toString() +
                        "' and '" +
                        e.field.toString() +
                        "'"
                    );
                  n = zb(t);
                  null !== n && FN(0, e.field, n);
                }
                t = (function (t, e) {
                  for (var n = 0, r = t.filters; n < r.length; n++) {
                    var i = r[n];
                    if (0 <= e.indexOf(i.op)) return i.op;
                  }
                  return null;
                })(
                  t,
                  (function () {
                    switch (e.op) {
                      case '!=':
                        return ['!=', 'not-in'];
                      case 'array-contains':
                        return [
                          'array-contains',
                          'array-contains-any',
                          'not-in'
                        ];
                      case 'in':
                        return ['array-contains-any', 'in', 'not-in'];
                      case 'array-contains-any':
                        return [
                          'array-contains',
                          'array-contains-any',
                          'in',
                          'not-in'
                        ];
                      case 'not-in':
                        return [
                          'array-contains',
                          'array-contains-any',
                          'in',
                          'not-in',
                          '!='
                        ];
                      default:
                        return [];
                    }
                  })()
                );
                if (null !== t)
                  throw t === e.op
                    ? new Hv(
                        Kv.INVALID_ARGUMENT,
                        "Invalid query. You cannot use more than one '" +
                          e.op.toString() +
                          "' filter."
                      )
                    : new Hv(
                        Kv.INVALID_ARGUMENT,
                        "Invalid query. You cannot use '" +
                          e.op.toString() +
                          "' filters with '" +
                          t.toString() +
                          "' filters."
                      );
              })(t, h),
              h
            );
          })(t.Rf, e, t.firestore.q_, this.Vf, this.pf, this.bf);
        return new vN(
          t.firestore,
          t.ff,
          ((t = t.Rf),
          (e = t.filters.concat([e])),
          new Ub(
            t.path,
            t.collectionGroup,
            t.In.slice(),
            e,
            t.limit,
            t.limitType,
            t.startAt,
            t.endAt
          ))
        );
      }),
      DN),
    SN =
      (mo(PN, (EN = dt)),
      (PN.prototype.gf = function (t) {
        var e = (function (t, e, n) {
          if (null !== t.startAt)
            throw new Hv(
              Kv.INVALID_ARGUMENT,
              'Invalid query. You must not call startAt() or startAfter() before calling orderBy().'
            );
          if (null !== t.endAt)
            throw new Hv(
              Kv.INVALID_ARGUMENT,
              'Invalid query. You must not call endAt() or endBefore() before calling orderBy().'
            );
          var r = new P_(e, n);
          return (
            (e = r),
            null !== zb((n = t)) || (null !== (t = Gb(n)) && FN(0, t, e.field)),
            r
          );
        })(t.Rf, this.Vf, this.vf);
        return new vN(
          t.firestore,
          t.ff,
          ((t = t.Rf),
          (e = t.In.concat([e])),
          new Ub(
            t.path,
            t.collectionGroup,
            e,
            t.filters.slice(),
            t.limit,
            t.limitType,
            t.startAt,
            t.endAt
          ))
        );
      }),
      PN),
    CN =
      (mo(ON, (wN = dt)),
      (ON.prototype.gf = function (t) {
        return new vN(t.firestore, t.ff, Jb(t.Rf, this.Sf, this.Df));
      }),
      ON),
    NN =
      (mo(RN, (_N = dt)),
      (RN.prototype.gf = function (t) {
        var e = xN(t, this.type, this.Cf, this.xf);
        return new vN(
          t.firestore,
          t.ff,
          ((t = t.Rf),
          (e = e),
          new Ub(
            t.path,
            t.collectionGroup,
            t.In.slice(),
            t.filters.slice(),
            t.limit,
            t.limitType,
            e,
            t.endAt
          ))
        );
      }),
      RN),
    AN =
      (mo(kN, (bN = dt)),
      (kN.prototype.gf = function (t) {
        var e = xN(t, this.type, this.Cf, this.xf);
        return new vN(
          t.firestore,
          t.ff,
          ((t = t.Rf),
          (e = e),
          new Ub(
            t.path,
            t.collectionGroup,
            t.In.slice(),
            t.filters.slice(),
            t.limit,
            t.limitType,
            t.startAt,
            e
          ))
        );
      }),
      kN);
  function kN(t, e, n) {
    var r = this;
    return ((r = bN.call(this) || this).type = t), (r.Cf = e), (r.xf = n), r;
  }
  function RN(t, e, n) {
    var r = this;
    return ((r = _N.call(this) || this).type = t), (r.Cf = e), (r.xf = n), r;
  }
  function ON(t, e, n) {
    var r = this;
    return ((r = wN.call(this) || this).type = t), (r.Sf = e), (r.Df = n), r;
  }
  function PN(t, e) {
    var n = this;
    return (
      ((n = EN.call(this) || this).Vf = t), (n.vf = e), (n.type = 'orderBy'), n
    );
  }
  function DN(t, e, n) {
    var r = this;
    return (
      ((r = IN.call(this) || this).Vf = t),
      (r.pf = e),
      (r.bf = n),
      (r.type = 'where'),
      r
    );
  }
  function xN(t, c, e, n) {
    if ((e[0] instanceof cy && (e[0] = e[0]._), e[0] instanceof RC))
      return (function (t, e, n, r) {
        if (!n)
          throw new Hv(
            Kv.NOT_FOUND,
            "Can't use a DocumentSnapshot that doesn't exist for " + c + '().'
          );
        for (var i = [], o = 0, s = Yb(t); o < s.length; o++) {
          var a = s[o];
          if (a.field.rt()) i.push(em(e, n.key));
          else {
            var u = n.field(a.field);
            if (Wg(u))
              throw new Hv(
                Kv.INVALID_ARGUMENT,
                'Invalid query. You are trying to start or end a query using a document for which the field "' +
                  a.field +
                  '" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)'
              );
            if (null === u) {
              a = a.field.et();
              throw new Hv(
                Kv.INVALID_ARGUMENT,
                "Invalid query. You are trying to start or end a query using a document for which the field '" +
                  a +
                  "' (used as the orderBy) does not exist."
              );
            }
            i.push(u);
          }
        }
        return new T_(i, r);
      })(t.Rf, t.firestore.q_, e[0]._f, n);
    var r = YN(t.firestore);
    return (function (t, e, n, r, i, o) {
      var s = t.In;
      if (i.length > s.length)
        throw new Hv(
          Kv.INVALID_ARGUMENT,
          'Too many arguments provided to ' +
            r +
            '(). The number of arguments must be less than or equal to the number of orderBy() clauses'
        );
      for (var a = [], u = 0; u < i.length; u++) {
        var c = i[u];
        if (s[u].field.rt()) {
          if ('string' != typeof c)
            throw new Hv(
              Kv.INVALID_ARGUMENT,
              'Invalid query. Expected a string for document ID in ' +
                r +
                '(), but got a ' +
                typeof c
            );
          if (!Qb(t) && -1 !== c.indexOf('/'))
            throw new Hv(
              Kv.INVALID_ARGUMENT,
              'Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ' +
                r +
                "() must be a plain document ID, but '" +
                c +
                "' contains a slash."
            );
          var h = t.path.child(Ry.nt(c));
          if (!Dy.lt(h))
            throw new Hv(
              Kv.INVALID_ARGUMENT,
              'Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ' +
                r +
                "() must result in a valid document path, but '" +
                h +
                "' is not because it contains an odd number of segments."
            );
          h = new Dy(h);
          a.push(em(e, h));
        } else {
          c = cA(n, r, c);
          a.push(c);
        }
      }
      return new T_(a, o);
    })(t.Rf, t.firestore.q_, r, c, e, n);
  }
  function LN(t, e, n) {
    if ((n instanceof cy && (n = n._), 'string' == typeof n)) {
      if ('' === n)
        throw new Hv(
          Kv.INVALID_ARGUMENT,
          'Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.'
        );
      if (!Qb(e) && -1 !== n.indexOf('/'))
        throw new Hv(
          Kv.INVALID_ARGUMENT,
          "Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '" +
            n +
            "' contains a '/' character."
        );
      e = e.path.child(Ry.nt(n));
      if (!Dy.lt(e))
        throw new Hv(
          Kv.INVALID_ARGUMENT,
          "Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '" +
            e +
            "' is not because it has an odd number of segments (" +
            e.length +
            ').'
        );
      return em(t, new Dy(e));
    }
    if (n instanceof dN) return em(t, n.lf);
    throw new Hv(
      Kv.INVALID_ARGUMENT,
      'Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ' +
        aC(n) +
        '.'
    );
  }
  function MN(t, e) {
    if (!Array.isArray(t) || 0 === t.length)
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        "Invalid Query. A non-empty array is required for '" +
          e.toString() +
          "' filters."
      );
    if (10 < t.length)
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        "Invalid Query. '" +
          e.toString() +
          "' filters support a maximum of 10 elements in the value array."
      );
  }
  function FN(t, e, n) {
    if (!n.isEqual(e))
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        "Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '" +
          e.toString() +
          "' and so you must also use '" +
          e.toString() +
          "' as your first argument to orderBy(), but your first orderBy() is on field '" +
          n.toString() +
          "' instead."
      );
  }
  function UN(t) {
    if (Hb(t) && 0 === t.In.length)
      throw new Hv(
        Kv.UNIMPLEMENTED,
        'limitToLast() queries require specifying at least one orderBy() clause'
      );
  }
  var jN,
    VN =
      (mo(qN, (jN = vN)),
      Object.defineProperty(qN.prototype, 'id', {
        get: function () {
          return this.Rf.path.J();
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(qN.prototype, 'path', {
        get: function () {
          return this.Rf.path.et();
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(qN.prototype, 'parent', {
        get: function () {
          var t = this.yf.G();
          return t.Y() ? null : new dN(this.firestore, null, new Dy(t));
        },
        enumerable: !1,
        configurable: !0
      }),
      (qN.prototype.withConverter = function (t) {
        return new qN(this.firestore, t, this.yf);
      }),
      qN);
  function qN(t, e, n) {
    var r = this;
    return (
      ((r = jN.call(this, t, e, Wb(n)) || this).firestore = t),
      (r.yf = n),
      (r.type = 'collection'),
      r
    );
  }
  function BN(t, e) {
    for (var n, r = [], i = 2; i < arguments.length; i++)
      r[i - 2] = arguments[i];
    if (
      (t instanceof cy && (t = t._),
      nC('collection', 'path', e),
      t instanceof AC)
    )
      return sC((n = Ry.nt.apply(Ry, So([e], r)))), new VN(t, null, n);
    if (!(t instanceof dN || t instanceof VN))
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore'
      );
    return (
      sC((n = Ry.nt.apply(Ry, So([t.path], r)).child(Ry.nt(e)))),
      new VN(t.firestore, null, n)
    );
  }
  function WN(t, e) {
    for (var n, r = [], i = 2; i < arguments.length; i++)
      r[i - 2] = arguments[i];
    if (
      (t instanceof cy && (t = t._),
      1 === arguments.length && (e = ey.t()),
      nC('doc', 'path', e),
      t instanceof AC)
    )
      return oC((n = Ry.nt.apply(Ry, So([e], r)))), new dN(t, null, new Dy(n));
    if (!(t instanceof dN || t instanceof VN))
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore'
      );
    return (
      oC((n = t.yf.child(Ry.nt.apply(Ry, So([e], r))))),
      new dN(t.firestore, t instanceof VN ? t.ff : null, new Dy(n))
    );
  }
  var KN,
    HN =
      (mo(zN, (KN = Gn)),
      (zN.prototype.tf = function (t) {
        return new uy(t);
      }),
      (zN.prototype.ef = function (t) {
        t = this.cf(t, this.firestore.q_);
        return new dN(this.firestore, null, t);
      }),
      zN);
  function zN(t) {
    var e = this;
    return ((e = KN.call(this) || this).firestore = t), e;
  }
  function GN(t, e) {
    return (
      t instanceof cy && (t = t._),
      e instanceof cy && (e = e._),
      (t instanceof dN || t instanceof VN) &&
        (e instanceof dN || e instanceof VN) &&
        t.firestore === e.firestore &&
        t.path === e.path &&
        t.ff === e.ff
    );
  }
  function QN(t, e) {
    return (
      t instanceof cy && (t = t._),
      e instanceof cy && (e = e._),
      t instanceof vN &&
        e instanceof vN &&
        t.firestore === e.firestore &&
        $b(t.Rf, e.Rf) &&
        t.ff === e.ff
    );
  }
  function YN(t) {
    var e = t.H_(),
      n = uI(t.q_);
    return new rA(t.q_, !!e.ignoreUndefinedProperties, n);
  }
  var XN = /^__.*__$/,
    JN =
      ((tA.prototype.Pf = function (t, e) {
        var n = [];
        return (
          null !== this.sn
            ? n.push(new db(t, this.data, this.sn, e))
            : n.push(new pb(t, this.data, e)),
          0 < this.fieldTransforms.length &&
            n.push(new bb(t, this.fieldTransforms)),
          n
        );
      }),
      tA),
    $N =
      ((ZN.prototype.Pf = function (t, e) {
        e = [new db(t, this.data, this.sn, e)];
        return (
          0 < this.fieldTransforms.length &&
            e.push(new bb(t, this.fieldTransforms)),
          e
        );
      }),
      ZN);
  function ZN(t, e, n) {
    (this.data = t), (this.sn = e), (this.fieldTransforms = n);
  }
  function tA(t, e, n) {
    (this.data = t), (this.sn = e), (this.fieldTransforms = n);
  }
  function eA(t) {
    switch (t) {
      case 0:
      case 2:
      case 1:
        return 1;
      case 3:
      case 4:
        return;
      default:
        throw Zv();
    }
  }
  var nA =
      (Object.defineProperty(oA.prototype, 'path', {
        get: function () {
          return this.settings.path;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(oA.prototype, 'S_', {
        get: function () {
          return this.settings.S_;
        },
        enumerable: !1,
        configurable: !0
      }),
      (oA.prototype.Ff = function (t) {
        return new oA(
          Object.assign(Object.assign({}, this.settings), t),
          this.T,
          this.serializer,
          this.ignoreUndefinedProperties,
          this.fieldTransforms,
          this.sn
        );
      }),
      (oA.prototype.Of = function (t) {
        var e = null === (e = this.path) || void 0 === e ? void 0 : e.child(t),
          e = this.Ff({ path: e, x_: !1 });
        return e.kf(t), e;
      }),
      (oA.prototype.Mf = function (t) {
        var e,
          t = null === (e = this.path) || void 0 === e ? void 0 : e.child(t),
          t = this.Ff({ path: t, x_: !1 });
        return t.Nf(), t;
      }),
      (oA.prototype.Lf = function (t) {
        return this.Ff({ path: void 0, x_: !0 });
      }),
      (oA.prototype.D_ = function (t) {
        return gA(
          t,
          this.settings.methodName,
          this.settings.$f || !1,
          this.path,
          this.settings.C_
        );
      }),
      (oA.prototype.contains = function (e) {
        return (
          void 0 !==
            this.sn.find(function (t) {
              return e.X(t);
            }) ||
          void 0 !==
            this.fieldTransforms.find(function (t) {
              return e.X(t.field);
            })
        );
      }),
      (oA.prototype.Nf = function () {
        if (this.path)
          for (var t = 0; t < this.path.length; t++) this.kf(this.path.get(t));
      }),
      (oA.prototype.kf = function (t) {
        if (0 === t.length) throw this.D_('Document fields must not be empty');
        if (eA(this.S_) && XN.test(t))
          throw this.D_('Document fields cannot begin and end with "__"');
      }),
      oA),
    rA =
      ((iA.prototype.Bf = function (t, e, n, r) {
        return (
          void 0 === r && (r = !1),
          new nA(
            { S_: t, methodName: e, C_: n, path: Py.st(), x_: !1, $f: r },
            this.T,
            this.serializer,
            this.ignoreUndefinedProperties
          )
        );
      }),
      iA);
  function iA(t, e, n) {
    (this.T = t),
      (this.ignoreUndefinedProperties = e),
      (this.serializer = n || uI(t));
  }
  function oA(t, e, n, r, i, o) {
    (this.settings = t),
      (this.T = e),
      (this.serializer = n),
      (this.ignoreUndefinedProperties = r),
      void 0 === i && this.Nf(),
      (this.fieldTransforms = i || []),
      (this.sn = o || []);
  }
  function sA(t, e, n, r, i, o) {
    void 0 === o && (o = {});
    var s = t.Bf(o.merge || o.mergeFields ? 2 : 0, e, n, i);
    pA('Data must be an object, but it was:', s, r);
    var a,
      u,
      r = lA(r, s);
    if (o.merge) (a = new tb(s.sn)), (u = s.fieldTransforms);
    else if (o.mergeFields) {
      for (var c = [], h = 0, l = o.mergeFields; h < l.length; h++) {
        var f = dA(e, l[h], n);
        if (!s.contains(f))
          throw new Hv(
            Kv.INVALID_ARGUMENT,
            "Field '" +
              f +
              "' is specified in your field mask but missing from your input data."
          );
        mA(c, f) || c.push(f);
      }
      (a = new tb(c)),
        (u = s.fieldTransforms.filter(function (t) {
          return a.hn(t.field);
        }));
    } else (a = null), (u = s.fieldTransforms);
    return new JN(new Cb(r), a, u);
  }
  function aA(t, r, i, e) {
    var o = t.Bf(1, r, i);
    pA('Data must be an object, but it was:', o, e);
    var s = [],
      a = new Nb();
    qg(e, function (t, e) {
      var n = yA(r, t, i);
      e instanceof cy && (e = e._);
      t = o.Mf(n);
      e instanceof fC
        ? s.push(n)
        : null != (t = hA(e, t)) && (s.push(n), a.set(n, t));
    });
    e = new tb(s);
    return new $N(a._n(), e, o.fieldTransforms);
  }
  function uA(t, e, n, r, i, o) {
    var s = t.Bf(1, e, n),
      a = [dA(e, r, n)],
      u = [i];
    if (o.length % 2 != 0)
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Function ' +
          e +
          '() needs to be called with an even number of arguments that alternate between field names and values.'
      );
    for (var c = 0; c < o.length; c += 2) a.push(dA(e, o[c])), u.push(o[c + 1]);
    for (var h, l, f, p = [], d = new Nb(), v = a.length - 1; 0 <= v; --v) {
      mA(p, a[v]) ||
        ((h = a[v]),
        (l = u[v]) instanceof cy && (l = l._),
        (f = s.Mf(h)),
        l instanceof fC
          ? p.push(h)
          : null != (f = hA(l, f)) && (p.push(h), d.set(h, f)));
    }
    i = new tb(p);
    return new $N(d._n(), i, s.fieldTransforms);
  }
  function cA(t, e, n, r) {
    return void 0 === r && (r = !1), hA(n, t.Bf(r ? 4 : 3, e));
  }
  function hA(s, t) {
    if ((s instanceof cy && (s = s._), fA(s)))
      return pA('Unsupported field value:', t, s), lA(s, t);
    if (s instanceof lC)
      return (
        (function (t, e) {
          if (!eA(e.S_))
            throw e.D_(
              t._methodName + '() can only be used with update() and set()'
            );
          if (!e.path)
            throw e.D_(
              t._methodName + '() is not currently supported inside arrays'
            );
          t = t.v_(e);
          t && e.fieldTransforms.push(t);
        })(s, t),
        null
      );
    if ((t.path && t.sn.push(t.path), s instanceof Array)) {
      if (t.settings.x_ && 4 !== t.S_)
        throw t.D_('Nested arrays are not supported');
      return (function (t) {
        for (var e = [], n = 0, r = 0, i = s; r < i.length; r++) {
          var o = hA(i[r], t.Lf(n));
          null == o && (o = { nullValue: 'NULL_VALUE' }), e.push(o), n++;
        }
        return { arrayValue: { values: e } };
      })(t);
    }
    return (function (t, e) {
      if ((t instanceof cy && (t = t._), null === t))
        return { nullValue: 'NULL_VALUE' };
      if ('number' == typeof t) return fm(e.serializer, t);
      if ('boolean' == typeof t) return { booleanValue: t };
      if ('string' == typeof t) return { stringValue: t };
      if (t instanceof Date) {
        var n = Ay.fromDate(t);
        return { timestampValue: pm(e.serializer, n) };
      }
      if (t instanceof Ay)
        return (
          (n = new Ay(t.seconds, 1e3 * Math.floor(t.nanoseconds / 1e3))),
          { timestampValue: pm(e.serializer, n) }
        );
      if (t instanceof SC)
        return {
          geoPointValue: { latitude: t.latitude, longitude: t.longitude }
        };
      if (t instanceof uy) return { bytesValue: dm(e.serializer, t.l) };
      if (t instanceof dN) {
        n = e.T;
        var r = t.firestore.q_;
        if (!r.isEqual(n))
          throw e.D_(
            'Document reference is for database ' +
              r.projectId +
              '/' +
              r.database +
              ' but should be for database ' +
              n.projectId +
              '/' +
              n.database
          );
        return { referenceValue: ym(t.firestore.q_ || e.T, t.lf.path) };
      }
      if (void 0 === t && e.ignoreUndefinedProperties) return null;
      throw e.D_('Unsupported field value: ' + aC(t));
    })(s, t);
  }
  function lA(t, n) {
    var r = {};
    return (
      Bg(t)
        ? n.path && 0 < n.path.length && n.sn.push(n.path)
        : qg(t, function (t, e) {
            e = hA(e, n.Of(t));
            null != e && (r[t] = e);
          }),
      { mapValue: { fields: r } }
    );
  }
  function fA(t) {
    return !(
      'object' != typeof t ||
      null === t ||
      t instanceof Array ||
      t instanceof Date ||
      t instanceof Ay ||
      t instanceof SC ||
      t instanceof uy ||
      t instanceof dN ||
      t instanceof lC
    );
  }
  function pA(t, e, n) {
    if (
      !fA(n) ||
      'object' != typeof (r = n) ||
      null === r ||
      (Object.getPrototypeOf(r) !== Object.prototype &&
        null !== Object.getPrototypeOf(r))
    ) {
      n = aC(n);
      throw 'an object' === n
        ? e.D_(t + ' a custom object')
        : e.D_(t + ' ' + n);
    }
    var r;
  }
  function dA(t, e, n) {
    if ((e instanceof cy && (e = e._), e instanceof HC)) return e.df;
    if ('string' == typeof e) return yA(t, e);
    throw gA(
      'Field path arguments must be of type string or FieldPath.',
      t,
      !1,
      void 0,
      n
    );
  }
  var vA = new RegExp('[~\\*/\\[\\]]');
  function yA(e, n, r) {
    if (0 <= n.search(vA))
      throw gA(
        'Invalid field path (' +
          n +
          "). Paths must not contain '~', '*', '/', '[', or ']'",
        e,
        !1,
        void 0,
        r
      );
    try {
      return new (HC.bind.apply(HC, So([void 0], n.split('.'))))().df;
    } catch (t) {
      throw gA(
        'Invalid field path (' +
          n +
          "). Paths must not be empty, begin with '.', end with '.', or contain '..'",
        e,
        !1,
        void 0,
        r
      );
    }
  }
  function gA(t, e, n, r, i) {
    var o = r && !r.Y(),
      s = void 0 !== i,
      e = 'Function ' + e + '() called with invalid data';
    n && (e += ' (via `toFirestore()`)');
    n = '';
    return (
      (o || s) &&
        ((n += ' (found'),
        o && (n += ' in field ' + r),
        s && (n += ' in document ' + i),
        (n += ')')),
      new Hv(Kv.INVALID_ARGUMENT, (e += '. ') + t + n)
    );
  }
  function mA(t, e) {
    return t.some(function (t) {
      return t.isEqual(e);
    });
  }
  var bA =
      ((TA.prototype.Wf = function (r) {
        return _o(this, void 0, void 0, function () {
          var e,
            n = this;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                if ((this.jf(), 0 < this.mutations.length))
                  throw new Hv(
                    Kv.INVALID_ARGUMENT,
                    'Firestore transactions require all reads to be executed before all writes.'
                  );
                return [
                  4,
                  (function (s, a) {
                    return _o(this, void 0, void 0, function () {
                      var n, e, r, i, o;
                      return wo(this, function (t) {
                        switch (t.label) {
                          case 0:
                            return (
                              (e = Em((n = s).serializer) + '/documents'),
                              (r = {
                                documents: a.map(function (t) {
                                  return mm(n.serializer, t);
                                })
                              }),
                              [4, n.Wa('BatchGetDocuments', e, r)]
                            );
                          case 1:
                            return (
                              (r = t.sent()),
                              (i = new Map()),
                              r.forEach(function (t) {
                                var e,
                                  t =
                                    ((e = n.serializer),
                                    'found' in (t = t)
                                      ? (function (t, e) {
                                          ty(!!e.found),
                                            e.found.name,
                                            e.found.updateTime;
                                          var n = bm(t, e.found.name),
                                            t = vm(e.found.updateTime),
                                            e = new Cb({
                                              mapValue: {
                                                fields: e.found.fields
                                              }
                                            });
                                          return new Lb(n, t, e, {});
                                        })(e, t)
                                      : 'missing' in t
                                      ? (function (t, e) {
                                          ty(!!e.missing), ty(!!e.readTime);
                                          (t = bm(t, e.missing)),
                                            (e = vm(e.readTime));
                                          return new Mb(t, e);
                                        })(e, t)
                                      : Zv());
                                i.set(t.key.toString(), t);
                              }),
                              (o = []),
                              [
                                2,
                                (a.forEach(function (t) {
                                  t = i.get(t.toString());
                                  ty(!!t), o.push(t);
                                }),
                                o)
                              ]
                            );
                        }
                      });
                    });
                  })(this.eu, r)
                ];
              case 1:
                return [
                  2,
                  ((e = t.sent()).forEach(function (t) {
                    t instanceof Mb || t instanceof Lb ? n.Gf(t) : Zv();
                  }),
                  e)
                ];
            }
          });
        });
      }),
      (TA.prototype.set = function (t, e) {
        this.write(e.Pf(t, this.cn(t))), this.Kf.add(t.toString());
      }),
      (TA.prototype.update = function (t, e) {
        try {
          this.write(e.Pf(t, this.zf(t)));
        } catch (t) {
          this.Qf = t;
        }
        this.Kf.add(t.toString());
      }),
      (TA.prototype.delete = function (t) {
        this.write([new Tb(t, this.cn(t))]), this.Kf.add(t.toString());
      }),
      (TA.prototype.commit = function () {
        return _o(this, void 0, void 0, function () {
          var e,
            n = this;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                if ((this.jf(), this.Qf)) throw this.Qf;
                return (
                  (e = this.qf),
                  this.mutations.forEach(function (t) {
                    e.delete(t.key.toString());
                  }),
                  e.forEach(function (t, e) {
                    e = Dy.at(e);
                    n.mutations.push(new Sb(e, n.cn(e)));
                  }),
                  [
                    4,
                    (function (i, o) {
                      return _o(this, void 0, void 0, function () {
                        var e, n, r;
                        return wo(this, function (t) {
                          switch (t.label) {
                            case 0:
                              return (
                                (n = Em((e = i).serializer) + '/documents'),
                                (r = {
                                  writes: o.map(function (t) {
                                    return Cm(e.serializer, t);
                                  })
                                }),
                                [4, e.Ka('Commit', n, r)]
                              );
                            case 1:
                              return t.sent(), [2];
                          }
                        });
                      });
                    })(this.eu, this.mutations)
                  ]
                );
              case 1:
                return t.sent(), (this.Uf = !0), [2];
            }
          });
        });
      }),
      (TA.prototype.Gf = function (t) {
        var e;
        if (t instanceof Lb) e = t.version;
        else {
          if (!(t instanceof Mb)) throw Zv();
          e = ky.min();
        }
        var n = this.qf.get(t.key.toString());
        if (n) {
          if (!e.isEqual(n))
            throw new Hv(
              Kv.ABORTED,
              'Document version changed between two reads.'
            );
        } else this.qf.set(t.key.toString(), e);
      }),
      (TA.prototype.cn = function (t) {
        var e = this.qf.get(t.toString());
        return !this.Kf.has(t.toString()) && e ? ib.updateTime(e) : ib.an();
      }),
      (TA.prototype.zf = function (t) {
        var e = this.qf.get(t.toString());
        if (this.Kf.has(t.toString()) || !e) return ib.exists(!0);
        if (e.isEqual(ky.min()))
          throw new Hv(
            Kv.INVALID_ARGUMENT,
            "Can't update a document that doesn't exist."
          );
        return ib.updateTime(e);
      }),
      (TA.prototype.write = function (t) {
        this.jf(), (this.mutations = this.mutations.concat(t));
      }),
      (TA.prototype.jf = function () {}),
      TA),
    _A =
      ((IA.prototype.run = function () {
        this.Jf();
      }),
      (IA.prototype.Jf = function () {
        var t = this;
        this.Ci.Us(function () {
          return _o(t, void 0, void 0, function () {
            var e,
              n,
              r = this;
            return wo(this, function (t) {
              return (
                (e = new bA(this.eu)),
                (n = this.Yf(e)) &&
                  n
                    .then(function (t) {
                      r.Ei.yi(function () {
                        return e
                          .commit()
                          .then(function () {
                            r.Ii.resolve(t);
                          })
                          .catch(function (t) {
                            r.Xf(t);
                          });
                      });
                    })
                    .catch(function (t) {
                      r.Xf(t);
                    }),
                [2]
              );
            });
          });
        });
      }),
      (IA.prototype.Yf = function (t) {
        try {
          var e = this.updateFunction(t);
          return !Ky(e) && e.catch && e.then
            ? e
            : (this.Ii.reject(
                Error('Transaction callback must return a Promise')
              ),
              null);
        } catch (t) {
          return this.Ii.reject(t), null;
        }
      }),
      (IA.prototype.Xf = function (t) {
        var e = this;
        0 < this.Hf && this.Zf(t)
          ? (--this.Hf,
            this.Ei.yi(function () {
              return e.Jf(), Promise.resolve();
            }))
          : this.Ii.reject(t);
      }),
      (IA.prototype.Zf = function (t) {
        if ('FirebaseError' !== t.name) return !1;
        t = t.code;
        return 'aborted' === t || 'failed-precondition' === t || !ng(t);
      }),
      IA),
    wA =
      ((EA.prototype.getConfiguration = function () {
        return _o(this, void 0, void 0, function () {
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return [4, this.N.promise];
              case 1:
                return [
                  2,
                  (t.sent(),
                  {
                    Ei: this.Ei,
                    n_: this.n_,
                    clientId: this.clientId,
                    credentials: this.credentials,
                    I_: this.user,
                    ol: 100
                  })
                ];
            }
          });
        });
      }),
      (EA.prototype.ed = function (t) {
        var e = this;
        (this.td = t),
          this.N.promise.then(function () {
            return e.td(e.user);
          });
      }),
      (EA.prototype.nd = function () {
        if (this.Ei.Ni)
          throw new Hv(
            Kv.FAILED_PRECONDITION,
            'The client has already been terminated.'
          );
      }),
      (EA.prototype.terminate = function () {
        var t = this;
        this.Ei.Mi();
        var n = new J_();
        return (
          this.Ei.Fi(function () {
            return _o(t, void 0, void 0, function () {
              var e;
              return wo(this, function (t) {
                switch (t.label) {
                  case 0:
                    return (
                      t.trys.push([0, 5, , 6]),
                      this.sd ? [4, this.sd.terminate()] : [3, 2]
                    );
                  case 1:
                    t.sent(), (t.label = 2);
                  case 2:
                    return this.rd ? [4, this.rd.terminate()] : [3, 4];
                  case 3:
                    t.sent(), (t.label = 4);
                  case 4:
                    return this.credentials.D(), n.resolve(), [3, 6];
                  case 5:
                    return (
                      (e = t.sent()),
                      (e = _w(e, 'Failed to shutdown persistence')),
                      n.reject(e),
                      [3, 6]
                    );
                  case 6:
                    return [2];
                }
              });
            });
          }),
          n.promise
        );
      }),
      EA);
  function EA(t, e, n) {
    var r = this;
    (this.credentials = t),
      (this.Ei = e),
      (this.n_ = n),
      (this.user = gy.UNAUTHENTICATED),
      (this.clientId = ey.t()),
      (this.td = function () {}),
      (this.N = new J_()),
      this.credentials.S(function (t) {
        Yv('FirestoreClient', 'Received user=', t.uid),
          r.user.isEqual(t) || ((r.user = t), r.td(t)),
          r.N.resolve();
      });
  }
  function IA(t, e, n, r) {
    (this.Ei = t),
      (this.eu = e),
      (this.updateFunction = n),
      (this.Ii = r),
      (this.Hf = 5),
      (this.Ci = new $_(this.Ei, 'transaction_retry'));
  }
  function TA(t) {
    (this.eu = t),
      (this.qf = new Map()),
      (this.mutations = []),
      (this.Uf = !1),
      (this.Qf = null),
      (this.Kf = new Set());
  }
  function SA(r, i) {
    return _o(this, void 0, void 0, function () {
      var e,
        n = this;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (
              r.Ei.qi(),
              Yv('FirestoreClient', 'Initializing OfflineComponentProvider'),
              [4, r.getConfiguration()]
            );
          case 1:
            return (e = t.sent()), [4, i.initialize(e)];
          case 2:
            return (
              t.sent(),
              r.ed(function (e) {
                return r.Ei.Li(function () {
                  return _o(n, void 0, void 0, function () {
                    return wo(this, function (t) {
                      switch (t.label) {
                        case 0:
                          return [4, EI(i.Zc, e)];
                        case 1:
                          return t.sent(), [2];
                      }
                    });
                  });
                });
              }),
              i.persistence.cc(function () {
                return r.terminate();
              }),
              (r.rd = i),
              [2]
            );
        }
      });
    });
  }
  function CA(r, i) {
    return _o(this, void 0, void 0, function () {
      var e, n;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return r.Ei.qi(), [4, NA(r)];
          case 1:
            return (
              (e = t.sent()),
              Yv('FirestoreClient', 'Initializing OnlineComponentProvider'),
              [4, r.getConfiguration()]
            );
          case 2:
            return (n = t.sent()), [4, i.initialize(e, n)];
          case 3:
            return (
              t.sent(),
              r.ed(function (t) {
                return r.Ei.Li(function () {
                  return (function (r, i) {
                    return _o(this, void 0, void 0, function () {
                      var e, n;
                      return wo(this, function (t) {
                        switch (t.label) {
                          case 0:
                            return (
                              (e = r).Ei.qi(),
                              Yv(
                                'RemoteStore',
                                'RemoteStore received new credentials'
                              ),
                              (n = eT(e)),
                              e.ru.add(3),
                              [4, QI(e)]
                            );
                          case 1:
                            return (
                              t.sent(),
                              n && e.uu.set('Unknown'),
                              [4, e.nu.V_(i)]
                            );
                          case 2:
                            return t.sent(), e.ru.delete(3), [4, GI(e)];
                          case 3:
                            return t.sent(), [2];
                        }
                      });
                    });
                  })(i.sl, t);
                });
              }),
              (r.sd = i),
              [2]
            );
        }
      });
    });
  }
  function NA(e) {
    return _o(this, void 0, void 0, function () {
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return e.rd
              ? [3, 2]
              : (Yv(
                  'FirestoreClient',
                  'Using default OfflineComponentProvider'
                ),
                [4, SA(e, new DS())]);
          case 1:
            t.sent(), (t.label = 2);
          case 2:
            return [2, e.rd];
        }
      });
    });
  }
  function AA(e) {
    return _o(this, void 0, void 0, function () {
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return e.sd
              ? [3, 2]
              : (Yv('FirestoreClient', 'Using default OnlineComponentProvider'),
                [4, CA(e, new MS())]);
          case 1:
            t.sent(), (t.label = 2);
          case 2:
            return [2, e.sd];
        }
      });
    });
  }
  function kA(t) {
    return NA(t).then(function (t) {
      return t.persistence;
    });
  }
  function RA(t) {
    return NA(t).then(function (t) {
      return t.Zc;
    });
  }
  function OA(t) {
    return AA(t).then(function (t) {
      return t.sl;
    });
  }
  function PA(t) {
    return AA(t).then(function (t) {
      return t.ju;
    });
  }
  function DA(r) {
    return _o(this, void 0, void 0, function () {
      var e, n;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, AA(r)];
          case 1:
            return (
              (e = t.sent()),
              [
                2,
                (((n = e.il).Iu = function (s, a) {
                  return _o(this, void 0, void 0, function () {
                    var e, n, r, i, o;
                    return wo(this, function (t) {
                      switch (t.label) {
                        case 0:
                          return (
                            (e = fS(s)),
                            (o = e.al.get(a))
                              ? ((n = o.targetId),
                                e.rl.wh(n),
                                (r = o.view.el()),
                                [3, 4])
                              : [3, 1]
                          );
                        case 1:
                          return [4, NI(e.Zc, Xb(a))];
                        case 2:
                          return (
                            (i = t.sent()),
                            (o = e.rl.wh(i.targetId)),
                            (n = i.targetId),
                            [4, QT(e, a, n, 'current' === o)]
                          );
                        case 3:
                          (r = t.sent()), e.ml && YI(e.sl, i), (t.label = 4);
                        case 4:
                          return [2, r];
                      }
                    });
                  });
                }.bind(null, e.ju)),
                (n.Pu = function (i, o) {
                  return _o(this, void 0, void 0, function () {
                    var e, n, r;
                    return wo(this, function (t) {
                      switch (t.label) {
                        case 0:
                          return (
                            (n = (e = i).al.get(o)),
                            1 < (r = e.ul.get(n.targetId)).length
                              ? [
                                  2,
                                  (e.ul.set(
                                    n.targetId,
                                    r.filter(function (t) {
                                      return !$b(t, o);
                                    })
                                  ),
                                  void e.al.delete(o))
                                ]
                              : e.ml
                              ? (e.rl.Th(n.targetId),
                                e.rl.hh(n.targetId)
                                  ? [3, 2]
                                  : [
                                      4,
                                      AI(e.Zc, n.targetId, !1)
                                        .then(function () {
                                          e.rl.Ih(n.targetId),
                                            XI(e.sl, n.targetId),
                                            nS(e, n.targetId);
                                        })
                                        .catch(DI)
                                    ])
                              : [3, 3]
                          );
                        case 1:
                          t.sent(), (t.label = 2);
                        case 2:
                          return [3, 5];
                        case 3:
                          return (
                            nS(e, n.targetId), [4, AI(e.Zc, n.targetId, !0)]
                          );
                        case 4:
                          t.sent(), (t.label = 5);
                        case 5:
                          return [2];
                      }
                    });
                  });
                }.bind(null, e.ju)),
                n)
              ]
            );
        }
      });
    });
  }
  function xA(n, r, i) {
    var t = this;
    void 0 === i && (i = {});
    var o = new J_();
    return (
      n.Ei.yi(function () {
        return _o(t, void 0, void 0, function () {
          var e;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return (
                  (e = function (n, r, i, o, s) {
                    var t = new FS({
                        next: function (t) {
                          r.yi(function () {
                            return vT(n, a);
                          });
                          var e = t.docs.has(i);
                          !e && t.fromCache
                            ? s.reject(
                                new Hv(
                                  Kv.UNAVAILABLE,
                                  'Failed to get document because the client is offline.'
                                )
                              )
                            : e && t.fromCache && o && 'server' === o.source
                            ? s.reject(
                                new Hv(
                                  Kv.UNAVAILABLE,
                                  'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)'
                                )
                              )
                            : s.resolve(t);
                        },
                        error: function (t) {
                          return s.reject(t);
                        }
                      }),
                      a = new gT(Wb(i.path), t, {
                        includeMetadataChanges: !0,
                        Su: !0
                      });
                    return dT(n, a);
                  }),
                  [4, DA(n)]
                );
              case 1:
                return [2, e.apply(void 0, [t.sent(), n.Ei, r, i, o])];
            }
          });
        });
      }),
      o.promise
    );
  }
  function LA(n, r, i) {
    var t = this;
    void 0 === i && (i = {});
    var o = new J_();
    return (
      n.Ei.yi(function () {
        return _o(t, void 0, void 0, function () {
          var e;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return (
                  (e = function (e, n, t, r, i) {
                    var o = new FS({
                        next: function (t) {
                          n.yi(function () {
                            return vT(e, s);
                          }),
                            t.fromCache && 'server' === r.source
                              ? i.reject(
                                  new Hv(
                                    Kv.UNAVAILABLE,
                                    'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)'
                                  )
                                )
                              : i.resolve(t);
                        },
                        error: function (t) {
                          return i.reject(t);
                        }
                      }),
                      s = new gT(t, o, { includeMetadataChanges: !0, Su: !0 });
                    return dT(e, s);
                  }),
                  [4, DA(n)]
                );
              case 1:
                return [2, e.apply(void 0, [t.sent(), n.Ei, r, i, o])];
            }
          });
        });
      }),
      o.promise
    );
  }
  var MA =
    ((FA.prototype.set = function (t, e, n) {
      this.ld();
      (t = UA(t, this.uf)),
        (e = kk(t.ff, e, n)),
        (n = sA(this.hd, 'WriteBatch.set', t.lf, e, null !== t.ff, n));
      return (this.ad = this.ad.concat(n.Pf(t.lf, ib.an()))), this;
    }),
    (FA.prototype.update = function (t, e, n) {
      for (var r = [], i = 3; i < arguments.length; i++)
        r[i - 3] = arguments[i];
      this.ld();
      t = UA(t, this.uf);
      return (
        e instanceof cy && (e = e._),
        (e =
          'string' == typeof e || e instanceof HC
            ? uA(this.hd, 'WriteBatch.update', t.lf, e, n, r)
            : aA(this.hd, 'WriteBatch.update', t.lf, e)),
        (this.ad = this.ad.concat(e.Pf(t.lf, ib.exists(!0)))),
        this
      );
    }),
    (FA.prototype.delete = function (t) {
      this.ld();
      t = UA(t, this.uf);
      return (this.ad = this.ad.concat(new Tb(t.lf, ib.an()))), this;
    }),
    (FA.prototype.commit = function () {
      return (
        this.ld(),
        (this.ud = !0),
        0 < this.ad.length ? this.od(this.ad) : Promise.resolve()
      );
    }),
    (FA.prototype.ld = function () {
      if (this.ud)
        throw new Hv(
          Kv.FAILED_PRECONDITION,
          'A write batch can no longer be used after commit() has been called.'
        );
    }),
    FA);
  function FA(t, e) {
    (this.uf = t),
      (this.od = e),
      (this.ad = []),
      (this.ud = !1),
      (this.hd = YN(t));
  }
  function UA(t, e) {
    if ((t instanceof cy && (t = t._), t.firestore !== e))
      throw new Hv(
        Kv.INVALID_ARGUMENT,
        'Provided document reference is from a different Firestore instance.'
      );
    return t;
  }
  var jA,
    VA,
    qA =
      ((GA.prototype.get = function (t) {
        var e = this,
          n = UA(t, this.uf),
          r = new HN(this.uf);
        return this._d.Wf([n.lf]).then(function (t) {
          if (!t || 1 !== t.length) return Zv();
          t = t[0];
          if (t instanceof Mb) return new RC(e.uf, r, n.lf, null, n.ff);
          if (t instanceof Lb) return new RC(e.uf, r, t.key, t, n.ff);
          throw Zv();
        });
      }),
      (GA.prototype.set = function (t, e, n) {
        (t = UA(t, this.uf)),
          (e = kk(t.ff, e, n)),
          (n = sA(this.hd, 'Transaction.set', t.lf, e, null !== t.ff, n));
        return this._d.set(t.lf, n), this;
      }),
      (GA.prototype.update = function (t, e, n) {
        for (var r = [], i = 3; i < arguments.length; i++)
          r[i - 3] = arguments[i];
        t = UA(t, this.uf);
        return (
          e instanceof cy && (e = e._),
          (e =
            'string' == typeof e || e instanceof HC
              ? uA(this.hd, 'Transaction.update', t.lf, e, n, r)
              : aA(this.hd, 'Transaction.update', t.lf, e)),
          this._d.update(t.lf, e),
          this
        );
      }),
      (GA.prototype.delete = function (t) {
        t = UA(t, this.uf);
        return this._d.delete(t.lf), this;
      }),
      mo(zA, (VA = GA)),
      (zA.prototype.get = function (t) {
        var e = this,
          n = UA(t, this.uf),
          r = new uN(this.uf);
        return VA.prototype.get.call(this, t).then(function (t) {
          return new ZC(e.uf, r, n.lf, t._f, new dk(!1, !1), n.ff);
        });
      }),
      zA),
    BA =
      ((HA.prototype.enableIndexedDbPersistence = function (t, e) {
        return (function (t, e) {
          XC((t = uC(t, zC)));
          var n = QA(t),
            r = t.H_(),
            t = new MS();
          return YC(
            n,
            t,
            new xS(t, r.cacheSizeBytes, null == e ? void 0 : e.forceOwnership)
          );
        })(t._, { forceOwnership: e });
      }),
      (HA.prototype.enableMultiTabIndexedDbPersistence = function (t) {
        return (function (t) {
          XC((t = uC(t, zC)));
          var e = QA(t),
            n = t.H_(),
            t = new MS();
          return YC(e, t, new LS(t, n.cacheSizeBytes));
        })(t._);
      }),
      (HA.prototype.clearIndexedDbPersistence = function (t) {
        return (function (n) {
          var t = this;
          if (n.K_ && !n.W_)
            throw new Hv(
              Kv.FAILED_PRECONDITION,
              'Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.'
            );
          var r = new J_();
          return (
            n.wf.Fi(function () {
              return _o(t, void 0, void 0, function () {
                var e;
                return wo(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return (
                        t.trys.push([0, 2, , 3]),
                        [
                          4,
                          (function (n) {
                            return _o(this, void 0, void 0, function () {
                              var e;
                              return wo(this, function (t) {
                                switch (t.label) {
                                  case 0:
                                    return Z_.Hs()
                                      ? ((e = n + 'main'), [4, Z_.delete(e)])
                                      : [2, Promise.resolve()];
                                  case 1:
                                    return t.sent(), [2];
                                }
                              });
                            });
                          })(oI(n.q_, n.M_))
                        ]
                      );
                    case 1:
                      return t.sent(), r.resolve(), [3, 3];
                    case 2:
                      return (e = t.sent()), r.reject(e), [3, 3];
                    case 3:
                      return [2];
                  }
                });
              });
            }),
            r.promise
          );
        })(t._);
      }),
      HA),
    WA =
      (mo(KA, (jA = cy)),
      Object.defineProperty(KA.prototype, 'q_', {
        get: function () {
          return this._.q_;
        },
        enumerable: !1,
        configurable: !0
      }),
      (KA.prototype.settings = function (t) {
        t.merge &&
          delete (t = Object.assign(Object.assign({}, this._.z_()), t)).merge,
          this._.G_(t);
      }),
      (KA.prototype.useEmulator = function (t, e) {
        'firestore.googleapis.com' !== this._.z_().host &&
          Jv(
            'Host has been set in both settings() and useEmulator(), emulator host will be used'
          ),
          this.settings({ host: t + ':' + e, ssl: !1, merge: !0 });
      }),
      (KA.prototype.enableNetwork = function () {
        return (function (r) {
          var t = this;
          return r.Ei.enqueue(function () {
            return _o(t, void 0, void 0, function () {
              var e, n;
              return wo(this, function (t) {
                switch (t.label) {
                  case 0:
                    return [4, kA(r)];
                  case 1:
                    return (e = t.sent()), [4, OA(r)];
                  case 2:
                    return (
                      (n = t.sent()),
                      [2, (e.ac(!0), (t = n).ru.delete(0), GI(t))]
                    );
                }
              });
            });
          });
        })(QA(uC(this._, zC)));
      }),
      (KA.prototype.disableNetwork = function () {
        return (function (r) {
          var t = this;
          return r.Ei.enqueue(function () {
            return _o(t, void 0, void 0, function () {
              var e, n;
              return wo(this, function (t) {
                switch (t.label) {
                  case 0:
                    return [4, kA(r)];
                  case 1:
                    return (e = t.sent()), [4, OA(r)];
                  case 2:
                    return (
                      (n = t.sent()),
                      [
                        2,
                        (e.ac(!1),
                        (function (n) {
                          return _o(this, void 0, void 0, function () {
                            var e;
                            return wo(this, function (t) {
                              switch (t.label) {
                                case 0:
                                  return (e = n).ru.add(0), [4, QI(e)];
                                case 1:
                                  return t.sent(), e.uu.set('Offline'), [2];
                              }
                            });
                          });
                        })(n))
                      ]
                    );
                }
              });
            });
          });
        })(QA(uC(this._, zC)));
      }),
      (KA.prototype.enablePersistence = function (t) {
        var e = !1,
          n = !1;
        return (
          t &&
            iC(
              'synchronizeTabs',
              (e = !!t.synchronizeTabs),
              'experimentalForceOwningTab',
              (n = !!t.experimentalForceOwningTab)
            ),
          e
            ? this.fd.enableMultiTabIndexedDbPersistence(this)
            : this.fd.enableIndexedDbPersistence(this, n)
        );
      }),
      (KA.prototype.clearPersistence = function () {
        return this.fd.clearIndexedDbPersistence(this);
      }),
      (KA.prototype.terminate = function () {
        return (
          this.app._removeServiceInstance('firestore'),
          this.app._removeServiceInstance('firestore-exp'),
          this._._delete()
        );
      }),
      (KA.prototype.waitForPendingWrites = function () {
        return (function (n) {
          var t = this,
            r = new J_();
          return (
            n.Ei.yi(function () {
              return _o(t, void 0, void 0, function () {
                var e;
                return wo(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return (e = ZT), [4, PA(n)];
                    case 1:
                      return [2, e.apply(void 0, [t.sent(), r])];
                  }
                });
              });
            }),
            r.promise
          );
        })(QA(uC(this._, zC)));
      }),
      (KA.prototype.onSnapshotsInSync = function (t) {
        return (
          (e = this._),
          (t = t),
          (function (n, t) {
            var e = this,
              r = new FS(t);
            return (
              n.Ei.yi(function () {
                return _o(e, void 0, void 0, function () {
                  var e;
                  return wo(this, function (t) {
                    switch (t.label) {
                      case 0:
                        return (
                          (e = function (t, e) {
                            t.mu.add(e), e.next();
                          }),
                          [4, DA(n)]
                        );
                      case 1:
                        return [2, e.apply(void 0, [t.sent(), r])];
                    }
                  });
                });
              }),
              function () {
                r.b_(),
                  n.Ei.yi(function () {
                    return _o(e, void 0, void 0, function () {
                      var e;
                      return wo(this, function (t) {
                        switch (t.label) {
                          case 0:
                            return (
                              (e = function (t, e) {
                                t.mu.delete(e);
                              }),
                              [4, DA(n)]
                            );
                          case 1:
                            return [2, e.apply(void 0, [t.sent(), r])];
                        }
                      });
                    });
                  });
              }
            );
          })(QA(uC(e, zC)), sN(t) ? t : { next: t })
        );
        var e;
      }),
      Object.defineProperty(KA.prototype, 'app', {
        get: function () {
          if (!this.dd)
            throw new Hv(
              Kv.FAILED_PRECONDITION,
              "Firestore was not initialized using the Firebase SDK. 'app' is not available"
            );
          return this.dd;
        },
        enumerable: !1,
        configurable: !0
      }),
      (KA.prototype.collection = function (t) {
        try {
          return new _k(this, BN(this._, t));
        } catch (t) {
          throw ok(t, 'collection()', 'Firestore.collection()');
        }
      }),
      (KA.prototype.doc = function (t) {
        try {
          return new ek(this, WN(this._, t));
        } catch (t) {
          throw ok(t, 'doc()', 'Firestore.doc()');
        }
      }),
      (KA.prototype.collectionGroup = function (t) {
        try {
          return new gk(
            this,
            (function (t, e) {
              if (
                ((t = uC(t, AC)),
                nC('collectionGroup', 'collection id', e),
                0 <= e.indexOf('/'))
              )
                throw new Hv(
                  Kv.INVALID_ARGUMENT,
                  "Invalid collection ID '" +
                    e +
                    "' passed to function collectionGroup(). Collection IDs must not contain '/'."
                );
              return new vN(t, null, ((e = e), new Ub(Ry.st(), e)));
            })(this._, t)
          );
        } catch (t) {
          throw ok(t, 'collectionGroup()', 'Firestore.collectionGroup()');
        }
      }),
      (KA.prototype.runTransaction = function (e) {
        var n,
          r = this;
        return (function (n, r) {
          var t = this,
            i = new J_();
          return (
            n.Ei.yi(function () {
              return _o(t, void 0, void 0, function () {
                var e;
                return wo(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return [
                        4,
                        AA(n).then(function (t) {
                          return t.eu;
                        })
                      ];
                    case 1:
                      return (e = t.sent()), new _A(n.Ei, e, r, i).run(), [2];
                  }
                });
              });
            }),
            i.promise
          );
        })(QA((n = this._)), function (t) {
          return (t = new qA(n, t)), e(new ZA(r, t));
        });
      }),
      (KA.prototype.batch = function () {
        var e = this;
        return (
          QA(this._),
          new tk(
            new MA(this._, function (t) {
              return fN(e._, t);
            })
          )
        );
      }),
      (KA.prototype.loadBundle = function (t) {
        throw new Hv(
          Kv.FAILED_PRECONDITION,
          '"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?'
        );
      }),
      (KA.prototype.namedQuery = function (t) {
        throw new Hv(
          Kv.FAILED_PRECONDITION,
          '"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?'
        );
      }),
      KA);
  function KA(t, e, n) {
    var r = this;
    return (
      ((r = jA.call(this, e) || this).fd = n),
      (r.INTERNAL = {
        delete: function () {
          return r.terminate();
        }
      }),
      t instanceof yy || (r.dd = t),
      r
    );
  }
  function HA() {}
  function zA(t, e) {
    var n = this;
    return ((n = VA.call(this, t, e) || this).uf = t), n;
  }
  function GA(t, e) {
    (this.uf = t), (this._d = e), (this.hd = YN(t));
  }
  function QA(t) {
    return t.Ef || YA(t), t.Ef.nd(), t.Ef;
  }
  function YA(t) {
    var e,
      n,
      r = t.H_(),
      r =
        ((e = t.q_),
        (n = t.M_),
        new vy(
          e,
          n,
          r.host,
          r.ssl,
          r.experimentalForceLongPolling,
          r.experimentalAutoDetectLongPolling
        ));
    t.Ef = new wA(t.U_, t.wf, r);
  }
  var XA,
    JA,
    $A,
    ZA =
      (mo(ik, ($A = cy)),
      (ik.prototype.get = function (t) {
        var e = this,
          t = Ak(t);
        return this._.get(t).then(function (t) {
          return new vk(e.uf, t);
        });
      }),
      (ik.prototype.set = function (t, e, n) {
        t = Ak(t);
        return (
          n
            ? (rC('Transaction.set', n), this._.set(t, e, n))
            : this._.set(t, e),
          this
        );
      }),
      (ik.prototype.update = function (t, e, n) {
        for (var r = [], i = 3; i < arguments.length; i++)
          r[i - 3] = arguments[i];
        var o = Ak(t);
        return (
          2 === arguments.length
            ? this._.update(o, e)
            : (t = this._).update.apply(t, So([o, e, n], r)),
          this
        );
      }),
      (ik.prototype.delete = function (t) {
        t = Ak(t);
        return this._.delete(t), this;
      }),
      ik),
    tk =
      (mo(rk, (JA = cy)),
      (rk.prototype.set = function (t, e, n) {
        t = Ak(t);
        return (
          n ? (rC('WriteBatch.set', n), this._.set(t, e, n)) : this._.set(t, e),
          this
        );
      }),
      (rk.prototype.update = function (t, e, n) {
        for (var r = [], i = 3; i < arguments.length; i++)
          r[i - 3] = arguments[i];
        var o = Ak(t);
        return (
          2 === arguments.length
            ? this._.update(o, e)
            : (t = this._).update.apply(t, So([o, e, n], r)),
          this
        );
      }),
      (rk.prototype.delete = function (t) {
        t = Ak(t);
        return this._.delete(t), this;
      }),
      (rk.prototype.commit = function () {
        return this._.commit();
      }),
      rk),
    ek =
      (mo(nk, (XA = cy)),
      (nk.wd = function (t, e, n) {
        if (t.length % 2 != 0)
          throw new Hv(
            Kv.INVALID_ARGUMENT,
            'Invalid document reference. Document references must have an even number of segments, but ' +
              t.et() +
              ' has ' +
              t.length
          );
        return new nk(e, new dN(e._, n, new Dy(t)));
      }),
      (nk.af = function (t, e, n) {
        return new nk(e, new dN(e._, n, t));
      }),
      Object.defineProperty(nk.prototype, 'id', {
        get: function () {
          return this._.id;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(nk.prototype, 'parent', {
        get: function () {
          return new _k(this.firestore, this._.parent);
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(nk.prototype, 'path', {
        get: function () {
          return this._.path;
        },
        enumerable: !1,
        configurable: !0
      }),
      (nk.prototype.collection = function (t) {
        try {
          return new _k(this.firestore, BN(this._, t));
        } catch (t) {
          throw ok(t, 'collection()', 'DocumentReference.collection()');
        }
      }),
      (nk.prototype.isEqual = function (t) {
        return t instanceof cy && (t = t._), t instanceof dN && GN(this._, t);
      }),
      (nk.prototype.set = function (t, e) {
        e = rC('DocumentReference.set', e);
        try {
          return (function (t, e, n) {
            t = uC(t, dN);
            var r = uC(t.firestore, zC),
              e = kk(t.ff, e, n);
            return fN(
              r,
              sA(YN(r), 'setDoc', t.lf, e, null !== t.ff, n).Pf(t.lf, ib.an())
            );
          })(this._, t, e);
        } catch (t) {
          throw ok(t, 'setDoc()', 'DocumentReference.set()');
        }
      }),
      (nk.prototype.update = function (t, e) {
        for (var n = [], r = 2; r < arguments.length; r++)
          n[r - 2] = arguments[r];
        try {
          return 1 === arguments.length
            ? hN(this._, t)
            : hN.apply(void 0, So([this._, t, e], n));
        } catch (t) {
          throw ok(t, 'updateDoc()', 'DocumentReference.update()');
        }
      }),
      (nk.prototype.delete = function () {
        return fN(uC((t = this._).firestore, zC), [new Tb(t.lf, ib.an())]);
        var t;
      }),
      (nk.prototype.onSnapshot = function () {
        for (var e = this, t = [], n = 0; n < arguments.length; n++)
          t[n] = arguments[n];
        var r = sk(t),
          i = ak(t, function (t) {
            return new vk(
              e.firestore,
              new ZC(e.firestore._, e.hf, t.lf, t._f, t.metadata, e._.ff)
            );
          });
        return lN(this._, r, i);
      }),
      (nk.prototype.get = function (t) {
        var e = this;
        return ('cache' === (null == t ? void 0 : t.source)
          ? function (e) {
              e = uC(e, dN);
              var n = uC(e.firestore, zC),
                t = QA(n),
                r = new uN(n);
              return (function (n, r) {
                var t = this,
                  i = new J_();
                return (
                  n.Ei.yi(function () {
                    return _o(t, void 0, void 0, function () {
                      var e;
                      return wo(this, function (t) {
                        switch (t.label) {
                          case 0:
                            return (
                              (e = function (i, o, s) {
                                return _o(this, void 0, void 0, function () {
                                  var r;
                                  return wo(this, function (t) {
                                    switch (t.label) {
                                      case 0:
                                        return (
                                          t.trys.push([0, 2, , 3]),
                                          [
                                            4,
                                            ((e = o),
                                            (n = i).persistence.runTransaction(
                                              'read document',
                                              'readonly',
                                              function (t) {
                                                return n.sa.hs(t, e);
                                              }
                                            ))
                                          ]
                                        );
                                      case 1:
                                        return (
                                          (r = t.sent()) instanceof Lb
                                            ? s.resolve(r)
                                            : r instanceof Mb
                                            ? s.resolve(null)
                                            : s.reject(
                                                new Hv(
                                                  Kv.UNAVAILABLE,
                                                  "Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"
                                                )
                                              ),
                                          [3, 3]
                                        );
                                      case 2:
                                        return (
                                          (r = t.sent()),
                                          (r = _w(
                                            r,
                                            "Failed to get document '" +
                                              o +
                                              ' from cache'
                                          )),
                                          s.reject(r),
                                          [3, 3]
                                        );
                                      case 3:
                                        return [2];
                                    }
                                    var e, n;
                                  });
                                });
                              }),
                              [4, RA(n)]
                            );
                          case 1:
                            return [2, e.apply(void 0, [t.sent(), r, i])];
                        }
                      });
                    });
                  }),
                  i.promise
                );
              })(t, e.lf).then(function (t) {
                return new ZC(
                  n,
                  r,
                  e.lf,
                  t,
                  new dk(t instanceof Lb && t.ln, !0),
                  e.ff
                );
              });
            }
          : 'server' === (null == t ? void 0 : t.source)
          ? function (e) {
              e = uC(e, dN);
              var n = uC(e.firestore, zC);
              return xA(QA(n), e.lf, { source: 'server' }).then(function (t) {
                return pN(n, e, t);
              });
            }
          : function (e) {
              e = uC(e, dN);
              var n = uC(e.firestore, zC);
              return xA(QA(n), e.lf).then(function (t) {
                return pN(n, e, t);
              });
            })(this._).then(function (t) {
          return new vk(
            e.firestore,
            new ZC(e.firestore._, e.hf, t.lf, t._f, t.metadata, e._.ff)
          );
        });
      }),
      (nk.prototype.withConverter = function (t) {
        return new nk(this.firestore, this._.withConverter(t));
      }),
      nk);
  function nk(t, e) {
    var n = this;
    return (
      ((n = XA.call(this, e) || this).firestore = t), (n.hf = new kC(t)), n
    );
  }
  function rk() {
    return (null !== JA && JA.apply(this, arguments)) || this;
  }
  function ik(t, e) {
    var n = this;
    return ((n = $A.call(this, e) || this).uf = t), n;
  }
  function ok(t, e, n) {
    return (t.message = t.message.replace(e, n)), t;
  }
  function sk(t) {
    for (var e = 0, n = t; e < n.length; e++) {
      var r = n[e];
      if ('object' == typeof r && !sN(r)) return r;
    }
    return {};
  }
  function ak(t, e) {
    var n;
    return {
      next: function (t) {
        n.next && n.next(e(t));
      },
      error:
        null ===
          (t = (n = sN(t[0])
            ? t[0]
            : sN(t[1])
            ? t[1]
            : 'function' == typeof t[0]
            ? { next: t[0], error: t[1], complete: t[2] }
            : { next: t[1], error: t[2], complete: t[3] }).error) ||
        void 0 === t
          ? void 0
          : t.bind(n),
      complete: null === (t = n.complete) || void 0 === t ? void 0 : t.bind(n)
    };
  }
  var uk,
    ck,
    hk,
    lk,
    fk,
    pk,
    dk =
      ((Nk.prototype.isEqual = function (t) {
        return (
          this.hasPendingWrites === t.hasPendingWrites &&
          this.fromCache === t.fromCache
        );
      }),
      Nk),
    vk =
      (mo(Ck, (pk = cy)),
      Object.defineProperty(Ck.prototype, 'ref', {
        get: function () {
          return new ek(this.uf, this._.ref);
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Ck.prototype, 'id', {
        get: function () {
          return this._.id;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Ck.prototype, 'metadata', {
        get: function () {
          return this._.metadata;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Ck.prototype, 'exists', {
        get: function () {
          return this._.exists();
        },
        enumerable: !1,
        configurable: !0
      }),
      (Ck.prototype.data = function (t) {
        return this._.data(t);
      }),
      (Ck.prototype.get = function (t, e) {
        return this._.get(t, e);
      }),
      (Ck.prototype.isEqual = function (t) {
        return oN(this._, t._);
      }),
      Ck),
    yk =
      (mo(Sk, (fk = vk)),
      (Sk.prototype.data = function (t) {
        return this._.data(t);
      }),
      Sk),
    gk =
      (mo(Tk, (lk = cy)),
      (Tk.prototype.where = function (t, e, n) {
        try {
          return new Tk(
            this.firestore,
            mN(
              this._,
              ((r = n), (i = e), (o = WC('where', t)), new TN(o, i, r))
            )
          );
        } catch (t) {
          throw ok(t, /(orderBy|where)\(\)/, 'Query.$1()');
        }
        var r, i, o;
      }),
      (Tk.prototype.orderBy = function (n, t) {
        try {
          return new Tk(
            this.firestore,
            mN(
              this._,
              (function (t) {
                void 0 === t && (t = 'asc');
                var e = t,
                  t = WC('orderBy', n);
                return new SN(t, e);
              })(t)
            )
          );
        } catch (n) {
          throw ok(n, /(orderBy|where)\(\)/, 'Query.$1()');
        }
      }),
      (Tk.prototype.limit = function (t) {
        try {
          return new Tk(
            this.firestore,
            mN(this._, (cC('limit', (e = t)), new CN('limit', e, 'F')))
          );
        } catch (t) {
          throw ok(t, 'limit()', 'Query.limit()');
        }
        var e;
      }),
      (Tk.prototype.limitToLast = function (t) {
        try {
          return new Tk(
            this.firestore,
            mN(
              this._,
              (cC('limitToLast', (e = t)), new CN('limitToLast', e, 'L'))
            )
          );
        } catch (t) {
          throw ok(t, 'limitToLast()', 'Query.limitToLast()');
        }
        var e;
      }),
      (Tk.prototype.startAt = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        try {
          return new Tk(
            this.firestore,
            mN(
              this._,
              function () {
                for (var t = [], e = 0; e < arguments.length; e++)
                  t[e] = arguments[e];
                return new NN('startAt', t, !0);
              }.apply(void 0, t)
            )
          );
        } catch (t) {
          throw ok(t, 'startAt()', 'Query.startAt()');
        }
      }),
      (Tk.prototype.startAfter = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        try {
          return new Tk(
            this.firestore,
            mN(
              this._,
              function () {
                for (var t = [], e = 0; e < arguments.length; e++)
                  t[e] = arguments[e];
                return new NN('startAfter', t, !1);
              }.apply(void 0, t)
            )
          );
        } catch (t) {
          throw ok(t, 'startAfter()', 'Query.startAfter()');
        }
      }),
      (Tk.prototype.endBefore = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        try {
          return new Tk(
            this.firestore,
            mN(
              this._,
              function () {
                for (var t = [], e = 0; e < arguments.length; e++)
                  t[e] = arguments[e];
                return new AN('endBefore', t, !0);
              }.apply(void 0, t)
            )
          );
        } catch (t) {
          throw ok(t, 'endBefore()', 'Query.endBefore()');
        }
      }),
      (Tk.prototype.endAt = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        try {
          return new Tk(
            this.firestore,
            mN(
              this._,
              function () {
                for (var t = [], e = 0; e < arguments.length; e++)
                  t[e] = arguments[e];
                return new AN('endAt', t, !1);
              }.apply(void 0, t)
            )
          );
        } catch (t) {
          throw ok(t, 'endAt()', 'Query.endAt()');
        }
      }),
      (Tk.prototype.isEqual = function (t) {
        return QN(this._, t._);
      }),
      (Tk.prototype.get = function (t) {
        var e = this;
        return ('cache' === (null == t ? void 0 : t.source)
          ? function (e) {
              e = uC(e, vN);
              var n = uC(e.firestore, zC),
                t = QA(n),
                r = new uN(n);
              return (function (n, r) {
                var t = this,
                  i = new J_();
                return (
                  n.Ei.yi(function () {
                    return _o(t, void 0, void 0, function () {
                      var e;
                      return wo(this, function (t) {
                        switch (t.label) {
                          case 0:
                            return (
                              (e = function (r, i, o) {
                                return _o(this, void 0, void 0, function () {
                                  var e, n;
                                  return wo(this, function (t) {
                                    switch (t.label) {
                                      case 0:
                                        return (
                                          t.trys.push([0, 2, , 3]),
                                          [4, kI(r, i, !0)]
                                        );
                                      case 1:
                                        return (
                                          (n = t.sent()),
                                          (e = new LT(i, n.la)),
                                          (n = e.Gh(n.documents)),
                                          (n = e.es(n, !1)),
                                          o.resolve(n.snapshot),
                                          [3, 3]
                                        );
                                      case 2:
                                        return (
                                          (n = t.sent()),
                                          (n = _w(
                                            n,
                                            "Failed to execute query '" +
                                              i +
                                              ' against cache'
                                          )),
                                          o.reject(n),
                                          [3, 3]
                                        );
                                      case 3:
                                        return [2];
                                    }
                                  });
                                });
                              }),
                              [4, RA(n)]
                            );
                          case 1:
                            return [2, e.apply(void 0, [t.sent(), r, i])];
                        }
                      });
                    });
                  }),
                  i.promise
                );
              })(t, e.Rf).then(function (t) {
                return new eN(n, r, e, t);
              });
            }
          : 'server' === (null == t ? void 0 : t.source)
          ? function (e) {
              e = uC(e, vN);
              var n = uC(e.firestore, zC),
                t = QA(n),
                r = new uN(n);
              return LA(t, e.Rf, { source: 'server' }).then(function (t) {
                return new eN(n, r, e, t);
              });
            }
          : function (e) {
              e = uC(e, vN);
              var n = uC(e.firestore, zC),
                t = QA(n),
                r = new uN(n);
              return (
                UN(e.Rf),
                LA(t, e.Rf).then(function (t) {
                  return new eN(n, r, e, t);
                })
              );
            })(this._).then(function (t) {
          return new bk(e.firestore, new eN(e.firestore._, e.hf, e._, t.mf));
        });
      }),
      (Tk.prototype.onSnapshot = function () {
        for (var e = this, t = [], n = 0; n < arguments.length; n++)
          t[n] = arguments[n];
        var r = sk(t),
          i = ak(t, function (t) {
            return new bk(e.firestore, new eN(e.firestore._, e.hf, e._, t.mf));
          });
        return lN(this._, r, i);
      }),
      (Tk.prototype.withConverter = function (t) {
        return new Tk(this.firestore, this._.withConverter(t));
      }),
      Tk),
    mk =
      (mo(Ik, (hk = cy)),
      Object.defineProperty(Ik.prototype, 'type', {
        get: function () {
          return this._.type;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Ik.prototype, 'doc', {
        get: function () {
          return new yk(this.uf, this._.doc);
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Ik.prototype, 'oldIndex', {
        get: function () {
          return this._.oldIndex;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Ik.prototype, 'newIndex', {
        get: function () {
          return this._.newIndex;
        },
        enumerable: !1,
        configurable: !0
      }),
      Ik),
    bk =
      (mo(Ek, (ck = cy)),
      Object.defineProperty(Ek.prototype, 'query', {
        get: function () {
          return new gk(this.uf, this._.query);
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Ek.prototype, 'metadata', {
        get: function () {
          return this._.metadata;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Ek.prototype, 'size', {
        get: function () {
          return this._.size;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Ek.prototype, 'empty', {
        get: function () {
          return this._.empty;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(Ek.prototype, 'docs', {
        get: function () {
          var e = this;
          return this._.docs.map(function (t) {
            return new yk(e.uf, t);
          });
        },
        enumerable: !1,
        configurable: !0
      }),
      (Ek.prototype.docChanges = function (t) {
        var e = this;
        return this._.docChanges(t).map(function (t) {
          return new mk(e.uf, t);
        });
      }),
      (Ek.prototype.forEach = function (e, n) {
        var r = this;
        this._.forEach(function (t) {
          e.call(n, new yk(r.uf, t));
        });
      }),
      (Ek.prototype.isEqual = function (t) {
        return oN(this._, t._);
      }),
      Ek),
    _k =
      (mo(wk, (uk = gk)),
      Object.defineProperty(wk.prototype, 'id', {
        get: function () {
          return this._.id;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(wk.prototype, 'path', {
        get: function () {
          return this._.path;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(wk.prototype, 'parent', {
        get: function () {
          var t = this._.parent;
          return t ? new ek(this.firestore, t) : null;
        },
        enumerable: !1,
        configurable: !0
      }),
      (wk.prototype.doc = function (t) {
        try {
          return new ek(
            this.firestore,
            void 0 === t ? WN(this._) : WN(this._, t)
          );
        } catch (t) {
          throw ok(t, 'doc()', 'CollectionReference.doc()');
        }
      }),
      (wk.prototype.add = function (t) {
        var e,
          n,
          r,
          i = this;
        return (
          (e = this._),
          (n = t),
          (t = uC(e.firestore, zC)),
          (r = WN(e)),
          (n = kk(e.ff, n)),
          fN(
            t,
            sA(YN(e.firestore), 'addDoc', r.lf, n, null !== e.ff, {}).Pf(
              r.lf,
              ib.exists(!1)
            )
          )
            .then(function () {
              return r;
            })
            .then(function (t) {
              return new ek(i.firestore, t);
            })
        );
      }),
      (wk.prototype.isEqual = function (t) {
        return GN(this._, t._);
      }),
      (wk.prototype.withConverter = function (t) {
        return new wk(this.firestore, this._.withConverter(t));
      }),
      wk);
  function wk(t, e) {
    var n = this;
    return ((n = uk.call(this, t, e) || this).firestore = t), (n._ = e), n;
  }
  function Ek(t, e) {
    var n = this;
    return ((n = ck.call(this, e) || this).uf = t), n;
  }
  function Ik(t, e) {
    var n = this;
    return ((n = hk.call(this, e) || this).uf = t), n;
  }
  function Tk(t, e) {
    var n = this;
    return (
      ((n = lk.call(this, e) || this).firestore = t), (n.hf = new kC(t)), n
    );
  }
  function Sk() {
    return (null !== fk && fk.apply(this, arguments)) || this;
  }
  function Ck(t, e) {
    var n = this;
    return ((n = pk.call(this, e) || this).uf = t), n;
  }
  function Nk(t, e) {
    (this.hasPendingWrites = t), (this.fromCache = e);
  }
  function Ak(t) {
    return t instanceof cy && (t = t._), uC(t, dN);
  }
  function kk(t, e, n) {
    return t
      ? n && (n.merge || n.mergeFields)
        ? t.toFirestore(e, n)
        : t.toFirestore(e)
      : e;
  }
  var Rk,
    Ok,
    dt =
      (mo(Lk, (Ok = cy)),
      (Lk.documentId = function () {
        return new Lk(Py.ot().et());
      }),
      (Lk.prototype.isEqual = function (t) {
        return (
          t instanceof cy && (t = t._),
          t instanceof HC && this._.df.isEqual(t.df)
        );
      }),
      Lk),
    Gn =
      (mo(xk, (Rk = cy)),
      (xk.serverTimestamp = function () {
        var t = new wC('serverTimestamp');
        return (t._methodName = 'FieldValue.serverTimestamp'), new xk(t);
      }),
      (xk.delete = function () {
        var t = new fC('deleteField');
        return (t._methodName = 'FieldValue.delete'), new xk(t);
      }),
      (xk.arrayUnion = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        var n = function () {
          for (var t = [], e = 0; e < arguments.length; e++)
            t[e] = arguments[e];
          return new EC('arrayUnion', t);
        }.apply(void 0, t);
        return (n._methodName = 'FieldValue.arrayUnion'), new xk(n);
      }),
      (xk.arrayRemove = function () {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        var n = function () {
          for (var t = [], e = 0; e < arguments.length; e++)
            t[e] = arguments[e];
          return new IC('arrayRemove', t);
        }.apply(void 0, t);
        return (n._methodName = 'FieldValue.arrayRemove'), new xk(n);
      }),
      (xk.increment = function (t) {
        t = new TC('increment', t);
        return (t._methodName = 'FieldValue.increment'), new xk(t);
      }),
      (xk.prototype.isEqual = function (t) {
        return this._.isEqual(t._);
      }),
      xk),
    Pk =
      ((Dk.prototype.onProgress = function (t, e, n) {
        this.Ed = { next: t, error: e, complete: n };
      }),
      (Dk.prototype.catch = function (t) {
        return this.Td.promise.catch(t);
      }),
      (Dk.prototype.then = function (t, e) {
        return this.Td.promise.then(t, e);
      }),
      (Dk.prototype.Rl = function (t) {
        this.Pl(t), this.Ed.complete && this.Ed.complete(), this.Td.resolve(t);
      }),
      (Dk.prototype.yl = function (t) {
        (this.md.taskState = 'Error'),
          this.Ed.next && this.Ed.next(this.md),
          this.Ed.error && this.Ed.error(t),
          this.Td.reject(t);
      }),
      (Dk.prototype.Pl = function (t) {
        (this.md = t), this.Ed.next && this.Ed.next(t);
      }),
      Dk);
  function Dk() {
    (this.Ed = {}),
      (this.Td = new J_()),
      (this.md = {
        taskState: 'Running',
        totalBytes: 0,
        totalDocuments: 0,
        bytesLoaded: 0,
        documentsLoaded: 0
      });
  }
  function xk() {
    return (null !== Rk && Rk.apply(this, arguments)) || this;
  }
  function Lk() {
    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
    return Ok.call(this, new (HC.bind.apply(HC, So([void 0], t)))()) || this;
  }
  var Mk,
    Fk,
    Uk = {
      Firestore: WA,
      GeoPoint: SC,
      Timestamp: Ay,
      Blob: dy,
      Transaction: ZA,
      WriteBatch: tk,
      DocumentReference: ek,
      DocumentSnapshot: vk,
      Query: gk,
      QueryDocumentSnapshot: yk,
      QuerySnapshot: bk,
      CollectionReference: _k,
      FieldPath: dt,
      FieldValue: Gn,
      setLogLevel: function (t) {
        zv.setLogLevel(t);
      },
      CACHE_SIZE_UNLIMITED: -1
    };
  (Mk = Jl).INTERNAL.registerComponent(
    new _s(
      'firestore',
      function (t) {
        var e = t.getProvider('app').getImmediate();
        return (
          (e = e),
          (t = t.getProvider('auth-internal')),
          new WA(e, new zC(e, t), new BA())
        );
      },
      'PUBLIC'
    ).setServiceProps(Object.assign({}, Uk))
  ),
    Mk.registerVersion('@firebase/firestore', '2.0.4'),
    ((Fk = WA).prototype.loadBundle = function (t) {
      return (
        (e = this),
        (o = t),
        (t = new Pk()),
        (function (n, t, r) {
          var e = this,
            i = (function (t, e) {
              t = 'string' == typeof t ? new TextEncoder().encode(t) : t;
              return new hI(aI(t), e);
            })(o, uI(t));
          n.Ei.yi(function () {
            return _o(e, void 0, void 0, function () {
              var e;
              return wo(this, function (t) {
                switch (t.label) {
                  case 0:
                    return (e = dS), [4, PA(n)];
                  case 1:
                    return e.apply(void 0, [t.sent(), i, r]), [2];
                }
              });
            });
          });
        })(QA(e._), e.q_, t),
        t
      );
      var e, o;
    }),
    (Fk.prototype.namedQuery = function (t) {
      return (
        (t = t),
        (function (n, r) {
          var t = this;
          return n.Ei.enqueue(function () {
            return _o(t, void 0, void 0, function () {
              var e;
              return wo(this, function (t) {
                switch (t.label) {
                  case 0:
                    return (
                      (e = function (t, e) {
                        var n = t;
                        return n.persistence.runTransaction(
                          'Get named query',
                          'readonly',
                          function (t) {
                            return n.tc.wo(t, e);
                          }
                        );
                      }),
                      [4, RA(n)]
                    );
                  case 1:
                    return [2, e.apply(void 0, [t.sent(), r])];
                }
              });
            });
          });
        })(QA((e = this)._), t).then(function (t) {
          return t ? new gk(e, new vN(e._, null, t.query)) : null;
        })
      );
      var e;
    });
  var jk,
    Vk = {
      OK: 'ok',
      CANCELLED: 'cancelled',
      UNKNOWN: 'unknown',
      INVALID_ARGUMENT: 'invalid-argument',
      DEADLINE_EXCEEDED: 'deadline-exceeded',
      NOT_FOUND: 'not-found',
      ALREADY_EXISTS: 'already-exists',
      PERMISSION_DENIED: 'permission-denied',
      UNAUTHENTICATED: 'unauthenticated',
      RESOURCE_EXHAUSTED: 'resource-exhausted',
      FAILED_PRECONDITION: 'failed-precondition',
      ABORTED: 'aborted',
      OUT_OF_RANGE: 'out-of-range',
      UNIMPLEMENTED: 'unimplemented',
      INTERNAL: 'internal',
      UNAVAILABLE: 'unavailable',
      DATA_LOSS: 'data-loss'
    },
    qk = (mo(Bk, (jk = Error)), Bk);
  function Bk(t, e, n) {
    e = jk.call(this, e) || this;
    return (
      Object.setPrototypeOf(e, Bk.prototype), (e.code = t), (e.details = n), e
    );
  }
  function Wk(t, e, n) {
    var r = (function (t) {
        if (200 <= t && t < 300) return 'ok';
        switch (t) {
          case 0:
            return 'internal';
          case 400:
            return 'invalid-argument';
          case 401:
            return 'unauthenticated';
          case 403:
            return 'permission-denied';
          case 404:
            return 'not-found';
          case 409:
            return 'aborted';
          case 429:
            return 'resource-exhausted';
          case 499:
            return 'cancelled';
          case 500:
            return 'internal';
          case 501:
            return 'unimplemented';
          case 503:
            return 'unavailable';
          case 504:
            return 'deadline-exceeded';
        }
        return 'unknown';
      })(t),
      i = r,
      o = void 0;
    try {
      var s = e && e.error;
      if (s) {
        var a = s.status;
        if ('string' == typeof a) {
          if (!Vk[a]) return new qk('internal', 'internal');
          (r = Vk[a]), (i = a);
        }
        a = s.message;
        'string' == typeof a && (i = a),
          void 0 !== (o = s.details) && (o = n.decode(o));
      }
    } catch (t) {}
    return 'ok' === r ? null : new qk(r, i, o);
  }
  var Kk =
    ((Hk.prototype.getAuthToken = function () {
      return _o(this, void 0, void 0, function () {
        var e;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              if (!this.auth) return [2, void 0];
              t.label = 1;
            case 1:
              return t.trys.push([1, 3, , 4]), [4, this.auth.getToken()];
            case 2:
              return (e = t.sent()) ? [2, e.accessToken] : [2, void 0];
            case 3:
              return t.sent(), [2, void 0];
            case 4:
              return [2];
          }
        });
      });
    }),
    (Hk.prototype.getInstanceIdToken = function () {
      return _o(this, void 0, void 0, function () {
        return wo(this, function (t) {
          if (
            !(
              this.messaging &&
              'Notification' in self &&
              'granted' === Notification.permission
            )
          )
            return [2, void 0];
          try {
            return [2, this.messaging.getToken()];
          } catch (t) {
            return [2, void 0];
          }
          return [2];
        });
      });
    }),
    (Hk.prototype.getContext = function () {
      return _o(this, void 0, void 0, function () {
        var e, n;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return [4, this.getAuthToken()];
            case 1:
              return (e = t.sent()), [4, this.getInstanceIdToken()];
            case 2:
              return (n = t.sent()), [2, { authToken: e, instanceIdToken: n }];
          }
        });
      });
    }),
    Hk);
  function Hk(t, e) {
    var n = this;
    (this.auth = null),
      (this.messaging = null),
      (this.auth = t.getImmediate({ optional: !0 })),
      (this.messaging = e.getImmediate({ optional: !0 })),
      this.auth ||
        t.get().then(
          function (t) {
            return (n.auth = t);
          },
          function () {}
        ),
      this.messaging ||
        e.get().then(
          function (t) {
            return (n.messaging = t);
          },
          function () {}
        );
  }
  function zk(t, e) {
    var n,
      r = {};
    for (n in t) t.hasOwnProperty(n) && (r[n] = e(t[n]));
    return r;
  }
  var Gk =
    ((Qk.prototype.encode = function (t) {
      var e = this;
      if (null == t) return null;
      if (
        (t instanceof Number && (t = t.valueOf()),
        'number' == typeof t && isFinite(t))
      )
        return t;
      if (!0 === t || !1 === t) return t;
      if ('[object String]' === Object.prototype.toString.call(t)) return t;
      if (Array.isArray(t))
        return t.map(function (t) {
          return e.encode(t);
        });
      if ('function' == typeof t || 'object' == typeof t)
        return zk(t, function (t) {
          return e.encode(t);
        });
      throw new Error('Data cannot be encoded in JSON: ' + t);
    }),
    (Qk.prototype.decode = function (t) {
      var e = this;
      if (null == t) return t;
      if (t['@type'])
        switch (t['@type']) {
          case 'type.googleapis.com/google.protobuf.Int64Value':
          case 'type.googleapis.com/google.protobuf.UInt64Value':
            var n = Number(t.value);
            if (isNaN(n))
              throw new Error('Data cannot be decoded from JSON: ' + t);
            return n;
          default:
            throw new Error('Data cannot be decoded from JSON: ' + t);
        }
      return Array.isArray(t)
        ? t.map(function (t) {
            return e.decode(t);
          })
        : 'function' == typeof t || 'object' == typeof t
        ? zk(t, function (t) {
            return e.decode(t);
          })
        : t;
    }),
    Qk);
  function Qk() {}
  var Yk =
    (Object.defineProperty(Xk.prototype, 'app', {
      get: function () {
        return this.app_;
      },
      enumerable: !1,
      configurable: !0
    }),
    (Xk.prototype._url = function (t) {
      var e = this.app_.options.projectId;
      return null === this.emulatorOrigin
        ? null !== this.customDomain
          ? this.customDomain + '/' + t
          : 'https://' + this.region + '-' + e + '.cloudfunctions.net/' + t
        : this.emulatorOrigin + '/' + e + '/' + this.region + '/' + t;
    }),
    (Xk.prototype.useEmulator = function (t, e) {
      this.emulatorOrigin = 'http://' + t + ':' + e;
    }),
    (Xk.prototype.useFunctionsEmulator = function (t) {
      this.emulatorOrigin = t;
    }),
    (Xk.prototype.httpsCallable = function (e, n) {
      var r = this;
      return function (t) {
        return r.call(e, t, n || {});
      };
    }),
    (Xk.prototype.postJSON = function (r, i, o) {
      return _o(this, void 0, void 0, function () {
        var e, n;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              (o['Content-Type'] = 'application/json'), (t.label = 1);
            case 1:
              return (
                t.trys.push([1, 3, , 4]),
                [
                  4,
                  this.fetchImpl(r, {
                    method: 'POST',
                    body: JSON.stringify(i),
                    headers: o
                  })
                ]
              );
            case 2:
              return (e = t.sent()), [3, 4];
            case 3:
              return t.sent(), [2, { status: 0, json: null }];
            case 4:
              (n = null), (t.label = 5);
            case 5:
              return t.trys.push([5, 7, , 8]), [4, e.json()];
            case 6:
              return (n = t.sent()), [3, 8];
            case 7:
              return t.sent(), [3, 8];
            case 8:
              return [2, { status: e.status, json: n }];
          }
        });
      });
    }),
    (Xk.prototype.call = function (c, h, l) {
      return _o(this, void 0, void 0, function () {
        var i, o, s, a, u;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return (
                (i = this._url(c)),
                (h = this.serializer.encode(h)),
                (o = { data: h }),
                (s = {}),
                [4, this.contextProvider.getContext()]
              );
            case 1:
              return (
                (a = t.sent()).authToken &&
                  (s.Authorization = 'Bearer ' + a.authToken),
                a.instanceIdToken &&
                  (s['Firebase-Instance-ID-Token'] = a.instanceIdToken),
                (u = l.timeout || 7e4),
                (n = u),
                (e = new Promise(function (t, e) {
                  r = setTimeout(function () {
                    e(new qk('deadline-exceeded', 'deadline-exceeded'));
                  }, n);
                })),
                (u = (a = { timer: r, promise: e }).timer),
                (a = a.promise),
                [
                  4,
                  Promise.race([
                    Jk(u, this.postJSON(i, o, s)),
                    a,
                    Jk(u, this.cancelAllRequests)
                  ])
                ]
              );
            case 2:
              if (!(a = t.sent()))
                throw new qk(
                  'cancelled',
                  'Firebase Functions instance was deleted.'
                );
              if ((u = Wk(a.status, a.json, this.serializer))) throw u;
              if (!a.json)
                throw new qk('internal', 'Response is not valid JSON object.');
              if (
                (void 0 === (u = a.json.data) && (u = a.json.result),
                void 0 === u)
              )
                throw new qk('internal', 'Response is missing data field.');
              return [2, { data: this.serializer.decode(u) }];
          }
          var n, r, e;
        });
      });
    }),
    Xk);
  function Xk(t, e, n, r, i) {
    var o = this;
    void 0 === r && (r = 'us-central1'),
      (this.app_ = t),
      (this.fetchImpl = i),
      (this.serializer = new Gk()),
      (this.emulatorOrigin = null),
      (this.INTERNAL = {
        delete: function () {
          return Promise.resolve(o.deleteService());
        }
      }),
      (this.contextProvider = new Kk(e, n)),
      (this.cancelAllRequests = new Promise(function (t) {
        o.deleteService = function () {
          return t();
        };
      }));
    try {
      var s = new URL(r);
      (this.customDomain = s.origin), (this.region = 'us-central1');
    } catch (t) {
      (this.customDomain = null), (this.region = r);
    }
  }
  function Jk(n, r) {
    return _o(this, void 0, void 0, function () {
      var e;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, r];
          case 1:
            return (e = t.sent()), clearTimeout(n), [2, e];
        }
      });
    });
  }
  var $k, Zk, tR;
  function eR(n) {
    return new Promise(function (t, e) {
      (n.onsuccess = function () {
        t(n.result);
      }),
        (n.onerror = function () {
          e(n.error);
        });
    });
  }
  function nR(n, r, i) {
    var o,
      t = new Promise(function (t, e) {
        eR((o = n[r].apply(n, i))).then(t, e);
      });
    return (t.request = o), t;
  }
  function rR(t, n, e) {
    e.forEach(function (e) {
      Object.defineProperty(t.prototype, e, {
        get: function () {
          return this[n][e];
        },
        set: function (t) {
          this[n][e] = t;
        }
      });
    });
  }
  function iR(e, n, r, t) {
    t.forEach(function (t) {
      t in r.prototype &&
        (e.prototype[t] = function () {
          return nR(this[n], t, arguments);
        });
    });
  }
  function oR(e, n, r, t) {
    t.forEach(function (t) {
      t in r.prototype &&
        (e.prototype[t] = function () {
          return this[n][t].apply(this[n], arguments);
        });
    });
  }
  function sR(t, r, e, n) {
    n.forEach(function (n) {
      n in e.prototype &&
        (t.prototype[n] = function () {
          return (
            (t = this[r]),
            (e = nR(t, n, arguments)).then(function (t) {
              if (t) return new uR(t, e.request);
            })
          );
          var t, e;
        });
    });
  }
  function aR(t) {
    this._index = t;
  }
  function uR(t, e) {
    (this._cursor = t), (this._request = e);
  }
  function cR(t) {
    this._store = t;
  }
  function hR(n) {
    (this._tx = n),
      (this.complete = new Promise(function (t, e) {
        (n.oncomplete = function () {
          t();
        }),
          (n.onerror = function () {
            e(n.error);
          }),
          (n.onabort = function () {
            e(n.error);
          });
      }));
  }
  function lR(t, e, n) {
    (this._db = t), (this.oldVersion = e), (this.transaction = new hR(n));
  }
  function fR(t) {
    this._db = t;
  }
  function pR(t, e, n) {
    var e = nR(indexedDB, 'open', [t, e]),
      r = e.request;
    return (
      r &&
        (r.onupgradeneeded = function (t) {
          n && n(new lR(r.result, t.oldVersion, r.transaction));
        }),
      e.then(function (t) {
        return new fR(t);
      })
    );
  }
  function dR(t) {
    return nR(indexedDB, 'deleteDatabase', [t]);
  }
  ($k = Jl),
    (Zk = fetch.bind(self)),
    (tR = { Functions: Yk }),
    $k.INTERNAL.registerComponent(
      new _s(
        'functions',
        function (t, e) {
          var n = t.getProvider('app').getImmediate(),
            r = t.getProvider('auth-internal'),
            t = t.getProvider('messaging');
          return new Yk(n, r, t, e, Zk);
        },
        'PUBLIC'
      )
        .setServiceProps(tR)
        .setMultipleInstances(!0)
    ),
    Jl.registerVersion('@firebase/functions', '0.6.1'),
    rR(aR, '_index', ['name', 'keyPath', 'multiEntry', 'unique']),
    iR(aR, '_index', IDBIndex, [
      'get',
      'getKey',
      'getAll',
      'getAllKeys',
      'count'
    ]),
    sR(aR, '_index', IDBIndex, ['openCursor', 'openKeyCursor']),
    rR(uR, '_cursor', ['direction', 'key', 'primaryKey', 'value']),
    iR(uR, '_cursor', IDBCursor, ['update', 'delete']),
    ['advance', 'continue', 'continuePrimaryKey'].forEach(function (n) {
      n in IDBCursor.prototype &&
        (uR.prototype[n] = function () {
          var e = this,
            t = arguments;
          return Promise.resolve().then(function () {
            return (
              e._cursor[n].apply(e._cursor, t),
              eR(e._request).then(function (t) {
                if (t) return new uR(t, e._request);
              })
            );
          });
        });
    }),
    (cR.prototype.createIndex = function () {
      return new aR(this._store.createIndex.apply(this._store, arguments));
    }),
    (cR.prototype.index = function () {
      return new aR(this._store.index.apply(this._store, arguments));
    }),
    rR(cR, '_store', ['name', 'keyPath', 'indexNames', 'autoIncrement']),
    iR(cR, '_store', IDBObjectStore, [
      'put',
      'add',
      'delete',
      'clear',
      'get',
      'getAll',
      'getKey',
      'getAllKeys',
      'count'
    ]),
    sR(cR, '_store', IDBObjectStore, ['openCursor', 'openKeyCursor']),
    oR(cR, '_store', IDBObjectStore, ['deleteIndex']),
    (hR.prototype.objectStore = function () {
      return new cR(this._tx.objectStore.apply(this._tx, arguments));
    }),
    rR(hR, '_tx', ['objectStoreNames', 'mode']),
    oR(hR, '_tx', IDBTransaction, ['abort']),
    (lR.prototype.createObjectStore = function () {
      return new cR(this._db.createObjectStore.apply(this._db, arguments));
    }),
    rR(lR, '_db', ['name', 'version', 'objectStoreNames']),
    oR(lR, '_db', IDBDatabase, ['deleteObjectStore', 'close']),
    (fR.prototype.transaction = function () {
      return new hR(this._db.transaction.apply(this._db, arguments));
    }),
    rR(fR, '_db', ['name', 'version', 'objectStoreNames']),
    oR(fR, '_db', IDBDatabase, ['close']),
    ['openCursor', 'openKeyCursor'].forEach(function (i) {
      [cR, aR].forEach(function (t) {
        i in t.prototype &&
          (t.prototype[i.replace('open', 'iterate')] = function () {
            var t = ((n = arguments), Array.prototype.slice.call(n)),
              e = t[t.length - 1],
              n = this._store || this._index,
              r = n[i].apply(n, t.slice(0, -1));
            r.onsuccess = function () {
              e(r.result);
            };
          });
      });
    }),
    [aR, cR].forEach(function (t) {
      t.prototype.getAll ||
        (t.prototype.getAll = function (t, n) {
          var r = this,
            i = [];
          return new Promise(function (e) {
            r.iterateCursor(t, function (t) {
              t
                ? (i.push(t.value),
                  void 0 === n || i.length != n ? t.continue() : e(i))
                : e(i);
            });
          });
        });
    });
  var vR = 1e4,
    yR = 'w:0.4.19',
    gR = 'FIS_v2',
    mR = 'https://firebaseinstallations.googleapis.com/v1',
    bR = 36e5,
    Gn =
      (((dt = {})['missing-app-config-values'] =
        'Missing App configuration value: "{$valueName}"'),
      (dt['not-registered'] = 'Firebase Installation is not registered.'),
      (dt['installation-not-found'] = 'Firebase Installation not found.'),
      (dt['request-failed'] =
        '{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),
      (dt['app-offline'] = 'Could not process request. Application offline.'),
      (dt['delete-pending-registration'] =
        "Can't delete installation while there is a pending registration request."),
      dt),
    _R = new Qo('installations', 'Installations', Gn);
  function wR(t) {
    return t instanceof zo && t.code.includes('request-failed');
  }
  function ER(t) {
    t = t.projectId;
    return mR + '/projects/' + t + '/installations';
  }
  function IR(t) {
    return {
      token: t.token,
      requestStatus: 2,
      expiresIn: ((t = t.expiresIn), Number(t.replace('s', '000'))),
      creationTime: Date.now()
    };
  }
  function TR(n, r) {
    return _o(this, void 0, void 0, function () {
      var e;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, r.json()];
          case 1:
            return (
              (e = t.sent()),
              (e = e.error),
              [
                2,
                _R.create('request-failed', {
                  requestName: n,
                  serverCode: e.code,
                  serverMessage: e.message,
                  serverStatus: e.status
                })
              ]
            );
        }
      });
    });
  }
  function SR(t) {
    t = t.apiKey;
    return new Headers({
      'Content-Type': 'application/json',
      Accept: 'application/json',
      'x-goog-api-key': t
    });
  }
  function CR(t, e) {
    (e = e.refreshToken), (t = SR(t));
    return t.append('Authorization', gR + ' ' + e), t;
  }
  function NR(n) {
    return _o(this, void 0, void 0, function () {
      var e;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, n()];
          case 1:
            return 500 <= (e = t.sent()).status && e.status < 600
              ? [2, n()]
              : [2, e];
        }
      });
    });
  }
  function AR(e) {
    return new Promise(function (t) {
      setTimeout(t, e);
    });
  }
  var kR = /^[cdef][\w-]{21}$/,
    RR = '';
  function OR() {
    try {
      var t = new Uint8Array(17);
      (self.crypto || self.msCrypto).getRandomValues(t),
        (t[0] = 112 + (t[0] % 16));
      t = (function (t) {
        return btoa(String.fromCharCode.apply(String, To(t)))
          .replace(/\+/g, '-')
          .replace(/\//g, '_');
      })(t).substr(0, 22);
      return kR.test(t) ? t : RR;
    } catch (t) {
      return RR;
    }
  }
  function PR(t) {
    return t.appName + '!' + t.appId;
  }
  var DR = new Map();
  function xR(t, e) {
    t = PR(t);
    LR(t, e),
      (function (t, e) {
        var n = FR();
        n && n.postMessage({ key: t, fid: e });
        UR();
      })(t, e);
  }
  function LR(t, e) {
    var n,
      r,
      i = DR.get(t);
    if (i)
      try {
        for (var o = Eo(i), s = o.next(); !s.done; s = o.next()) {
          (0, s.value)(e);
        }
      } catch (t) {
        n = { error: t };
      } finally {
        try {
          s && !s.done && (r = o.return) && r.call(o);
        } finally {
          if (n) throw n.error;
        }
      }
  }
  var MR = null;
  function FR() {
    return (
      !MR &&
        'BroadcastChannel' in self &&
        ((MR = new BroadcastChannel(
          '[Firebase] FID Change'
        )).onmessage = function (t) {
          LR(t.data.key, t.data.fid);
        }),
      MR
    );
  }
  function UR() {
    0 === DR.size && MR && (MR.close(), (MR = null));
  }
  var jR,
    VR = 'firebase-installations-database',
    qR = 1,
    BR = 'firebase-installations-store',
    WR = null;
  function KR() {
    return (WR =
      WR ||
      pR(VR, qR, function (t) {
        0 === t.oldVersion && t.createObjectStore(BR);
      }));
  }
  function HR(o, s) {
    return _o(this, void 0, void 0, function () {
      var e, n, r, i;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (e = PR(o)), [4, KR()];
          case 1:
            return (
              (r = t.sent()),
              (n = r.transaction(BR, 'readwrite')),
              [4, (r = n.objectStore(BR)).get(e)]
            );
          case 2:
            return (i = t.sent()), [4, r.put(s, e)];
          case 3:
            return t.sent(), [4, n.complete];
          case 4:
            return t.sent(), (i && i.fid === s.fid) || xR(o, s.fid), [2, s];
        }
      });
    });
  }
  function zR(r) {
    return _o(this, void 0, void 0, function () {
      var e, n;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (e = PR(r)), [4, KR()];
          case 1:
            return (
              (n = t.sent()),
              [
                4,
                (n = n.transaction(BR, 'readwrite')).objectStore(BR).delete(e)
              ]
            );
          case 2:
            return t.sent(), [4, n.complete];
          case 3:
            return t.sent(), [2];
        }
      });
    });
  }
  function GR(s, a) {
    return _o(this, void 0, void 0, function () {
      var e, n, r, i, o;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (e = PR(s)), [4, KR()];
          case 1:
            return (
              (r = t.sent()),
              (n = r.transaction(BR, 'readwrite')),
              [4, (r = n.objectStore(BR)).get(e)]
            );
          case 2:
            return (
              (i = t.sent()), void 0 !== (o = a(i)) ? [3, 4] : [4, r.delete(e)]
            );
          case 3:
            return t.sent(), [3, 6];
          case 4:
            return [4, r.put(o, e)];
          case 5:
            t.sent(), (t.label = 6);
          case 6:
            return [4, n.complete];
          case 7:
            return (
              t.sent(), !o || (i && i.fid === o.fid) || xR(s, o.fid), [2, o]
            );
        }
      });
    });
  }
  function QR(i) {
    return _o(this, void 0, void 0, function () {
      var e, n, r;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return [
              4,
              GR(i, function (t) {
                (t = XR(t || { fid: OR(), registrationStatus: 0 })),
                  (t = (function (t, e) {
                    {
                      if (0 !== e.registrationStatus)
                        return 1 === e.registrationStatus
                          ? {
                              installationEntry: e,
                              registrationPromise: (function (i) {
                                return _o(this, void 0, void 0, function () {
                                  var e, n, r;
                                  return wo(this, function (t) {
                                    switch (t.label) {
                                      case 0:
                                        return [4, YR(i)];
                                      case 1:
                                        (e = t.sent()), (t.label = 2);
                                      case 2:
                                        return 1 !== e.registrationStatus
                                          ? [3, 5]
                                          : [4, AR(100)];
                                      case 3:
                                        return t.sent(), [4, YR(i)];
                                      case 4:
                                        return (e = t.sent()), [3, 2];
                                      case 5:
                                        return 0 !== e.registrationStatus
                                          ? [3, 7]
                                          : [4, QR(i)];
                                      case 6:
                                        return (
                                          (r = t.sent()),
                                          (n = r.installationEntry),
                                          (r = r.registrationPromise)
                                            ? [2, r]
                                            : [2, n]
                                        );
                                      case 7:
                                        return [2, e];
                                    }
                                  });
                                });
                              })(t)
                            }
                          : { installationEntry: e };
                      if (!navigator.onLine) {
                        var n = Promise.reject(_R.create('app-offline'));
                        return { installationEntry: e, registrationPromise: n };
                      }
                      (e = {
                        fid: e.fid,
                        registrationStatus: 1,
                        registrationTime: Date.now()
                      }),
                        (t = (function (r, i) {
                          return _o(this, void 0, void 0, function () {
                            var e, n;
                            return wo(this, function (t) {
                              switch (t.label) {
                                case 0:
                                  return (
                                    t.trys.push([0, 2, , 7]),
                                    [
                                      4,
                                      (function (s, t) {
                                        var a = t.fid;
                                        return _o(
                                          this,
                                          void 0,
                                          void 0,
                                          function () {
                                            var e, n, r, i, o;
                                            return wo(this, function (t) {
                                              switch (t.label) {
                                                case 0:
                                                  return (
                                                    (e = ER(s)),
                                                    (n = SR(s)),
                                                    (o = {
                                                      fid: a,
                                                      authVersion: gR,
                                                      appId: s.appId,
                                                      sdkVersion: yR
                                                    }),
                                                    (r = {
                                                      method: 'POST',
                                                      headers: n,
                                                      body: JSON.stringify(o)
                                                    }),
                                                    [
                                                      4,
                                                      NR(function () {
                                                        return fetch(e, r);
                                                      })
                                                    ]
                                                  );
                                                case 1:
                                                  return (i = t.sent()).ok
                                                    ? [4, i.json()]
                                                    : [3, 3];
                                                case 2:
                                                  return (
                                                    (o = t.sent()),
                                                    [
                                                      2,
                                                      {
                                                        fid: o.fid || a,
                                                        registrationStatus: 2,
                                                        refreshToken:
                                                          o.refreshToken,
                                                        authToken: IR(
                                                          o.authToken
                                                        )
                                                      }
                                                    ]
                                                  );
                                                case 3:
                                                  return [
                                                    4,
                                                    TR('Create Installation', i)
                                                  ];
                                                case 4:
                                                  throw t.sent();
                                              }
                                            });
                                          }
                                        );
                                      })(r, i)
                                    ]
                                  );
                                case 1:
                                  return (e = t.sent()), [2, HR(r, e)];
                                case 2:
                                  return wR((n = t.sent())) &&
                                    409 === n.customData.serverCode
                                    ? [4, zR(r)]
                                    : [3, 4];
                                case 3:
                                  return t.sent(), [3, 6];
                                case 4:
                                  return [
                                    4,
                                    HR(r, { fid: i.fid, registrationStatus: 0 })
                                  ];
                                case 5:
                                  t.sent(), (t.label = 6);
                                case 6:
                                  throw n;
                                case 7:
                                  return [2];
                              }
                            });
                          });
                        })(t, e));
                      return { installationEntry: e, registrationPromise: t };
                    }
                  })(i, t));
                return (e = t.registrationPromise), t.installationEntry;
              })
            ];
          case 1:
            return (n = t.sent()).fid !== RR ? [3, 3] : ((r = {}), [4, e]);
          case 2:
            return [2, ((r.installationEntry = t.sent()), r)];
          case 3:
            return [2, { installationEntry: n, registrationPromise: e }];
        }
      });
    });
  }
  function YR(t) {
    return GR(t, function (t) {
      if (!t) throw _R.create('installation-not-found');
      return XR(t);
    });
  }
  function XR(t) {
    return 1 === (e = t).registrationStatus &&
      e.registrationTime + vR < Date.now()
      ? { fid: t.fid, registrationStatus: 0 }
      : t;
    var e;
  }
  function JR(t, s) {
    var a = t.appConfig,
      u = t.platformLoggerProvider;
    return _o(this, void 0, void 0, function () {
      var e, n, r, i, o;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (
              (e = (function (t, e) {
                e = e.fid;
                return ER(t) + '/' + e + '/authTokens:generate';
              })(a, s)),
              (n = CR(a, s)),
              (o = u.getImmediate({ optional: !0 })) &&
                n.append('x-firebase-client', o.getPlatformInfoString()),
              (o = { installation: { sdkVersion: yR } }),
              (r = { method: 'POST', headers: n, body: JSON.stringify(o) }),
              [
                4,
                NR(function () {
                  return fetch(e, r);
                })
              ]
            );
          case 1:
            return (i = t.sent()).ok ? [4, i.json()] : [3, 3];
          case 2:
            return (o = t.sent()), [2, IR(o)];
          case 3:
            return [4, TR('Generate Auth Token', i)];
          case 4:
            throw t.sent();
        }
      });
    });
  }
  function $R(i, o) {
    return (
      void 0 === o && (o = !1),
      _o(this, void 0, void 0, function () {
        var r, e, n;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return [
                4,
                GR(i.appConfig, function (t) {
                  if (!tO(t)) throw _R.create('not-registered');
                  var e,
                    n = t.authToken;
                  if (
                    o ||
                    2 !== (e = n).requestStatus ||
                    (function (t) {
                      var e = Date.now();
                      return (
                        e < t.creationTime ||
                        t.creationTime + t.expiresIn < e + bR
                      );
                    })(e)
                  ) {
                    if (1 === n.requestStatus)
                      return (
                        (r = (function (n, r) {
                          return _o(this, void 0, void 0, function () {
                            var e;
                            return wo(this, function (t) {
                              switch (t.label) {
                                case 0:
                                  return [4, ZR(n.appConfig)];
                                case 1:
                                  (e = t.sent()), (t.label = 2);
                                case 2:
                                  return 1 !== e.authToken.requestStatus
                                    ? [3, 5]
                                    : [4, AR(100)];
                                case 3:
                                  return t.sent(), [4, ZR(n.appConfig)];
                                case 4:
                                  return (e = t.sent()), [3, 2];
                                case 5:
                                  return 0 === (e = e.authToken).requestStatus
                                    ? [2, $R(n, r)]
                                    : [2, e];
                              }
                            });
                          });
                        })(i, o)),
                        t
                      );
                    if (!navigator.onLine) throw _R.create('app-offline');
                    n =
                      ((e = t),
                      (n = { requestStatus: 1, requestTime: Date.now() }),
                      bo(bo({}, e), { authToken: n }));
                    return (
                      (r = (function (i, o) {
                        return _o(this, void 0, void 0, function () {
                          var e, n, r;
                          return wo(this, function (t) {
                            switch (t.label) {
                              case 0:
                                return t.trys.push([0, 3, , 8]), [4, JR(i, o)];
                              case 1:
                                return (
                                  (e = t.sent()),
                                  (r = bo(bo({}, o), { authToken: e })),
                                  [4, HR(i.appConfig, r)]
                                );
                              case 2:
                                return t.sent(), [2, e];
                              case 3:
                                return !wR((n = t.sent())) ||
                                  (401 !== n.customData.serverCode &&
                                    404 !== n.customData.serverCode)
                                  ? [3, 5]
                                  : [4, zR(i.appConfig)];
                              case 4:
                                return t.sent(), [3, 7];
                              case 5:
                                return (
                                  (r = bo(bo({}, o), {
                                    authToken: { requestStatus: 0 }
                                  })),
                                  [4, HR(i.appConfig, r)]
                                );
                              case 6:
                                t.sent(), (t.label = 7);
                              case 7:
                                throw n;
                              case 8:
                                return [2];
                            }
                          });
                        });
                      })(i, n)),
                      n
                    );
                  }
                  return t;
                })
              ];
            case 1:
              return (e = t.sent()), r ? [4, r] : [3, 3];
            case 2:
              return (n = t.sent()), [3, 4];
            case 3:
              (n = e.authToken), (t.label = 4);
            case 4:
              return [2, n];
          }
        });
      })
    );
  }
  function ZR(t) {
    return GR(t, function (t) {
      if (!tO(t)) throw _R.create('not-registered');
      var e = t.authToken;
      return 1 === (e = e).requestStatus && e.requestTime + vR < Date.now()
        ? bo(bo({}, t), { authToken: { requestStatus: 0 } })
        : t;
    });
  }
  function tO(t) {
    return void 0 !== t && 2 === t.registrationStatus;
  }
  function eO(e, n) {
    return (
      void 0 === n && (n = !1),
      _o(this, void 0, void 0, function () {
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return [
                4,
                (function (n) {
                  return _o(this, void 0, void 0, function () {
                    var e;
                    return wo(this, function (t) {
                      switch (t.label) {
                        case 0:
                          return [4, QR(n)];
                        case 1:
                          return (e = t.sent().registrationPromise)
                            ? [4, e]
                            : [3, 3];
                        case 2:
                          t.sent(), (t.label = 3);
                        case 3:
                          return [2];
                      }
                    });
                  });
                })(e.appConfig)
              ];
            case 1:
              return t.sent(), [4, $R(e, n)];
            case 2:
              return [2, t.sent().token];
          }
        });
      })
    );
  }
  function nO(i, o) {
    return _o(this, void 0, void 0, function () {
      var e, n, r;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (
              (e = (function (t, e) {
                e = e.fid;
                return ER(t) + '/' + e;
              })(i, o)),
              (r = CR(i, o)),
              (n = { method: 'DELETE', headers: r }),
              [
                4,
                NR(function () {
                  return fetch(e, n);
                })
              ]
            );
          case 1:
            return (r = t.sent()).ok
              ? [3, 3]
              : [4, TR('Delete Installation', r)];
          case 2:
            throw t.sent();
          case 3:
            return [2];
        }
      });
    });
  }
  function rO(t, r) {
    var i = t.appConfig;
    return (
      (function (t, e) {
        FR();
        var n = PR(t);
        (t = DR.get(n)) || ((t = new Set()), DR.set(n, t)), t.add(e);
      })(i, r),
      function () {
        var t, e, n;
        (e = r),
          (n = PR((t = i))),
          (t = DR.get(n)) && (t.delete(e), 0 === t.size && DR.delete(n), UR());
      }
    );
  }
  function iO(t) {
    return _R.create('missing-app-config-values', { valueName: t });
  }
  (jR = Jl).INTERNAL.registerComponent(
    new _s(
      'installations',
      function (t) {
        var e = t.getProvider('app').getImmediate(),
          n = {
            appConfig: (function (t) {
              var e, n;
              if (!t || !t.options) throw iO('App Configuration');
              if (!t.name) throw iO('App Name');
              try {
                for (
                  var r = Eo(['projectId', 'apiKey', 'appId']), i = r.next();
                  !i.done;
                  i = r.next()
                ) {
                  var o = i.value;
                  if (!t.options[o]) throw iO(o);
                }
              } catch (t) {
                e = { error: t };
              } finally {
                try {
                  i && !i.done && (n = r.return) && n.call(r);
                } finally {
                  if (e) throw e.error;
                }
              }
              return {
                appName: t.name,
                projectId: t.options.projectId,
                apiKey: t.options.apiKey,
                appId: t.options.appId
              };
            })(e),
            platformLoggerProvider: t.getProvider('platform-logger')
          };
        return {
          app: e,
          getId: function () {
            return (function (r) {
              return _o(this, void 0, void 0, function () {
                var e, n;
                return wo(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return [4, QR(r.appConfig)];
                    case 1:
                      return (
                        (e = t.sent()),
                        (n = e.installationEntry),
                        (e.registrationPromise || $R(r)).catch(console.error),
                        [2, n.fid]
                      );
                  }
                });
              });
            })(n);
          },
          getToken: function (t) {
            return eO(n, t);
          },
          delete: function () {
            return (function (r) {
              return _o(this, void 0, void 0, function () {
                var e, n;
                return wo(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return [
                        4,
                        GR((e = r.appConfig), function (t) {
                          if (!t || 0 !== t.registrationStatus) return t;
                        })
                      ];
                    case 1:
                      if (!(n = t.sent())) return [3, 6];
                      if (1 !== n.registrationStatus) return [3, 2];
                      throw _R.create('delete-pending-registration');
                    case 2:
                      if (2 !== n.registrationStatus) return [3, 6];
                      if (navigator.onLine) return [3, 3];
                      throw _R.create('app-offline');
                    case 3:
                      return [4, nO(e, n)];
                    case 4:
                      return t.sent(), [4, zR(e)];
                    case 5:
                      t.sent(), (t.label = 6);
                    case 6:
                      return [2];
                  }
                });
              });
            })(n);
          },
          onIdChange: function (t) {
            return rO(n, t);
          }
        };
      },
      'PUBLIC'
    )
  ),
    jR.registerVersion('@firebase/installations', '0.4.19');
  var oO,
    Gn =
      (((dt = {})['missing-app-config-values'] =
        'Missing App configuration value: "{$valueName}"'),
      (dt['only-available-in-window'] =
        'This method is available in a Window context.'),
      (dt['only-available-in-sw'] =
        'This method is available in a service worker context.'),
      (dt['permission-default'] =
        'The notification permission was not granted and dismissed instead.'),
      (dt['permission-blocked'] =
        'The notification permission was not granted and blocked instead.'),
      (dt['unsupported-browser'] =
        "This browser doesn't support the API's required to use the firebase SDK."),
      (dt['failed-service-worker-registration'] =
        'We are unable to register the default service worker. {$browserErrorMessage}'),
      (dt['token-subscribe-failed'] =
        'A problem occurred while subscribing the user to FCM: {$errorInfo}'),
      (dt['token-subscribe-no-token'] =
        'FCM returned no token when subscribing the user to push.'),
      (dt['token-unsubscribe-failed'] =
        'A problem occurred while unsubscribing the user from FCM: {$errorInfo}'),
      (dt['token-update-failed'] =
        'A problem occurred while updating the user from FCM: {$errorInfo}'),
      (dt['token-update-no-token'] =
        'FCM returned no token when updating the user to push.'),
      (dt['use-sw-after-get-token'] =
        'The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.'),
      (dt['invalid-sw-registration'] =
        'The input to useServiceWorker() must be a ServiceWorkerRegistration.'),
      (dt['invalid-bg-handler'] =
        'The input to setBackgroundMessageHandler() must be a function.'),
      (dt['invalid-vapid-key'] = 'The public VAPID key must be a string.'),
      (dt['use-vapid-key-after-get-token'] =
        'The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.'),
      dt),
    sO = new Qo('messaging', 'Messaging', Gn),
    aO =
      'BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4',
    uO = 'https://fcmregistrations.googleapis.com/v1',
    cO = 'FCM_MSG',
    hO = 'google.c.a.c_id';
  function lO(t) {
    t = new Uint8Array(t);
    return btoa(String.fromCharCode.apply(String, To(t)))
      .replace(/=/g, '')
      .replace(/\+/g, '-')
      .replace(/\//g, '_');
  }
  ((dt = oO = oO || {}).PUSH_RECEIVED = 'push-received'),
    (dt.NOTIFICATION_CLICKED = 'notification-clicked');
  var fO = 'fcm_token_details_db',
    pO = 5,
    dO = 'fcm_token_object_Store';
  function vO(s) {
    return _o(this, void 0, void 0, function () {
      var e,
        o,
        n = this;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return 'databases' in indexedDB
              ? [4, indexedDB.databases()]
              : [3, 2];
          case 1:
            if (
              ((e = t.sent()),
              !e
                .map(function (t) {
                  return t.name;
                })
                .includes(fO))
            )
              return [2, null];
            t.label = 2;
          case 2:
            return (
              (o = null),
              [
                4,
                pR(fO, pO, function (i) {
                  return _o(n, void 0, void 0, function () {
                    var e, n, r;
                    return wo(this, function (t) {
                      switch (t.label) {
                        case 0:
                          return i.oldVersion < 2
                            ? [2]
                            : i.objectStoreNames.contains(dO)
                            ? [
                                4,
                                (r = i.transaction.objectStore(dO))
                                  .index('fcmSenderId')
                                  .get(s)
                              ]
                            : [2];
                        case 1:
                          return (e = t.sent()), [4, r.clear()];
                        case 2:
                          if ((t.sent(), !e)) return [2];
                          if (2 === i.oldVersion) {
                            if (!(n = e).auth || !n.p256dh || !n.endpoint)
                              return [2];
                            o = {
                              token: n.fcmToken,
                              createTime:
                                null !== (r = n.createTime) && void 0 !== r
                                  ? r
                                  : Date.now(),
                              subscriptionOptions: {
                                auth: n.auth,
                                p256dh: n.p256dh,
                                endpoint: n.endpoint,
                                swScope: n.swScope,
                                vapidKey:
                                  'string' == typeof n.vapidKey
                                    ? n.vapidKey
                                    : lO(n.vapidKey)
                              }
                            };
                          } else (3 === i.oldVersion || 4 === i.oldVersion) && (o = { token: (n = e).fcmToken, createTime: n.createTime, subscriptionOptions: { auth: lO(n.auth), p256dh: lO(n.p256dh), endpoint: n.endpoint, swScope: n.swScope, vapidKey: lO(n.vapidKey) } });
                          return [2];
                      }
                    });
                  });
                })
              ]
            );
          case 3:
            return t.sent().close(), [4, dR(fO)];
          case 4:
            return t.sent(), [4, dR('fcm_vapid_details_db')];
          case 5:
            return t.sent(), [4, dR('undefined')];
          case 6:
            return (
              t.sent(),
              [
                2,
                (function (t) {
                  if (!t || !t.subscriptionOptions) return !1;
                  var e = t.subscriptionOptions;
                  return (
                    'number' == typeof t.createTime &&
                    0 < t.createTime &&
                    'string' == typeof t.token &&
                    0 < t.token.length &&
                    'string' == typeof e.auth &&
                    0 < e.auth.length &&
                    'string' == typeof e.p256dh &&
                    0 < e.p256dh.length &&
                    'string' == typeof e.endpoint &&
                    0 < e.endpoint.length &&
                    'string' == typeof e.swScope &&
                    0 < e.swScope.length &&
                    'string' == typeof e.vapidKey &&
                    0 < e.vapidKey.length
                  );
                })(o)
                  ? o
                  : null
              ]
            );
        }
      });
    });
  }
  var yO = 'firebase-messaging-database',
    gO = 1,
    mO = 'firebase-messaging-store',
    bO = null;
  function _O() {
    return (bO =
      bO ||
      pR(yO, gO, function (t) {
        0 === t.oldVersion && t.createObjectStore(mO);
      }));
  }
  function wO(r) {
    return _o(this, void 0, void 0, function () {
      var e, n;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (e = IO(r)), [4, _O()];
          case 1:
            return [4, t.sent().transaction(mO).objectStore(mO).get(e)];
          case 2:
            return (e = t.sent()) ? [2, e] : [3, 3];
          case 3:
            return [4, vO(r.appConfig.senderId)];
          case 4:
            return (n = t.sent()) ? [4, EO(r, n)] : [3, 6];
          case 5:
            return t.sent(), [2, n];
          case 6:
            return [2];
        }
      });
    });
  }
  function EO(r, i) {
    return _o(this, void 0, void 0, function () {
      var e, n;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (e = IO(r)), [4, _O()];
          case 1:
            return (
              (n = t.sent()),
              [
                4,
                (n = n.transaction(mO, 'readwrite')).objectStore(mO).put(i, e)
              ]
            );
          case 2:
            return t.sent(), [4, n.complete];
          case 3:
            return t.sent(), [2, i];
        }
      });
    });
  }
  function IO(t) {
    return t.appConfig.appId;
  }
  function TO(r, i) {
    return _o(this, void 0, void 0, function () {
      var e, n;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, CO(r)];
          case 1:
            (e = t.sent()),
              (e = { method: 'DELETE', headers: e }),
              (t.label = 2);
          case 2:
            return (
              t.trys.push([2, 5, , 6]), [4, fetch(SO(r.appConfig) + '/' + i, e)]
            );
          case 3:
            return [4, t.sent().json()];
          case 4:
            if ((e = t.sent()).error)
              throw (
                ((n = e.error.message),
                sO.create('token-unsubscribe-failed', { errorInfo: n }))
              );
            return [3, 6];
          case 5:
            throw (
              ((n = t.sent()),
              sO.create('token-unsubscribe-failed', { errorInfo: n }))
            );
          case 6:
            return [2];
        }
      });
    });
  }
  function SO(t) {
    t = t.projectId;
    return uO + '/projects/' + t + '/registrations';
  }
  function CO(t) {
    var n = t.appConfig,
      r = t.installations;
    return _o(this, void 0, void 0, function () {
      var e;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, r.getToken()];
          case 1:
            return (
              (e = t.sent()),
              [
                2,
                new Headers({
                  'Content-Type': 'application/json',
                  Accept: 'application/json',
                  'x-goog-api-key': n.apiKey,
                  'x-goog-firebase-installations-auth': 'FIS ' + e
                })
              ]
            );
        }
      });
    });
  }
  function NO(t) {
    var e = t.p256dh,
      n = t.auth,
      r = t.endpoint,
      t = t.vapidKey,
      e = { web: { endpoint: r, auth: n, p256dh: e } };
    return t !== aO && (e.web.applicationPubKey = t), e;
  }
  function AO(c, h, l) {
    return _o(this, void 0, void 0, function () {
      var s, a, u;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            if ('granted' !== Notification.permission)
              throw sO.create('permission-blocked');
            return [
              4,
              (function (n, r) {
                return _o(this, void 0, void 0, function () {
                  var e;
                  return wo(this, function (t) {
                    switch (t.label) {
                      case 0:
                        return [4, n.pushManager.getSubscription()];
                      case 1:
                        return (e = t.sent())
                          ? [2, e]
                          : [
                              2,
                              n.pushManager.subscribe({
                                userVisibleOnly: !0,
                                applicationServerKey: (function (t) {
                                  for (
                                    var t = (
                                        t + '='.repeat((4 - (t.length % 4)) % 4)
                                      )
                                        .replace(/\-/g, '+')
                                        .replace(/_/g, '/'),
                                      e = atob(t),
                                      n = new Uint8Array(e.length),
                                      r = 0;
                                    r < e.length;
                                    ++r
                                  )
                                    n[r] = e.charCodeAt(r);
                                  return n;
                                })(r)
                              })
                            ];
                    }
                  });
                });
              })(h, l)
            ];
          case 1:
            return (u = t.sent()), [4, wO(c)];
          case 2:
            return (
              (s = t.sent()),
              (a = {
                vapidKey: l,
                swScope: h.scope,
                endpoint: u.endpoint,
                auth: lO(u.getKey('auth')),
                p256dh: lO(u.getKey('p256dh'))
              }),
              s ? [3, 3] : [2, RO(c, a)]
            );
          case 3:
            if (
              ((e = s.subscriptionOptions),
              (r = (n = a).vapidKey === e.vapidKey),
              (i = n.endpoint === e.endpoint),
              (o = n.auth === e.auth),
              (e = n.p256dh === e.p256dh),
              r && i && o && e)
            )
              return [3, 8];
            t.label = 4;
          case 4:
            return t.trys.push([4, 6, , 7]), [4, TO(c, s.token)];
          case 5:
            return t.sent(), [3, 7];
          case 6:
            return (u = t.sent()), console.warn(u), [3, 7];
          case 7:
            return [2, RO(c, a)];
          case 8:
            return Date.now() >= s.createTime + 6048e5
              ? [
                  2,
                  (function (i, o, s) {
                    return _o(this, void 0, void 0, function () {
                      var e, n, r;
                      return wo(this, function (t) {
                        switch (t.label) {
                          case 0:
                            return (
                              t.trys.push([0, 3, , 5]),
                              [
                                4,
                                (function (o, s) {
                                  return _o(this, void 0, void 0, function () {
                                    var e, n, r, i;
                                    return wo(this, function (t) {
                                      switch (t.label) {
                                        case 0:
                                          return [4, CO(o)];
                                        case 1:
                                          (e = t.sent()),
                                            (n = NO(s.subscriptionOptions)),
                                            (n = {
                                              method: 'PATCH',
                                              headers: e,
                                              body: JSON.stringify(n)
                                            }),
                                            (t.label = 2);
                                        case 2:
                                          return (
                                            t.trys.push([2, 5, , 6]),
                                            [
                                              4,
                                              fetch(
                                                SO(o.appConfig) + '/' + s.token,
                                                n
                                              )
                                            ]
                                          );
                                        case 3:
                                          return [4, t.sent().json()];
                                        case 4:
                                          return (r = t.sent()), [3, 6];
                                        case 5:
                                          throw (
                                            ((i = t.sent()),
                                            sO.create('token-update-failed', {
                                              errorInfo: i
                                            }))
                                          );
                                        case 6:
                                          if (r.error)
                                            throw (
                                              ((i = r.error.message),
                                              sO.create('token-update-failed', {
                                                errorInfo: i
                                              }))
                                            );
                                          if (!r.token)
                                            throw sO.create(
                                              'token-update-no-token'
                                            );
                                          return [2, r.token];
                                      }
                                    });
                                  });
                                })(o, i)
                              ]
                            );
                          case 1:
                            return (
                              (e = t.sent()),
                              (n = bo(bo({}, i), {
                                token: e,
                                createTime: Date.now()
                              })),
                              [4, EO(o, n)]
                            );
                          case 2:
                            return t.sent(), [2, e];
                          case 3:
                            return (r = t.sent()), [4, kO(o, s)];
                          case 4:
                            throw (t.sent(), r);
                          case 5:
                            return [2];
                        }
                      });
                    });
                  })(
                    {
                      token: s.token,
                      createTime: Date.now(),
                      subscriptionOptions: a
                    },
                    c,
                    h
                  )
                ]
              : [2, s.token];
          case 9:
            return [2];
        }
        var e, n, r, i, o;
      });
    });
  }
  function kO(n, r) {
    return _o(this, void 0, void 0, function () {
      var e;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return [4, wO(n)];
          case 1:
            return (e = t.sent()) ? [4, TO(n, e.token)] : [3, 4];
          case 2:
            return (
              t.sent(),
              [
                4,
                (function (r) {
                  return _o(this, void 0, void 0, function () {
                    var e, n;
                    return wo(this, function (t) {
                      switch (t.label) {
                        case 0:
                          return (e = IO(r)), [4, _O()];
                        case 1:
                          return (
                            (n = t.sent()),
                            [
                              4,
                              (n = n.transaction(mO, 'readwrite'))
                                .objectStore(mO)
                                .delete(e)
                            ]
                          );
                        case 2:
                          return t.sent(), [4, n.complete];
                        case 3:
                          return t.sent(), [2];
                      }
                    });
                  });
                })(n)
              ]
            );
          case 3:
            t.sent(), (t.label = 4);
          case 4:
            return [4, r.pushManager.getSubscription()];
          case 5:
            return (e = t.sent()) ? [2, e.unsubscribe()] : [2, !0];
        }
      });
    });
  }
  function RO(n, r) {
    return _o(this, void 0, void 0, function () {
      var e;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return [
              4,
              (function (o, s) {
                return _o(this, void 0, void 0, function () {
                  var e, n, r, i;
                  return wo(this, function (t) {
                    switch (t.label) {
                      case 0:
                        return [4, CO(o)];
                      case 1:
                        (e = t.sent()),
                          (n = NO(s)),
                          (n = {
                            method: 'POST',
                            headers: e,
                            body: JSON.stringify(n)
                          }),
                          (t.label = 2);
                      case 2:
                        return (
                          t.trys.push([2, 5, , 6]),
                          [4, fetch(SO(o.appConfig), n)]
                        );
                      case 3:
                        return [4, t.sent().json()];
                      case 4:
                        return (r = t.sent()), [3, 6];
                      case 5:
                        throw (
                          ((i = t.sent()),
                          sO.create('token-subscribe-failed', { errorInfo: i }))
                        );
                      case 6:
                        if (r.error)
                          throw (
                            ((i = r.error.message),
                            sO.create('token-subscribe-failed', {
                              errorInfo: i
                            }))
                          );
                        if (!r.token)
                          throw sO.create('token-subscribe-no-token');
                        return [2, r.token];
                    }
                  });
                });
              })(n, r)
            ];
          case 1:
            return (
              (e = t.sent()),
              (e = {
                token: e,
                createTime: Date.now(),
                subscriptionOptions: r
              }),
              [4, EO(n, e)]
            );
          case 2:
            return t.sent(), [2, e.token];
        }
      });
    });
  }
  function OO(t) {
    var e = { from: t.from, collapseKey: t.collapse_key };
    return (
      (function (t, e) {
        if (!e.notification) return;
        t.notification = {};
        var n = e.notification.title;
        n && (t.notification.title = n);
        n = e.notification.body;
        n && (t.notification.body = n);
        e = e.notification.image;
        e && (t.notification.image = e);
      })(e, t),
      (function (t, e) {
        if (!e.data) return;
        t.data = e.data;
      })(e, t),
      (function (t, e) {
        if (!e.fcmOptions) return;
        t.fcmOptions = {};
        var n = e.fcmOptions.link;
        n && (t.fcmOptions.link = n);
        e = e.fcmOptions.analytics_label;
        e && (t.fcmOptions.analyticsLabel = e);
      })(e, t),
      e
    );
  }
  function PO(t) {
    return 'object' == typeof t && t && hO in t;
  }
  function DO(e) {
    return new Promise(function (t) {
      setTimeout(t, e);
    });
  }
  var xO =
    (Object.defineProperty(LO.prototype, 'app', {
      get: function () {
        return this.firebaseDependencies.app;
      },
      enumerable: !1,
      configurable: !0
    }),
    (LO.prototype.setBackgroundMessageHandler = function (t) {
      if (((this.isOnBackgroundMessageUsed = !1), !t || 'function' != typeof t))
        throw sO.create('invalid-bg-handler');
      this.bgMessageHandler = t;
    }),
    (LO.prototype.onBackgroundMessage = function (t) {
      var e = this;
      return (
        (this.isOnBackgroundMessageUsed = !0),
        (this.bgMessageHandler = t),
        function () {
          e.bgMessageHandler = null;
        }
      );
    }),
    (LO.prototype.getToken = function () {
      var n;
      return _o(this, void 0, void 0, function () {
        var e;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return this.vapidKey
                ? [3, 2]
                : [4, wO(this.firebaseDependencies)];
            case 1:
              (e = t.sent()),
                (this.vapidKey =
                  null !==
                    (n =
                      null ===
                        (n = null == e ? void 0 : e.subscriptionOptions) ||
                      void 0 === n
                        ? void 0
                        : n.vapidKey) && void 0 !== n
                    ? n
                    : aO),
                (t.label = 2);
            case 2:
              return [
                2,
                AO(this.firebaseDependencies, self.registration, this.vapidKey)
              ];
          }
        });
      });
    }),
    (LO.prototype.deleteToken = function () {
      return kO(this.firebaseDependencies, self.registration);
    }),
    (LO.prototype.requestPermission = function () {
      throw sO.create('only-available-in-window');
    }),
    (LO.prototype.usePublicVapidKey = function (t) {
      if (null !== this.vapidKey)
        throw sO.create('use-vapid-key-after-get-token');
      if ('string' != typeof t || 0 === t.length)
        throw sO.create('invalid-vapid-key');
      this.vapidKey = t;
    }),
    (LO.prototype.useServiceWorker = function () {
      throw sO.create('only-available-in-window');
    }),
    (LO.prototype.onMessage = function () {
      throw sO.create('only-available-in-window');
    }),
    (LO.prototype.onTokenRefresh = function () {
      throw sO.create('only-available-in-window');
    }),
    (LO.prototype.onPush = function (a) {
      return _o(this, void 0, void 0, function () {
        var i, o, s;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return (s = (function (t) {
                var e = t.data;
                if (!e) return null;
                try {
                  return e.json();
                } catch (t) {
                  return null;
                }
              })(a))
                ? [4, MO()]
                : (console.debug(
                    'FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push.'
                  ),
                  [2]);
            case 1:
              return ((i = t.sent()),
              i.some(function (t) {
                return (
                  'visible' === t.visibilityState &&
                  !t.url.startsWith('chrome-extension://')
                );
              }))
                ? [
                    2,
                    (function (t, e) {
                      var n, r;
                      (e.isFirebaseMessaging = !0),
                        (e.messageType = oO.PUSH_RECEIVED);
                      try {
                        for (
                          var i = Eo(t), o = i.next();
                          !o.done;
                          o = i.next()
                        ) {
                          o.value.postMessage(e);
                        }
                      } catch (t) {
                        n = { error: t };
                      } finally {
                        try {
                          o && !o.done && (r = i.return) && r.call(i);
                        } finally {
                          if (n) throw n.error;
                        }
                      }
                    })(i, s)
                  ]
                : ((o = !1),
                  s.notification
                    ? [
                        4,
                        (function (t) {
                          var e = t.actions,
                            n = Notification.maxActions;
                          e &&
                            n &&
                            e.length > n &&
                            console.warn(
                              'This browser only supports ' +
                                n +
                                ' actions. The remaining actions will not be displayed.'
                            );
                          return self.registration.showNotification(
                            null !== (n = t.title) && void 0 !== n ? n : '',
                            t
                          );
                        })(
                          (((r = bo({}, (e = s).notification)).data =
                            (((n = {})[cO] = e), n)),
                          r)
                        )
                      ]
                    : [3, 3]);
            case 2:
              t.sent(), (o = !0), (t.label = 3);
            case 3:
              return !0 === o && !1 === this.isOnBackgroundMessageUsed
                ? [2]
                : (this.bgMessageHandler &&
                    ((s = OO(s)),
                    'function' == typeof this.bgMessageHandler
                      ? this.bgMessageHandler(s)
                      : this.bgMessageHandler.next(s)),
                  [4, DO(1e3)]);
            case 4:
              return t.sent(), [2];
          }
          var e, n, r;
        });
      });
    }),
    (LO.prototype.onSubChange = function (n) {
      var r;
      return _o(this, void 0, void 0, function () {
        var e;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return n.newSubscription
                ? [3, 2]
                : [4, kO(this.firebaseDependencies, self.registration)];
            case 1:
              return t.sent(), [2];
            case 2:
              return [4, wO(this.firebaseDependencies)];
            case 3:
              return (
                (e = t.sent()),
                [4, kO(this.firebaseDependencies, self.registration)]
              );
            case 4:
              return (
                t.sent(),
                [
                  4,
                  AO(
                    this.firebaseDependencies,
                    self.registration,
                    null !==
                      (r =
                        null ===
                          (r = null == e ? void 0 : e.subscriptionOptions) ||
                        void 0 === r
                          ? void 0
                          : r.vapidKey) && void 0 !== r
                      ? r
                      : aO
                  )
                ]
              );
            case 5:
              return t.sent(), [2];
          }
        });
      });
    }),
    (LO.prototype.onNotificationClick = function (s) {
      var a;
      return _o(this, void 0, void 0, function () {
        var e, n, r, i, o;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return (e =
                null ===
                  (a =
                    null === (a = s.notification) || void 0 === a
                      ? void 0
                      : a.data) || void 0 === a
                  ? void 0
                  : a[cO])
                ? s.action
                  ? [2]
                  : (s.stopImmediatePropagation(),
                    s.notification.close(),
                    (n = (function (t) {
                      var e,
                        n =
                          null !==
                            (e =
                              null === (e = t.fcmOptions) || void 0 === e
                                ? void 0
                                : e.link) && void 0 !== e
                            ? e
                            : null === (n = t.notification) || void 0 === n
                            ? void 0
                            : n.click_action;
                      if (n) return n;
                      return PO(t.data) ? self.location.origin : null;
                    })(e))
                      ? ((r = new URL(n, self.location.href)),
                        (i = new URL(self.location.origin)),
                        r.host !== i.host
                          ? [2]
                          : [
                              4,
                              (function (u) {
                                return _o(this, void 0, void 0, function () {
                                  var e, n, r, i, o, s, a;
                                  return wo(this, function (t) {
                                    switch (t.label) {
                                      case 0:
                                        return [4, MO()];
                                      case 1:
                                        e = t.sent();
                                        try {
                                          for (
                                            n = Eo(e), r = n.next();
                                            !r.done;
                                            r = n.next()
                                          )
                                            if (
                                              ((i = r.value),
                                              (o = new URL(
                                                i.url,
                                                self.location.href
                                              )),
                                              u.host === o.host)
                                            )
                                              return [2, i];
                                        } catch (t) {
                                          s = { error: t };
                                        } finally {
                                          try {
                                            r &&
                                              !r.done &&
                                              (a = n.return) &&
                                              a.call(n);
                                          } finally {
                                            if (s) throw s.error;
                                          }
                                        }
                                        return [2, null];
                                    }
                                  });
                                });
                              })(r)
                            ])
                      : [2])
                : [2];
            case 1:
              return (o = t.sent()) ? [3, 4] : [4, self.clients.openWindow(n)];
            case 2:
              return (o = t.sent()), [4, DO(3e3)];
            case 3:
              return t.sent(), [3, 6];
            case 4:
              return [4, o.focus()];
            case 5:
              (o = t.sent()), (t.label = 6);
            case 6:
              return o
                ? ((e.messageType = oO.NOTIFICATION_CLICKED),
                  (e.isFirebaseMessaging = !0),
                  [2, o.postMessage(e)])
                : [2];
          }
        });
      });
    }),
    LO);
  function LO(t) {
    var e = this;
    (this.firebaseDependencies = t),
      (this.isOnBackgroundMessageUsed = null),
      (this.vapidKey = null),
      (this.bgMessageHandler = null),
      self.addEventListener('push', function (t) {
        t.waitUntil(e.onPush(t));
      }),
      self.addEventListener('pushsubscriptionchange', function (t) {
        t.waitUntil(e.onSubChange(t));
      }),
      self.addEventListener('notificationclick', function (t) {
        t.waitUntil(e.onNotificationClick(t));
      });
  }
  function MO() {
    return self.clients.matchAll({ type: 'window', includeUncontrolled: !0 });
  }
  var FO =
    (Object.defineProperty(UO.prototype, 'app', {
      get: function () {
        return this.firebaseDependencies.app;
      },
      enumerable: !1,
      configurable: !0
    }),
    (UO.prototype.messageEventListener = function (i) {
      return _o(this, void 0, void 0, function () {
        var n, r;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return (n = i.data).isFirebaseMessaging
                ? (this.onMessageCallback &&
                    n.messageType === oO.PUSH_RECEIVED &&
                    ('function' == typeof this.onMessageCallback
                      ? this.onMessageCallback(
                          (delete (e = Object.assign({}, n)).messageType,
                          delete e.isFirebaseMessaging,
                          e)
                        )
                      : this.onMessageCallback.next(Object.assign({}, n))),
                  PO((r = n.data)) && '1' === r['google.c.a.e']
                    ? [4, this.logEvent(n.messageType, r)]
                    : [3, 2])
                : [2];
            case 1:
              t.sent(), (t.label = 2);
            case 2:
              return [2];
          }
          var e;
        });
      });
    }),
    (UO.prototype.getVapidKey = function () {
      return this.vapidKey;
    }),
    (UO.prototype.getSwReg = function () {
      return this.swRegistration;
    }),
    (UO.prototype.getToken = function (e) {
      return _o(this, void 0, void 0, function () {
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return 'default' !== Notification.permission
                ? [3, 2]
                : [4, Notification.requestPermission()];
            case 1:
              t.sent(), (t.label = 2);
            case 2:
              if ('granted' !== Notification.permission)
                throw sO.create('permission-blocked');
              return [4, this.updateVapidKey(null == e ? void 0 : e.vapidKey)];
            case 3:
              return (
                t.sent(),
                [
                  4,
                  this.updateSwReg(
                    null == e ? void 0 : e.serviceWorkerRegistration
                  )
                ]
              );
            case 4:
              return (
                t.sent(),
                [
                  2,
                  AO(
                    this.firebaseDependencies,
                    this.swRegistration,
                    this.vapidKey
                  )
                ]
              );
          }
        });
      });
    }),
    (UO.prototype.updateVapidKey = function (e) {
      return _o(this, void 0, void 0, function () {
        return wo(this, function (t) {
          return (
            e ? (this.vapidKey = e) : this.vapidKey || (this.vapidKey = aO), [2]
          );
        });
      });
    }),
    (UO.prototype.updateSwReg = function (e) {
      return _o(this, void 0, void 0, function () {
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return e || this.swRegistration
                ? [3, 2]
                : [4, this.registerDefaultSw()];
            case 1:
              t.sent(), (t.label = 2);
            case 2:
              if (!e && this.swRegistration) return [2];
              if (!(e instanceof ServiceWorkerRegistration))
                throw sO.create('invalid-sw-registration');
              return (this.swRegistration = e), [2];
          }
        });
      });
    }),
    (UO.prototype.registerDefaultSw = function () {
      return _o(this, void 0, void 0, function () {
        var e;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return (
                t.trys.push([0, 2, , 3]),
                (e = this),
                [
                  4,
                  navigator.serviceWorker.register(
                    '/firebase-messaging-sw.js',
                    { scope: '/firebase-cloud-messaging-push-scope' }
                  )
                ]
              );
            case 1:
              return (
                (e.swRegistration = t.sent()),
                this.swRegistration.update().catch(function () {}),
                [3, 3]
              );
            case 2:
              throw (
                ((e = t.sent()),
                sO.create('failed-service-worker-registration', {
                  browserErrorMessage: e.message
                }))
              );
            case 3:
              return [2];
          }
        });
      });
    }),
    (UO.prototype.deleteToken = function () {
      return _o(this, void 0, void 0, function () {
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return this.swRegistration
                ? [3, 2]
                : [4, this.registerDefaultSw()];
            case 1:
              t.sent(), (t.label = 2);
            case 2:
              return [2, kO(this.firebaseDependencies, this.swRegistration)];
          }
        });
      });
    }),
    (UO.prototype.requestPermission = function () {
      return _o(this, void 0, void 0, function () {
        var e;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return 'granted' === Notification.permission
                ? [2]
                : [4, Notification.requestPermission()];
            case 1:
              if ('granted' === (e = t.sent())) return [2];
              throw 'denied' === e
                ? sO.create('permission-blocked')
                : sO.create('permission-default');
          }
        });
      });
    }),
    (UO.prototype.usePublicVapidKey = function (t) {
      if (null !== this.vapidKey)
        throw sO.create('use-vapid-key-after-get-token');
      if ('string' != typeof t || 0 === t.length)
        throw sO.create('invalid-vapid-key');
      this.vapidKey = t;
    }),
    (UO.prototype.useServiceWorker = function (t) {
      if (!(t instanceof ServiceWorkerRegistration))
        throw sO.create('invalid-sw-registration');
      if (this.swRegistration) throw sO.create('use-sw-after-get-token');
      this.swRegistration = t;
    }),
    (UO.prototype.onMessage = function (t) {
      var e = this;
      return (
        (this.onMessageCallback = t),
        function () {
          e.onMessageCallback = null;
        }
      );
    }),
    (UO.prototype.setBackgroundMessageHandler = function () {
      throw sO.create('only-available-in-sw');
    }),
    (UO.prototype.onBackgroundMessage = function () {
      throw sO.create('only-available-in-sw');
    }),
    (UO.prototype.onTokenRefresh = function () {
      return function () {};
    }),
    (UO.prototype.logEvent = function (n, r) {
      return _o(this, void 0, void 0, function () {
        var e;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return (
                (e = (function (t) {
                  switch (t) {
                    case oO.NOTIFICATION_CLICKED:
                      return 'notification_open';
                    case oO.PUSH_RECEIVED:
                      return 'notification_foreground';
                    default:
                      throw new Error();
                  }
                })(n)),
                [4, this.firebaseDependencies.analyticsProvider.get()]
              );
            case 1:
              return (
                t.sent().logEvent(e, {
                  message_id: r[hO],
                  message_name: r['google.c.a.c_l'],
                  message_time: r['google.c.a.ts'],
                  message_device_time: Math.floor(Date.now() / 1e3)
                }),
                [2]
              );
          }
        });
      });
    }),
    UO);
  function UO(t) {
    var e = this;
    (this.firebaseDependencies = t),
      (this.vapidKey = null),
      (this.onMessageCallback = null),
      navigator.serviceWorker.addEventListener('message', function (t) {
        return e.messageEventListener(t);
      });
  }
  function jO(t) {
    return sO.create('missing-app-config-values', { valueName: t });
  }
  Gn = { isSupported: VO };
  function VO() {
    return self && 'ServiceWorkerGlobalScope' in self
      ? 'indexedDB' in self &&
          null !== indexedDB &&
          'PushManager' in self &&
          'Notification' in self &&
          ServiceWorkerRegistration.prototype.hasOwnProperty(
            'showNotification'
          ) &&
          PushSubscription.prototype.hasOwnProperty('getKey')
      : 'indexedDB' in window &&
          null !== indexedDB &&
          navigator.cookieEnabled &&
          'serviceWorker' in navigator &&
          'PushManager' in window &&
          'Notification' in window &&
          'fetch' in window &&
          ServiceWorkerRegistration.prototype.hasOwnProperty(
            'showNotification'
          ) &&
          PushSubscription.prototype.hasOwnProperty('getKey');
  }
  Jl.INTERNAL.registerComponent(
    new _s(
      'messaging',
      function (t) {
        var e = t.getProvider('app').getImmediate(),
          t = {
            app: e,
            appConfig: (function (t) {
              var e, n;
              if (!t || !t.options) throw jO('App Configuration Object');
              if (!t.name) throw jO('App Name');
              var r = t.options;
              try {
                for (
                  var i = Eo([
                      'projectId',
                      'apiKey',
                      'appId',
                      'messagingSenderId'
                    ]),
                    o = i.next();
                  !o.done;
                  o = i.next()
                ) {
                  var s = o.value;
                  if (!r[s]) throw jO(s);
                }
              } catch (t) {
                e = { error: t };
              } finally {
                try {
                  o && !o.done && (n = i.return) && n.call(i);
                } finally {
                  if (e) throw e.error;
                }
              }
              return {
                appName: t.name,
                projectId: r.projectId,
                apiKey: r.apiKey,
                appId: r.appId,
                senderId: r.messagingSenderId
              };
            })(e),
            installations: t.getProvider('installations').getImmediate(),
            analyticsProvider: t.getProvider('analytics-internal')
          };
        if (!VO()) throw sO.create('unsupported-browser');
        return new (self && 'ServiceWorkerGlobalScope' in self ? xO : FO)(t);
      },
      'PUBLIC'
    ).setServiceProps(Gn)
  );
  var qO,
    BO = 'firebasestorage.googleapis.com',
    WO = 'storageBucket',
    KO =
      (mo(HO, (qO = zo)),
      (HO.prototype.codeEquals = function (t) {
        return GO(t) === this.code;
      }),
      Object.defineProperty(HO.prototype, 'message', {
        get: function () {
          return this.customData.serverResponse
            ? this.message + '\n' + this.customData.serverResponse
            : this.message;
        },
        enumerable: !1,
        configurable: !0
      }),
      Object.defineProperty(HO.prototype, 'serverResponse', {
        get: function () {
          return this.customData.serverResponse;
        },
        set: function (t) {
          this.customData.serverResponse = t;
        },
        enumerable: !1,
        configurable: !0
      }),
      HO);
  function HO(t, e) {
    t =
      qO.call(this, GO(t), 'Firebase Storage: ' + e + ' (' + GO(t) + ')') ||
      this;
    return (
      (t.customData = { serverResponse: null }),
      Object.setPrototypeOf(t, HO.prototype),
      t
    );
  }
  var zO = {
    UNKNOWN: 'unknown',
    OBJECT_NOT_FOUND: 'object-not-found',
    BUCKET_NOT_FOUND: 'bucket-not-found',
    PROJECT_NOT_FOUND: 'project-not-found',
    QUOTA_EXCEEDED: 'quota-exceeded',
    UNAUTHENTICATED: 'unauthenticated',
    UNAUTHORIZED: 'unauthorized',
    RETRY_LIMIT_EXCEEDED: 'retry-limit-exceeded',
    INVALID_CHECKSUM: 'invalid-checksum',
    CANCELED: 'canceled',
    INVALID_EVENT_NAME: 'invalid-event-name',
    INVALID_URL: 'invalid-url',
    INVALID_DEFAULT_BUCKET: 'invalid-default-bucket',
    NO_DEFAULT_BUCKET: 'no-default-bucket',
    CANNOT_SLICE_BLOB: 'cannot-slice-blob',
    SERVER_FILE_WRONG_SIZE: 'server-file-wrong-size',
    NO_DOWNLOAD_URL: 'no-download-url',
    INVALID_ARGUMENT: 'invalid-argument',
    INVALID_ARGUMENT_COUNT: 'invalid-argument-count',
    APP_DELETED: 'app-deleted',
    INVALID_ROOT_OPERATION: 'invalid-root-operation',
    INVALID_FORMAT: 'invalid-format',
    INTERNAL_ERROR: 'internal-error',
    UNSUPPORTED_ENVIRONMENT: 'unsupported-environment'
  };
  function GO(t) {
    return 'storage/' + t;
  }
  function QO() {
    return new KO(
      zO.UNKNOWN,
      'An unknown error occurred, please check the error payload for server response.'
    );
  }
  function YO() {
    return new KO(zO.CANCELED, 'User canceled the upload/download.');
  }
  function XO() {
    return new KO(
      zO.CANNOT_SLICE_BLOB,
      'Cannot slice blob for upload. Please retry the upload.'
    );
  }
  function JO(t) {
    return new KO(zO.INVALID_ARGUMENT, t);
  }
  function $O() {
    return new KO(zO.APP_DELETED, 'The Firebase app was deleted.');
  }
  function ZO(t) {
    return new KO(
      zO.INVALID_ROOT_OPERATION,
      "The operation '" +
        t +
        "' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png')."
    );
  }
  function tP(t, e) {
    return new KO(
      zO.INVALID_FORMAT,
      "String does not match format '" + t + "': " + e
    );
  }
  function eP(t) {
    throw new KO(zO.INTERNAL_ERROR, 'Internal error: ' + t);
  }
  var nP = {
      RAW: 'raw',
      BASE64: 'base64',
      BASE64URL: 'base64url',
      DATA_URL: 'data_url'
    },
    rP = function (t, e) {
      (this.data = t), (this.contentType = e || null);
    };
  function iP(t, e) {
    switch (t) {
      case nP.RAW:
        return new rP(oP(e));
      case nP.BASE64:
      case nP.BASE64URL:
        return new rP(sP(t, e));
      case nP.DATA_URL:
        return new rP(
          (function (t) {
            t = new aP(t);
            return t.base64
              ? sP(nP.BASE64, t.rest)
              : (function (t) {
                  var e;
                  try {
                    e = decodeURIComponent(t);
                  } catch (t) {
                    throw tP(nP.DATA_URL, 'Malformed data URL.');
                  }
                  return oP(e);
                })(t.rest);
          })(e),
          new aP(e).contentType
        );
    }
    throw QO();
  }
  function oP(t) {
    for (var e = [], n = 0; n < t.length; n++) {
      var r = t.charCodeAt(n);
      r <= 127
        ? e.push(r)
        : r <= 2047
        ? e.push(192 | (r >> 6), 128 | (63 & r))
        : 55296 == (64512 & r)
        ? n < t.length - 1 && 56320 == (64512 & t.charCodeAt(n + 1))
          ? ((r = 65536 | ((1023 & r) << 10) | (1023 & t.charCodeAt(++n))),
            e.push(
              240 | (r >> 18),
              128 | ((r >> 12) & 63),
              128 | ((r >> 6) & 63),
              128 | (63 & r)
            ))
          : e.push(239, 191, 189)
        : 56320 == (64512 & r)
        ? e.push(239, 191, 189)
        : e.push(224 | (r >> 12), 128 | ((r >> 6) & 63), 128 | (63 & r));
    }
    return new Uint8Array(e);
  }
  function sP(e, t) {
    switch (e) {
      case nP.BASE64:
        var n = -1 !== t.indexOf('-'),
          r = -1 !== t.indexOf('_');
        if (n || r)
          throw tP(
            e,
            "Invalid character '" +
              (n ? '-' : '_') +
              "' found: is it base64url encoded?"
          );
        break;
      case nP.BASE64URL:
        (r = -1 !== t.indexOf('+')), (n = -1 !== t.indexOf('/'));
        if (r || n)
          throw tP(
            e,
            "Invalid character '" +
              (r ? '+' : '/') +
              "' found: is it base64 encoded?"
          );
        t = t.replace(/-/g, '+').replace(/_/g, '/');
    }
    var i;
    try {
      i = atob(t);
    } catch (t) {
      throw tP(e, 'Invalid character found');
    }
    for (var o = new Uint8Array(i.length), s = 0; s < i.length; s++)
      o[s] = i.charCodeAt(s);
    return o;
  }
  var aP = function (t) {
    var e;
    if (
      ((this.base64 = !1),
      (this.contentType = null) === (e = t.match(/^data:([^,]+)?,/)))
    )
      throw tP(
        nP.DATA_URL,
        "Must be formatted 'data:[<mediatype>][;base64],<data>"
      );
    var n,
      r = e[1] || null;
    null != r &&
      ((this.base64 =
        ((n = ';base64'),
        (e = r).length >= n.length && e.substring(e.length - n.length) === n)),
      (this.contentType = this.base64
        ? r.substring(0, r.length - ';base64'.length)
        : r)),
      (this.rest = t.substring(t.indexOf(',') + 1));
  };
  var uP,
    cP = { STATE_CHANGED: 'state_changed' },
    hP = 'running',
    lP = 'pausing',
    fP = 'paused',
    pP = 'success',
    dP = 'canceling',
    vP = 'canceled',
    yP = 'error',
    gP = {
      RUNNING: 'running',
      PAUSED: 'paused',
      SUCCESS: 'success',
      CANCELED: 'canceled',
      ERROR: 'error'
    };
  function mP(t) {
    switch (t) {
      case hP:
      case lP:
      case dP:
        return gP.RUNNING;
      case fP:
        return gP.PAUSED;
      case pP:
        return gP.SUCCESS;
      case vP:
        return gP.CANCELED;
      case yP:
      default:
        return gP.ERROR;
    }
  }
  ((dt = uP = uP || {})[(dt.NO_ERROR = 0)] = 'NO_ERROR'),
    (dt[(dt.NETWORK_ERROR = 1)] = 'NETWORK_ERROR'),
    (dt[(dt.ABORT = 2)] = 'ABORT');
  var bP =
    ((_P.prototype.send = function (t, e, n, r) {
      if (this.sent_) throw eP('cannot .send() more than once');
      if (((this.sent_ = !0), this.xhr_.open(e, t, !0), void 0 !== r))
        for (var i in r)
          r.hasOwnProperty(i) && this.xhr_.setRequestHeader(i, r[i].toString());
      return (
        void 0 !== n ? this.xhr_.send(n) : this.xhr_.send(), this.sendPromise_
      );
    }),
    (_P.prototype.getErrorCode = function () {
      if (!this.sent_) throw eP('cannot .getErrorCode() before sending');
      return this.errorCode_;
    }),
    (_P.prototype.getStatus = function () {
      if (!this.sent_) throw eP('cannot .getStatus() before sending');
      try {
        return this.xhr_.status;
      } catch (t) {
        return -1;
      }
    }),
    (_P.prototype.getResponseText = function () {
      if (!this.sent_) throw eP('cannot .getResponseText() before sending');
      return this.xhr_.responseText;
    }),
    (_P.prototype.abort = function () {
      this.xhr_.abort();
    }),
    (_P.prototype.getResponseHeader = function (t) {
      return this.xhr_.getResponseHeader(t);
    }),
    (_P.prototype.addUploadProgressListener = function (t) {
      null != this.xhr_.upload &&
        this.xhr_.upload.addEventListener('progress', t);
    }),
    (_P.prototype.removeUploadProgressListener = function (t) {
      null != this.xhr_.upload &&
        this.xhr_.upload.removeEventListener('progress', t);
    }),
    _P);
  function _P() {
    var e = this;
    (this.sent_ = !1),
      (this.xhr_ = new XMLHttpRequest()),
      (this.errorCode_ = uP.NO_ERROR),
      (this.sendPromise_ = new Promise(function (t) {
        e.xhr_.addEventListener('abort', function () {
          (e.errorCode_ = uP.ABORT), t(e);
        }),
          e.xhr_.addEventListener('error', function () {
            (e.errorCode_ = uP.NETWORK_ERROR), t(e);
          }),
          e.xhr_.addEventListener('load', function () {
            t(e);
          });
      }));
  }
  var wP =
    ((EP.prototype.createXhrIo = function () {
      return new bP();
    }),
    EP);
  function EP() {}
  function IP(t) {
    return 'string' == typeof t || t instanceof String;
  }
  function TP(t) {
    return SP() && t instanceof Blob;
  }
  function SP() {
    return 'undefined' != typeof Blob;
  }
  function CP(t, e, n, r) {
    if (r < e)
      throw new KO(
        zO.INVALID_ARGUMENT,
        "Invalid value for '" + t + "'. Expected " + e + ' or greater.'
      );
    if (n < r)
      throw new KO(
        zO.INVALID_ARGUMENT,
        "Invalid value for '" + t + "'. Expected " + n + ' or less.'
      );
  }
  function NP() {
    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
    var n =
      'undefined' != typeof BlobBuilder
        ? BlobBuilder
        : 'undefined' != typeof WebKitBlobBuilder
        ? WebKitBlobBuilder
        : void 0;
    if (void 0 !== n) {
      for (var r = new n(), i = 0; i < t.length; i++) r.append(t[i]);
      return r.getBlob();
    }
    if (SP()) return new Blob(t);
    throw new KO(
      zO.UNSUPPORTED_ENVIRONMENT,
      "This browser doesn't seem to support creating Blobs"
    );
  }
  var AP =
    ((kP.prototype.size = function () {
      return this.size_;
    }),
    (kP.prototype.type = function () {
      return this.type_;
    }),
    (kP.prototype.slice = function (t, e) {
      if (TP(this.data_)) {
        var n = this.data_,
          r =
            ((i = t),
            (r = e),
            (n = n).webkitSlice
              ? n.webkitSlice(i, r)
              : n.mozSlice
              ? n.mozSlice(i, r)
              : n.slice
              ? n.slice(i, r)
              : null);
        return null === r ? null : new kP(r);
      }
      var i, r;
      return new kP(new Uint8Array(this.data_.buffer, t, e - t), !0);
    }),
    (kP.getBlob = function () {
      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
      if (SP()) {
        var n = t.map(function (t) {
          return t instanceof kP ? t.data_ : t;
        });
        return new kP(NP.apply(null, n));
      }
      var n = t.map(function (t) {
          return IP(t) ? iP(nP.RAW, t).data : t.data_;
        }),
        r = 0;
      n.forEach(function (t) {
        r += t.byteLength;
      });
      var i = new Uint8Array(r),
        o = 0;
      return (
        n.forEach(function (t) {
          for (var e = 0; e < t.length; e++) i[o++] = t[e];
        }),
        new kP(i, !0)
      );
    }),
    (kP.prototype.uploadData = function () {
      return this.data_;
    }),
    kP);
  function kP(t, e) {
    var n = 0,
      r = '';
    TP(t)
      ? ((n = (this.data_ = t).size), (r = t.type))
      : t instanceof ArrayBuffer
      ? (e
          ? (this.data_ = new Uint8Array(t))
          : ((this.data_ = new Uint8Array(t.byteLength)),
            this.data_.set(new Uint8Array(t))),
        (n = this.data_.length))
      : t instanceof Uint8Array &&
        (e
          ? (this.data_ = t)
          : ((this.data_ = new Uint8Array(t.length)), this.data_.set(t)),
        (n = t.length)),
      (this.size_ = n),
      (this.type_ = r);
  }
  var RP =
    (Object.defineProperty(OP.prototype, 'path', {
      get: function () {
        return this.path_;
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(OP.prototype, 'isRoot', {
      get: function () {
        return 0 === this.path.length;
      },
      enumerable: !1,
      configurable: !0
    }),
    (OP.prototype.fullServerUrl = function () {
      var t = encodeURIComponent;
      return '/b/' + t(this.bucket) + '/o/' + t(this.path);
    }),
    (OP.prototype.bucketOnlyServerUrl = function () {
      return '/b/' + encodeURIComponent(this.bucket) + '/o';
    }),
    (OP.makeFromBucketSpec = function (e) {
      var t, n;
      try {
        t = OP.makeFromUrl(e);
      } catch (t) {
        return new OP(e, '');
      }
      if ('' === t.path) return t;
      throw (
        ((n = e),
        new KO(
          zO.INVALID_DEFAULT_BUCKET,
          "Invalid default bucket '" + n + "'."
        ))
      );
    }),
    (OP.makeFromUrl = function (t) {
      var e = null,
        n = '([A-Za-z0-9.\\-_]+)';
      var r = new RegExp('^gs://' + n + '(/(.*))?$', 'i');
      function i(t) {
        t.path_ = decodeURIComponent(t.path);
      }
      for (
        var o = BO.replace(/[.]/g, '\\.'),
          s = [
            {
              regex: r,
              indices: { bucket: 1, path: 3 },
              postModify: function (t) {
                '/' === t.path.charAt(t.path.length - 1) &&
                  (t.path_ = t.path_.slice(0, -1));
              }
            },
            {
              regex: new RegExp(
                '^https?://' +
                  o +
                  '/v[A-Za-z0-9_]+/b/' +
                  n +
                  '/o(/([^?#]*).*)?$',
                'i'
              ),
              indices: { bucket: 1, path: 3 },
              postModify: i
            },
            {
              regex: new RegExp(
                '^https?://(?:storage.googleapis.com|storage.cloud.google.com)/' +
                  n +
                  '/([^?#]*)',
                'i'
              ),
              indices: { bucket: 1, path: 2 },
              postModify: i
            }
          ],
          a = 0;
        a < s.length;
        a++
      ) {
        var u = s[a],
          c = u.regex.exec(t);
        if (c) {
          e = new OP(c[u.indices.bucket], c[u.indices.path] || '');
          u.postModify(e);
          break;
        }
      }
      if (null == e)
        throw ((n = t), new KO(zO.INVALID_URL, "Invalid URL '" + n + "'."));
      return e;
    }),
    OP);
  function OP(t, e) {
    (this.bucket = t), (this.path_ = e);
  }
  function PP(t) {
    var e, n;
    try {
      e = JSON.parse(t);
    } catch (t) {
      return null;
    }
    return 'object' != typeof (n = e) || Array.isArray(n) ? null : e;
  }
  function DP(t) {
    var e = t.lastIndexOf('/', t.length - 2);
    return -1 === e ? t : t.slice(e + 1);
  }
  function xP(t) {
    return 'https://' + BO + '/v0' + t;
  }
  function LP(t) {
    var e,
      n = encodeURIComponent,
      r = '?';
    for (e in t) {
      t.hasOwnProperty(e) && (r = r + (n(e) + '=' + n(t[e])) + '&');
    }
    return (r = r.slice(0, -1));
  }
  function MP(t, e) {
    return e;
  }
  var FP = function (t, e, n, r) {
      (this.server = t),
        (this.local = e || t),
        (this.writable = !!n),
        (this.xform = r || MP);
    },
    UP = null;
  function jP() {
    if (UP) return UP;
    var t = [];
    t.push(new FP('bucket')),
      t.push(new FP('generation')),
      t.push(new FP('metageneration')),
      t.push(new FP('name', 'fullPath', !0));
    var e = new FP('name');
    (e.xform = function (t, e) {
      return !IP((e = e)) || e.length < 2 ? e : DP(e);
    }),
      t.push(e);
    e = new FP('size');
    return (
      (e.xform = function (t, e) {
        return void 0 !== e ? Number(e) : e;
      }),
      t.push(e),
      t.push(new FP('timeCreated')),
      t.push(new FP('updated')),
      t.push(new FP('md5Hash', null, !0)),
      t.push(new FP('cacheControl', null, !0)),
      t.push(new FP('contentDisposition', null, !0)),
      t.push(new FP('contentEncoding', null, !0)),
      t.push(new FP('contentLanguage', null, !0)),
      t.push(new FP('contentType', null, !0)),
      t.push(new FP('metadata', 'customMetadata', !0)),
      (UP = t)
    );
  }
  function VP(n, r) {
    Object.defineProperty(n, 'ref', {
      get: function () {
        var t = n.bucket,
          e = n.fullPath,
          e = new RP(t, e);
        return r.makeStorageReference(e);
      }
    });
  }
  function qP(t, e, n) {
    e = PP(e);
    if (null === e) return null;
    return (function (t, e, n) {
      for (var r = { type: 'file' }, i = n.length, o = 0; o < i; o++) {
        var s = n[o];
        r[s.local] = s.xform(r, e[s.server]);
      }
      return VP(r, t), r;
    })(t, e, n);
  }
  function BP(t, e) {
    for (var n = {}, r = e.length, i = 0; i < r; i++) {
      var o = e[i];
      o.writable && (n[o.server] = t[o.local]);
    }
    return JSON.stringify(n);
  }
  var WP = 'prefixes',
    KP = 'items';
  function HP(t, e, n) {
    n = PP(n);
    if (null === n) return null;
    return (function (t, e, n) {
      var r = { prefixes: [], items: [], nextPageToken: n.nextPageToken };
      if (n[WP])
        for (var i = 0, o = n[WP]; i < o.length; i++) {
          var s = o[i].replace(/\/$/, ''),
            a = t.makeStorageReference(new RP(e, s));
          r.prefixes.push(a);
        }
      if (n[KP])
        for (var u = 0, c = n[KP]; u < c.length; u++) {
          var h = c[u],
            a = t.makeStorageReference(new RP(e, h.name));
          r.items.push(a);
        }
      return r;
    })(t, e, n);
  }
  var zP = function (t, e, n, r) {
    (this.url = t),
      (this.method = e),
      (this.handler = n),
      (this.timeout = r),
      (this.urlParams = {}),
      (this.headers = {}),
      (this.body = null),
      (this.errorHandler = null),
      (this.progressCallback = null),
      (this.successCodes = [200]),
      (this.additionalRetryCodes = []);
  };
  function GP(t) {
    if (!t) throw QO();
  }
  function QP(n, r) {
    return function (t, e) {
      return GP(null !== (e = qP(n, e, r))), e;
    };
  }
  function YP(n, r) {
    return function (t, e) {
      return GP(null !== (e = HP(n, r, e))), e;
    };
  }
  function XP(r, i) {
    return function (t, e) {
      var n = qP(r, e, i);
      return (
        GP(null !== n),
        (function (r, t) {
          if (null === (t = PP(t))) return null;
          if (!IP(t.downloadTokens)) return null;
          if (0 === (t = t.downloadTokens).length) return null;
          var i = encodeURIComponent;
          return t.split(',').map(function (t) {
            var e = r.bucket,
              n = r.fullPath;
            return (
              xP('/b/' + i(e) + '/o/' + i(n)) + LP({ alt: 'media', token: t })
            );
          })[0];
        })(n, e)
      );
    };
  }
  function JP(i) {
    return function (t, e) {
      var n,
        r =
          401 === t.getStatus()
            ? new KO(
                zO.UNAUTHENTICATED,
                'User is not authenticated, please authenticate using Firebase Authentication and try again.'
              )
            : 402 === t.getStatus()
            ? ((n = i.bucket),
              new KO(
                zO.QUOTA_EXCEEDED,
                "Quota for bucket '" +
                  n +
                  "' exceeded, please view quota on https://firebase.google.com/pricing/."
              ))
            : 403 === t.getStatus()
            ? ((r = i.path),
              new KO(
                zO.UNAUTHORIZED,
                "User does not have permission to access '" + r + "'."
              ))
            : e;
      return (r.serverResponse = e.serverResponse), r;
    };
  }
  function $P(r) {
    var i = JP(r);
    return function (t, e) {
      var n = i(t, e);
      return (
        404 === t.getStatus() &&
          ((t = r.path),
          (n = new KO(
            zO.OBJECT_NOT_FOUND,
            "Object '" + t + "' does not exist."
          ))),
        (n.serverResponse = e.serverResponse),
        n
      );
    };
  }
  function ZP(t, e, n) {
    var r = xP(e.fullServerUrl()),
      i = t.maxOperationRetryTime,
      i = new zP(r, 'GET', QP(t, n), i);
    return (i.errorHandler = $P(e)), i;
  }
  function tD(t, e, n) {
    n = Object.assign({}, n);
    return (
      (n.fullPath = t.path),
      (n.size = e.size()),
      n.contentType ||
        (n.contentType =
          ((t = e),
          ((e = null) && e.contentType) ||
            (t && t.type()) ||
            'application/octet-stream')),
      n
    );
  }
  function eD(t, e, n, r, i) {
    var o = e.bucketOnlyServerUrl(),
      s = { 'X-Goog-Upload-Protocol': 'multipart' };
    var a = (function () {
      for (var t = '', e = 0; e < 2; e++)
        t += Math.random().toString().slice(2);
      return t;
    })();
    s['Content-Type'] = 'multipart/related; boundary=' + a;
    var u = tD(e, r, i),
      i =
        '--' +
        a +
        '\r\nContent-Type: application/json; charset=utf-8\r\n\r\n' +
        BP(u, n) +
        '\r\n--' +
        a +
        '\r\nContent-Type: ' +
        u.contentType +
        '\r\n\r\n',
      a = '\r\n--' + a + '--',
      r = AP.getBlob(i, r, a);
    if (null === r) throw XO();
    (a = { name: u.fullPath }),
      (u = xP(o)),
      (o = t.maxUploadRetryTime),
      (o = new zP(u, 'POST', QP(t, n), o));
    return (
      (o.urlParams = a),
      (o.headers = s),
      (o.body = r.uploadData()),
      (o.errorHandler = JP(e)),
      o
    );
  }
  var nD = function (t, e, n, r) {
    (this.current = t),
      (this.total = e),
      (this.finalized = !!n),
      (this.metadata = r || null);
  };
  function rD(t, e) {
    var n = null;
    try {
      n = t.getResponseHeader('X-Goog-Upload-Status');
    } catch (t) {
      GP(!1);
    }
    return GP(!!n && -1 !== (e || ['active']).indexOf(n)), n;
  }
  function iD(t, e, n, r, i) {
    var o = e.bucketOnlyServerUrl(),
      s = tD(e, r, i),
      i = { name: s.fullPath },
      o = xP(o),
      r = {
        'X-Goog-Upload-Protocol': 'resumable',
        'X-Goog-Upload-Command': 'start',
        'X-Goog-Upload-Header-Content-Length': r.size(),
        'X-Goog-Upload-Header-Content-Type': s.contentType,
        'Content-Type': 'application/json; charset=utf-8'
      },
      n = BP(s, n),
      t = t.maxUploadRetryTime;
    t = new zP(
      o,
      'POST',
      function (t) {
        var e;
        rD(t);
        try {
          e = t.getResponseHeader('X-Goog-Upload-URL');
        } catch (t) {
          GP(!1);
        }
        return GP(IP(e)), e;
      },
      t
    );
    return (
      (t.urlParams = i),
      (t.headers = r),
      (t.body = n),
      (t.errorHandler = JP(e)),
      t
    );
  }
  function oD(t, e, n, i) {
    (t = t.maxUploadRetryTime),
      (t = new zP(
        n,
        'POST',
        function (t) {
          var e = rD(t, ['active', 'final']),
            n = null;
          try {
            n = t.getResponseHeader('X-Goog-Upload-Size-Received');
          } catch (t) {
            GP(!1);
          }
          n || GP(!1);
          var r = Number(n);
          return GP(!isNaN(r)), new nD(r, i.size(), 'final' === e);
        },
        t
      ));
    return (
      (t.headers = { 'X-Goog-Upload-Command': 'query' }),
      (t.errorHandler = JP(e)),
      t
    );
  }
  function sD(t, o, e, s, n, a, r, i) {
    var u = new nD(0, 0);
    if (
      (r
        ? ((u.current = r.current), (u.total = r.total))
        : ((u.current = 0), (u.total = s.size())),
      s.size() !== u.total)
    )
      throw new KO(
        zO.SERVER_FILE_WRONG_SIZE,
        'Server recorded incorrect upload file size, please retry the upload.'
      );
    var c = u.total - u.current,
      h = c;
    0 < n && (h = Math.min(h, n));
    (r = u.current),
      (n = r + h),
      (c = {
        'X-Goog-Upload-Command': h === c ? 'upload, finalize' : 'upload',
        'X-Goog-Upload-Offset': u.current
      }),
      (r = s.slice(r, n));
    if (null === r) throw XO();
    (n = o.maxUploadRetryTime),
      (n = new zP(
        e,
        'POST',
        function (t, e) {
          var n = rD(t, ['active', 'final']),
            r = u.current + h,
            i = s.size(),
            e = 'final' === n ? QP(o, a)(t, e) : null;
          return new nD(r, i, 'final' === n, e);
        },
        n
      ));
    return (
      (n.headers = c),
      (n.body = r.uploadData()),
      (n.progressCallback = i || null),
      (n.errorHandler = JP(t)),
      n
    );
  }
  var aD = function (t, e, n) {
      'function' == typeof t || null != e || null != n
        ? ((this.next = t), (this.error = e), (this.complete = n))
        : ((t = t),
          (this.next = t.next),
          (this.error = t.error),
          (this.complete = t.complete));
    },
    uD = function (t, e, n, r, i, o) {
      (this.bytesTransferred = t),
        (this.totalBytes = e),
        (this.state = n),
        (this.metadata = r),
        (this.task = i),
        (this.ref = o);
    };
  function cD(n) {
    return function () {
      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
      Promise.resolve().then(function () {
        return n.apply(void 0, t);
      });
    };
  }
  var hD =
    ((lD.prototype._makeProgressCallback = function () {
      var e = this,
        n = this._transferred;
      return function (t) {
        return e._updateProgress(n + t);
      };
    }),
    (lD.prototype._shouldDoResumable = function (t) {
      return 262144 < t.size();
    }),
    (lD.prototype._start = function () {
      this._state === hP &&
        void 0 === this._request &&
        (this._resumable
          ? void 0 === this._uploadUrl
            ? this._createResumable()
            : this._needToFetchStatus
            ? this._fetchStatus()
            : this._needToFetchMetadata
            ? this._fetchMetadata()
            : this._continueUpload()
          : this._oneShotUpload());
    }),
    (lD.prototype._resolveToken = function (e) {
      var n = this;
      this._ref.storage.getAuthToken().then(function (t) {
        switch (n._state) {
          case hP:
            e(t);
            break;
          case dP:
            n._transition(vP);
            break;
          case lP:
            n._transition(fP);
        }
      });
    }),
    (lD.prototype._createResumable = function () {
      var n = this;
      this._resolveToken(function (t) {
        var e = iD(
            n._ref.storage,
            n._ref._location,
            n._mappings,
            n._blob,
            n._metadata
          ),
          t = n._ref.storage.makeRequest(e, t);
        (n._request = t).getPromise().then(function (t) {
          (n._request = void 0),
            (n._uploadUrl = t),
            (n._needToFetchStatus = !1),
            n.completeTransitions_();
        }, n._errorHandler);
      });
    }),
    (lD.prototype._fetchStatus = function () {
      var n = this,
        r = this._uploadUrl;
      this._resolveToken(function (t) {
        var e = oD(n._ref.storage, n._ref._location, r, n._blob),
          t = n._ref.storage.makeRequest(e, t);
        (n._request = t).getPromise().then(function (t) {
          (n._request = void 0),
            n._updateProgress(t.current),
            (n._needToFetchStatus = !1),
            t.finalized && (n._needToFetchMetadata = !0),
            n.completeTransitions_();
        }, n._errorHandler);
      });
    }),
    (lD.prototype._continueUpload = function () {
      var n = this,
        r = 262144 * this._chunkMultiplier,
        i = new nD(this._transferred, this._blob.size()),
        o = this._uploadUrl;
      this._resolveToken(function (t) {
        var e;
        try {
          e = sD(
            n._ref._location,
            n._ref.storage,
            o,
            n._blob,
            r,
            n._mappings,
            i,
            n._makeProgressCallback()
          );
        } catch (t) {
          return (n._error = t), void n._transition(yP);
        }
        t = n._ref.storage.makeRequest(e, t);
        (n._request = t).getPromise().then(function (t) {
          n._increaseMultiplier(),
            (n._request = void 0),
            n._updateProgress(t.current),
            t.finalized
              ? ((n._metadata = t.metadata), n._transition(pP))
              : n.completeTransitions_();
        }, n._errorHandler);
      });
    }),
    (lD.prototype._increaseMultiplier = function () {
      262144 * this._chunkMultiplier < 33554432 && (this._chunkMultiplier *= 2);
    }),
    (lD.prototype._fetchMetadata = function () {
      var n = this;
      this._resolveToken(function (t) {
        var e = ZP(n._ref.storage, n._ref._location, n._mappings),
          t = n._ref.storage.makeRequest(e, t);
        (n._request = t).getPromise().then(function (t) {
          (n._request = void 0), (n._metadata = t), n._transition(pP);
        }, n._metadataErrorHandler);
      });
    }),
    (lD.prototype._oneShotUpload = function () {
      var n = this;
      this._resolveToken(function (t) {
        var e = eD(
            n._ref.storage,
            n._ref._location,
            n._mappings,
            n._blob,
            n._metadata
          ),
          t = n._ref.storage.makeRequest(e, t);
        (n._request = t).getPromise().then(function (t) {
          (n._request = void 0),
            (n._metadata = t),
            n._updateProgress(n._blob.size()),
            n._transition(pP);
        }, n._errorHandler);
      });
    }),
    (lD.prototype._updateProgress = function (t) {
      var e = this._transferred;
      (this._transferred = t),
        this._transferred !== e && this._notifyObservers();
    }),
    (lD.prototype._transition = function (t) {
      if (this._state !== t)
        switch (t) {
          case dP:
          case lP:
            (this._state = t),
              void 0 !== this._request && this._request.cancel();
            break;
          case hP:
            var e = this._state === fP;
            (this._state = t), e && (this._notifyObservers(), this._start());
            break;
          case fP:
            (this._state = t), this._notifyObservers();
            break;
          case vP:
            (this._error = YO()), (this._state = t), this._notifyObservers();
            break;
          case yP:
          case pP:
            (this._state = t), this._notifyObservers();
        }
    }),
    (lD.prototype.completeTransitions_ = function () {
      switch (this._state) {
        case lP:
          this._transition(fP);
          break;
        case dP:
          this._transition(vP);
          break;
        case hP:
          this._start();
      }
    }),
    Object.defineProperty(lD.prototype, 'snapshot', {
      get: function () {
        var t = mP(this._state);
        return new uD(
          this._transferred,
          this._blob.size(),
          t,
          this._metadata,
          this,
          this._ref
        );
      },
      enumerable: !1,
      configurable: !0
    }),
    (lD.prototype.on = function (t, e, n, r) {
      var i = this,
        o = new aD(e, n, r);
      return (
        this._addObserver(o),
        function () {
          i._removeObserver(o);
        }
      );
    }),
    (lD.prototype.then = function (t, e) {
      return this._promise.then(t, e);
    }),
    (lD.prototype.catch = function (t) {
      return this.then(null, t);
    }),
    (lD.prototype._addObserver = function (t) {
      this._observers.push(t), this._notifyObserver(t);
    }),
    (lD.prototype._removeObserver = function (t) {
      t = this._observers.indexOf(t);
      -1 !== t && this._observers.splice(t, 1);
    }),
    (lD.prototype._notifyObservers = function () {
      var e = this;
      this._finishPromise(),
        this._observers.slice().forEach(function (t) {
          e._notifyObserver(t);
        });
    }),
    (lD.prototype._finishPromise = function () {
      if (void 0 !== this._resolve) {
        var t = !0;
        switch (mP(this._state)) {
          case gP.SUCCESS:
            cD(this._resolve.bind(null, this.snapshot))();
            break;
          case gP.CANCELED:
          case gP.ERROR:
            cD(this._reject.bind(null, this._error))();
            break;
          default:
            t = !1;
        }
        t && ((this._resolve = void 0), (this._reject = void 0));
      }
    }),
    (lD.prototype._notifyObserver = function (t) {
      switch (mP(this._state)) {
        case gP.RUNNING:
        case gP.PAUSED:
          t.next && cD(t.next.bind(t, this.snapshot))();
          break;
        case gP.SUCCESS:
          t.complete && cD(t.complete.bind(t))();
          break;
        case gP.CANCELED:
        case gP.ERROR:
          t.error && cD(t.error.bind(t, this._error))();
          break;
        default:
          t.error && cD(t.error.bind(t, this._error))();
      }
    }),
    (lD.prototype.resume = function () {
      var t = this._state === fP || this._state === lP;
      return t && this._transition(hP), t;
    }),
    (lD.prototype.pause = function () {
      var t = this._state === hP;
      return t && this._transition(lP), t;
    }),
    (lD.prototype.cancel = function () {
      var t = this._state === hP || this._state === lP;
      return t && this._transition(dP), t;
    }),
    lD);
  function lD(t, e, n) {
    var r = this;
    void 0 === n && (n = null),
      (this._transferred = 0),
      (this._needToFetchStatus = !1),
      (this._needToFetchMetadata = !1),
      (this._observers = []),
      (this._error = void 0),
      (this._uploadUrl = void 0),
      (this._request = void 0),
      (this._chunkMultiplier = 1),
      (this._resolve = void 0),
      (this._reject = void 0),
      (this._ref = t),
      (this._blob = e),
      (this._metadata = n),
      (this._mappings = jP()),
      (this._resumable = this._shouldDoResumable(this._blob)),
      (this._state = hP),
      (this._errorHandler = function (t) {
        (r._request = void 0),
          (r._chunkMultiplier = 1),
          t.codeEquals(zO.CANCELED)
            ? ((r._needToFetchStatus = !0), r.completeTransitions_())
            : ((r._error = t), r._transition(yP));
      }),
      (this._metadataErrorHandler = function (t) {
        (r._request = void 0),
          t.codeEquals(zO.CANCELED)
            ? r.completeTransitions_()
            : ((r._error = t), r._transition(yP));
      }),
      (this._promise = new Promise(function (t, e) {
        (r._resolve = t), (r._reject = e), r._start();
      })),
      this._promise.then(null, function () {});
  }
  var fD =
    ((pD.prototype.toString = function () {
      return 'gs://' + this._location.bucket + '/' + this._location.path;
    }),
    (pD.prototype.newRef = function (t, e) {
      return new pD(t, e);
    }),
    Object.defineProperty(pD.prototype, 'root', {
      get: function () {
        var t = new RP(this._location.bucket, '');
        return this.newRef(this._service, t);
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(pD.prototype, 'bucket', {
      get: function () {
        return this._location.bucket;
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(pD.prototype, 'fullPath', {
      get: function () {
        return this._location.path;
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(pD.prototype, 'name', {
      get: function () {
        return DP(this._location.path);
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(pD.prototype, 'storage', {
      get: function () {
        return this._service;
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(pD.prototype, 'parent', {
      get: function () {
        var t = (function (t) {
          if (0 === t.length) return null;
          var e = t.lastIndexOf('/');
          return -1 === e ? '' : t.slice(0, e);
        })(this._location.path);
        if (null === t) return null;
        t = new RP(this._location.bucket, t);
        return new pD(this._service, t);
      },
      enumerable: !1,
      configurable: !0
    }),
    (pD.prototype._throwIfRoot = function (t) {
      if ('' === this._location.path) throw ZO(t);
    }),
    pD);
  function pD(t, e) {
    (this._service = t),
      (this._location = e instanceof RP ? e : RP.makeFromUrl(e));
  }
  function dD(t) {
    var e = { prefixes: [], items: [] };
    return (function r(i, o, s) {
      return _o(this, void 0, void 0, function () {
        var e, n;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return [4, vD(i, { pageToken: s })];
            case 1:
              return (
                (e = t.sent()),
                (n = o.prefixes).push.apply(n, e.prefixes),
                (n = o.items).push.apply(n, e.items),
                null == e.nextPageToken ? [3, 3] : [4, r(i, o, e.nextPageToken)]
              );
            case 2:
              t.sent(), (t.label = 3);
            case 3:
              return [2];
          }
        });
      });
    })(t, e).then(function () {
      return e;
    });
  }
  function vD(u, c) {
    return _o(this, void 0, void 0, function () {
      var s, a;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (
              null != c &&
                'number' == typeof c.maxResults &&
                CP('options.maxResults', 1, 1e3, c.maxResults),
              [4, u.storage.getAuthToken()]
            );
          case 1:
            return (
              (s = t.sent()),
              (a = c || {}),
              (e = u.storage),
              (n = u._location),
              (r = '/'),
              (i = a.pageToken),
              (o = a.maxResults),
              (t = {}),
              n.isRoot ? (t.prefix = '') : (t.prefix = n.path + '/'),
              r && 0 < r.length && (t.delimiter = r),
              i && (t.pageToken = i),
              o && (t.maxResults = o),
              (i = xP(n.bucketOnlyServerUrl())),
              (o = e.maxOperationRetryTime),
              ((o = new zP(i, 'GET', YP(e, n.bucket), o)).urlParams = t),
              (o.errorHandler = JP(n)),
              [2, u.storage.makeRequest(o, s).getPromise()]
            );
        }
        var e, n, r, i, o;
      });
    });
  }
  function yD(a, u) {
    return _o(this, void 0, void 0, function () {
      var s;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (
              a._throwIfRoot('updateMetadata'), [4, a.storage.getAuthToken()]
            );
          case 1:
            return (
              (s = t.sent()),
              (e = a.storage),
              (n = a._location),
              (r = u),
              (i = jP()),
              (o = xP(n.fullServerUrl())),
              (t = BP(r, i)),
              (r = e.maxOperationRetryTime),
              ((r = new zP(o, 'PATCH', QP(e, i), r)).headers = {
                'Content-Type': 'application/json; charset=utf-8'
              }),
              (r.body = t),
              (r.errorHandler = $P(n)),
              [2, a.storage.makeRequest(r, s).getPromise()]
            );
        }
        var e, n, r, i, o;
      });
    });
  }
  function gD(s) {
    return _o(this, void 0, void 0, function () {
      var o;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (
              s._throwIfRoot('getDownloadURL'), [4, s.storage.getAuthToken()]
            );
          case 1:
            return (
              (o = t.sent()),
              (e = s.storage),
              (n = s._location),
              (r = jP()),
              (i = xP(n.fullServerUrl())),
              (t = e.maxOperationRetryTime),
              ((t = new zP(i, 'GET', XP(e, r), t)).errorHandler = $P(n)),
              [
                2,
                s.storage
                  .makeRequest(t, o)
                  .getPromise()
                  .then(function (t) {
                    if (null === t)
                      throw new KO(
                        zO.NO_DOWNLOAD_URL,
                        'The given file does not have any download URLs.'
                      );
                    return t;
                  })
              ]
            );
        }
        var e, n, r, i;
      });
    });
  }
  function mD(i) {
    return _o(this, void 0, void 0, function () {
      var r;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (
              i._throwIfRoot('deleteObject'), [4, i.storage.getAuthToken()]
            );
          case 1:
            return (
              (r = t.sent()),
              (e = i.storage),
              (n = i._location),
              (t = xP(n.fullServerUrl())),
              (e = e.maxOperationRetryTime),
              ((e = new zP(t, 'DELETE', function (t, e) {}, e)).successCodes = [
                200,
                204
              ]),
              (e.errorHandler = $P(n)),
              [2, i.storage.makeRequest(e, r).getPromise()]
            );
        }
        var e, n;
      });
    });
  }
  function bD(t, e) {
    var n,
      e =
        ((n = t._location.path),
        (e = (e = e)
          .split('/')
          .filter(function (t) {
            return 0 < t.length;
          })
          .join('/')),
        0 === n.length ? e : n + '/' + e),
      e = new RP(t._location.bucket, e);
    return new fD(t.storage, e);
  }
  var _D =
    (Object.defineProperty(wD.prototype, 'bytesTransferred', {
      get: function () {
        return this._delegate.bytesTransferred;
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(wD.prototype, 'metadata', {
      get: function () {
        return this._delegate.metadata;
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(wD.prototype, 'state', {
      get: function () {
        return this._delegate.state;
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(wD.prototype, 'totalBytes', {
      get: function () {
        return this._delegate.totalBytes;
      },
      enumerable: !1,
      configurable: !0
    }),
    wD);
  function wD(t, e, n) {
    (this._delegate = t), (this.task = e), (this.ref = n);
  }
  var ED =
    (Object.defineProperty(ID.prototype, 'snapshot', {
      get: function () {
        return this._snapshot;
      },
      enumerable: !1,
      configurable: !0
    }),
    (ID.prototype.then = function (e, t) {
      var n = this;
      return this._delegate.then(function (t) {
        if (e) return e(new _D(t, n, n._ref));
      }, t);
    }),
    (ID.prototype.on = function (t, e, n, r) {
      var i = this,
        o = void 0;
      return (
        e &&
          (o =
            'function' == typeof e
              ? function (t) {
                  return e(new _D(t, i, i._ref));
                }
              : {
                  next: e.next
                    ? function (t) {
                        return e.next(new _D(t, i, i._ref));
                      }
                    : void 0,
                  complete: e.complete || void 0,
                  error: e.error || void 0
                }),
        this._delegate.on(t, o, n || void 0, r || void 0)
      );
    }),
    ID);
  function ID(t, e) {
    (this._delegate = t),
      (this._ref = e),
      (this.cancel = this._delegate.cancel.bind(this._delegate)),
      (this.catch = this._delegate.catch.bind(this._delegate)),
      (this.pause = this._delegate.pause.bind(this._delegate)),
      (this.resume = this._delegate.resume.bind(this._delegate)),
      (this._snapshot = new _D(this._delegate.snapshot, this, this._ref));
  }
  var TD =
    (Object.defineProperty(SD.prototype, 'prefixes', {
      get: function () {
        var e = this;
        return this._delegate.prefixes.map(function (t) {
          return new CD(t, e._service);
        });
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(SD.prototype, 'items', {
      get: function () {
        var e = this;
        return this._delegate.items.map(function (t) {
          return new CD(t, e._service);
        });
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(SD.prototype, 'nextPageToken', {
      get: function () {
        return this._delegate.nextPageToken || null;
      },
      enumerable: !1,
      configurable: !0
    }),
    SD);
  function SD(t, e) {
    (this._delegate = t), (this._service = e);
  }
  var CD =
    (Object.defineProperty(ND.prototype, 'name', {
      get: function () {
        return this._delegate.name;
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(ND.prototype, 'bucket', {
      get: function () {
        return this._delegate.bucket;
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(ND.prototype, 'fullPath', {
      get: function () {
        return this._delegate.fullPath;
      },
      enumerable: !1,
      configurable: !0
    }),
    (ND.prototype.toString = function () {
      return this._delegate.toString();
    }),
    (ND.prototype.child = function (t) {
      return new ND(bD(this._delegate, t), this.storage);
    }),
    Object.defineProperty(ND.prototype, 'root', {
      get: function () {
        return new ND(this._delegate.root, this.storage);
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(ND.prototype, 'parent', {
      get: function () {
        var t = this._delegate.parent;
        return null == t ? null : new ND(t, this.storage);
      },
      enumerable: !1,
      configurable: !0
    }),
    (ND.prototype.put = function (t, e) {
      return (
        this._throwIfRoot('put'),
        new ED(
          ((n = this._delegate),
          (t = t),
          void 0 === (e = e) && (e = null),
          n._throwIfRoot('uploadBytesResumable'),
          new hD(n, new AP(t), e)),
          this
        )
      );
      var n;
    }),
    (ND.prototype.putString = function (t, e, n) {
      return (
        void 0 === e && (e = nP.RAW),
        this._throwIfRoot('putString'),
        new ED(
          ((r = this._delegate),
          (t = t),
          (n = n),
          void 0 === (e = e) && (e = nP.RAW),
          r._throwIfRoot('putString'),
          (t = iP(e, t)),
          null == (n = bo({}, n)).contentType &&
            null != t.contentType &&
            (n.contentType = t.contentType),
          new hD(r, new AP(t.data, !0), n)),
          this
        )
      );
      var r;
    }),
    (ND.prototype.listAll = function () {
      var e = this;
      return dD(this._delegate).then(function (t) {
        return new TD(t, e.storage);
      });
    }),
    (ND.prototype.list = function (t) {
      var e = this;
      return vD(this._delegate, t).then(function (t) {
        return new TD(t, e.storage);
      });
    }),
    (ND.prototype.getMetadata = function () {
      return (function (r) {
        return _o(this, void 0, void 0, function () {
          var e, n;
          return wo(this, function (t) {
            switch (t.label) {
              case 0:
                return (
                  r._throwIfRoot('getMetadata'), [4, r.storage.getAuthToken()]
                );
              case 1:
                return (
                  (e = t.sent()),
                  (n = ZP(r.storage, r._location, jP())),
                  [2, r.storage.makeRequest(n, e).getPromise()]
                );
            }
          });
        });
      })(this._delegate);
    }),
    (ND.prototype.updateMetadata = function (t) {
      return yD(this._delegate, t);
    }),
    (ND.prototype.getDownloadURL = function () {
      return gD(this._delegate);
    }),
    (ND.prototype.delete = function () {
      return this._throwIfRoot('delete'), mD(this._delegate);
    }),
    (ND.prototype._throwIfRoot = function (t) {
      if ('' === this._delegate._location.path) throw ZO(t);
    }),
    ND);
  function ND(t, e) {
    (this._delegate = t), (this.storage = e);
  }
  var AD =
    ((kD.prototype.getPromise = function () {
      return this.promise_;
    }),
    (kD.prototype.cancel = function (t) {}),
    kD);
  function kD(t) {
    this.promise_ = Promise.reject(t);
  }
  var RD =
    ((OD.prototype.start_ = function () {
      var e,
        n,
        t,
        r,
        i,
        o,
        s,
        a,
        u,
        c = this;
      function h(t, e) {
        var n,
          r = c.resolve_,
          i = c.reject_,
          o = e.xhr;
        if (e.wasSuccessCode)
          try {
            var s = c.callback_(o, o.getResponseText());
            void 0 !== s ? r(s) : r();
          } catch (t) {
            i(t);
          }
        else
          null !== o
            ? (((n = QO()).serverResponse = o.getResponseText()),
              c.errorCallback_ ? i(c.errorCallback_(o, n)) : i(n))
            : e.canceled
            ? i((n = (c.appDelete_ ? $O : YO)()))
            : i(
                (n = new KO(
                  zO.RETRY_LIMIT_EXCEEDED,
                  'Max retry time for operation exceeded, please try again.'
                ))
              );
      }
      function l() {
        return 2 === s;
      }
      function f() {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        a || ((a = !0), n.apply(null, t));
      }
      function p(t) {
        i = setTimeout(function () {
          (i = null), e(d, l());
        }, t);
      }
      function d(t) {
        for (var e = [], n = 1; n < arguments.length; n++)
          e[n - 1] = arguments[n];
        a ||
          (t || l() || o
            ? f.call.apply(f, So([null, t], e))
            : (r < 64 && (r *= 2),
              p(1 === s ? ((s = 2), 0) : 1e3 * (r + Math.random()))));
      }
      function v(t) {
        u ||
          ((u = !0),
          a ||
            (null !== i
              ? (t || (s = 2), clearTimeout(i), p(0))
              : t || (s = 1)));
      }
      this.canceled_
        ? h(0, new PD(!1, null, !0))
        : (this.backoffId_ =
            ((e = function (r, t) {
              function i(t) {
                var e = t.loaded,
                  t = t.lengthComputable ? t.total : -1;
                null !== c.progressCallback_ && c.progressCallback_(e, t);
              }
              t
                ? r(!1, new PD(!1, null, !0))
                : ((t = c.pool_.createXhrIo()),
                  (c.pendingXhr_ = t),
                  null !== c.progressCallback_ &&
                    t.addUploadProgressListener(i),
                  t
                    .send(c.url_, c.method_, c.body_, c.headers_)
                    .then(function (t) {
                      null !== c.progressCallback_ &&
                        t.removeUploadProgressListener(i),
                        (c.pendingXhr_ = null);
                      var e = t.getErrorCode() === uP.NO_ERROR,
                        n = t.getStatus();
                      e && !c.isRetryStatusCode_(n)
                        ? ((n = -1 !== c.successCodes_.indexOf(n)),
                          r(!0, new PD(n, t)))
                        : ((t = t.getErrorCode() === uP.ABORT),
                          r(!1, new PD(!1, null, t)));
                    }));
            }),
            (n = h),
            (t = this.timeout_),
            (i = null),
            (u = a = o = !(r = 1)),
            p((s = 0)),
            setTimeout(function () {
              v((o = !0));
            }, t),
            v));
    }),
    (OD.prototype.getPromise = function () {
      return this.promise_;
    }),
    (OD.prototype.cancel = function (t) {
      (this.canceled_ = !0),
        (this.appDelete_ = t || !1),
        null !== this.backoffId_ && (0, this.backoffId_)(!1),
        null !== this.pendingXhr_ && this.pendingXhr_.abort();
    }),
    (OD.prototype.isRetryStatusCode_ = function (t) {
      var e = 500 <= t && t < 600,
        n = -1 !== [408, 429].indexOf(t),
        t = -1 !== this.additionalRetryCodes_.indexOf(t);
      return e || n || t;
    }),
    OD);
  function OD(t, e, n, r, i, o, s, a, u, c, h) {
    var l = this;
    (this.pendingXhr_ = null),
      (this.backoffId_ = null),
      (this.canceled_ = !1),
      (this.appDelete_ = !1),
      (this.url_ = t),
      (this.method_ = e),
      (this.headers_ = n),
      (this.body_ = r),
      (this.successCodes_ = i.slice()),
      (this.additionalRetryCodes_ = o.slice()),
      (this.callback_ = s),
      (this.errorCallback_ = a),
      (this.progressCallback_ = c),
      (this.timeout_ = u),
      (this.pool_ = h),
      (this.promise_ = new Promise(function (t, e) {
        (l.resolve_ = t), (l.reject_ = e), l.start_();
      }));
  }
  var PD = function (t, e, n) {
    (this.wasSuccessCode = t), (this.xhr = e), (this.canceled = !!n);
  };
  function DD(t, e, n, r) {
    var i = LP(t.urlParams),
      o = t.url + i,
      s = Object.assign({}, t.headers);
    return (
      (i = s),
      (e = e) && (i['X-Firebase-GMPID'] = e),
      (e = s),
      null !== (n = n) && 0 < n.length && (e.Authorization = 'Firebase ' + n),
      (e = s),
      (n = void 0 !== Jl ? Jl.SDK_VERSION : 'AppManager'),
      (e['X-Firebase-Storage-Version'] = 'webjs/' + n),
      new RD(
        o,
        t.method,
        s,
        t.body,
        t.successCodes,
        t.additionalRetryCodes,
        t.handler,
        t.errorHandler,
        t.timeout,
        t.progressCallback,
        r
      )
    );
  }
  function xD(t) {
    return /^[A-Za-z]+:\/\//.test(t);
  }
  function LD(t, e) {
    if (t instanceof FD) {
      var n = t;
      if (null == n._bucket)
        throw new KO(
          zO.NO_DEFAULT_BUCKET,
          "No default bucket found. Did you set the '" +
            WO +
            "' property when initializing the app?"
        );
      n = new fD(n, n._bucket);
      return null != e ? LD(n, e) : n;
    }
    if (void 0 === e) return t;
    if (e.includes('..')) throw JO('`path` param cannot contain ".."');
    return bD(t, e);
  }
  function MD(t, e) {
    if (e && xD(e)) {
      if (t instanceof FD) return new fD(t, e);
      throw JO(
        'To use ref(service, url), the first argument must be a Storage instance.'
      );
    }
    return LD(t, e);
  }
  var FD =
    (Object.defineProperty(UD.prototype, 'maxUploadRetryTime', {
      get: function () {
        return this._maxUploadRetryTime;
      },
      set: function (t) {
        CP('time', 0, Number.POSITIVE_INFINITY, t),
          (this._maxUploadRetryTime = t);
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(UD.prototype, 'maxOperationRetryTime', {
      get: function () {
        return this._maxOperationRetryTime;
      },
      set: function (t) {
        CP('time', 0, Number.POSITIVE_INFINITY, t),
          (this._maxOperationRetryTime = t);
      },
      enumerable: !1,
      configurable: !0
    }),
    (UD.prototype.getAuthToken = function () {
      return _o(this, void 0, void 0, function () {
        var e;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return (e = this._authProvider.getImmediate({ optional: !0 }))
                ? [4, e.getToken()]
                : [3, 2];
            case 1:
              if (null !== (e = t.sent())) return [2, e.accessToken];
              t.label = 2;
            case 2:
              return [2, null];
          }
        });
      });
    }),
    (UD.prototype._delete = function () {
      return (
        (this._deleted = !0),
        this._requests.forEach(function (t) {
          return t.cancel();
        }),
        this._requests.clear(),
        Promise.resolve()
      );
    }),
    (UD.prototype.makeStorageReference = function (t) {
      return new fD(this, t);
    }),
    (UD.prototype.makeRequest = function (t, e) {
      var n = this;
      if (this._deleted) return new AD($O());
      var r = DD(t, this._appId, e, this._pool);
      return (
        this._requests.add(r),
        r.getPromise().then(
          function () {
            return n._requests.delete(r);
          },
          function () {
            return n._requests.delete(r);
          }
        ),
        r
      );
    }),
    UD);
  function UD(t, e, n, r) {
    (this.app = t),
      (this._authProvider = e),
      (this._pool = n),
      (this._url = r),
      (this._bucket = null),
      (this._appId = null),
      (this._deleted = !1),
      (this._maxOperationRetryTime = 12e4),
      (this._maxUploadRetryTime = 6e5),
      (this._requests = new Set()),
      (this._bucket =
        null != r
          ? RP.makeFromBucketSpec(r)
          : null == (r = null == (r = this.app.options) ? void 0 : r[WO])
          ? null
          : RP.makeFromBucketSpec(r));
  }
  var jD =
    (Object.defineProperty(VD.prototype, 'maxOperationRetryTime', {
      get: function () {
        return this._delegate.maxOperationRetryTime;
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(VD.prototype, 'maxUploadRetryTime', {
      get: function () {
        return this._delegate.maxUploadRetryTime;
      },
      enumerable: !1,
      configurable: !0
    }),
    (VD.prototype.ref = function (t) {
      if (xD(t))
        throw JO(
          'ref() expected a child path but got a URL, use refFromURL instead.'
        );
      return new CD(MD(this._delegate, t), this);
    }),
    (VD.prototype.refFromURL = function (t) {
      if (!xD(t))
        throw JO(
          'refFromURL() expected a full URL but got a child path, use ref() instead.'
        );
      try {
        RP.makeFromUrl(t);
      } catch (t) {
        throw JO(
          'refFromUrl() expected a valid full URL but got an invalid one.'
        );
      }
      return new CD(MD(this._delegate, t), this);
    }),
    (VD.prototype.setMaxUploadRetryTime = function (t) {
      this._delegate.maxUploadRetryTime = t;
    }),
    (VD.prototype.setMaxOperationRetryTime = function (t) {
      this._delegate.maxOperationRetryTime = t;
    }),
    VD);
  function VD(t, e) {
    var n = this;
    (this.app = t),
      (this._delegate = e),
      (this.INTERNAL = {
        delete: function () {
          return n._delegate._delete();
        }
      });
  }
  var qD, BD;
  function WD(t, e) {
    var n = t.getProvider('app').getImmediate(),
      t = t.getProvider('auth-internal');
    return new jD(n, new FD(n, t, new wP(), e));
  }
  (BD = {
    TaskState: gP,
    TaskEvent: cP,
    StringFormat: nP,
    Storage: FD,
    Reference: CD
  }),
    (qD = Jl).INTERNAL.registerComponent(
      new _s('storage', WD, 'PUBLIC')
        .setServiceProps(BD)
        .setMultipleInstances(!0)
    ),
    qD.registerVersion('@firebase/storage', '0.4.2');
  var KD,
    HD,
    zD = '0.4.4',
    GD = 'FB-PERF-TRACE-MEASURE',
    QD = '@firebase/performance/config',
    YD = '@firebase/performance/configexpire',
    Gn = 'Performance',
    dt =
      (((dt = {})['trace started'] = 'Trace {$traceName} was started before.'),
      (dt['trace stopped'] = 'Trace {$traceName} is not running.'),
      (dt['nonpositive trace startTime'] =
        'Trace {$traceName} startTime should be positive.'),
      (dt['nonpositive trace duration'] =
        'Trace {$traceName} duration should be positive.'),
      (dt['no window'] = 'Window is not available.'),
      (dt['no app id'] = 'App id is not available.'),
      (dt['no project id'] = 'Project id is not available.'),
      (dt['no api key'] = 'Api key is not available.'),
      (dt['invalid cc log'] = 'Attempted to queue invalid cc event'),
      (dt['FB not default'] =
        'Performance can only start when Firebase app instance is the default one.'),
      (dt['RC response not ok'] = 'RC response is not ok'),
      (dt['invalid attribute name'] =
        'Attribute name {$attributeName} is invalid.'),
      (dt['invalid attribute value'] =
        'Attribute value {$attributeValue} is invalid.'),
      (dt['invalid custom metric name'] =
        'Custom metric name {$customMetricName} is invalid'),
      (dt['invalid String merger input'] =
        'Input for String merger is invalid, contact support team to resolve.'),
      dt),
    XD = new Qo('performance', Gn, dt),
    JD = new xs(Gn);
  JD.logLevel = As.INFO;
  var $D,
    ZD =
      ((tx.prototype.getUrl = function () {
        return this.windowLocation.href.split('?')[0];
      }),
      (tx.prototype.mark = function (t) {
        this.performance && this.performance.mark && this.performance.mark(t);
      }),
      (tx.prototype.measure = function (t, e, n) {
        this.performance &&
          this.performance.measure &&
          this.performance.measure(t, e, n);
      }),
      (tx.prototype.getEntriesByType = function (t) {
        return this.performance && this.performance.getEntriesByType
          ? this.performance.getEntriesByType(t)
          : [];
      }),
      (tx.prototype.getEntriesByName = function (t) {
        return this.performance && this.performance.getEntriesByName
          ? this.performance.getEntriesByName(t)
          : [];
      }),
      (tx.prototype.getTimeOrigin = function () {
        return (
          this.performance &&
          (this.performance.timeOrigin ||
            this.performance.timing.navigationStart)
        );
      }),
      (tx.prototype.requiredApisAvailable = function () {
        return fetch &&
          Promise &&
          this.navigator &&
          this.navigator.cookieEnabled
          ? !!qo() ||
              (JD.info('IndexedDB is not supported by current browswer'), !1)
          : (JD.info(
              'Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.'
            ),
            !1);
      }),
      (tx.prototype.setupObserver = function (t, i) {
        this.PerformanceObserver &&
          new this.PerformanceObserver(function (t) {
            for (var e = 0, n = t.getEntries(); e < n.length; e++) {
              var r = n[e];
              i(r);
            }
          }).observe({ entryTypes: [t] });
      }),
      (tx.getInstance = function () {
        return void 0 === KD && (KD = new tx(HD)), KD;
      }),
      tx);
  function tx(t) {
    if (!(this.window = t)) throw XD.create('no window');
    (this.performance = t.performance),
      (this.PerformanceObserver = t.PerformanceObserver),
      (this.windowLocation = t.location),
      (this.navigator = t.navigator),
      (this.document = t.document),
      this.navigator &&
        this.navigator.cookieEnabled &&
        (this.localStorage = t.localStorage),
      t.perfMetrics &&
        t.perfMetrics.onFirstInputDelay &&
        (this.onFirstInputDelay = t.perfMetrics.onFirstInputDelay);
  }
  function ex(t, e) {
    var n = t.length - e.length;
    if (n < 0 || 1 < n) throw XD.create('invalid String merger input');
    for (var r = [], i = 0; i < t.length; i++)
      r.push(t.charAt(i)), e.length > i && r.push(e.charAt(i));
    return r.join('');
  }
  var nx,
    rx,
    ix =
      ((ox.prototype.getAppId = function () {
        var t =
          this.firebaseAppInstance &&
          this.firebaseAppInstance.options &&
          this.firebaseAppInstance.options.appId;
        if (!t) throw XD.create('no app id');
        return t;
      }),
      (ox.prototype.getProjectId = function () {
        var t =
          this.firebaseAppInstance &&
          this.firebaseAppInstance.options &&
          this.firebaseAppInstance.options.projectId;
        if (!t) throw XD.create('no project id');
        return t;
      }),
      (ox.prototype.getApiKey = function () {
        var t =
          this.firebaseAppInstance &&
          this.firebaseAppInstance.options &&
          this.firebaseAppInstance.options.apiKey;
        if (!t) throw XD.create('no api key');
        return t;
      }),
      (ox.prototype.getFlTransportFullUrl = function () {
        return this.flTransportEndpointUrl.concat('?key=', this.transportKey);
      }),
      (ox.getInstance = function () {
        return void 0 === $D && ($D = new ox()), $D;
      }),
      ox);
  function ox() {
    (this.instrumentationEnabled = !0),
      (this.dataCollectionEnabled = !0),
      (this.loggingEnabled = !1),
      (this.tracesSamplingRate = 1),
      (this.networkRequestsSamplingRate = 1),
      (this.logEndPointUrl =
        'https://firebaselogging.googleapis.com/v0cc/log?format=json_proto'),
      (this.flTransportEndpointUrl = ex(
        'hts/frbslgigp.ogepscmv/ieo/eaylg',
        'tp:/ieaeogn-agolai.o/1frlglgc/o'
      )),
      (this.transportKey = ex('AzSC8r6ReiGqFMyfvgow', 'Iayx0u-XT3vksVM-pIV')),
      (this.logSource = 462),
      (this.logTraceAfterSampling = !1),
      (this.logNetworkAfterSampling = !1),
      (this.configTimeToLive = 12);
  }
  ((Gn = rx = rx || {})[(Gn.UNKNOWN = 0)] = 'UNKNOWN'),
    (Gn[(Gn.VISIBLE = 1)] = 'VISIBLE'),
    (Gn[(Gn.HIDDEN = 2)] = 'HIDDEN');
  var sx = ['firebase_', 'google_', 'ga_'],
    ax = new RegExp('^[a-zA-Z]\\w*$');
  function ux() {
    switch (ZD.getInstance().document.visibilityState) {
      case 'visible':
        return rx.VISIBLE;
      case 'hidden':
        return rx.HIDDEN;
      default:
        return rx.UNKNOWN;
    }
  }
  var cx = '0.0.1',
    hx = { loggingEnabled: !0 },
    lx = 'FIREBASE_INSTALLATIONS_AUTH';
  function fx(t) {
    var n,
      e = (function () {
        var t = ZD.getInstance().localStorage;
        if (!t) return;
        var e = t.getItem(YD);
        if (
          !e ||
          !(function (t) {
            return Number(t) > Date.now();
          })(e)
        )
          return;
        var n = t.getItem(QD);
        if (!n) return;
        try {
          return JSON.parse(n);
        } catch (t) {
          return;
        }
      })();
    return e
      ? (dx(e), Promise.resolve())
      : ((n = t),
        (function () {
          var t = ix.getInstance().installationsService.getToken();
          return t.then(function (t) {}), t;
        })()
          .then(function (t) {
            var e =
                'https://firebaseremoteconfig.googleapis.com/v1/projects/' +
                ix.getInstance().getProjectId() +
                '/namespaces/fireperf:fetch?key=' +
                ix.getInstance().getApiKey(),
              t = new Request(e, {
                method: 'POST',
                headers: { Authorization: lx + ' ' + t },
                body: JSON.stringify({
                  app_instance_id: n,
                  app_instance_id_token: t,
                  app_id: ix.getInstance().getAppId(),
                  app_version: zD,
                  sdk_version: cx
                })
              });
            return fetch(t).then(function (t) {
              if (t.ok) return t.json();
              throw XD.create('RC response not ok');
            });
          })
          .catch(function () {
            JD.info(px);
          })
          .then(dx)
          .then(
            function (t) {
              var e = ZD.getInstance().localStorage;
              if (!t || !e) return;
              e.setItem(QD, JSON.stringify(t)),
                e.setItem(
                  YD,
                  String(
                    Date.now() +
                      60 * ix.getInstance().configTimeToLive * 60 * 1e3
                  )
                );
            },
            function () {}
          ));
  }
  var px = 'Could not fetch config, will use default configs';
  function dx(t) {
    if (!t) return t;
    var e = ix.getInstance(),
      n = t.entries || {};
    return (
      (e.loggingEnabled =
        void 0 !== n.fpr_enabled
          ? 'true' === String(n.fpr_enabled)
          : hx.loggingEnabled),
      n.fpr_log_source && (e.logSource = Number(n.fpr_log_source)),
      n.fpr_log_endpoint_url && (e.logEndPointUrl = n.fpr_log_endpoint_url),
      n.fpr_log_transport_key && (e.transportKey = n.fpr_log_transport_key),
      void 0 !== n.fpr_vc_network_request_sampling_rate &&
        (e.networkRequestsSamplingRate = Number(
          n.fpr_vc_network_request_sampling_rate
        )),
      void 0 !== n.fpr_vc_trace_sampling_rate &&
        (e.tracesSamplingRate = Number(n.fpr_vc_trace_sampling_rate)),
      (e.logTraceAfterSampling = vx(e.tracesSamplingRate)),
      (e.logNetworkAfterSampling = vx(e.networkRequestsSamplingRate)),
      t
    );
  }
  function vx(t) {
    return Math.random() <= t;
  }
  var yx,
    gx = 1;
  function mx() {
    return (
      (gx = 2),
      (yx =
        yx ||
        (function () {
          var n = ZD.getInstance().document;
          return new Promise(function (t) {
            var e;
            n && 'complete' !== n.readyState
              ? ((e = function () {
                  'complete' === n.readyState &&
                    (n.removeEventListener('readystatechange', e), t());
                }),
                n.addEventListener('readystatechange', e))
              : t();
          });
        })()
          .then(function () {
            return (
              (t = ix.getInstance().installationsService.getId()).then(
                function (t) {
                  nx = t;
                }
              ),
              t
            );
            var t;
          })
          .then(fx)
          .then(bx, bx))
    );
  }
  function bx() {
    gx = 3;
  }
  var _x,
    wx = 1e4,
    Ex = 5500,
    Ix = 3,
    Tx = Ix,
    Sx = [],
    Cx = !1;
  function Nx(t) {
    setTimeout(function () {
      if (0 !== Tx)
        return Sx.length
          ? void (function () {
              var t = So(Sx);
              Sx = [];
              var e = t.map(function (t) {
                return {
                  source_extension_json_proto3: t.message,
                  event_time_ms: String(t.eventTime)
                };
              });
              (function (t, r) {
                return (function (t) {
                  var e = ix.getInstance().getFlTransportFullUrl();
                  return fetch(e, { method: 'POST', body: JSON.stringify(t) });
                })(t)
                  .then(function (t) {
                    return (
                      t.ok || JD.info('Call to Firebase backend failed.'),
                      t.json()
                    );
                  })
                  .then(function (t) {
                    var e = Number(t.nextRequestWaitMillis),
                      n = wx;
                    isNaN(e) || (n = Math.max(e, n));
                    t = t.logResponseDetails;
                    Array.isArray(t) &&
                      0 < t.length &&
                      'RETRY_REQUEST_LATER' === t[0].responseAction &&
                      ((Sx = So(r, Sx)),
                      JD.info('Retry transport request later.')),
                      (Tx = Ix),
                      Nx(n);
                  });
              })(
                {
                  request_time_ms: String(Date.now()),
                  client_info: { client_type: 1, js_client_info: {} },
                  log_source: ix.getInstance().logSource,
                  log_event: e
                },
                t
              ).catch(function () {
                (Sx = So(t, Sx)),
                  Tx--,
                  JD.info('Tries left: ' + Tx + '.'),
                  Nx(wx);
              });
            })()
          : Nx(wx);
    }, t);
  }
  function Ax(n) {
    return function () {
      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
      !(function (t) {
        if (!t.eventTime || !t.message) throw XD.create('invalid cc log');
        Sx = So(Sx, [t]);
      })({ message: n.apply(void 0, t), eventTime: Date.now() });
    };
  }
  function kx(t, e) {
    (_x = _x || Ax(Px))(t, e);
  }
  function Rx(t) {
    var e = ix.getInstance();
    (!e.instrumentationEnabled && t.isAuto) ||
      ((e.dataCollectionEnabled || t.isAuto) &&
        ZD.getInstance().requiredApisAvailable() &&
        ((t.isAuto && ux() !== rx.VISIBLE) ||
          (3 === gx
            ? Ox(t)
            : mx().then(
                function () {
                  return Ox(t);
                },
                function () {
                  return Ox(t);
                }
              ))));
  }
  function Ox(t) {
    var e;
    !nx ||
      ((e = ix.getInstance()).loggingEnabled &&
        e.logTraceAfterSampling &&
        setTimeout(function () {
          return kx(t, 1);
        }, 0));
  }
  function Px(t, e) {
    return (0 === e
      ? function (t) {
          (t = {
            url: t.url,
            http_method: t.httpMethod || 0,
            http_response_code: 200,
            response_payload_bytes: t.responsePayloadBytes,
            client_start_time_us: t.startTimeUs,
            time_to_response_initiated_us: t.timeToResponseInitiatedUs,
            time_to_response_completed_us: t.timeToResponseCompletedUs
          }),
            (t = { application_info: Dx(), network_request_metric: t });
          return JSON.stringify(t);
        }
      : function (t) {
          var e = {
            name: t.name,
            is_auto: t.isAuto,
            client_start_time_us: t.startTimeUs,
            duration_us: t.durationUs
          };
          0 !== Object.keys(t.counters).length && (e.counters = t.counters);
          t = t.getAttributes();
          0 !== Object.keys(t).length && (e.custom_attributes = t);
          e = { application_info: Dx(), trace_metric: e };
          return JSON.stringify(e);
        })(t);
  }
  function Dx() {
    return {
      google_app_id: ix.getInstance().getAppId(),
      app_instance_id: nx,
      web_app_info: {
        sdk_version: zD,
        page_url: ZD.getInstance().getUrl(),
        service_worker_status:
          'serviceWorker' in (t = ZD.getInstance().navigator)
            ? t.serviceWorker.controller
              ? 2
              : 3
            : 1,
        visibility_state: ux(),
        effective_connection_type: (function () {
          var t = ZD.getInstance().navigator.connection;
          switch (t && t.effectiveType) {
            case 'slow-2g':
              return 1;
            case '2g':
              return 2;
            case '3g':
              return 3;
            case '4g':
              return 4;
            default:
              return 0;
          }
        })()
      },
      application_process_state: 0
    };
    var t;
  }
  var xx = ['_fp', '_fcp', '_fid'];
  var Lx =
    ((Mx.prototype.start = function () {
      if (1 !== this.state)
        throw XD.create('trace started', { traceName: this.name });
      this.api.mark(this.traceStartMark), (this.state = 2);
    }),
    (Mx.prototype.stop = function () {
      if (2 !== this.state)
        throw XD.create('trace stopped', { traceName: this.name });
      (this.state = 3),
        this.api.mark(this.traceStopMark),
        this.api.measure(
          this.traceMeasure,
          this.traceStartMark,
          this.traceStopMark
        ),
        this.calculateTraceMetrics(),
        Rx(this);
    }),
    (Mx.prototype.record = function (t, e, n) {
      if (t <= 0)
        throw XD.create('nonpositive trace startTime', {
          traceName: this.name
        });
      if (e <= 0)
        throw XD.create('nonpositive trace duration', { traceName: this.name });
      if (
        ((this.durationUs = Math.floor(1e3 * e)),
        (this.startTimeUs = Math.floor(1e3 * t)),
        n && n.attributes && (this.customAttributes = bo({}, n.attributes)),
        n && n.metrics)
      )
        for (var r = 0, i = Object.keys(n.metrics); r < i.length; r++) {
          var o = i[r];
          isNaN(Number(n.metrics[o])) ||
            (this.counters[o] = Number(Math.floor(n.metrics[o])));
        }
      Rx(this);
    }),
    (Mx.prototype.incrementMetric = function (t, e) {
      void 0 === e && (e = 1),
        void 0 === this.counters[t]
          ? this.putMetric(t, e)
          : this.putMetric(t, this.counters[t] + e);
    }),
    (Mx.prototype.putMetric = function (t, e) {
      if (
        ((n = t),
        (r = this.name),
        0 === n.length ||
          100 < n.length ||
          (!(r && r.startsWith('_wt_') && -1 < xx.indexOf(n)) &&
            n.startsWith('_')))
      )
        throw XD.create('invalid custom metric name', { customMetricName: t });
      var n, r;
      this.counters[t] =
        ((t = e),
        (e = Math.floor(t)) < t &&
          JD.info(
            'Metric value should be an Integer, setting the value as : ' +
              e +
              '.'
          ),
        e);
    }),
    (Mx.prototype.getMetric = function (t) {
      return this.counters[t] || 0;
    }),
    (Mx.prototype.putAttribute = function (t, e) {
      var n,
        r,
        i =
          !(0 === (n = t).length || 40 < n.length) &&
          !sx.some(function (t) {
            return n.startsWith(t);
          }) &&
          !!n.match(ax),
        r = 0 !== (r = e).length && r.length <= 100;
      if (i && r) this.customAttributes[t] = e;
      else {
        if (!i) throw XD.create('invalid attribute name', { attributeName: t });
        if (!r)
          throw XD.create('invalid attribute value', { attributeValue: e });
      }
    }),
    (Mx.prototype.getAttribute = function (t) {
      return this.customAttributes[t];
    }),
    (Mx.prototype.removeAttribute = function (t) {
      void 0 !== this.customAttributes[t] && delete this.customAttributes[t];
    }),
    (Mx.prototype.getAttributes = function () {
      return bo({}, this.customAttributes);
    }),
    (Mx.prototype.setStartTime = function (t) {
      this.startTimeUs = t;
    }),
    (Mx.prototype.setDuration = function (t) {
      this.durationUs = t;
    }),
    (Mx.prototype.calculateTraceMetrics = function () {
      var t = this.api.getEntriesByName(this.traceMeasure),
        t = t && t[0];
      t &&
        ((this.durationUs = Math.floor(1e3 * t.duration)),
        (this.startTimeUs = Math.floor(
          1e3 * (t.startTime + this.api.getTimeOrigin())
        )));
    }),
    (Mx.createOobTrace = function (t, e, n) {
      var r,
        i = ZD.getInstance().getUrl();
      i &&
        ((r = new Mx('_wt_' + i, !0)),
        (i = Math.floor(1e3 * ZD.getInstance().getTimeOrigin())),
        r.setStartTime(i),
        t &&
          t[0] &&
          (r.setDuration(Math.floor(1e3 * t[0].duration)),
          r.putMetric('domInteractive', Math.floor(1e3 * t[0].domInteractive)),
          r.putMetric(
            'domContentLoadedEventEnd',
            Math.floor(1e3 * t[0].domContentLoadedEventEnd)
          ),
          r.putMetric('loadEventEnd', Math.floor(1e3 * t[0].loadEventEnd))),
        e &&
          ((t = e.find(function (t) {
            return 'first-paint' === t.name;
          })) &&
            t.startTime &&
            r.putMetric('_fp', Math.floor(1e3 * t.startTime)),
          (e = e.find(function (t) {
            return 'first-contentful-paint' === t.name;
          })) &&
            e.startTime &&
            r.putMetric('_fcp', Math.floor(1e3 * e.startTime)),
          n && r.putMetric('_fid', Math.floor(1e3 * n))),
        Rx(r));
    }),
    (Mx.createUserTimingTrace = function (t) {
      Rx(new Mx(t, !1, t));
    }),
    Mx);
  function Mx(t, e, n) {
    void 0 === e && (e = !1),
      (this.name = t),
      (this.isAuto = e),
      (this.state = 1),
      (this.customAttributes = {}),
      (this.counters = {}),
      (this.api = ZD.getInstance()),
      (this.randomId = Math.floor(1e6 * Math.random())),
      this.isAuto ||
        ((this.traceStartMark =
          'FB-PERF-TRACE-START-' + this.randomId + '-' + this.name),
        (this.traceStopMark =
          'FB-PERF-TRACE-STOP-' + this.randomId + '-' + this.name),
        (this.traceMeasure = n || GD + '-' + this.randomId + '-' + this.name),
        n && this.calculateTraceMetrics());
  }
  function Fx(t) {
    var e,
      n,
      r,
      i = t;
    i &&
      void 0 !== i.responseStart &&
      ((n = ZD.getInstance().getTimeOrigin()),
      (r = Math.floor(1e3 * (i.startTime + n))),
      (t = i.responseStart
        ? Math.floor(1e3 * (i.responseStart - i.startTime))
        : void 0),
      (n = Math.floor(1e3 * (i.responseEnd - i.startTime))),
      (i = {
        url: i.name && i.name.split('?')[0],
        responsePayloadBytes: i.transferSize,
        startTimeUs: r,
        timeToResponseInitiatedUs: t,
        timeToResponseCompletedUs: n
      }),
      (e = i),
      (r = ix.getInstance()).instrumentationEnabled &&
        ((t = e.url),
        (n = r.logEndPointUrl.split('?')[0]),
        (i = r.flTransportEndpointUrl.split('?')[0]),
        t !== n &&
          t !== i &&
          r.loggingEnabled &&
          r.logNetworkAfterSampling &&
          setTimeout(function () {
            return kx(e, 0);
          }, 0)));
  }
  var Ux = 5e3;
  function jx() {
    nx &&
      (setTimeout(function () {
        var t = ZD.getInstance(),
          e = t.getEntriesByType('navigation'),
          n = t.getEntriesByType('paint');
        {
          var r;
          t.onFirstInputDelay
            ? ((r = setTimeout(function () {
                Lx.createOobTrace(e, n), (r = void 0);
              }, Ux)),
              t.onFirstInputDelay(function (t) {
                r && (clearTimeout(r), Lx.createOobTrace(e, n, t));
              }))
            : Lx.createOobTrace(e, n);
        }
      }, 0),
      setTimeout(function () {
        for (
          var t = ZD.getInstance(),
            e = t.getEntriesByType('resource'),
            n = 0,
            r = e;
          n < r.length;
          n++
        ) {
          Fx(r[n]);
        }
        t.setupObserver('resource', Fx);
      }, 0),
      setTimeout(function () {
        for (
          var t = ZD.getInstance(),
            e = t.getEntriesByType('measure'),
            n = 0,
            r = e;
          n < r.length;
          n++
        ) {
          Vx(r[n]);
        }
        t.setupObserver('measure', Vx);
      }, 0));
  }
  function Vx(t) {
    t = t.name;
    t.substring(0, GD.length) !== GD && Lx.createUserTimingTrace(t);
  }
  var qx =
    ((Bx.prototype.trace = function (t) {
      return new Lx(t);
    }),
    Object.defineProperty(Bx.prototype, 'instrumentationEnabled', {
      get: function () {
        return ix.getInstance().instrumentationEnabled;
      },
      set: function (t) {
        ix.getInstance().instrumentationEnabled = t;
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(Bx.prototype, 'dataCollectionEnabled', {
      get: function () {
        return ix.getInstance().dataCollectionEnabled;
      },
      set: function (t) {
        ix.getInstance().dataCollectionEnabled = t;
      },
      enumerable: !1,
      configurable: !0
    }),
    Bx);
  function Bx(t) {
    (this.app = t),
      ZD.getInstance().requiredApisAvailable() &&
        Bo()
          .then(function (t) {
            t && (Cx || (Nx(Ex), (Cx = !0)), mx().then(jx, jx));
          })
          .catch(function (t) {
            JD.info("Environment doesn't support IndexedDB: " + t);
          });
  }
  var Wx;
  function Kx(t, e) {
    if ('[DEFAULT]' !== t.name) throw XD.create('FB not default');
    if ('undefined' == typeof window) throw XD.create('no window');
    return (
      (HD = window),
      (ix.getInstance().firebaseAppInstance = t),
      (ix.getInstance().installationsService = e),
      new qx(t)
    );
  }
  (Wx = Jl).INTERNAL.registerComponent(
    new _s(
      'performance',
      function (t) {
        var e = t.getProvider('app').getImmediate(),
          t = t.getProvider('installations').getImmediate();
        return Kx(e, t);
      },
      'PUBLIC'
    )
  ),
    Wx.registerVersion('@firebase/performance', '0.4.4');
  var Hx,
    zx,
    Gx = 'firebase_id',
    Qx = 'origin',
    Yx = 6e4,
    Xx =
      'https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig',
    Jx = 'https://www.googletagmanager.com/gtag/js';
  ((Gn = Hx = Hx || {}).EVENT = 'event'),
    (Gn.SET = 'set'),
    (Gn.CONFIG = 'config'),
    ((Gn = zx = zx || {}).ADD_SHIPPING_INFO = 'add_shipping_info'),
    (Gn.ADD_PAYMENT_INFO = 'add_payment_info'),
    (Gn.ADD_TO_CART = 'add_to_cart'),
    (Gn.ADD_TO_WISHLIST = 'add_to_wishlist'),
    (Gn.BEGIN_CHECKOUT = 'begin_checkout'),
    (Gn.CHECKOUT_PROGRESS = 'checkout_progress'),
    (Gn.EXCEPTION = 'exception'),
    (Gn.GENERATE_LEAD = 'generate_lead'),
    (Gn.LOGIN = 'login'),
    (Gn.PAGE_VIEW = 'page_view'),
    (Gn.PURCHASE = 'purchase'),
    (Gn.REFUND = 'refund'),
    (Gn.REMOVE_FROM_CART = 'remove_from_cart'),
    (Gn.SCREEN_VIEW = 'screen_view'),
    (Gn.SEARCH = 'search'),
    (Gn.SELECT_CONTENT = 'select_content'),
    (Gn.SELECT_ITEM = 'select_item'),
    (Gn.SELECT_PROMOTION = 'select_promotion'),
    (Gn.SET_CHECKOUT_OPTION = 'set_checkout_option'),
    (Gn.SHARE = 'share'),
    (Gn.SIGN_UP = 'sign_up'),
    (Gn.TIMING_COMPLETE = 'timing_complete'),
    (Gn.VIEW_CART = 'view_cart'),
    (Gn.VIEW_ITEM = 'view_item'),
    (Gn.VIEW_ITEM_LIST = 'view_item_list'),
    (Gn.VIEW_PROMOTION = 'view_promotion'),
    (Gn.VIEW_SEARCH_RESULTS = 'view_search_results');
  var $x = new xs('@firebase/analytics');
  function Zx(o, s, a, u) {
    return function (n, r, i) {
      return _o(this, void 0, void 0, function () {
        var e;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return (
                t.trys.push([0, 6, , 7]),
                n !== Hx.EVENT
                  ? [3, 2]
                  : [
                      4,
                      (function (u, c, h, l, f) {
                        return _o(this, void 0, void 0, function () {
                          var n, r, e, i, o, s, a;
                          return wo(this, function (t) {
                            switch (t.label) {
                              case 0:
                                return (t.trys.push([0, 4, , 5]),
                                (n = []),
                                f && f.send_to)
                                  ? ((a = f.send_to),
                                    Array.isArray(a) || (a = [a]),
                                    [4, Promise.all(h)])
                                  : [3, 2];
                              case 1:
                                for (
                                  r = t.sent(),
                                    e = function (e) {
                                      var t = r.find(function (t) {
                                          return t.measurementId === e;
                                        }),
                                        t = t && c[t.appId];
                                      if (!t) return (n = []), 'break';
                                      n.push(t);
                                    },
                                    i = 0,
                                    o = a;
                                  i < o.length &&
                                  ((s = o[i]), 'break' !== e(s));
                                  i++
                                );
                                t.label = 2;
                              case 2:
                                return (
                                  0 === n.length && (n = Object.values(c)),
                                  [4, Promise.all(n)]
                                );
                              case 3:
                                return (
                                  t.sent(), u(Hx.EVENT, l, f || {}), [3, 5]
                                );
                              case 4:
                                return (a = t.sent()), $x.error(a), [3, 5];
                              case 5:
                                return [2];
                            }
                          });
                        });
                      })(o, s, a, r, i)
                    ]
              );
            case 1:
              return t.sent(), [3, 5];
            case 2:
              return n !== Hx.CONFIG
                ? [3, 4]
                : [
                    4,
                    (function (r, i, o, s, a, u) {
                      return _o(this, void 0, void 0, function () {
                        var e, n;
                        return wo(this, function (t) {
                          switch (t.label) {
                            case 0:
                              (e = s[a]), (t.label = 1);
                            case 1:
                              return (
                                t.trys.push([1, 7, , 8]), e ? [4, i[e]] : [3, 3]
                              );
                            case 2:
                              return t.sent(), [3, 6];
                            case 3:
                              return [4, Promise.all(o)];
                            case 4:
                              return (
                                (n = t.sent()),
                                (n = n.find(function (t) {
                                  return t.measurementId === a;
                                }))
                                  ? [4, i[n.appId]]
                                  : [3, 6]
                              );
                            case 5:
                              t.sent(), (t.label = 6);
                            case 6:
                              return [3, 8];
                            case 7:
                              return (n = t.sent()), $x.error(n), [3, 8];
                            case 8:
                              return r(Hx.CONFIG, a, u), [2];
                          }
                        });
                      });
                    })(o, s, a, u, r, i)
                  ];
            case 3:
              return t.sent(), [3, 5];
            case 4:
              o(Hx.SET, r), (t.label = 5);
            case 5:
              return [3, 7];
            case 6:
              return (e = t.sent()), $x.error(e), [3, 7];
            case 7:
              return [2];
          }
        });
      });
    };
  }
  var Gn =
      (((Gn = {})['already-exists'] =
        'A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.'),
      (Gn['already-initialized'] =
        'Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.'),
      (Gn['interop-component-reg-failed'] =
        'Firebase Analytics Interop Component failed to instantiate: {$reason}'),
      (Gn['invalid-analytics-context'] =
        'Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}'),
      (Gn['indexeddb-unavailable'] =
        'IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}'),
      (Gn['fetch-throttle'] =
        'The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.'),
      (Gn['config-fetch-failed'] =
        'Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}'),
      (Gn['no-api-key'] =
        'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),
      (Gn['no-app-id'] =
        'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),
      Gn),
    tL = new Qo('analytics', 'Analytics', Gn),
    eL = 30;
  function nL(t, e) {
    void 0 === t && (t = {}),
      void 0 === e && (e = 1e3),
      (this.throttleMetadata = t),
      (this.intervalMillis = e);
  }
  var rL = new ((nL.prototype.getThrottleMetadata = function (t) {
    return this.throttleMetadata[t];
  }),
  (nL.prototype.setThrottleMetadata = function (t, e) {
    this.throttleMetadata[t] = e;
  }),
  (nL.prototype.deleteThrottleMetadata = function (t) {
    delete this.throttleMetadata[t];
  }),
  nL)();
  function iL(o) {
    var s;
    return _o(this, void 0, void 0, function () {
      var e, n, r, i;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (
              (e = o.appId),
              (i = o.apiKey),
              (i = {
                method: 'GET',
                headers: new Headers({
                  Accept: 'application/json',
                  'x-goog-api-key': i
                })
              }),
              (e = Xx.replace('{app-id}', e)),
              [4, fetch(e, i)]
            );
          case 1:
            if (200 === (n = t.sent()).status || 304 === n.status)
              return [3, 6];
            (r = ''), (t.label = 2);
          case 2:
            return t.trys.push([2, 4, , 5]), [4, n.json()];
          case 3:
            return (
              (i = t.sent()),
              null !== (s = i.error) &&
                void 0 !== s &&
                s.message &&
                (r = i.error.message),
              [3, 5]
            );
          case 4:
            return t.sent(), [3, 5];
          case 5:
            throw tL.create('config-fetch-failed', {
              httpStatus: n.status,
              responseMessage: r
            });
          case 6:
            return [2, n.json()];
        }
      });
    });
  }
  function oL(a, u, c) {
    return (
      void 0 === u && (u = rL),
      _o(this, void 0, void 0, function () {
        var e,
          n,
          r,
          i,
          o,
          s = this;
        return wo(this, function (t) {
          if (
            ((i = a.options),
            (e = i.appId),
            (n = i.apiKey),
            (r = i.measurementId),
            !e)
          )
            throw tL.create('no-app-id');
          if (n)
            return (
              (i = u.getThrottleMetadata(e) || {
                backoffCount: 0,
                throttleEndTimeMillis: Date.now()
              }),
              (o = new aL()),
              setTimeout(
                function () {
                  return _o(s, void 0, void 0, function () {
                    return wo(this, function (t) {
                      return o.abort(), [2];
                    });
                  });
                },
                void 0 !== c ? c : Yx
              ),
              [
                2,
                (function u(c, t, h, l) {
                  var f = t.throttleEndTimeMillis,
                    p = t.backoffCount;
                  void 0 === l && (l = rL);
                  return _o(this, void 0, void 0, function () {
                    var e, n, r, s, a;
                    return wo(this, function (t) {
                      switch (t.label) {
                        case 0:
                          (e = c.appId), (n = c.measurementId), (t.label = 1);
                        case 1:
                          return (
                            t.trys.push([1, 3, , 4]),
                            [
                              4,
                              ((i = h),
                              (o = f),
                              new Promise(function (t, e) {
                                var n = Math.max(o - Date.now(), 0),
                                  r = setTimeout(t, n);
                                i.addEventListener(function () {
                                  clearTimeout(r),
                                    e(
                                      tL.create('fetch-throttle', {
                                        throttleEndTimeMillis: o
                                      })
                                    );
                                });
                              }))
                            ]
                          );
                        case 2:
                          return t.sent(), [3, 4];
                        case 3:
                          if (((s = t.sent()), n))
                            return (
                              $x.warn(
                                "Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID " +
                                  n +
                                  ' provided in the "measurementId" field in the local Firebase config. [' +
                                  s.message +
                                  ']'
                              ),
                              [2, { appId: e, measurementId: n }]
                            );
                          throw s;
                        case 4:
                          return t.trys.push([4, 6, , 7]), [4, iL(c)];
                        case 5:
                          return (
                            (a = t.sent()), l.deleteThrottleMetadata(e), [2, a]
                          );
                        case 6:
                          if (sL((r = t.sent())))
                            return (
                              (s =
                                503 === Number(r.customData.httpStatus)
                                  ? bs(p, l.intervalMillis, eL)
                                  : bs(p, l.intervalMillis)),
                              (a = {
                                throttleEndTimeMillis: Date.now() + s,
                                backoffCount: p + 1
                              }),
                              l.setThrottleMetadata(e, a),
                              $x.debug(
                                'Calling attemptFetch again in ' + s + ' millis'
                              ),
                              [2, u(c, a, h, l)]
                            );
                          if ((l.deleteThrottleMetadata(e), n))
                            return (
                              $x.warn(
                                "Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID " +
                                  n +
                                  ' provided in the "measurementId" field in the local Firebase config. [' +
                                  r.message +
                                  ']'
                              ),
                              [2, { appId: e, measurementId: n }]
                            );
                          throw r;
                        case 7:
                          return [2];
                      }
                      var i, o;
                    });
                  });
                })({ appId: e, apiKey: n, measurementId: r }, i, o, u)
              ]
            );
          if (r) return [2, { measurementId: r, appId: e }];
          throw tL.create('no-api-key');
        });
      })
    );
  }
  function sL(t) {
    if (t instanceof zo && t.customData) {
      t = Number(t.customData.httpStatus);
      return 429 === t || 500 === t || 503 === t || 504 === t;
    }
  }
  var aL =
    ((uL.prototype.addEventListener = function (t) {
      this.listeners.push(t);
    }),
    (uL.prototype.abort = function () {
      this.listeners.forEach(function (t) {
        return t();
      });
    }),
    uL);
  function uL() {
    this.listeners = [];
  }
  function cL(i, o, s, a, u) {
    return _o(this, void 0, void 0, function () {
      var e, n, r;
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            return (
              (e = oL(i))
                .then(function (t) {
                  (s[t.measurementId] = t.appId),
                    i.options.measurementId &&
                      t.measurementId !== i.options.measurementId &&
                      $x.warn(
                        'The measurement ID in the local Firebase config (' +
                          i.options.measurementId +
                          ') does not match the measurement ID fetched from the server (' +
                          t.measurementId +
                          '). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.'
                      );
                })
                .catch(function (t) {
                  return $x.error(t);
                }),
              o.push(e),
              (n = (function () {
                return _o(this, void 0, void 0, function () {
                  var e;
                  return wo(this, function (t) {
                    switch (t.label) {
                      case 0:
                        return qo()
                          ? [3, 1]
                          : ($x.warn(
                              tL.create('indexeddb-unavailable', {
                                errorInfo:
                                  'IndexedDB is not available in this environment.'
                              }).message
                            ),
                            [2, !1]);
                      case 1:
                        return t.trys.push([1, 3, , 4]), [4, Bo()];
                      case 2:
                        return t.sent(), [3, 4];
                      case 3:
                        return (
                          (e = t.sent()),
                          $x.warn(
                            tL.create('indexeddb-unavailable', { errorInfo: e })
                              .message
                          ),
                          [2, !1]
                        );
                      case 4:
                        return [2, !0];
                    }
                  });
                });
              })().then(function (t) {
                return t ? a.getId() : void 0;
              })),
              [4, Promise.all([e, n])]
            );
          case 1:
            return (
              (r = t.sent()),
              (e = r[0]),
              (n = r[1]),
              u('js', new Date()),
              ((r = {})[Qx] = 'firebase'),
              (r.update = !0),
              (r = r),
              null != n && (r[Gx] = n),
              u(Hx.CONFIG, e.measurementId, r),
              [2, e.measurementId]
            );
        }
      });
    });
  }
  var hL,
    lL,
    fL = {},
    pL = [],
    dL = {},
    vL = 'dataLayer',
    yL = 'gtag',
    gL = !1;
  function mL(t) {
    if (gL) throw tL.create('already-initialized');
    t.dataLayerName && (vL = t.dataLayerName), t.gtagName && (yL = t.gtagName);
  }
  function bL(t, e) {
    (n = []),
      Uo() && n.push('This is a browser extension environment.'),
      Wo() || n.push('Cookies are not available.'),
      0 < n.length &&
        ((n = n
          .map(function (t, e) {
            return '(' + (e + 1) + ') ' + t;
          })
          .join(' ')),
        (n = tL.create('invalid-analytics-context', { errorInfo: n })),
        $x.warn(n.message));
    var n,
      r,
      i,
      o,
      s,
      a,
      u = t.options.appId;
    if (!u) throw tL.create('no-app-id');
    if (!t.options.apiKey) {
      if (!t.options.measurementId) throw tL.create('no-api-key');
      $x.warn(
        'The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ' +
          t.options.measurementId +
          ' provided in the "measurementId" field in the local Firebase config.'
      );
    }
    if (null != fL[u]) throw tL.create('already-exists', { id: u });
    return (
      gL ||
        ((function () {
          for (
            var t = window.document.getElementsByTagName('script'),
              e = 0,
              n = Object.values(t);
            e < n.length;
            e++
          ) {
            var r = n[e];
            if (r.src && r.src.includes(Jx)) return r;
          }
        })() ||
          ((s = vL),
          ((a = document.createElement('script')).src = Jx + '?l=' + s),
          (a.async = !0),
          document.head.appendChild(a)),
        (i = vL),
        (o = []),
        Array.isArray(window[i]) ? (o = window[i]) : (window[i] = o),
        (n = fL),
        (s = pL),
        (a = dL),
        (r = vL),
        (i = yL),
        (o = function () {
          for (var t = [], e = 0; e < arguments.length; e++)
            t[e] = arguments[e];
          window[r].push(arguments);
        }),
        window[i] && 'function' == typeof window[i] && (o = window[i]),
        (window[i] = Zx(o, n, s, a)),
        (i = { gtagCore: o, wrappedGtag: window[i] }),
        (lL = i.wrappedGtag),
        (hL = i.gtagCore),
        (gL = !0)),
      (fL[u] = cL(t, pL, dL, e, hL)),
      {
        app: t,
        logEvent: function (t, e, n) {
          (function (n, r, i, o, s) {
            return _o(this, void 0, void 0, function () {
              var e;
              return wo(this, function (t) {
                switch (t.label) {
                  case 0:
                    return s && s.global ? (n(Hx.EVENT, i, o), [2]) : [3, 1];
                  case 1:
                    return [4, r];
                  case 2:
                    (e = t.sent()),
                      (e = bo(bo({}, o), { send_to: e })),
                      n(Hx.EVENT, i, e),
                      (t.label = 3);
                  case 3:
                    return [2];
                }
              });
            });
          })(lL, fL[u], t, e, n).catch(function (t) {
            return $x.error(t);
          });
        },
        setCurrentScreen: function (t, e) {
          (function (n, r, i, o) {
            return _o(this, void 0, void 0, function () {
              var e;
              return wo(this, function (t) {
                switch (t.label) {
                  case 0:
                    return o && o.global
                      ? (n(Hx.SET, { screen_name: i }), [2, Promise.resolve()])
                      : [3, 1];
                  case 1:
                    return [4, r];
                  case 2:
                    (e = t.sent()),
                      n(Hx.CONFIG, e, { update: !0, screen_name: i }),
                      (t.label = 3);
                  case 3:
                    return [2];
                }
              });
            });
          })(lL, fL[u], t, e).catch(function (t) {
            return $x.error(t);
          });
        },
        setUserId: function (t, e) {
          (function (n, r, i, o) {
            return _o(this, void 0, void 0, function () {
              var e;
              return wo(this, function (t) {
                switch (t.label) {
                  case 0:
                    return o && o.global
                      ? (n(Hx.SET, { user_id: i }), [2, Promise.resolve()])
                      : [3, 1];
                  case 1:
                    return [4, r];
                  case 2:
                    (e = t.sent()),
                      n(Hx.CONFIG, e, { update: !0, user_id: i }),
                      (t.label = 3);
                  case 3:
                    return [2];
                }
              });
            });
          })(lL, fL[u], t, e).catch(function (t) {
            return $x.error(t);
          });
        },
        setUserProperties: function (t, e) {
          (function (s, a, u, c) {
            return _o(this, void 0, void 0, function () {
              var e, n, r, i, o;
              return wo(this, function (t) {
                switch (t.label) {
                  case 0:
                    if (!c || !c.global) return [3, 1];
                    for (e = {}, n = 0, r = Object.keys(u); n < r.length; n++)
                      (i = r[n]), (e['user_properties.' + i] = u[i]);
                    return s(Hx.SET, e), [2, Promise.resolve()];
                  case 1:
                    return [4, a];
                  case 2:
                    (o = t.sent()),
                      s(Hx.CONFIG, o, { update: !0, user_properties: u }),
                      (t.label = 3);
                  case 3:
                    return [2];
                }
              });
            });
          })(lL, fL[u], t, e).catch(function (t) {
            return $x.error(t);
          });
        },
        setAnalyticsCollectionEnabled: function (t) {
          (function (n, r) {
            return _o(this, void 0, void 0, function () {
              var e;
              return wo(this, function (t) {
                switch (t.label) {
                  case 0:
                    return [4, n];
                  case 1:
                    return (
                      (e = t.sent()), (window['ga-disable-' + e] = !r), [2]
                    );
                }
              });
            });
          })(fL[u], t).catch(function (t) {
            return $x.error(t);
          });
        },
        INTERNAL: {
          delete: function () {
            return delete fL[u], Promise.resolve();
          }
        }
      }
    );
  }
  var _L,
    wL = 'analytics';
  function EL() {
    return _o(this, void 0, void 0, function () {
      return wo(this, function (t) {
        switch (t.label) {
          case 0:
            if (Uo()) return [2, !1];
            if (!Wo()) return [2, !1];
            if (!qo()) return [2, !1];
            t.label = 1;
          case 1:
            return t.trys.push([1, 3, , 4]), [4, Bo()];
          case 2:
            return [2, t.sent()];
          case 3:
            return t.sent(), [2, !1];
          case 4:
            return [2];
        }
      });
    });
  }
  (_L = Jl).INTERNAL.registerComponent(
    new _s(
      wL,
      function (t) {
        return bL(
          t.getProvider('app').getImmediate(),
          t.getProvider('installations').getImmediate()
        );
      },
      'PUBLIC'
    ).setServiceProps({ settings: mL, EventName: zx, isSupported: EL })
  ),
    _L.INTERNAL.registerComponent(
      new _s(
        'analytics-internal',
        function (t) {
          try {
            return { logEvent: t.getProvider(wL).getImmediate().logEvent };
          } catch (t) {
            throw tL.create('interop-component-reg-failed', { reason: t });
          }
        },
        'PRIVATE'
      )
    ),
    _L.registerVersion('@firebase/analytics', '0.6.2');
  var IL =
    ((TL.prototype.isCachedDataFresh = function (t, e) {
      if (!e)
        return (
          this.logger.debug('Config fetch cache check. Cache unpopulated.'), !1
        );
      var n = Date.now() - e,
        e = n <= t;
      return (
        this.logger.debug(
          'Config fetch cache check. Cache age millis: ' +
            n +
            '. Cache max age millis (minimumFetchIntervalMillis setting): ' +
            t +
            '. Is cache hit: ' +
            e +
            '.'
        ),
        e
      );
    }),
    (TL.prototype.fetch = function (i) {
      return _o(this, void 0, void 0, function () {
        var e, n, r;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return [
                4,
                Promise.all([
                  this.storage.getLastSuccessfulFetchTimestampMillis(),
                  this.storage.getLastSuccessfulFetchResponse()
                ])
              ];
            case 1:
              return ((r = t.sent()),
              (e = r[0]),
              (r = r[1]) && this.isCachedDataFresh(i.cacheMaxAgeMillis, e))
                ? [2, r]
                : ((i.eTag = r && r.eTag), [4, this.client.fetch(i)]);
            case 2:
              return (
                (n = t.sent()),
                (r = [
                  this.storageCache.setLastSuccessfulFetchTimestampMillis(
                    Date.now()
                  )
                ]),
                200 === n.status &&
                  r.push(this.storage.setLastSuccessfulFetchResponse(n)),
                [4, Promise.all(r)]
              );
            case 3:
              return t.sent(), [2, n];
          }
        });
      });
    }),
    TL);
  function TL(t, e, n, r) {
    (this.client = t),
      (this.storage = e),
      (this.storageCache = n),
      (this.logger = r);
  }
  var Gn =
      (((Gn = {})['registration-window'] =
        'Undefined window object. This SDK only supports usage in a browser environment.'),
      (Gn['registration-project-id'] =
        'Undefined project identifier. Check Firebase app initialization.'),
      (Gn['registration-api-key'] =
        'Undefined API key. Check Firebase app initialization.'),
      (Gn['registration-app-id'] =
        'Undefined app identifier. Check Firebase app initialization.'),
      (Gn['storage-open'] =
        'Error thrown when opening storage. Original error: {$originalErrorMessage}.'),
      (Gn['storage-get'] =
        'Error thrown when reading from storage. Original error: {$originalErrorMessage}.'),
      (Gn['storage-set'] =
        'Error thrown when writing to storage. Original error: {$originalErrorMessage}.'),
      (Gn['storage-delete'] =
        'Error thrown when deleting from storage. Original error: {$originalErrorMessage}.'),
      (Gn['fetch-client-network'] =
        'Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.'),
      (Gn['fetch-timeout'] =
        'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.'),
      (Gn['fetch-throttle'] =
        'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.'),
      (Gn['fetch-client-parse'] =
        'Fetch client could not parse response. Original error: {$originalErrorMessage}.'),
      (Gn['fetch-status'] =
        'Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.'),
      Gn),
    SL = new Qo('remoteconfig', 'Remote Config', Gn);
  var CL =
    ((NL.prototype.fetch = function (f) {
      return _o(this, void 0, void 0, function () {
        var n, r, i, o, s, a, u, c, h, l;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return [
                4,
                Promise.all([
                  this.firebaseInstallations.getId(),
                  this.firebaseInstallations.getToken()
                ])
              ];
            case 1:
              (o = t.sent()),
                (n = o[0]),
                (i = o[1]),
                (r =
                  window.FIREBASE_REMOTE_CONFIG_URL_BASE ||
                  'https://firebaseremoteconfig.googleapis.com'),
                (o =
                  r +
                  '/v1/projects/' +
                  this.projectId +
                  '/namespaces/' +
                  this.namespace +
                  ':fetch?key=' +
                  this.apiKey),
                (r = {
                  'Content-Type': 'application/json',
                  'Content-Encoding': 'gzip',
                  'If-None-Match': f.eTag || '*'
                }),
                (i = {
                  sdk_version: this.sdkVersion,
                  app_instance_id: n,
                  app_instance_id_token: i,
                  app_id: this.appId,
                  language_code:
                    (void 0 === e && (e = navigator),
                    (e.languages && e.languages[0]) || e.language)
                }),
                (i = { method: 'POST', headers: r, body: JSON.stringify(i) }),
                (o = fetch(o, i)),
                (i = new Promise(function (t, e) {
                  f.signal.addEventListener(function () {
                    var t = new Error('The operation was aborted.');
                    (t.name = 'AbortError'), e(t);
                  });
                })),
                (t.label = 2);
            case 2:
              return t.trys.push([2, 5, , 6]), [4, Promise.race([o, i])];
            case 3:
              return t.sent(), [4, o];
            case 4:
              return (l = t.sent()), [3, 6];
            case 5:
              throw (
                ((i = t.sent()),
                (o = 'fetch-client-network'),
                'AbortError' === i.name && (o = 'fetch-timeout'),
                SL.create(o, { originalErrorMessage: i.message }))
              );
            case 6:
              if (
                ((s = l.status),
                (a = l.headers.get('ETag') || void 0),
                200 !== l.status)
              )
                return [3, 11];
              (h = void 0), (t.label = 7);
            case 7:
              return t.trys.push([7, 9, , 10]), [4, l.json()];
            case 8:
              return (h = t.sent()), [3, 10];
            case 9:
              throw (
                ((l = t.sent()),
                SL.create('fetch-client-parse', {
                  originalErrorMessage: l.message
                }))
              );
            case 10:
              (u = h.entries), (c = h.state), (t.label = 11);
            case 11:
              if (
                ('INSTANCE_STATE_UNSPECIFIED' === c
                  ? (s = 500)
                  : 'NO_CHANGE' === c
                  ? (s = 304)
                  : ('NO_TEMPLATE' !== c && 'EMPTY_CONFIG' !== c) || (u = {}),
                304 !== s && 200 !== s)
              )
                throw SL.create('fetch-status', { httpStatus: s });
              return [2, { status: s, eTag: a, config: u }];
          }
          var e;
        });
      });
    }),
    NL);
  function NL(t, e, n, r, i, o) {
    (this.firebaseInstallations = t),
      (this.sdkVersion = e),
      (this.namespace = n),
      (this.projectId = r),
      (this.apiKey = i),
      (this.appId = o);
  }
  var AL =
    ((kL.prototype.addEventListener = function (t) {
      this.listeners.push(t);
    }),
    (kL.prototype.abort = function () {
      this.listeners.forEach(function (t) {
        return t();
      });
    }),
    kL);
  function kL() {
    this.listeners = [];
  }
  var RL = ['1', 'true', 't', 'yes', 'y', 'on'],
    OL =
      ((PL.prototype.asString = function () {
        return this._value;
      }),
      (PL.prototype.asBoolean = function () {
        return (
          'static' !== this._source &&
          0 <= RL.indexOf(this._value.toLowerCase())
        );
      }),
      (PL.prototype.asNumber = function () {
        if ('static' === this._source) return 0;
        var t = Number(this._value);
        return isNaN(t) && (t = 0), t;
      }),
      (PL.prototype.getSource = function () {
        return this._source;
      }),
      PL);
  function PL(t, e) {
    void 0 === e && (e = ''), (this._source = t), (this._value = e);
  }
  var DL =
    ((xL.prototype.setLogLevel = function (t) {
      switch (t) {
        case 'debug':
          this._logger.logLevel = As.DEBUG;
          break;
        case 'silent':
          this._logger.logLevel = As.SILENT;
          break;
        default:
          this._logger.logLevel = As.ERROR;
      }
    }),
    Object.defineProperty(xL.prototype, 'fetchTimeMillis', {
      get: function () {
        return this._storageCache.getLastSuccessfulFetchTimestampMillis() || -1;
      },
      enumerable: !1,
      configurable: !0
    }),
    Object.defineProperty(xL.prototype, 'lastFetchStatus', {
      get: function () {
        return this._storageCache.getLastFetchStatus() || 'no-fetch-yet';
      },
      enumerable: !1,
      configurable: !0
    }),
    (xL.prototype.activate = function () {
      return _o(this, void 0, void 0, function () {
        var e, n;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return [
                4,
                Promise.all([
                  this._storage.getLastSuccessfulFetchResponse(),
                  this._storage.getActiveConfigEtag()
                ])
              ];
            case 1:
              return (
                (n = t.sent()),
                (e = n[0]),
                (n = n[1]),
                e && e.config && e.eTag && e.eTag !== n
                  ? [
                      4,
                      Promise.all([
                        this._storageCache.setActiveConfig(e.config),
                        this._storage.setActiveConfigEtag(e.eTag)
                      ])
                    ]
                  : [2, !1]
              );
            case 2:
              return t.sent(), [2, !0];
          }
        });
      });
    }),
    (xL.prototype.ensureInitialized = function () {
      var t = this;
      return (
        this._initializePromise ||
          (this._initializePromise = this._storageCache
            .loadFromStorage()
            .then(function () {
              t._isInitializationComplete = !0;
            })),
        this._initializePromise
      );
    }),
    (xL.prototype.fetch = function () {
      return _o(this, void 0, void 0, function () {
        var r,
          i,
          o,
          s = this;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              (r = new AL()),
                setTimeout(function () {
                  return _o(s, void 0, void 0, function () {
                    return wo(this, function (t) {
                      return r.abort(), [2];
                    });
                  });
                }, this.settings.fetchTimeoutMillis),
                (t.label = 1);
            case 1:
              return (
                t.trys.push([1, 4, , 6]),
                [
                  4,
                  this._client.fetch({
                    cacheMaxAgeMillis: this.settings.minimumFetchIntervalMillis,
                    signal: r
                  })
                ]
              );
            case 2:
              return (
                t.sent(), [4, this._storageCache.setLastFetchStatus('success')]
              );
            case 3:
              return t.sent(), [3, 6];
            case 4:
              return (
                (i = t.sent()),
                (n = 'fetch-throttle'),
                (o =
                  (e = i) instanceof zo && -1 !== e.code.indexOf(n)
                    ? 'throttle'
                    : 'failure'),
                [4, this._storageCache.setLastFetchStatus(o)]
              );
            case 5:
              throw (t.sent(), i);
            case 6:
              return [2];
          }
          var e, n;
        });
      });
    }),
    (xL.prototype.fetchAndActivate = function () {
      return _o(this, void 0, void 0, function () {
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return [4, this.fetch()];
            case 1:
              return t.sent(), [2, this.activate()];
          }
        });
      });
    }),
    (xL.prototype.getAll = function () {
      var n = this;
      return (function (t, e) {
        void 0 === t && (t = {});
        void 0 === e && (e = {});
        return Object.keys(bo(bo({}, t), e));
      })(this._storageCache.getActiveConfig(), this.defaultConfig).reduce(
        function (t, e) {
          return (t[e] = n.getValue(e)), t;
        },
        {}
      );
    }),
    (xL.prototype.getBoolean = function (t) {
      return this.getValue(t).asBoolean();
    }),
    (xL.prototype.getNumber = function (t) {
      return this.getValue(t).asNumber();
    }),
    (xL.prototype.getString = function (t) {
      return this.getValue(t).asString();
    }),
    (xL.prototype.getValue = function (t) {
      this._isInitializationComplete ||
        this._logger.debug(
          'A value was requested for key "' +
            t +
            '" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.'
        );
      var e = this._storageCache.getActiveConfig();
      return e && void 0 !== e[t]
        ? new OL('remote', e[t])
        : this.defaultConfig && void 0 !== this.defaultConfig[t]
        ? new OL('default', String(this.defaultConfig[t]))
        : (this._logger.debug(
            'Returning static value for key "' +
              t +
              '". Define a default or remote value if this is unintentional.'
          ),
          new OL('static'));
    }),
    xL);
  function xL(t, e, n, r, i) {
    (this.app = t),
      (this._client = e),
      (this._storageCache = n),
      (this._storage = r),
      (this._logger = i),
      (this._isInitializationComplete = !1),
      (this.settings = {
        fetchTimeoutMillis: 6e4,
        minimumFetchIntervalMillis: 432e5
      }),
      (this.defaultConfig = {});
  }
  function LL(t, e) {
    t = t.target.error || void 0;
    return SL.create(e, { originalErrorMessage: t && t.message });
  }
  var ML = 'app_namespace_store',
    FL = 'firebase_remote_config',
    UL = 1;
  var jL =
    ((VL.prototype.getLastFetchStatus = function () {
      return this.get('last_fetch_status');
    }),
    (VL.prototype.setLastFetchStatus = function (t) {
      return this.set('last_fetch_status', t);
    }),
    (VL.prototype.getLastSuccessfulFetchTimestampMillis = function () {
      return this.get('last_successful_fetch_timestamp_millis');
    }),
    (VL.prototype.setLastSuccessfulFetchTimestampMillis = function (t) {
      return this.set('last_successful_fetch_timestamp_millis', t);
    }),
    (VL.prototype.getLastSuccessfulFetchResponse = function () {
      return this.get('last_successful_fetch_response');
    }),
    (VL.prototype.setLastSuccessfulFetchResponse = function (t) {
      return this.set('last_successful_fetch_response', t);
    }),
    (VL.prototype.getActiveConfig = function () {
      return this.get('active_config');
    }),
    (VL.prototype.setActiveConfig = function (t) {
      return this.set('active_config', t);
    }),
    (VL.prototype.getActiveConfigEtag = function () {
      return this.get('active_config_etag');
    }),
    (VL.prototype.setActiveConfigEtag = function (t) {
      return this.set('active_config_etag', t);
    }),
    (VL.prototype.getThrottleMetadata = function () {
      return this.get('throttle_metadata');
    }),
    (VL.prototype.setThrottleMetadata = function (t) {
      return this.set('throttle_metadata', t);
    }),
    (VL.prototype.deleteThrottleMetadata = function () {
      return this.delete('throttle_metadata');
    }),
    (VL.prototype.get = function (a) {
      return _o(this, void 0, void 0, function () {
        var o,
          s = this;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return [4, this.openDbPromise];
            case 1:
              return (
                (o = t.sent()),
                [
                  2,
                  new Promise(function (e, n) {
                    var t = o.transaction([ML], 'readonly').objectStore(ML),
                      r = s.createCompositeKey(a);
                    try {
                      var i = t.get(r);
                      (i.onerror = function (t) {
                        n(LL(t, 'storage-get'));
                      }),
                        (i.onsuccess = function (t) {
                          t = t.target.result;
                          e(t ? t.value : void 0);
                        });
                    } catch (t) {
                      n(
                        SL.create('storage-get', {
                          originalErrorMessage: t && t.message
                        })
                      );
                    }
                  })
                ]
              );
          }
        });
      });
    }),
    (VL.prototype.set = function (a, u) {
      return _o(this, void 0, void 0, function () {
        var o,
          s = this;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return [4, this.openDbPromise];
            case 1:
              return (
                (o = t.sent()),
                [
                  2,
                  new Promise(function (t, e) {
                    var n = o.transaction([ML], 'readwrite').objectStore(ML),
                      r = s.createCompositeKey(a);
                    try {
                      var i = n.put({ compositeKey: r, value: u });
                      (i.onerror = function (t) {
                        e(LL(t, 'storage-set'));
                      }),
                        (i.onsuccess = function () {
                          t();
                        });
                    } catch (t) {
                      e(
                        SL.create('storage-set', {
                          originalErrorMessage: t && t.message
                        })
                      );
                    }
                  })
                ]
              );
          }
        });
      });
    }),
    (VL.prototype.delete = function (a) {
      return _o(this, void 0, void 0, function () {
        var o,
          s = this;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return [4, this.openDbPromise];
            case 1:
              return (
                (o = t.sent()),
                [
                  2,
                  new Promise(function (t, e) {
                    var n = o.transaction([ML], 'readwrite').objectStore(ML),
                      r = s.createCompositeKey(a);
                    try {
                      var i = n.delete(r);
                      (i.onerror = function (t) {
                        e(LL(t, 'storage-delete'));
                      }),
                        (i.onsuccess = function () {
                          t();
                        });
                    } catch (t) {
                      e(
                        SL.create('storage-delete', {
                          originalErrorMessage: t && t.message
                        })
                      );
                    }
                  })
                ]
              );
          }
        });
      });
    }),
    (VL.prototype.createCompositeKey = function (t) {
      return [this.appId, this.appName, this.namespace, t].join();
    }),
    VL);
  function VL(t, e, n, r) {
    void 0 === r &&
      (r = new Promise(function (e, n) {
        var t = indexedDB.open(FL, UL);
        (t.onerror = function (t) {
          n(LL(t, 'storage-open'));
        }),
          (t.onsuccess = function (t) {
            e(t.target.result);
          }),
          (t.onupgradeneeded = function (t) {
            var e = t.target.result;
            0 === t.oldVersion &&
              e.createObjectStore(ML, { keyPath: 'compositeKey' });
          });
      })),
      (this.appId = t),
      (this.appName = e),
      (this.namespace = n),
      (this.openDbPromise = r);
  }
  var qL =
    ((BL.prototype.getLastFetchStatus = function () {
      return this.lastFetchStatus;
    }),
    (BL.prototype.getLastSuccessfulFetchTimestampMillis = function () {
      return this.lastSuccessfulFetchTimestampMillis;
    }),
    (BL.prototype.getActiveConfig = function () {
      return this.activeConfig;
    }),
    (BL.prototype.loadFromStorage = function () {
      return _o(this, void 0, void 0, function () {
        var e, n, r;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return (
                (e = this.storage.getLastFetchStatus()),
                (n = this.storage.getLastSuccessfulFetchTimestampMillis()),
                (r = this.storage.getActiveConfig()),
                [4, e]
              );
            case 1:
              return (e = t.sent()) && (this.lastFetchStatus = e), [4, n];
            case 2:
              return (
                (n = t.sent()) && (this.lastSuccessfulFetchTimestampMillis = n),
                [4, r]
              );
            case 3:
              return (r = t.sent()) && (this.activeConfig = r), [2];
          }
        });
      });
    }),
    (BL.prototype.setLastFetchStatus = function (t) {
      return (this.lastFetchStatus = t), this.storage.setLastFetchStatus(t);
    }),
    (BL.prototype.setLastSuccessfulFetchTimestampMillis = function (t) {
      return (
        (this.lastSuccessfulFetchTimestampMillis = t),
        this.storage.setLastSuccessfulFetchTimestampMillis(t)
      );
    }),
    (BL.prototype.setActiveConfig = function (t) {
      return (this.activeConfig = t), this.storage.setActiveConfig(t);
    }),
    BL);
  function BL(t) {
    this.storage = t;
  }
  var WL =
    ((KL.prototype.fetch = function (n) {
      return _o(this, void 0, void 0, function () {
        var e;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return [4, this.storage.getThrottleMetadata()];
            case 1:
              return (
                (e = t.sent() || {
                  backoffCount: 0,
                  throttleEndTimeMillis: Date.now()
                }),
                [2, this.attemptFetch(n, e)]
              );
          }
        });
      });
    }),
    (KL.prototype.attemptFetch = function (r, t) {
      var s = t.throttleEndTimeMillis,
        a = t.backoffCount;
      return _o(this, void 0, void 0, function () {
        var e, n;
        return wo(this, function (t) {
          switch (t.label) {
            case 0:
              return [
                4,
                ((i = r.signal),
                (o = s),
                new Promise(function (t, e) {
                  var n = Math.max(o - Date.now(), 0),
                    r = setTimeout(t, n);
                  i.addEventListener(function () {
                    clearTimeout(r),
                      e(
                        SL.create('fetch-throttle', {
                          throttleEndTimeMillis: o
                        })
                      );
                  });
                }))
              ];
            case 1:
              t.sent(), (t.label = 2);
            case 2:
              return t.trys.push([2, 5, , 7]), [4, this.client.fetch(r)];
            case 3:
              return (e = t.sent()), [4, this.storage.deleteThrottleMetadata()];
            case 4:
              return t.sent(), [2, e];
            case 5:
              if (
                !(function (t) {
                  if (t instanceof zo && t.customData) {
                    t = Number(t.customData.httpStatus);
                    return 429 === t || 500 === t || 503 === t || 504 === t;
                  }
                })((n = t.sent()))
              )
                throw n;
              return (
                (n = {
                  throttleEndTimeMillis: Date.now() + bs(a),
                  backoffCount: a + 1
                }),
                [4, this.storage.setThrottleMetadata(n)]
              );
            case 6:
              return t.sent(), [2, this.attemptFetch(r, n)];
            case 7:
              return [2];
          }
          var i, o;
        });
      });
    }),
    KL);
  function KL(t, e) {
    (this.client = t), (this.storage = e);
  }
  var HL,
    zL = '@firebase/remote-config';
  return (
    (HL = Jl).INTERNAL.registerComponent(
      new _s(
        'remoteConfig',
        function (t, e) {
          var n = t.getProvider('app').getImmediate(),
            r = t.getProvider('installations').getImmediate();
          if ('undefined' == typeof window)
            throw SL.create('registration-window');
          var i = n.options,
            o = i.projectId,
            s = i.apiKey,
            a = i.appId;
          if (!o) throw SL.create('registration-project-id');
          if (!s) throw SL.create('registration-api-key');
          if (!a) throw SL.create('registration-app-id');
          e = e || 'firebase';
          var u = new jL(a, n.name, e),
            t = new qL(u),
            i = new xs(zL);
          i.logLevel = As.ERROR;
          (a = new CL(r, HL.SDK_VERSION, e, o, s, a)),
            (a = new WL(a, u)),
            (a = new IL(a, u, t, i)),
            (i = new DL(n, a, t, u, i));
          return i.ensureInitialized(), i;
        },
        'PUBLIC'
      ).setMultipleInstances(!0)
    ),
    HL.registerVersion(zL, '0.1.30'),
    console.warn(
      "\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"
    ),
    Jl.registerVersion('firebase', '8.1.1', 'cdn'),
    Jl
  );
});
//# sourceMappingURL=firebase.js.map
