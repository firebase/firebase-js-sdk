Project: /docs/reference/js/_project.yaml
Book: /docs/reference/_book.yaml
page_type: reference

{% comment %}
DO NOT EDIT THIS FILE!
This is generated by the JS SDK team, and any local changes will be
overwritten. Changes should be made in the source code at
https://github.com/firebase/firebase-js-sdk
{% endcomment %}

# Expression class
> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Represents an expression that can be evaluated to a value within the execution of a .

Expressions are the building blocks for creating complex queries and transformations in Firestore pipelines. They can represent:

- \*\*Field references:\*\* Access values from document fields. - \*\*Literals:\*\* Represent constant values (strings, numbers, booleans). - \*\*Function calls:\*\* Apply functions to one or more expressions.

The `Expr` class provides a fluent API for building expressions. You can chain together method calls to create complex expressions.

<b>Signature:</b>

```typescript
export declare abstract class Expression 
```

## Properties

|  Property | Modifiers | Type | Description |
|  --- | --- | --- | --- |
|  [expressionType](./firestore_lite_pipelines.expression.md#expressionexpressiontype) |  | [ExpressionType](./firestore_lite_pipelines.md#expressiontype) | <b><i>(Public Preview)</i></b> |

## Methods

|  Method | Modifiers | Description |
|  --- | --- | --- |
|  [abs()](./firestore_lite_pipelines.expression.md#expressionabs) |  | <b><i>(Public Preview)</i></b> Creates an expression that computes the absolute value of a numeric value.
```typescript
// Compute the absolute value of the 'price' field.
field("price").abs();

```
 A new  representing the absolute value of the numeric value. |
|  [add(second)](./firestore_lite_pipelines.expression.md#expressionadd) |  | <b><i>(Public Preview)</i></b> Creates an expression that adds this expression to another expression.
```typescript
// Add the value of the 'quantity' field and the 'reserve' field.
field("quantity").add(field("reserve"));

```
 |
|  [arrayConcat(secondArray, otherArrays)](./firestore_lite_pipelines.expression.md#expressionarrayconcat) |  | <b><i>(Public Preview)</i></b> Creates an expression that concatenates an array expression with one or more other arrays.
```typescript
// Combine the 'items' array with another array field.
field("items").arrayConcat(field("otherItems"));

```
 |
|  [arrayContains(expression)](./firestore_lite_pipelines.expression.md#expressionarraycontains) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if an array contains a specific element.
```typescript
// Check if the 'sizes' array contains the value from the 'selectedSize' field
field("sizes").arrayContains(field("selectedSize"));

```
 |
|  [arrayContains(value)](./firestore_lite_pipelines.expression.md#expressionarraycontains) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if an array contains a specific value.
```typescript
// Check if the 'colors' array contains "red"
field("colors").arrayContains("red");

```
 |
|  [arrayContainsAll(values)](./firestore_lite_pipelines.expression.md#expressionarraycontainsall) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if an array contains all the specified elements.
```typescript
// Check if the 'tags' array contains both the value in field "tag1" and the literal value "tag2"
field("tags").arrayContainsAll([field("tag1"), "tag2"]);

```
 |
|  [arrayContainsAll(arrayExpression)](./firestore_lite_pipelines.expression.md#expressionarraycontainsall) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if an array contains all the specified elements.
```typescript
// Check if the 'tags' array contains both of the values from field "tag1" and the literal value "tag2"
field("tags").arrayContainsAll(array([field("tag1"), "tag2"]));

```
 |
|  [arrayContainsAny(values)](./firestore_lite_pipelines.expression.md#expressionarraycontainsany) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if an array contains any of the specified elements.
```typescript
// Check if the 'categories' array contains either values from field "cate1" or "cate2"
field("categories").arrayContainsAny([field("cate1"), field("cate2")]);

```
 |
|  [arrayContainsAny(arrayExpression)](./firestore_lite_pipelines.expression.md#expressionarraycontainsany) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if an array contains any of the specified elements.
```typescript
// Check if the 'groups' array contains either the value from the 'userGroup' field
// or the value "guest"
field("groups").arrayContainsAny(array([field("userGroup"), "guest"]));

```
 |
|  [arrayGet(offset)](./firestore_lite_pipelines.expression.md#expressionarrayget) |  | <b><i>(Public Preview)</i></b> Creates an expression that indexes into an array from the beginning or end and returns the element. If the offset exceeds the array length, an error is returned. A negative offset, starts from the end.
```typescript
// Return the value in the 'tags' field array at index `1`.
field('tags').arrayGet(1);

```
 |
|  [arrayGet(offsetExpr)](./firestore_lite_pipelines.expression.md#expressionarrayget) |  | <b><i>(Public Preview)</i></b> Creates an expression that indexes into an array from the beginning or end and returns the element. If the offset exceeds the array length, an error is returned. A negative offset, starts from the end.
```typescript
// Return the value in the tags field array at index specified by field
// 'favoriteTag'.
field('tags').arrayGet(field('favoriteTag'));

```
 |
|  [arrayLength()](./firestore_lite_pipelines.expression.md#expressionarraylength) |  | <b><i>(Public Preview)</i></b> Creates an expression that calculates the length of an array.
```typescript
// Get the number of items in the 'cart' array
field("cart").arrayLength();

```
 A new <code>Expr</code> representing the length of the array. |
|  [arrayReverse()](./firestore_lite_pipelines.expression.md#expressionarrayreverse) |  | <b><i>(Public Preview)</i></b> Creates an expression that reverses an array.
```typescript
// Reverse the value of the 'myArray' field.
field("myArray").arrayReverse();

```
 A new  representing the reversed array. |
|  [arraySum()](./firestore_lite_pipelines.expression.md#expressionarraysum) |  | <b><i>(Public Preview)</i></b> Creates an expression that computes the sum of the elements in an array.
```typescript
// Compute the sum of the elements in the 'scores' field.
field("scores").arraySum();

```
 A new  representing the sum of the elements in the array. |
|  [as(name)](./firestore_lite_pipelines.expression.md#expressionas) |  | <b><i>(Public Preview)</i></b> Assigns an alias to this expression.<!-- -->Aliases are useful for renaming fields in the output of a stage or for giving meaningful names to calculated values.
```typescript
// Calculate the total price and assign it the alias "totalPrice" and add it to the output.
firestore.pipeline().collection("items")
  .addFields(field("price").multiply(field("quantity")).as("totalPrice"));

```
 |
|  [asBoolean()](./firestore_lite_pipelines.expression.md#expressionasboolean) |  | <b><i>(Public Preview)</i></b> Wraps the expression in a \[BooleanExpression\]. A \[BooleanExpression\] representing the same expression. |
|  [ascending()](./firestore_lite_pipelines.expression.md#expressionascending) |  | <b><i>(Public Preview)</i></b> Creates an  that sorts documents in ascending order based on this expression.
```typescript
// Sort documents by the 'name' field in ascending order
pipeline().collection("users")
  .sort(field("name").ascending());

```
 A new <code>Ordering</code> for ascending sorting. |
|  [average()](./firestore_lite_pipelines.expression.md#expressionaverage) |  | <b><i>(Public Preview)</i></b> Creates an aggregation that calculates the average (mean) of a numeric field across multiple stage inputs.
```typescript
// Calculate the average age of users
field("age").average().as("averageAge");

```
 A new <code>AggregateFunction</code> representing the 'average' aggregation. |
|  [byteLength()](./firestore_lite_pipelines.expression.md#expressionbytelength) |  | <b><i>(Public Preview)</i></b> Creates an expression that calculates the length of this string expression in bytes.
```typescript
// Calculate the length of the 'myString' field in bytes.
field("myString").byteLength();

```
 A new  representing the length of the string in bytes. |
|  [ceil()](./firestore_lite_pipelines.expression.md#expressionceil) |  | <b><i>(Public Preview)</i></b> Creates an expression that computes the ceiling of a numeric value.
```typescript
// Compute the ceiling of the 'price' field.
field("price").ceil();

```
 A new  representing the ceiling of the numeric value. |
|  [charLength()](./firestore_lite_pipelines.expression.md#expressioncharlength) |  | <b><i>(Public Preview)</i></b> Creates an expression that calculates the character length of a string in UTF-8.
```typescript
// Get the character length of the 'name' field in its UTF-8 form.
field("name").charLength();

```
 A new <code>Expr</code> representing the length of the string. |
|  [collectionId()](./firestore_lite_pipelines.expression.md#expressioncollectionid) |  | <b><i>(Public Preview)</i></b> Creates an expression that returns the collection ID from a path.
```typescript
// Get the collection ID from a path.
field("__path__").collectionId();

```
 A new  representing the collectionId operation. |
|  [concat(second, others)](./firestore_lite_pipelines.expression.md#expressionconcat) |  | <b><i>(Public Preview)</i></b> Creates an expression that concatenates expression results together.
```typescript
// Combine the 'firstName', ' ', and 'lastName' fields into a single value.
field("firstName").concat(constant(" "), field("lastName"));

```
 |
|  [cosineDistance(vectorExpression)](./firestore_lite_pipelines.expression.md#expressioncosinedistance) |  | <b><i>(Public Preview)</i></b> Calculates the cosine distance between two vectors.
```typescript
// Calculate the cosine distance between the 'userVector' field and the 'itemVector' field
field("userVector").cosineDistance(field("itemVector"));

```
 |
|  [cosineDistance(vector)](./firestore_lite_pipelines.expression.md#expressioncosinedistance) |  | <b><i>(Public Preview)</i></b> Calculates the Cosine distance between two vectors.
```typescript
// Calculate the Cosine distance between the 'location' field and a target location
field("location").cosineDistance(new VectorValue([37.7749, -122.4194]));

```
 |
|  [count()](./firestore_lite_pipelines.expression.md#expressioncount) |  | <b><i>(Public Preview)</i></b> Creates an aggregation that counts the number of stage inputs with valid evaluations of the expression or field.
```typescript
// Count the total number of products
field("productId").count().as("totalProducts");

```
 A new <code>AggregateFunction</code> representing the 'count' aggregation. |
|  [countDistinct()](./firestore_lite_pipelines.expression.md#expressioncountdistinct) |  | <b><i>(Public Preview)</i></b> Creates an aggregation that counts the number of distinct values of the expression or field.
```typescript
// Count the distinct number of products
field("productId").countDistinct().as("distinctProducts");

```
 A new <code>AggregateFunction</code> representing the 'count\_distinct' aggregation. |
|  [descending()](./firestore_lite_pipelines.expression.md#expressiondescending) |  | <b><i>(Public Preview)</i></b> Creates an  that sorts documents in descending order based on this expression.
```typescript
// Sort documents by the 'createdAt' field in descending order
firestore.pipeline().collection("users")
  .sort(field("createdAt").descending());

```
 A new <code>Ordering</code> for descending sorting. |
|  [divide(divisor)](./firestore_lite_pipelines.expression.md#expressiondivide) |  | <b><i>(Public Preview)</i></b> Creates an expression that divides this expression by another expression.
```typescript
// Divide the 'total' field by the 'count' field
field("total").divide(field("count"));

```
 |
|  [divide(divisor)](./firestore_lite_pipelines.expression.md#expressiondivide) |  | <b><i>(Public Preview)</i></b> Creates an expression that divides this expression by a constant value.
```typescript
// Divide the 'value' field by 10
field("value").divide(10);

```
 |
|  [documentId()](./firestore_lite_pipelines.expression.md#expressiondocumentid) |  | <b><i>(Public Preview)</i></b> Creates an expression that returns the document ID from a path.
```typescript
// Get the document ID from a path.
field("__path__").documentId();

```
 A new  representing the documentId operation. |
|  [dotProduct(vectorExpression)](./firestore_lite_pipelines.expression.md#expressiondotproduct) |  | <b><i>(Public Preview)</i></b> Calculates the dot product between two vectors.
```typescript
// Calculate the dot product between a feature vector and a target vector
field("features").dotProduct([0.5, 0.8, 0.2]);

```
 |
|  [dotProduct(vector)](./firestore_lite_pipelines.expression.md#expressiondotproduct) |  | <b><i>(Public Preview)</i></b> Calculates the dot product between two vectors.
```typescript
// Calculate the dot product between a feature vector and a target vector
field("features").dotProduct(new VectorValue([0.5, 0.8, 0.2]));

```
 |
|  [endsWith(suffix)](./firestore_lite_pipelines.expression.md#expressionendswith) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if a string ends with a given postfix.
```typescript
// Check if the 'filename' field ends with ".txt"
field("filename").endsWith(".txt");

```
 |
|  [endsWith(suffix)](./firestore_lite_pipelines.expression.md#expressionendswith) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if a string ends with a given postfix (represented as an expression).
```typescript
// Check if the 'url' field ends with the value of the 'extension' field
field("url").endsWith(field("extension"));

```
 |
|  [equal(expression)](./firestore_lite_pipelines.expression.md#expressionequal) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is equal to another expression.
```typescript
// Check if the 'age' field is equal to 21
field("age").equal(21);

```
 |
|  [equal(value)](./firestore_lite_pipelines.expression.md#expressionequal) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is equal to a constant value.
```typescript
// Check if the 'city' field is equal to "London"
field("city").equal("London");

```
 |
|  [equalAny(values)](./firestore_lite_pipelines.expression.md#expressionequalany) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is equal to any of the provided values or expressions.
```typescript
// Check if the 'category' field is either "Electronics" or value of field 'primaryType'
field("category").equalAny("Electronics", field("primaryType"));

```
 |
|  [equalAny(arrayExpression)](./firestore_lite_pipelines.expression.md#expressionequalany) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is equal to any of the provided values or expressions.
```typescript
// Check if the 'category' field is either "Electronics" or value of field 'primaryType'
field("category").equalAny(array(["Electronics", field("primaryType")]));

```
 |
|  [euclideanDistance(vectorExpression)](./firestore_lite_pipelines.expression.md#expressioneuclideandistance) |  | <b><i>(Public Preview)</i></b> Calculates the Euclidean distance between two vectors.
```typescript
// Calculate the Euclidean distance between the 'location' field and a target location
field("location").euclideanDistance([37.7749, -122.4194]);

```
 |
|  [euclideanDistance(vector)](./firestore_lite_pipelines.expression.md#expressioneuclideandistance) |  | <b><i>(Public Preview)</i></b> Calculates the Euclidean distance between two vectors.
```typescript
// Calculate the Euclidean distance between the 'location' field and a target location
field("location").euclideanDistance(new VectorValue([37.7749, -122.4194]));

```
 |
|  [exists()](./firestore_lite_pipelines.expression.md#expressionexists) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if a field exists in the document.
```typescript
// Check if the document has a field named "phoneNumber"
field("phoneNumber").exists();

```
 A new <code>Expr</code> representing the 'exists' check. |
|  [exp()](./firestore_lite_pipelines.expression.md#expressionexp) |  | <b><i>(Public Preview)</i></b> Creates an expression that computes e to the power of this expression.
```typescript
// Compute e to the power of the 'value' field.
field("value").exp();

```
 A new  representing the exp of the numeric value. |
|  [floor()](./firestore_lite_pipelines.expression.md#expressionfloor) |  | <b><i>(Public Preview)</i></b> Creates an expression that computes the floor of a numeric value.
```typescript
// Compute the floor of the 'price' field.
field("price").floor();

```
 A new  representing the floor of the numeric value. |
|  [greaterThan(expression)](./firestore_lite_pipelines.expression.md#expressiongreaterthan) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is greater than another expression.
```typescript
// Check if the 'age' field is greater than the 'limit' field
field("age").greaterThan(field("limit"));

```
 |
|  [greaterThan(value)](./firestore_lite_pipelines.expression.md#expressiongreaterthan) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is greater than a constant value.
```typescript
// Check if the 'price' field is greater than 100
field("price").greaterThan(100);

```
 |
|  [greaterThanOrEqual(expression)](./firestore_lite_pipelines.expression.md#expressiongreaterthanorequal) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is greater than or equal to another expression.
```typescript
// Check if the 'quantity' field is greater than or equal to field 'requirement' plus 1
field("quantity").greaterThanOrEqual(field('requirement').add(1));

```
 |
|  [greaterThanOrEqual(value)](./firestore_lite_pipelines.expression.md#expressiongreaterthanorequal) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is greater than or equal to a constant value.
```typescript
// Check if the 'score' field is greater than or equal to 80
field("score").greaterThanOrEqual(80);

```
 |
|  [ifAbsent(elseValue)](./firestore_lite_pipelines.expression.md#expressionifabsent) |  | <b><i>(Public Preview)</i></b> Creates an expression that returns the <code>elseValue</code> argument if this expression results in an absent value, else return the result of the this expression evaluation.
```typescript
// Returns the value of the optional field 'optional_field', or returns 'default_value'
// if the field is absent.
field("optional_field").ifAbsent("default_value")

```
 |
|  [ifAbsent(elseExpression)](./firestore_lite_pipelines.expression.md#expressionifabsent) |  | <b><i>(Public Preview)</i></b> Creates an expression that returns the <code>elseValue</code> argument if this expression results in an absent value, else return the result of this expression evaluation.
```typescript
// Returns the value of the optional field 'optional_field', or if that is
// absent, then returns the value of the field `
field("optional_field").ifAbsent(field('default_field'))

```
 |
|  [ifError(catchExpr)](./firestore_lite_pipelines.expression.md#expressioniferror) |  | <b><i>(Public Preview)</i></b> Creates an expression that returns the result of the <code>catchExpr</code> argument if there is an error, else return the result of this expression.
```typescript
// Returns the first item in the title field arrays, or returns
// the entire title field if the array is empty or the field is another type.
field("title").arrayGet(0).ifError(field("title"));

```
 |
|  [ifError(catchValue)](./firestore_lite_pipelines.expression.md#expressioniferror) |  | <b><i>(Public Preview)</i></b> Creates an expression that returns the <code>catch</code> argument if there is an error, else return the result of this expression.
```typescript
// Returns the first item in the title field arrays, or returns
// "Default Title"
field("title").arrayGet(0).ifError("Default Title");

```
 |
|  [isAbsent()](./firestore_lite_pipelines.expression.md#expressionisabsent) |  | <b><i>(Public Preview)</i></b> Creates an expression that returns <code>true</code> if the result of this expression is absent. Otherwise, returns <code>false</code> even if the value is <code>null</code>.
```typescript
// Check if the field `value` is absent.
field("value").isAbsent();

```
 A new  representing the 'isAbsent' check. |
|  [isError()](./firestore_lite_pipelines.expression.md#expressioniserror) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if a given expression produces an error.
```typescript
// Check if the result of a calculation is an error
field("title").arrayContains(1).isError();

```
 A new  representing the 'isError' check. |
|  [join(delimiterExpression)](./firestore_lite_pipelines.expression.md#expressionjoin) |  | <b><i>(Public Preview)</i></b> Creates an expression that joins the elements of an array into a string.
```typescript
// Join the elements of the 'tags' field with the delimiter from the 'separator' field.
field("tags").join(field("separator"))

```
 |
|  [join(delimiter)](./firestore_lite_pipelines.expression.md#expressionjoin) |  | <b><i>(Public Preview)</i></b> Creates an expression that joins the elements of an array field into a string.
```typescript
// Join the elements of the 'tags' field with a comma and space.
field("tags").join(", ")

```
 |
|  [length()](./firestore_lite_pipelines.expression.md#expressionlength) |  | <b><i>(Public Preview)</i></b> Creates an expression that calculates the length of a string, array, map, vector, or bytes.
```typescript
// Get the length of the 'name' field.
field("name").length();

// Get the number of items in the 'cart' array.
field("cart").length();

```
 A new <code>Expr</code> representing the length of the string, array, map, vector, or bytes. |
|  [lessThan(experession)](./firestore_lite_pipelines.expression.md#expressionlessthan) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is less than another expression.
```typescript
// Check if the 'age' field is less than 'limit'
field("age").lessThan(field('limit'));

```
 |
|  [lessThan(value)](./firestore_lite_pipelines.expression.md#expressionlessthan) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is less than a constant value.
```typescript
// Check if the 'price' field is less than 50
field("price").lessThan(50);

```
 |
|  [lessThanOrEqual(expression)](./firestore_lite_pipelines.expression.md#expressionlessthanorequal) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is less than or equal to another expression.
```typescript
// Check if the 'quantity' field is less than or equal to 20
field("quantity").lessThan(constant(20));

```
 |
|  [lessThanOrEqual(value)](./firestore_lite_pipelines.expression.md#expressionlessthanorequal) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is less than or equal to a constant value.
```typescript
// Check if the 'score' field is less than or equal to 70
field("score").lessThan(70);

```
 |
|  [like(pattern)](./firestore_lite_pipelines.expression.md#expressionlike) |  | <b><i>(Public Preview)</i></b> Creates an expression that performs a case-sensitive string comparison.
```typescript
// Check if the 'title' field contains the word "guide" (case-sensitive)
field("title").like("%guide%");

```
 |
|  [like(pattern)](./firestore_lite_pipelines.expression.md#expressionlike) |  | <b><i>(Public Preview)</i></b> Creates an expression that performs a case-sensitive string comparison.
```typescript
// Check if the 'title' field contains the word "guide" (case-sensitive)
field("title").like("%guide%");

```
 |
|  [ln()](./firestore_lite_pipelines.expression.md#expressionln) |  | <b><i>(Public Preview)</i></b> Creates an expression that computes the natural logarithm of a numeric value.
```typescript
// Compute the natural logarithm of the 'value' field.
field("value").ln();

```
 A new  representing the natural logarithm of the numeric value. |
|  [log10()](./firestore_lite_pipelines.expression.md#expressionlog10) |  | <b><i>(Public Preview)</i></b> Creates an expression that computes the base-10 logarithm of a numeric value.
```typescript
// Compute the base-10 logarithm of the 'value' field.
field("value").log10();

```
 A new  representing the base-10 logarithm of the numeric value. |
|  [logicalMaximum(second, others)](./firestore_lite_pipelines.expression.md#expressionlogicalmaximum) |  | <b><i>(Public Preview)</i></b> Creates an expression that returns the larger value between this expression and another expression, based on Firestore's value type ordering.
```typescript
// Returns the larger value between the 'timestamp' field and the current timestamp.
field("timestamp").logicalMaximum(Function.currentTimestamp());

```
 |
|  [logicalMinimum(second, others)](./firestore_lite_pipelines.expression.md#expressionlogicalminimum) |  | <b><i>(Public Preview)</i></b> Creates an expression that returns the smaller value between this expression and another expression, based on Firestore's value type ordering.
```typescript
// Returns the smaller value between the 'timestamp' field and the current timestamp.
field("timestamp").logicalMinimum(Function.currentTimestamp());

```
 |
|  [mapGet(subfield)](./firestore_lite_pipelines.expression.md#expressionmapget) |  | <b><i>(Public Preview)</i></b> Accesses a value from a map (object) field using the provided key.
```typescript
// Get the 'city' value from the 'address' map field
field("address").mapGet("city");

```
 |
|  [mapMerge(secondMap, otherMaps)](./firestore_lite_pipelines.expression.md#expressionmapmerge) |  | <b><i>(Public Preview)</i></b> Creates an expression that merges multiple map values.
```
// Merges the map in the settings field with, a map literal, and a map in
// that is conditionally returned by another expression
field('settings').mapMerge({ enabled: true }, conditional(field('isAdmin'), { admin: true}, {})

```
 |
|  [mapRemove(key)](./firestore_lite_pipelines.expression.md#expressionmapremove) |  | <b><i>(Public Preview)</i></b> Creates an expression that removes a key from the map produced by evaluating this expression.
```
// Removes the key 'baz' from the input map.
map({foo: 'bar', baz: true}).mapRemove('baz');

```
 |
|  [mapRemove(keyExpr)](./firestore_lite_pipelines.expression.md#expressionmapremove) |  | <b><i>(Public Preview)</i></b> Creates an expression that removes a key from the map produced by evaluating this expression.
```
// Removes the key 'baz' from the input map.
map({foo: 'bar', baz: true}).mapRemove(constant('baz'));

```
 |
|  [maximum()](./firestore_lite_pipelines.expression.md#expressionmaximum) |  | <b><i>(Public Preview)</i></b> Creates an aggregation that finds the maximum value of a field across multiple stage inputs.
```typescript
// Find the highest score in a leaderboard
field("score").maximum().as("highestScore");

```
 A new <code>AggregateFunction</code> representing the 'maximum' aggregation. |
|  [minimum()](./firestore_lite_pipelines.expression.md#expressionminimum) |  | <b><i>(Public Preview)</i></b> Creates an aggregation that finds the minimum value of a field across multiple stage inputs.
```typescript
// Find the lowest price of all products
field("price").minimum().as("lowestPrice");

```
 A new <code>AggregateFunction</code> representing the 'minimum' aggregation. |
|  [mod(expression)](./firestore_lite_pipelines.expression.md#expressionmod) |  | <b><i>(Public Preview)</i></b> Creates an expression that calculates the modulo (remainder) of dividing this expression by another expression.
```typescript
// Calculate the remainder of dividing the 'value' field by the 'divisor' field
field("value").mod(field("divisor"));

```
 |
|  [mod(value)](./firestore_lite_pipelines.expression.md#expressionmod) |  | <b><i>(Public Preview)</i></b> Creates an expression that calculates the modulo (remainder) of dividing this expression by a constant value.
```typescript
// Calculate the remainder of dividing the 'value' field by 10
field("value").mod(10);

```
 |
|  [multiply(second)](./firestore_lite_pipelines.expression.md#expressionmultiply) |  | <b><i>(Public Preview)</i></b> Creates an expression that multiplies this expression by another expression.
```typescript
// Multiply the 'quantity' field by the 'price' field
field("quantity").multiply(field("price"));

```
 |
|  [notEqual(expression)](./firestore_lite_pipelines.expression.md#expressionnotequal) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is not equal to another expression.
```typescript
// Check if the 'status' field is not equal to "completed"
field("status").notEqual("completed");

```
 |
|  [notEqual(value)](./firestore_lite_pipelines.expression.md#expressionnotequal) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is not equal to a constant value.
```typescript
// Check if the 'country' field is not equal to "USA"
field("country").notEqual("USA");

```
 |
|  [notEqualAny(values)](./firestore_lite_pipelines.expression.md#expressionnotequalany) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is not equal to any of the provided values or expressions.
```typescript
// Check if the 'status' field is neither "pending" nor the value of 'rejectedStatus'
field("status").notEqualAny(["pending", field("rejectedStatus")]);

```
 |
|  [notEqualAny(arrayExpression)](./firestore_lite_pipelines.expression.md#expressionnotequalany) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if this expression is not equal to any of the values in the evaluated expression.
```typescript
// Check if the 'status' field is not equal to any value in the field 'rejectedStatuses'
field("status").notEqualAny(field('rejectedStatuses'));

```
 |
|  [pow(exponent)](./firestore_lite_pipelines.expression.md#expressionpow) |  | <b><i>(Public Preview)</i></b> Creates an expression that returns the value of this expression raised to the power of another expression.
```typescript
// Raise the value of the 'base' field to the power of the 'exponent' field.
field("base").pow(field("exponent"));

```
 |
|  [pow(exponent)](./firestore_lite_pipelines.expression.md#expressionpow) |  | <b><i>(Public Preview)</i></b> Creates an expression that returns the value of this expression raised to the power of a constant value.
```typescript
// Raise the value of the 'base' field to the power of 2.
field("base").pow(2);

```
 |
|  [regexContains(pattern)](./firestore_lite_pipelines.expression.md#expressionregexcontains) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if a string contains a specified regular expression as a substring.
```typescript
// Check if the 'description' field contains "example" (case-insensitive)
field("description").regexContains("(?i)example");

```
 |
|  [regexContains(pattern)](./firestore_lite_pipelines.expression.md#expressionregexcontains) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if a string contains a specified regular expression as a substring.
```typescript
// Check if the 'description' field contains the regular expression stored in field 'regex'
field("description").regexContains(field("regex"));

```
 |
|  [regexMatch(pattern)](./firestore_lite_pipelines.expression.md#expressionregexmatch) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if a string matches a specified regular expression.
```typescript
// Check if the 'email' field matches a valid email pattern
field("email").regexMatch("[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}");

```
 |
|  [regexMatch(pattern)](./firestore_lite_pipelines.expression.md#expressionregexmatch) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if a string matches a specified regular expression.
```typescript
// Check if the 'email' field matches a regular expression stored in field 'regex'
field("email").regexMatch(field("regex"));

```
 |
|  [reverse()](./firestore_lite_pipelines.expression.md#expressionreverse) |  | <b><i>(Public Preview)</i></b> Creates an expression that reverses this string expression.
```typescript
// Reverse the value of the 'myString' field.
field("myString").reverse();

```
 A new  representing the reversed string. |
|  [round()](./firestore_lite_pipelines.expression.md#expressionround) |  | <b><i>(Public Preview)</i></b> Creates an expression that rounds a numeric value to the nearest whole number.
```typescript
// Round the value of the 'price' field.
field("price").round();

```
 A new <code>Expr</code> representing the rounded value. |
|  [round(decimalPlaces)](./firestore_lite_pipelines.expression.md#expressionround) |  | <b><i>(Public Preview)</i></b> Creates an expression that rounds a numeric value to the specified number of decimal places.
```typescript
// Round the value of the 'price' field to two decimal places.
field("price").round(2);

```
 |
|  [round(decimalPlaces)](./firestore_lite_pipelines.expression.md#expressionround) |  | <b><i>(Public Preview)</i></b> Creates an expression that rounds a numeric value to the specified number of decimal places.
```typescript
// Round the value of the 'price' field to two decimal places.
field("price").round(constant(2));

```
 |
|  [split(delimiter)](./firestore_lite_pipelines.expression.md#expressionsplit) |  | <b><i>(Public Preview)</i></b> Creates an expression that splits the result of this expression into an array of substrings based on the provided delimiter. |
|  [split(delimiter)](./firestore_lite_pipelines.expression.md#expressionsplit) |  | <b><i>(Public Preview)</i></b> Creates an expression that splits the result of this expression into an array of substrings based on the provided delimiter. |
|  [sqrt()](./firestore_lite_pipelines.expression.md#expressionsqrt) |  | <b><i>(Public Preview)</i></b> Creates an expression that computes the square root of a numeric value.
```typescript
// Compute the square root of the 'value' field.
field("value").sqrt();

```
 A new  representing the square root of the numeric value. |
|  [startsWith(prefix)](./firestore_lite_pipelines.expression.md#expressionstartswith) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if a string starts with a given prefix.
```typescript
// Check if the 'name' field starts with "Mr."
field("name").startsWith("Mr.");

```
 |
|  [startsWith(prefix)](./firestore_lite_pipelines.expression.md#expressionstartswith) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if a string starts with a given prefix (represented as an expression).
```typescript
// Check if the 'fullName' field starts with the value of the 'firstName' field
field("fullName").startsWith(field("firstName"));

```
 |
|  [stringConcat(secondString, otherStrings)](./firestore_lite_pipelines.expression.md#expressionstringconcat) |  | <b><i>(Public Preview)</i></b> Creates an expression that concatenates string expressions together.
```typescript
// Combine the 'firstName', " ", and 'lastName' fields into a single string
field("firstName").stringConcat(constant(" "), field("lastName"));

```
 |
|  [stringContains(substring)](./firestore_lite_pipelines.expression.md#expressionstringcontains) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if a string contains a specified substring.
```typescript
// Check if the 'description' field contains "example".
field("description").stringContains("example");

```
 |
|  [stringContains(expr)](./firestore_lite_pipelines.expression.md#expressionstringcontains) |  | <b><i>(Public Preview)</i></b> Creates an expression that checks if a string contains the string represented by another expression.
```typescript
// Check if the 'description' field contains the value of the 'keyword' field.
field("description").stringContains(field("keyword"));

```
 |
|  [stringReverse()](./firestore_lite_pipelines.expression.md#expressionstringreverse) |  | <b><i>(Public Preview)</i></b> Creates an expression that reverses a string.
```typescript
// Reverse the value of the 'myString' field.
field("myString").stringReverse();

```
 A new  representing the reversed string. |
|  [substring(position, length)](./firestore_lite_pipelines.expression.md#expressionsubstring) |  | <b><i>(Public Preview)</i></b> Creates an expression that returns a substring of the results of this expression. |
|  [substring(position, length)](./firestore_lite_pipelines.expression.md#expressionsubstring) |  | <b><i>(Public Preview)</i></b> Creates an expression that returns a substring of the results of this expression. |
|  [subtract(subtrahend)](./firestore_lite_pipelines.expression.md#expressionsubtract) |  | <b><i>(Public Preview)</i></b> Creates an expression that subtracts another expression from this expression.
```typescript
// Subtract the 'discount' field from the 'price' field
field("price").subtract(field("discount"));

```
 |
|  [subtract(subtrahend)](./firestore_lite_pipelines.expression.md#expressionsubtract) |  | <b><i>(Public Preview)</i></b> Creates an expression that subtracts a constant value from this expression.
```typescript
// Subtract 20 from the value of the 'total' field
field("total").subtract(20);

```
 |
|  [sum()](./firestore_lite_pipelines.expression.md#expressionsum) |  | <b><i>(Public Preview)</i></b> Creates an aggregation that calculates the sum of a numeric field across multiple stage inputs.
```typescript
// Calculate the total revenue from a set of orders
field("orderAmount").sum().as("totalRevenue");

```
 A new <code>AggregateFunction</code> representing the 'sum' aggregation. |
|  [timestampAdd(unit, amount)](./firestore_lite_pipelines.expression.md#expressiontimestampadd) |  | <b><i>(Public Preview)</i></b> Creates an expression that adds a specified amount of time to this timestamp expression.
```typescript
// Add some duration determined by field 'unit' and 'amount' to the 'timestamp' field.
field("timestamp").timestampAdd(field("unit"), field("amount"));

```
 |
|  [timestampAdd(unit, amount)](./firestore_lite_pipelines.expression.md#expressiontimestampadd) |  | <b><i>(Public Preview)</i></b> Creates an expression that adds a specified amount of time to this timestamp expression.
```typescript
// Add 1 day to the 'timestamp' field.
field("timestamp").timestampAdd("day", 1);

```
 |
|  [timestampSubtract(unit, amount)](./firestore_lite_pipelines.expression.md#expressiontimestampsubtract) |  | <b><i>(Public Preview)</i></b> Creates an expression that subtracts a specified amount of time from this timestamp expression.
```typescript
// Subtract some duration determined by field 'unit' and 'amount' from the 'timestamp' field.
field("timestamp").timestampSubtract(field("unit"), field("amount"));

```
 |
|  [timestampSubtract(unit, amount)](./firestore_lite_pipelines.expression.md#expressiontimestampsubtract) |  | <b><i>(Public Preview)</i></b> Creates an expression that subtracts a specified amount of time from this timestamp expression.
```typescript
// Subtract 1 day from the 'timestamp' field.
field("timestamp").timestampSubtract("day", 1);

```
 |
|  [timestampToUnixMicros()](./firestore_lite_pipelines.expression.md#expressiontimestamptounixmicros) |  | <b><i>(Public Preview)</i></b> Creates an expression that converts this timestamp expression to the number of microseconds since the Unix epoch (1970-01-01 00:00:00 UTC).
```typescript
// Convert the 'timestamp' field to microseconds since epoch.
field("timestamp").timestampToUnixMicros();

```
 A new  representing the number of microseconds since epoch. |
|  [timestampToUnixMillis()](./firestore_lite_pipelines.expression.md#expressiontimestamptounixmillis) |  | <b><i>(Public Preview)</i></b> Creates an expression that converts this timestamp expression to the number of milliseconds since the Unix epoch (1970-01-01 00:00:00 UTC).
```typescript
// Convert the 'timestamp' field to milliseconds since epoch.
field("timestamp").timestampToUnixMillis();

```
 A new  representing the number of milliseconds since epoch. |
|  [timestampToUnixSeconds()](./firestore_lite_pipelines.expression.md#expressiontimestamptounixseconds) |  | <b><i>(Public Preview)</i></b> Creates an expression that converts this timestamp expression to the number of seconds since the Unix epoch (1970-01-01 00:00:00 UTC).
```typescript
// Convert the 'timestamp' field to seconds since epoch.
field("timestamp").timestampToUnixSeconds();

```
 A new  representing the number of seconds since epoch. |
|  [timestampTruncate(granularity, timezone)](./firestore_lite_pipelines.expression.md#expressiontimestamptruncate) |  | <b><i>(Public Preview)</i></b> Creates an expression that truncates a timestamp to a specified granularity. |
|  [timestampTruncate(granularity, timezone)](./firestore_lite_pipelines.expression.md#expressiontimestamptruncate) |  | <b><i>(Public Preview)</i></b> Creates an expression that truncates a timestamp to a specified granularity. |
|  [toLower()](./firestore_lite_pipelines.expression.md#expressiontolower) |  | <b><i>(Public Preview)</i></b> Creates an expression that converts a string to lowercase.
```typescript
// Convert the 'name' field to lowercase
field("name").toLower();

```
 A new <code>Expr</code> representing the lowercase string. |
|  [toUpper()](./firestore_lite_pipelines.expression.md#expressiontoupper) |  | <b><i>(Public Preview)</i></b> Creates an expression that converts a string to uppercase.
```typescript
// Convert the 'title' field to uppercase
field("title").toUpper();

```
 A new <code>Expr</code> representing the uppercase string. |
|  [trim(valueToTrim)](./firestore_lite_pipelines.expression.md#expressiontrim) |  | <b><i>(Public Preview)</i></b> Creates an expression that removes leading and trailing characters from a string or byte array.
```typescript
// Trim whitespace from the 'userInput' field
field("userInput").trim();

// Trim quotes from the 'userInput' field
field("userInput").trim('"');

```
 |
|  [type()](./firestore_lite_pipelines.expression.md#expressiontype) |  | <b><i>(Public Preview)</i></b> Creates an expression that returns the data type of this expression's result, as a string. |
|  [unixMicrosToTimestamp()](./firestore_lite_pipelines.expression.md#expressionunixmicrostotimestamp) |  | <b><i>(Public Preview)</i></b> Creates an expression that interprets this expression as the number of microseconds since the Unix epoch (1970-01-01 00:00:00 UTC) and returns a timestamp.
```typescript
// Interpret the 'microseconds' field as microseconds since epoch.
field("microseconds").unixMicrosToTimestamp();

```
 A new  representing the timestamp. |
|  [unixMillisToTimestamp()](./firestore_lite_pipelines.expression.md#expressionunixmillistotimestamp) |  | <b><i>(Public Preview)</i></b> Creates an expression that interprets this expression as the number of milliseconds since the Unix epoch (1970-01-01 00:00:00 UTC) and returns a timestamp.
```typescript
// Interpret the 'milliseconds' field as milliseconds since epoch.
field("milliseconds").unixMillisToTimestamp();

```
 A new  representing the timestamp. |
|  [unixSecondsToTimestamp()](./firestore_lite_pipelines.expression.md#expressionunixsecondstotimestamp) |  | <b><i>(Public Preview)</i></b> Creates an expression that interprets this expression as the number of seconds since the Unix epoch (1970-01-01 00:00:00 UTC) and returns a timestamp.
```typescript
// Interpret the 'seconds' field as seconds since epoch.
field("seconds").unixSecondsToTimestamp();

```
 A new  representing the timestamp. |
|  [vectorLength()](./firestore_lite_pipelines.expression.md#expressionvectorlength) |  | <b><i>(Public Preview)</i></b> Creates an expression that calculates the length (number of dimensions) of this Firestore Vector expression.
```typescript
// Get the vector length (dimension) of the field 'embedding'.
field("embedding").vectorLength();

```
 A new  representing the length of the vector. |

## Expression.expressionType

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

<b>Signature:</b>

```typescript
abstract readonly expressionType: ExpressionType;
```

## Expression.abs()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that computes the absolute value of a numeric value.

```typescript
// Compute the absolute value of the 'price' field.
field("price").abs();

```
 A new  representing the absolute value of the numeric value.

<b>Signature:</b>

```typescript
abs(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.add()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that adds this expression to another expression.

```typescript
// Add the value of the 'quantity' field and the 'reserve' field.
field("quantity").add(field("reserve"));

```

<b>Signature:</b>

```typescript
add(second: Expression | unknown): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  second | [Expression](./firestore_lite_pipelines.expression.md#expression_class) \| unknown | The expression or literal to add to this expression. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.arrayConcat()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that concatenates an array expression with one or more other arrays.

```typescript
// Combine the 'items' array with another array field.
field("items").arrayConcat(field("otherItems"));

```

<b>Signature:</b>

```typescript
arrayConcat(secondArray: Expression | unknown[], ...otherArrays: Array<Expression | unknown[]>): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  secondArray | [Expression](./firestore_lite_pipelines.expression.md#expression_class) \| unknown\[\] | Second array expression or array literal to concatenate. |
|  otherArrays | Array&lt;[Expression](./firestore_lite_pipelines.expression.md#expression_class) \| unknown\[\]&gt; | Optional additional array expressions or array literals to concatenate.  A new <code>Expr</code> representing the concatenated array. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.arrayContains()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if an array contains a specific element.

```typescript
// Check if the 'sizes' array contains the value from the 'selectedSize' field
field("sizes").arrayContains(field("selectedSize"));

```

<b>Signature:</b>

```typescript
arrayContains(expression: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  expression | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The element to search for in the array.  A new <code>Expr</code> representing the 'array\_contains' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.arrayContains()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if an array contains a specific value.

```typescript
// Check if the 'colors' array contains "red"
field("colors").arrayContains("red");

```

<b>Signature:</b>

```typescript
arrayContains(value: unknown): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  value | unknown | The element to search for in the array.  A new <code>Expr</code> representing the 'array\_contains' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.arrayContainsAll()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if an array contains all the specified elements.

```typescript
// Check if the 'tags' array contains both the value in field "tag1" and the literal value "tag2"
field("tags").arrayContainsAll([field("tag1"), "tag2"]);

```

<b>Signature:</b>

```typescript
arrayContainsAll(values: Array<Expression | unknown>): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  values | Array&lt;[Expression](./firestore_lite_pipelines.expression.md#expression_class) \| unknown&gt; | The elements to check for in the array.  A new <code>Expr</code> representing the 'array\_contains\_all' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.arrayContainsAll()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if an array contains all the specified elements.

```typescript
// Check if the 'tags' array contains both of the values from field "tag1" and the literal value "tag2"
field("tags").arrayContainsAll(array([field("tag1"), "tag2"]));

```

<b>Signature:</b>

```typescript
arrayContainsAll(arrayExpression: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  arrayExpression | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The elements to check for in the array.  A new <code>Expr</code> representing the 'array\_contains\_all' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.arrayContainsAny()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if an array contains any of the specified elements.

```typescript
// Check if the 'categories' array contains either values from field "cate1" or "cate2"
field("categories").arrayContainsAny([field("cate1"), field("cate2")]);

```

<b>Signature:</b>

```typescript
arrayContainsAny(values: Array<Expression | unknown>): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  values | Array&lt;[Expression](./firestore_lite_pipelines.expression.md#expression_class) \| unknown&gt; | The elements to check for in the array.  A new <code>Expr</code> representing the 'array\_contains\_any' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.arrayContainsAny()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if an array contains any of the specified elements.

```typescript
// Check if the 'groups' array contains either the value from the 'userGroup' field
// or the value "guest"
field("groups").arrayContainsAny(array([field("userGroup"), "guest"]));

```

<b>Signature:</b>

```typescript
arrayContainsAny(arrayExpression: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  arrayExpression | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The elements to check for in the array.  A new <code>Expr</code> representing the 'array\_contains\_any' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.arrayGet()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that indexes into an array from the beginning or end and returns the element. If the offset exceeds the array length, an error is returned. A negative offset, starts from the end.

```typescript
// Return the value in the 'tags' field array at index `1`.
field('tags').arrayGet(1);

```

<b>Signature:</b>

```typescript
arrayGet(offset: number): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  offset | number | The index of the element to return.  A new Expr representing the 'arrayGet' operation. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.arrayGet()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that indexes into an array from the beginning or end and returns the element. If the offset exceeds the array length, an error is returned. A negative offset, starts from the end.

```typescript
// Return the value in the tags field array at index specified by field
// 'favoriteTag'.
field('tags').arrayGet(field('favoriteTag'));

```

<b>Signature:</b>

```typescript
arrayGet(offsetExpr: Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  offsetExpr | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | An Expr evaluating to the index of the element to return.  A new Expr representing the 'arrayGet' operation. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.arrayLength()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that calculates the length of an array.

```typescript
// Get the number of items in the 'cart' array
field("cart").arrayLength();

```
 A new `Expr` representing the length of the array.

<b>Signature:</b>

```typescript
arrayLength(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.arrayReverse()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that reverses an array.

```typescript
// Reverse the value of the 'myArray' field.
field("myArray").arrayReverse();

```
 A new  representing the reversed array.

<b>Signature:</b>

```typescript
arrayReverse(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.arraySum()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that computes the sum of the elements in an array.

```typescript
// Compute the sum of the elements in the 'scores' field.
field("scores").arraySum();

```
 A new  representing the sum of the elements in the array.

<b>Signature:</b>

```typescript
arraySum(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.as()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Assigns an alias to this expression.

Aliases are useful for renaming fields in the output of a stage or for giving meaningful names to calculated values.

```typescript
// Calculate the total price and assign it the alias "totalPrice" and add it to the output.
firestore.pipeline().collection("items")
  .addFields(field("price").multiply(field("quantity")).as("totalPrice"));

```

<b>Signature:</b>

```typescript
as(name: string): AliasedExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  name | string | The alias to assign to this expression.  A new  that wraps this expression and associates it with the provided alias. |

<b>Returns:</b>

[AliasedExpression](./firestore_lite_pipelines.aliasedexpression.md#aliasedexpression_class)

## Expression.asBoolean()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Wraps the expression in a \[BooleanExpression\].

 A \[BooleanExpression\] representing the same expression.

<b>Signature:</b>

```typescript
asBoolean(): BooleanExpression;
```
<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.ascending()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an  that sorts documents in ascending order based on this expression.

```typescript
// Sort documents by the 'name' field in ascending order
pipeline().collection("users")
  .sort(field("name").ascending());

```
 A new `Ordering` for ascending sorting.

<b>Signature:</b>

```typescript
ascending(): Ordering;
```
<b>Returns:</b>

[Ordering](./firestore_lite_pipelines.ordering.md#ordering_class)

## Expression.average()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an aggregation that calculates the average (mean) of a numeric field across multiple stage inputs.

```typescript
// Calculate the average age of users
field("age").average().as("averageAge");

```
 A new `AggregateFunction` representing the 'average' aggregation.

<b>Signature:</b>

```typescript
average(): AggregateFunction;
```
<b>Returns:</b>

[AggregateFunction](./firestore_lite_pipelines.aggregatefunction.md#aggregatefunction_class)

## Expression.byteLength()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that calculates the length of this string expression in bytes.

```typescript
// Calculate the length of the 'myString' field in bytes.
field("myString").byteLength();

```
 A new  representing the length of the string in bytes.

<b>Signature:</b>

```typescript
byteLength(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.ceil()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that computes the ceiling of a numeric value.

```typescript
// Compute the ceiling of the 'price' field.
field("price").ceil();

```
 A new  representing the ceiling of the numeric value.

<b>Signature:</b>

```typescript
ceil(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.charLength()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that calculates the character length of a string in UTF-8.

```typescript
// Get the character length of the 'name' field in its UTF-8 form.
field("name").charLength();

```
 A new `Expr` representing the length of the string.

<b>Signature:</b>

```typescript
charLength(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.collectionId()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that returns the collection ID from a path.

```typescript
// Get the collection ID from a path.
field("__path__").collectionId();

```
 A new  representing the collectionId operation.

<b>Signature:</b>

```typescript
collectionId(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.concat()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that concatenates expression results together.

```typescript
// Combine the 'firstName', ' ', and 'lastName' fields into a single value.
field("firstName").concat(constant(" "), field("lastName"));

```

<b>Signature:</b>

```typescript
concat(second: Expression | unknown, ...others: Array<Expression | unknown>): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  second | [Expression](./firestore_lite_pipelines.expression.md#expression_class) \| unknown | The additional expression or literal to concatenate. |
|  others | Array&lt;[Expression](./firestore_lite_pipelines.expression.md#expression_class) \| unknown&gt; | Optional additional expressions or literals to concatenate.  A new <code>Expr</code> representing the concatenated value. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.cosineDistance()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Calculates the cosine distance between two vectors.

```typescript
// Calculate the cosine distance between the 'userVector' field and the 'itemVector' field
field("userVector").cosineDistance(field("itemVector"));

```

<b>Signature:</b>

```typescript
cosineDistance(vectorExpression: Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  vectorExpression | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The other vector (represented as an Expr) to compare against.  A new <code>Expr</code> representing the cosine distance between the two vectors. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.cosineDistance()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Calculates the Cosine distance between two vectors.

```typescript
// Calculate the Cosine distance between the 'location' field and a target location
field("location").cosineDistance(new VectorValue([37.7749, -122.4194]));

```

<b>Signature:</b>

```typescript
cosineDistance(vector: VectorValue | number[]): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  vector | [VectorValue](./firestore_lite.vectorvalue.md#vectorvalue_class) \| number\[\] | The other vector (as a VectorValue) to compare against.  A new <code>Expr</code> representing the Cosine\* distance between the two vectors. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.count()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an aggregation that counts the number of stage inputs with valid evaluations of the expression or field.

```typescript
// Count the total number of products
field("productId").count().as("totalProducts");

```
 A new `AggregateFunction` representing the 'count' aggregation.

<b>Signature:</b>

```typescript
count(): AggregateFunction;
```
<b>Returns:</b>

[AggregateFunction](./firestore_lite_pipelines.aggregatefunction.md#aggregatefunction_class)

## Expression.countDistinct()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an aggregation that counts the number of distinct values of the expression or field.

```typescript
// Count the distinct number of products
field("productId").countDistinct().as("distinctProducts");

```
 A new `AggregateFunction` representing the 'count\_distinct' aggregation.

<b>Signature:</b>

```typescript
countDistinct(): AggregateFunction;
```
<b>Returns:</b>

[AggregateFunction](./firestore_lite_pipelines.aggregatefunction.md#aggregatefunction_class)

## Expression.descending()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an  that sorts documents in descending order based on this expression.

```typescript
// Sort documents by the 'createdAt' field in descending order
firestore.pipeline().collection("users")
  .sort(field("createdAt").descending());

```
 A new `Ordering` for descending sorting.

<b>Signature:</b>

```typescript
descending(): Ordering;
```
<b>Returns:</b>

[Ordering](./firestore_lite_pipelines.ordering.md#ordering_class)

## Expression.divide()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that divides this expression by another expression.

```typescript
// Divide the 'total' field by the 'count' field
field("total").divide(field("count"));

```

<b>Signature:</b>

```typescript
divide(divisor: Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  divisor | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression to divide by.  A new <code>Expr</code> representing the division operation. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.divide()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that divides this expression by a constant value.

```typescript
// Divide the 'value' field by 10
field("value").divide(10);

```

<b>Signature:</b>

```typescript
divide(divisor: number): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  divisor | number | The constant value to divide by.  A new <code>Expr</code> representing the division operation. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.documentId()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that returns the document ID from a path.

```typescript
// Get the document ID from a path.
field("__path__").documentId();

```
 A new  representing the documentId operation.

<b>Signature:</b>

```typescript
documentId(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.dotProduct()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Calculates the dot product between two vectors.

```typescript
// Calculate the dot product between a feature vector and a target vector
field("features").dotProduct([0.5, 0.8, 0.2]);

```

<b>Signature:</b>

```typescript
dotProduct(vectorExpression: Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  vectorExpression | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The other vector (as an array of numbers) to calculate with.  A new <code>Expr</code> representing the dot product between the two vectors. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.dotProduct()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Calculates the dot product between two vectors.

```typescript
// Calculate the dot product between a feature vector and a target vector
field("features").dotProduct(new VectorValue([0.5, 0.8, 0.2]));

```

<b>Signature:</b>

```typescript
dotProduct(vector: VectorValue | number[]): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  vector | [VectorValue](./firestore_lite.vectorvalue.md#vectorvalue_class) \| number\[\] | The other vector (as an array of numbers) to calculate with.  A new <code>Expr</code> representing the dot product between the two vectors. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.endsWith()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if a string ends with a given postfix.

```typescript
// Check if the 'filename' field ends with ".txt"
field("filename").endsWith(".txt");

```

<b>Signature:</b>

```typescript
endsWith(suffix: string): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  suffix | string | The postfix to check for.  A new <code>Expr</code> representing the 'ends with' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.endsWith()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if a string ends with a given postfix (represented as an expression).

```typescript
// Check if the 'url' field ends with the value of the 'extension' field
field("url").endsWith(field("extension"));

```

<b>Signature:</b>

```typescript
endsWith(suffix: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  suffix | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The postfix expression to check for.  A new <code>Expr</code> representing the 'ends with' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.equal()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is equal to another expression.

```typescript
// Check if the 'age' field is equal to 21
field("age").equal(21);

```

<b>Signature:</b>

```typescript
equal(expression: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  expression | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression to compare for equality.  A new <code>Expr</code> representing the equality comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.equal()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is equal to a constant value.

```typescript
// Check if the 'city' field is equal to "London"
field("city").equal("London");

```

<b>Signature:</b>

```typescript
equal(value: unknown): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  value | unknown | The constant value to compare for equality.  A new <code>Expr</code> representing the equality comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.equalAny()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is equal to any of the provided values or expressions.

```typescript
// Check if the 'category' field is either "Electronics" or value of field 'primaryType'
field("category").equalAny("Electronics", field("primaryType"));

```

<b>Signature:</b>

```typescript
equalAny(values: Array<Expression | unknown>): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  values | Array&lt;[Expression](./firestore_lite_pipelines.expression.md#expression_class) \| unknown&gt; | The values or expressions to check against.  A new <code>Expr</code> representing the 'IN' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.equalAny()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is equal to any of the provided values or expressions.

```typescript
// Check if the 'category' field is either "Electronics" or value of field 'primaryType'
field("category").equalAny(array(["Electronics", field("primaryType")]));

```

<b>Signature:</b>

```typescript
equalAny(arrayExpression: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  arrayExpression | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | An expression that evaluates to an array of values to check against.  A new <code>Expr</code> representing the 'IN' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.euclideanDistance()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Calculates the Euclidean distance between two vectors.

```typescript
// Calculate the Euclidean distance between the 'location' field and a target location
field("location").euclideanDistance([37.7749, -122.4194]);

```

<b>Signature:</b>

```typescript
euclideanDistance(vectorExpression: Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  vectorExpression | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The other vector (as an array of numbers) to calculate with.  A new <code>Expr</code> representing the Euclidean distance between the two vectors. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.euclideanDistance()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Calculates the Euclidean distance between two vectors.

```typescript
// Calculate the Euclidean distance between the 'location' field and a target location
field("location").euclideanDistance(new VectorValue([37.7749, -122.4194]));

```

<b>Signature:</b>

```typescript
euclideanDistance(vector: VectorValue | number[]): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  vector | [VectorValue](./firestore_lite.vectorvalue.md#vectorvalue_class) \| number\[\] | The other vector (as a VectorValue) to compare against.  A new <code>Expr</code> representing the Euclidean distance between the two vectors. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.exists()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if a field exists in the document.

```typescript
// Check if the document has a field named "phoneNumber"
field("phoneNumber").exists();

```
 A new `Expr` representing the 'exists' check.

<b>Signature:</b>

```typescript
exists(): BooleanExpression;
```
<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.exp()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that computes e to the power of this expression.

```typescript
// Compute e to the power of the 'value' field.
field("value").exp();

```
 A new  representing the exp of the numeric value.

<b>Signature:</b>

```typescript
exp(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.floor()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that computes the floor of a numeric value.

```typescript
// Compute the floor of the 'price' field.
field("price").floor();

```
 A new  representing the floor of the numeric value.

<b>Signature:</b>

```typescript
floor(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.greaterThan()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is greater than another expression.

```typescript
// Check if the 'age' field is greater than the 'limit' field
field("age").greaterThan(field("limit"));

```

<b>Signature:</b>

```typescript
greaterThan(expression: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  expression | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression to compare for greater than.  A new <code>Expr</code> representing the greater than comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.greaterThan()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is greater than a constant value.

```typescript
// Check if the 'price' field is greater than 100
field("price").greaterThan(100);

```

<b>Signature:</b>

```typescript
greaterThan(value: unknown): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  value | unknown | The constant value to compare for greater than.  A new <code>Expr</code> representing the greater than comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.greaterThanOrEqual()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is greater than or equal to another expression.

```typescript
// Check if the 'quantity' field is greater than or equal to field 'requirement' plus 1
field("quantity").greaterThanOrEqual(field('requirement').add(1));

```

<b>Signature:</b>

```typescript
greaterThanOrEqual(expression: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  expression | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression to compare for greater than or equal to.  A new <code>Expr</code> representing the greater than or equal to comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.greaterThanOrEqual()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is greater than or equal to a constant value.

```typescript
// Check if the 'score' field is greater than or equal to 80
field("score").greaterThanOrEqual(80);

```

<b>Signature:</b>

```typescript
greaterThanOrEqual(value: unknown): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  value | unknown | The constant value to compare for greater than or equal to.  A new <code>Expr</code> representing the greater than or equal to comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.ifAbsent()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that returns the `elseValue` argument if this expression results in an absent value, else return the result of the this expression evaluation.

```typescript
// Returns the value of the optional field 'optional_field', or returns 'default_value'
// if the field is absent.
field("optional_field").ifAbsent("default_value")

```

<b>Signature:</b>

```typescript
ifAbsent(elseValue: unknown): Expression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  elseValue | unknown | The value that will be returned if this Expression evaluates to an absent value.  A new \[Expression\] representing the ifAbsent operation. |

<b>Returns:</b>

[Expression](./firestore_lite_pipelines.expression.md#expression_class)

## Expression.ifAbsent()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that returns the `elseValue` argument if this expression results in an absent value, else return the result of this expression evaluation.

```typescript
// Returns the value of the optional field 'optional_field', or if that is
// absent, then returns the value of the field `
field("optional_field").ifAbsent(field('default_field'))

```

<b>Signature:</b>

```typescript
ifAbsent(elseExpression: unknown): Expression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  elseExpression | unknown | The Expression that will be evaluated if this Expression evaluates to an absent value.  A new \[Expression\] representing the ifAbsent operation. |

<b>Returns:</b>

[Expression](./firestore_lite_pipelines.expression.md#expression_class)

## Expression.ifError()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that returns the result of the `catchExpr` argument if there is an error, else return the result of this expression.

```typescript
// Returns the first item in the title field arrays, or returns
// the entire title field if the array is empty or the field is another type.
field("title").arrayGet(0).ifError(field("title"));

```

<b>Signature:</b>

```typescript
ifError(catchExpr: Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  catchExpr | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The catch expression that will be evaluated and returned if this expression produces an error.  A new  representing the 'ifError' operation. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.ifError()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that returns the `catch` argument if there is an error, else return the result of this expression.

```typescript
// Returns the first item in the title field arrays, or returns
// "Default Title"
field("title").arrayGet(0).ifError("Default Title");

```

<b>Signature:</b>

```typescript
ifError(catchValue: unknown): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  catchValue | unknown | The value that will be returned if this expression produces an error.  A new  representing the 'ifError' operation. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.isAbsent()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that returns `true` if the result of this expression is absent. Otherwise, returns `false` even if the value is `null`<!-- -->.

```typescript
// Check if the field `value` is absent.
field("value").isAbsent();

```
 A new  representing the 'isAbsent' check.

<b>Signature:</b>

```typescript
isAbsent(): BooleanExpression;
```
<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.isError()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if a given expression produces an error.

```typescript
// Check if the result of a calculation is an error
field("title").arrayContains(1).isError();

```
 A new  representing the 'isError' check.

<b>Signature:</b>

```typescript
isError(): BooleanExpression;
```
<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.join()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that joins the elements of an array into a string.

```typescript
// Join the elements of the 'tags' field with the delimiter from the 'separator' field.
field("tags").join(field("separator"))

```

<b>Signature:</b>

```typescript
join(delimiterExpression: Expression): Expression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  delimiterExpression | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression that evaluates to the delimiter string.  A new Expression representing the join operation. |

<b>Returns:</b>

[Expression](./firestore_lite_pipelines.expression.md#expression_class)

## Expression.join()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that joins the elements of an array field into a string.

```typescript
// Join the elements of the 'tags' field with a comma and space.
field("tags").join(", ")

```

<b>Signature:</b>

```typescript
join(delimiter: string): Expression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  delimiter | string | The string to use as a delimiter.  A new Expression representing the join operation. |

<b>Returns:</b>

[Expression](./firestore_lite_pipelines.expression.md#expression_class)

## Expression.length()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that calculates the length of a string, array, map, vector, or bytes.

```typescript
// Get the length of the 'name' field.
field("name").length();

// Get the number of items in the 'cart' array.
field("cart").length();

```
 A new `Expr` representing the length of the string, array, map, vector, or bytes.

<b>Signature:</b>

```typescript
length(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.lessThan()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is less than another expression.

```typescript
// Check if the 'age' field is less than 'limit'
field("age").lessThan(field('limit'));

```

<b>Signature:</b>

```typescript
lessThan(experession: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  experession | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression to compare for less than.  A new <code>Expr</code> representing the less than comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.lessThan()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is less than a constant value.

```typescript
// Check if the 'price' field is less than 50
field("price").lessThan(50);

```

<b>Signature:</b>

```typescript
lessThan(value: unknown): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  value | unknown | The constant value to compare for less than.  A new <code>Expr</code> representing the less than comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.lessThanOrEqual()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is less than or equal to another expression.

```typescript
// Check if the 'quantity' field is less than or equal to 20
field("quantity").lessThan(constant(20));

```

<b>Signature:</b>

```typescript
lessThanOrEqual(expression: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  expression | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression to compare for less than or equal to.  A new <code>Expr</code> representing the less than or equal to comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.lessThanOrEqual()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is less than or equal to a constant value.

```typescript
// Check if the 'score' field is less than or equal to 70
field("score").lessThan(70);

```

<b>Signature:</b>

```typescript
lessThanOrEqual(value: unknown): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  value | unknown | The constant value to compare for less than or equal to.  A new <code>Expr</code> representing the less than or equal to comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.like()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that performs a case-sensitive string comparison.

```typescript
// Check if the 'title' field contains the word "guide" (case-sensitive)
field("title").like("%guide%");

```

<b>Signature:</b>

```typescript
like(pattern: string): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  pattern | string | The pattern to search for. You can use "%" as a wildcard character.  A new <code>Expr</code> representing the 'like' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.like()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that performs a case-sensitive string comparison.

```typescript
// Check if the 'title' field contains the word "guide" (case-sensitive)
field("title").like("%guide%");

```

<b>Signature:</b>

```typescript
like(pattern: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  pattern | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The pattern to search for. You can use "%" as a wildcard character.  A new <code>Expr</code> representing the 'like' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.ln()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that computes the natural logarithm of a numeric value.

```typescript
// Compute the natural logarithm of the 'value' field.
field("value").ln();

```
 A new  representing the natural logarithm of the numeric value.

<b>Signature:</b>

```typescript
ln(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.log10()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that computes the base-10 logarithm of a numeric value.

```typescript
// Compute the base-10 logarithm of the 'value' field.
field("value").log10();

```
 A new  representing the base-10 logarithm of the numeric value.

<b>Signature:</b>

```typescript
log10(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.logicalMaximum()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that returns the larger value between this expression and another expression, based on Firestore's value type ordering.

```typescript
// Returns the larger value between the 'timestamp' field and the current timestamp.
field("timestamp").logicalMaximum(Function.currentTimestamp());

```

<b>Signature:</b>

```typescript
logicalMaximum(second: Expression | unknown, ...others: Array<Expression | unknown>): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  second | [Expression](./firestore_lite_pipelines.expression.md#expression_class) \| unknown | The second expression or literal to compare with. |
|  others | Array&lt;[Expression](./firestore_lite_pipelines.expression.md#expression_class) \| unknown&gt; | Optional additional expressions or literals to compare with.  A new  representing the logical maximum operation. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.logicalMinimum()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that returns the smaller value between this expression and another expression, based on Firestore's value type ordering.

```typescript
// Returns the smaller value between the 'timestamp' field and the current timestamp.
field("timestamp").logicalMinimum(Function.currentTimestamp());

```

<b>Signature:</b>

```typescript
logicalMinimum(second: Expression | unknown, ...others: Array<Expression | unknown>): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  second | [Expression](./firestore_lite_pipelines.expression.md#expression_class) \| unknown | The second expression or literal to compare with. |
|  others | Array&lt;[Expression](./firestore_lite_pipelines.expression.md#expression_class) \| unknown&gt; | Optional additional expressions or literals to compare with.  A new  representing the logical minimum operation. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.mapGet()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Accesses a value from a map (object) field using the provided key.

```typescript
// Get the 'city' value from the 'address' map field
field("address").mapGet("city");

```

<b>Signature:</b>

```typescript
mapGet(subfield: string): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  subfield | string | The key to access in the map.  A new <code>Expr</code> representing the value associated with the given key in the map. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.mapMerge()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that merges multiple map values.

```
// Merges the map in the settings field with, a map literal, and a map in
// that is conditionally returned by another expression
field('settings').mapMerge({ enabled: true }, conditional(field('isAdmin'), { admin: true}, {})

```

<b>Signature:</b>

```typescript
mapMerge(secondMap: Record<string, unknown> | Expression, ...otherMaps: Array<Record<string, unknown> | Expression>): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  secondMap | Record&lt;string, unknown&gt; \| [Expression](./firestore_lite_pipelines.expression.md#expression_class) | A required second map to merge. Represented as a literal or an expression that returns a map. |
|  otherMaps | Array&lt;Record&lt;string, unknown&gt; \| [Expression](./firestore_lite_pipelines.expression.md#expression_class)<!-- -->&gt; | Optional additional maps to merge. Each map is represented as a literal or an expression that returns a map. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

A new  representing the 'mapMerge' operation.

## Expression.mapRemove()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that removes a key from the map produced by evaluating this expression.

```
// Removes the key 'baz' from the input map.
map({foo: 'bar', baz: true}).mapRemove('baz');

```

<b>Signature:</b>

```typescript
mapRemove(key: string): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  key | string | The name of the key to remove from the input map. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

A new  representing the 'mapRemove' operation.

## Expression.mapRemove()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that removes a key from the map produced by evaluating this expression.

```
// Removes the key 'baz' from the input map.
map({foo: 'bar', baz: true}).mapRemove(constant('baz'));

```

<b>Signature:</b>

```typescript
mapRemove(keyExpr: Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  keyExpr | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | An expression that produces the name of the key to remove from the input map. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

A new  representing the 'mapRemove' operation.

## Expression.maximum()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an aggregation that finds the maximum value of a field across multiple stage inputs.

```typescript
// Find the highest score in a leaderboard
field("score").maximum().as("highestScore");

```
 A new `AggregateFunction` representing the 'maximum' aggregation.

<b>Signature:</b>

```typescript
maximum(): AggregateFunction;
```
<b>Returns:</b>

[AggregateFunction](./firestore_lite_pipelines.aggregatefunction.md#aggregatefunction_class)

## Expression.minimum()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an aggregation that finds the minimum value of a field across multiple stage inputs.

```typescript
// Find the lowest price of all products
field("price").minimum().as("lowestPrice");

```
 A new `AggregateFunction` representing the 'minimum' aggregation.

<b>Signature:</b>

```typescript
minimum(): AggregateFunction;
```
<b>Returns:</b>

[AggregateFunction](./firestore_lite_pipelines.aggregatefunction.md#aggregatefunction_class)

## Expression.mod()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that calculates the modulo (remainder) of dividing this expression by another expression.

```typescript
// Calculate the remainder of dividing the 'value' field by the 'divisor' field
field("value").mod(field("divisor"));

```

<b>Signature:</b>

```typescript
mod(expression: Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  expression | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression to divide by.  A new <code>Expr</code> representing the modulo operation. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.mod()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that calculates the modulo (remainder) of dividing this expression by a constant value.

```typescript
// Calculate the remainder of dividing the 'value' field by 10
field("value").mod(10);

```

<b>Signature:</b>

```typescript
mod(value: number): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  value | number | The constant value to divide by.  A new <code>Expr</code> representing the modulo operation. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.multiply()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that multiplies this expression by another expression.

```typescript
// Multiply the 'quantity' field by the 'price' field
field("quantity").multiply(field("price"));

```

<b>Signature:</b>

```typescript
multiply(second: Expression | number): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  second | [Expression](./firestore_lite_pipelines.expression.md#expression_class) \| number | The second expression or literal to multiply by. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.notEqual()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is not equal to another expression.

```typescript
// Check if the 'status' field is not equal to "completed"
field("status").notEqual("completed");

```

<b>Signature:</b>

```typescript
notEqual(expression: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  expression | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression to compare for inequality.  A new <code>Expr</code> representing the inequality comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.notEqual()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is not equal to a constant value.

```typescript
// Check if the 'country' field is not equal to "USA"
field("country").notEqual("USA");

```

<b>Signature:</b>

```typescript
notEqual(value: unknown): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  value | unknown | The constant value to compare for inequality.  A new <code>Expr</code> representing the inequality comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.notEqualAny()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is not equal to any of the provided values or expressions.

```typescript
// Check if the 'status' field is neither "pending" nor the value of 'rejectedStatus'
field("status").notEqualAny(["pending", field("rejectedStatus")]);

```

<b>Signature:</b>

```typescript
notEqualAny(values: Array<Expression | unknown>): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  values | Array&lt;[Expression](./firestore_lite_pipelines.expression.md#expression_class) \| unknown&gt; | The values or expressions to check against.  A new <code>Expr</code> representing the 'notEqualAny' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.notEqualAny()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if this expression is not equal to any of the values in the evaluated expression.

```typescript
// Check if the 'status' field is not equal to any value in the field 'rejectedStatuses'
field("status").notEqualAny(field('rejectedStatuses'));

```

<b>Signature:</b>

```typescript
notEqualAny(arrayExpression: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  arrayExpression | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The values or expressions to check against.  A new <code>Expr</code> representing the 'notEqualAny' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.pow()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that returns the value of this expression raised to the power of another expression.

```typescript
// Raise the value of the 'base' field to the power of the 'exponent' field.
field("base").pow(field("exponent"));

```

<b>Signature:</b>

```typescript
pow(exponent: Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  exponent | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression to raise this expression to the power of.  A new <code>Expr</code> representing the power operation. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.pow()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that returns the value of this expression raised to the power of a constant value.

```typescript
// Raise the value of the 'base' field to the power of 2.
field("base").pow(2);

```

<b>Signature:</b>

```typescript
pow(exponent: number): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  exponent | number | The constant value to raise this expression to the power of.  A new <code>Expr</code> representing the power operation. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.regexContains()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if a string contains a specified regular expression as a substring.

```typescript
// Check if the 'description' field contains "example" (case-insensitive)
field("description").regexContains("(?i)example");

```

<b>Signature:</b>

```typescript
regexContains(pattern: string): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  pattern | string | The regular expression to use for the search.  A new <code>Expr</code> representing the 'contains' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.regexContains()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if a string contains a specified regular expression as a substring.

```typescript
// Check if the 'description' field contains the regular expression stored in field 'regex'
field("description").regexContains(field("regex"));

```

<b>Signature:</b>

```typescript
regexContains(pattern: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  pattern | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The regular expression to use for the search.  A new <code>Expr</code> representing the 'contains' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.regexMatch()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if a string matches a specified regular expression.

```typescript
// Check if the 'email' field matches a valid email pattern
field("email").regexMatch("[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}");

```

<b>Signature:</b>

```typescript
regexMatch(pattern: string): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  pattern | string | The regular expression to use for the match.  A new <code>Expr</code> representing the regular expression match. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.regexMatch()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if a string matches a specified regular expression.

```typescript
// Check if the 'email' field matches a regular expression stored in field 'regex'
field("email").regexMatch(field("regex"));

```

<b>Signature:</b>

```typescript
regexMatch(pattern: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  pattern | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The regular expression to use for the match.  A new <code>Expr</code> representing the regular expression match. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.reverse()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that reverses this string expression.

```typescript
// Reverse the value of the 'myString' field.
field("myString").reverse();

```
 A new  representing the reversed string.

<b>Signature:</b>

```typescript
reverse(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.round()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that rounds a numeric value to the nearest whole number.

```typescript
// Round the value of the 'price' field.
field("price").round();

```
 A new `Expr` representing the rounded value.

<b>Signature:</b>

```typescript
round(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.round()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that rounds a numeric value to the specified number of decimal places.

```typescript
// Round the value of the 'price' field to two decimal places.
field("price").round(2);

```

<b>Signature:</b>

```typescript
round(decimalPlaces: number): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  decimalPlaces | number | A constant specifying the rounding precision in decimal places. A new <code>Expr</code> representing the rounded value. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.round()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that rounds a numeric value to the specified number of decimal places.

```typescript
// Round the value of the 'price' field to two decimal places.
field("price").round(constant(2));

```

<b>Signature:</b>

```typescript
round(decimalPlaces: Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  decimalPlaces | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | An expression specifying the rounding precision in decimal places. A new <code>Expr</code> representing the rounded value. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.split()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that splits the result of this expression into an array of substrings based on the provided delimiter.

<b>Signature:</b>

```typescript
split(delimiter: string): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  delimiter | string |  |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

### Example


```typescript
// Split the 'scoresCsv' field on delimiter ','
field('scoresCsv').split(',')

```
 A new  representing the split function.

## Expression.split()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that splits the result of this expression into an array of substrings based on the provided delimiter.

<b>Signature:</b>

```typescript
split(delimiter: Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  delimiter | [Expression](./firestore_lite_pipelines.expression.md#expression_class) |  |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

### Example


```typescript
// Split the 'scores' field on delimiter ',' or ':' depending on the stored format
field('scores').split(conditional(field('format').equal('csv'), constant(','), constant(':'))

```
 A new  representing the split function.

## Expression.sqrt()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that computes the square root of a numeric value.

```typescript
// Compute the square root of the 'value' field.
field("value").sqrt();

```
 A new  representing the square root of the numeric value.

<b>Signature:</b>

```typescript
sqrt(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.startsWith()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if a string starts with a given prefix.

```typescript
// Check if the 'name' field starts with "Mr."
field("name").startsWith("Mr.");

```

<b>Signature:</b>

```typescript
startsWith(prefix: string): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  prefix | string | The prefix to check for.  A new <code>Expr</code> representing the 'starts with' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.startsWith()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if a string starts with a given prefix (represented as an expression).

```typescript
// Check if the 'fullName' field starts with the value of the 'firstName' field
field("fullName").startsWith(field("firstName"));

```

<b>Signature:</b>

```typescript
startsWith(prefix: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  prefix | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The prefix expression to check for.  A new <code>Expr</code> representing the 'starts with' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.stringConcat()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that concatenates string expressions together.

```typescript
// Combine the 'firstName', " ", and 'lastName' fields into a single string
field("firstName").stringConcat(constant(" "), field("lastName"));

```

<b>Signature:</b>

```typescript
stringConcat(secondString: Expression | string, ...otherStrings: Array<Expression | string>): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  secondString | [Expression](./firestore_lite_pipelines.expression.md#expression_class) \| string | The additional expression or string literal to concatenate. |
|  otherStrings | Array&lt;[Expression](./firestore_lite_pipelines.expression.md#expression_class) \| string&gt; | Optional additional expressions or string literals to concatenate.  A new <code>Expr</code> representing the concatenated string. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.stringContains()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if a string contains a specified substring.

```typescript
// Check if the 'description' field contains "example".
field("description").stringContains("example");

```

<b>Signature:</b>

```typescript
stringContains(substring: string): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  substring | string | The substring to search for.  A new <code>Expr</code> representing the 'contains' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.stringContains()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that checks if a string contains the string represented by another expression.

```typescript
// Check if the 'description' field contains the value of the 'keyword' field.
field("description").stringContains(field("keyword"));

```

<b>Signature:</b>

```typescript
stringContains(expr: Expression): BooleanExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  expr | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression representing the substring to search for.  A new <code>Expr</code> representing the 'contains' comparison. |

<b>Returns:</b>

[BooleanExpression](./firestore_lite_pipelines.booleanexpression.md#booleanexpression_class)

## Expression.stringReverse()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that reverses a string.

```typescript
// Reverse the value of the 'myString' field.
field("myString").stringReverse();

```
 A new  representing the reversed string.

<b>Signature:</b>

```typescript
stringReverse(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.substring()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that returns a substring of the results of this expression.

<b>Signature:</b>

```typescript
substring(position: number, length?: number): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  position | number | Index of the first character of the substring. |
|  length | number | Length of the substring. If not provided, the substring will end at the end of the input. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.substring()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that returns a substring of the results of this expression.

<b>Signature:</b>

```typescript
substring(position: Expression, length?: Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  position | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | An expression returning the index of the first character of the substring. |
|  length | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | An expression returning the length of the substring. If not provided the substring will end at the end of the input. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.subtract()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that subtracts another expression from this expression.

```typescript
// Subtract the 'discount' field from the 'price' field
field("price").subtract(field("discount"));

```

<b>Signature:</b>

```typescript
subtract(subtrahend: Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  subtrahend | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression to subtract from this expression.  A new <code>Expr</code> representing the subtraction operation. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.subtract()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that subtracts a constant value from this expression.

```typescript
// Subtract 20 from the value of the 'total' field
field("total").subtract(20);

```

<b>Signature:</b>

```typescript
subtract(subtrahend: number): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  subtrahend | number | The constant value to subtract.  A new <code>Expr</code> representing the subtraction operation. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.sum()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an aggregation that calculates the sum of a numeric field across multiple stage inputs.

```typescript
// Calculate the total revenue from a set of orders
field("orderAmount").sum().as("totalRevenue");

```
 A new `AggregateFunction` representing the 'sum' aggregation.

<b>Signature:</b>

```typescript
sum(): AggregateFunction;
```
<b>Returns:</b>

[AggregateFunction](./firestore_lite_pipelines.aggregatefunction.md#aggregatefunction_class)

## Expression.timestampAdd()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that adds a specified amount of time to this timestamp expression.

```typescript
// Add some duration determined by field 'unit' and 'amount' to the 'timestamp' field.
field("timestamp").timestampAdd(field("unit"), field("amount"));

```

<b>Signature:</b>

```typescript
timestampAdd(unit: Expression, amount: Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  unit | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression evaluates to unit of time, must be one of 'microsecond', 'millisecond', 'second', 'minute', 'hour', 'day'. |
|  amount | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression evaluates to amount of the unit.  A new  representing the resulting timestamp. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.timestampAdd()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that adds a specified amount of time to this timestamp expression.

```typescript
// Add 1 day to the 'timestamp' field.
field("timestamp").timestampAdd("day", 1);

```

<b>Signature:</b>

```typescript
timestampAdd(unit: 'microsecond' | 'millisecond' | 'second' | 'minute' | 'hour' | 'day', amount: number): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  unit | 'microsecond' \| 'millisecond' \| 'second' \| 'minute' \| 'hour' \| 'day' | The unit of time to add (e.g., "day", "hour"). |
|  amount | number | The amount of time to add.  A new  representing the resulting timestamp. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.timestampSubtract()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that subtracts a specified amount of time from this timestamp expression.

```typescript
// Subtract some duration determined by field 'unit' and 'amount' from the 'timestamp' field.
field("timestamp").timestampSubtract(field("unit"), field("amount"));

```

<b>Signature:</b>

```typescript
timestampSubtract(unit: Expression, amount: Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  unit | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression evaluates to unit of time, must be one of 'microsecond', 'millisecond', 'second', 'minute', 'hour', 'day'. |
|  amount | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The expression evaluates to amount of the unit.  A new  representing the resulting timestamp. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.timestampSubtract()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that subtracts a specified amount of time from this timestamp expression.

```typescript
// Subtract 1 day from the 'timestamp' field.
field("timestamp").timestampSubtract("day", 1);

```

<b>Signature:</b>

```typescript
timestampSubtract(unit: 'microsecond' | 'millisecond' | 'second' | 'minute' | 'hour' | 'day', amount: number): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  unit | 'microsecond' \| 'millisecond' \| 'second' \| 'minute' \| 'hour' \| 'day' | The unit of time to subtract (e.g., "day", "hour"). |
|  amount | number | The amount of time to subtract.  A new  representing the resulting timestamp. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.timestampToUnixMicros()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that converts this timestamp expression to the number of microseconds since the Unix epoch (1970-01-01 00:00:00 UTC).

```typescript
// Convert the 'timestamp' field to microseconds since epoch.
field("timestamp").timestampToUnixMicros();

```
 A new  representing the number of microseconds since epoch.

<b>Signature:</b>

```typescript
timestampToUnixMicros(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.timestampToUnixMillis()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that converts this timestamp expression to the number of milliseconds since the Unix epoch (1970-01-01 00:00:00 UTC).

```typescript
// Convert the 'timestamp' field to milliseconds since epoch.
field("timestamp").timestampToUnixMillis();

```
 A new  representing the number of milliseconds since epoch.

<b>Signature:</b>

```typescript
timestampToUnixMillis(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.timestampToUnixSeconds()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that converts this timestamp expression to the number of seconds since the Unix epoch (1970-01-01 00:00:00 UTC).

```typescript
// Convert the 'timestamp' field to seconds since epoch.
field("timestamp").timestampToUnixSeconds();

```
 A new  representing the number of seconds since epoch.

<b>Signature:</b>

```typescript
timestampToUnixSeconds(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.timestampTruncate()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that truncates a timestamp to a specified granularity.

<b>Signature:</b>

```typescript
timestampTruncate(granularity: TimeGranularity, timezone?: string | Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  granularity | [TimeGranularity](./firestore_lite_pipelines.md#timegranularity) | The granularity to truncate to. |
|  timezone | string \| [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The timezone to use for truncation. Valid values are from the TZ database (e.g., "America/Los\_Angeles") or in the format "Etc/GMT-1".  A new {<!-- -->Expression<!-- -->} representing the truncated timestamp. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

### Example


```typescript
// Truncate the 'createdAt' timestamp to the beginning of the day.
field('createdAt').timestampTruncate('day')

```

## Expression.timestampTruncate()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that truncates a timestamp to a specified granularity.

<b>Signature:</b>

```typescript
timestampTruncate(granularity: Expression, timezone?: string | Expression): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  granularity | [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The granularity to truncate to. |
|  timezone | string \| [Expression](./firestore_lite_pipelines.expression.md#expression_class) | The timezone to use for truncation. Valid values are from the TZ database (e.g., "America/Los\_Angeles") or in the format "Etc/GMT-1".  A new {<!-- -->Expression<!-- -->} representing the truncated timestamp. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

### Example


```typescript
// Truncate the 'createdAt' timestamp to the granularity specified in the field 'granularity'.
field('createdAt').timestampTruncate(field('granularity'))

```

## Expression.toLower()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that converts a string to lowercase.

```typescript
// Convert the 'name' field to lowercase
field("name").toLower();

```
 A new `Expr` representing the lowercase string.

<b>Signature:</b>

```typescript
toLower(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.toUpper()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that converts a string to uppercase.

```typescript
// Convert the 'title' field to uppercase
field("title").toUpper();

```
 A new `Expr` representing the uppercase string.

<b>Signature:</b>

```typescript
toUpper(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.trim()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that removes leading and trailing characters from a string or byte array.

```typescript
// Trim whitespace from the 'userInput' field
field("userInput").trim();

// Trim quotes from the 'userInput' field
field("userInput").trim('"');

```

<b>Signature:</b>

```typescript
trim(valueToTrim?: string | Expression | Bytes): FunctionExpression;
```

#### Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  valueToTrim | string \| [Expression](./firestore_lite_pipelines.expression.md#expression_class) \| [Bytes](./firestore_lite.bytes.md#bytes_class) | Optional This parameter is treated as a set of characters or bytes that will be trimmed from the input. If not specified, then whitespace will be trimmed.  A new <code>Expr</code> representing the trimmed string or byte array. |

<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.type()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that returns the data type of this expression's result, as a string.

<b>Signature:</b>

```typescript
type(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

### Example


```typescript
// Get the data type of the value in field 'title'
field('title').type()

```
 A new {<!-- -->Expression<!-- -->} representing the data type.

## Expression.unixMicrosToTimestamp()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that interprets this expression as the number of microseconds since the Unix epoch (1970-01-01 00:00:00 UTC) and returns a timestamp.

```typescript
// Interpret the 'microseconds' field as microseconds since epoch.
field("microseconds").unixMicrosToTimestamp();

```
 A new  representing the timestamp.

<b>Signature:</b>

```typescript
unixMicrosToTimestamp(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.unixMillisToTimestamp()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that interprets this expression as the number of milliseconds since the Unix epoch (1970-01-01 00:00:00 UTC) and returns a timestamp.

```typescript
// Interpret the 'milliseconds' field as milliseconds since epoch.
field("milliseconds").unixMillisToTimestamp();

```
 A new  representing the timestamp.

<b>Signature:</b>

```typescript
unixMillisToTimestamp(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.unixSecondsToTimestamp()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that interprets this expression as the number of seconds since the Unix epoch (1970-01-01 00:00:00 UTC) and returns a timestamp.

```typescript
// Interpret the 'seconds' field as seconds since epoch.
field("seconds").unixSecondsToTimestamp();

```
 A new  representing the timestamp.

<b>Signature:</b>

```typescript
unixSecondsToTimestamp(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

## Expression.vectorLength()

> This API is provided as a preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Creates an expression that calculates the length (number of dimensions) of this Firestore Vector expression.

```typescript
// Get the vector length (dimension) of the field 'embedding'.
field("embedding").vectorLength();

```
 A new  representing the length of the vector.

<b>Signature:</b>

```typescript
vectorLength(): FunctionExpression;
```
<b>Returns:</b>

[FunctionExpression](./firestore_lite_pipelines.functionexpression.md#functionexpression_class)

